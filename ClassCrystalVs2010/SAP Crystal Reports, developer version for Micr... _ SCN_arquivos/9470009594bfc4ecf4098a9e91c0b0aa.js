if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(a){dwr.engine._errorHandler=a};dwr.engine.setWarningHandler=function(a){dwr.engine._warningHandler=a};dwr.engine.setTextHtmlHandler=function(a){dwr.engine._textHtmlHandler=a};dwr.engine.setTimeout=function(a){dwr.engine._timeout=a};dwr.engine.setPreHook=function(a){dwr.engine._preHook=a};dwr.engine.setPostHook=function(a){dwr.engine._postHook=a};dwr.engine.setHeaders=function(a){dwr.engine._headers=a};dwr.engine.setParameters=function(a){dwr.engine._parameters=a};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(a){if(a!=dwr.engine.XMLHttpRequest&&a!=dwr.engine.IFrame&&a!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return}dwr.engine._rpcType=a};dwr.engine.setHttpMethod=function(a){if(a!="GET"&&a!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return}dwr.engine._httpMethod=a};dwr.engine.setOrdered=function(a){dwr.engine._ordered=a};dwr.engine.setAsync=function(a){dwr.engine._async=a};dwr.engine.setActiveReverseAjax=function(a){if(a){if(dwr.engine._activeReverseAjax){return}dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(b,a){dwr.engine._debug("Error: "+a.name+", "+a.message,true);if(b==null||b==""){alert("A server error has occurred.")}else{if(b.indexOf("0x80040111")!=-1){dwr.engine._debug(b)}else{alert(b)}}};dwr.engine.defaultWarningHandler=function(b,a){dwr.engine._debug(b)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return}dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(b){var a=dwr.engine._batch;if(a==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return}dwr.engine._batch=null;if(a.map.callCount==0){return}if(b){dwr.engine._mergeBatch(a,b)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=a}else{dwr.engine._sendData(a)}};dwr.engine.setPollMethod=function(a){dwr.engine.setPollType(a)};dwr.engine.setMethod=function(a){dwr.engine.setRpcType(a)};dwr.engine.setVerb=function(a){dwr.engine.setHttpMethod(a)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers={"X-J-Token":_jive_auth_token};dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(a){return a};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(l,b,j,h){var e=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();e=true}var d=dwr.engine._batch;var g=[];for(var c=0;c<arguments.length-3;c++){g[c]=arguments[c+3]}if(d.path==null){d.path=l}else{if(d.path!=l){dwr.engine._handleError(d,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return}}var a;var k=g[g.length-1];if(typeof k=="function"||k==null){a={callback:g.pop()}}else{a=g.pop()}dwr.engine._mergeBatch(d,a);d.handlers[d.map.callCount]={exceptionHandler:a.exceptionHandler,callback:a.callback};var f="c"+d.map.callCount+"-";d.map[f+"scriptName"]=b;d.map[f+"methodName"]=j;d.map[f+"id"]=d.map.callCount;for(c=0;c<g.length;c++){dwr.engine._serializeAll(d,[],g[c],f+"param"+c)}d.map.callCount++;if(e){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return}var a=dwr.engine._createBatch();a.map.id=0;a.map.callCount=1;a.isPoll=true;if(dwr.engine._pollWithXhr=="true"){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseYes}else{a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}}a.httpMethod="POST";a.async=true;a.timeout=0;a.path=dwr.engine._defaultPath;a.preHooks=[];a.postHooks=[];a.errorHandler=dwr.engine._pollErrorHandler;a.warningHandler=dwr.engine._pollErrorHandler;a.handlers[0]={callback:function(b){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,b)}};dwr.engine._sendData(a);if(a.rpcType==dwr.engine.XMLHttpRequest&&a.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(b,a){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+a.name+" : "+a.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var a={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){a.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){a.postHooks.push(dwr.engine._postHook)}var c,b;if(dwr.engine._headers){for(c in dwr.engine._headers){b=dwr.engine._headers[c];if(typeof b!="function"){a.headers[c]=b}}}if(dwr.engine._parameters){for(c in dwr.engine._parameters){b=dwr.engine._parameters[c];if(typeof b!="function"){a.parameters[c]=b}}}return a};dwr.engine._mergeBatch=function(a,d){var e,c;for(var b=0;b<dwr.engine._propnames.length;b++){e=dwr.engine._propnames[b];if(d[e]!=null){a[e]=d[e]}}if(d.preHook!=null){a.preHooks.unshift(d.preHook)}if(d.postHook!=null){a.postHooks.push(d.postHook)}if(d.headers){for(e in d.headers){c=d.headers[e];if(typeof c!="function"){a.headers[e]=c}}}if(d.parameters){for(e in d.parameters){c=d.parameters[e];if(typeof c!="function"){a.map["p-"+e]=""+c}}}};dwr.engine._getJSessionId=function(){var c=document.cookie.split(";");for(var b=0;b<c.length;b++){var a=c[b];while(a.charAt(0)==" "){a=a.substring(1,a.length)}if(a.indexOf(dwr.engine._sessionCookieName+"=")==0){return a.substring(dwr.engine._sessionCookieName.length+1,a.length)}}return""};dwr.engine._checkCometPoll=function(){for(var b=0;b<dwr.engine._outstandingIFrames.length;b++){var e="";var c=dwr.engine._outstandingIFrames[b];try{e=dwr.engine._getTextFromCometIFrame(c)}catch(a){dwr.engine._handleWarning(c.batch,a)}if(e!=""){dwr.engine._processCometResponse(e,c.batch)}}if(dwr.engine._pollReq){var d=dwr.engine._pollReq;var e=d.responseText;if(e!=null){dwr.engine._processCometResponse(e,d.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(b){var a=b.contentWindow.document.body;if(a==null){return""}var c=a.innerHTML;if(c.indexOf("<PRE>")==0||c.indexOf("<pre>")==0){c=c.substring(5,c.length-7)}return c};dwr.engine._processCometResponse=function(d,e){if(e.charsProcessed==d.length){return}if(d.length==0){e.charsProcessed=0;return}var b=d.indexOf("//#DWR-START#",e.charsProcessed);if(b==-1){e.charsProcessed=d.length;return}var a=d.lastIndexOf("//#DWR-END#");if(a==-1){return}if(d.charCodeAt(a+11)==13&&d.charCodeAt(a+12)==10){e.charsProcessed=a+13}else{e.charsProcessed=a+11}var c=d.substring(b+13,a);dwr.engine._receivedBatch=e;dwr.engine._eval(c);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(e){e.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[e.map.batchId]=e;dwr.engine._batchesLength++;e.completed=false;for(var d=0;d<e.preHooks.length;d++){e.preHooks[d]()}e.preHooks=null;if(e.timeout&&e.timeout!=0){e.timeoutId=setTimeout(function(){dwr.engine._abortRequest(e)},e.timeout)}if(e.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){e.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){e.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var a,c;if(e.req){if(e.async){e.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(e)}}}if(e.isPoll){dwr.engine._pollReq=e.req;if(!(document.all&&!window.opera)){e.req.batch=e}}var b=navigator.userAgent.indexOf("Safari/");if(b>=0){var g=navigator.userAgent.substring(b+7);if(parseInt(g,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){e.httpMethod="GET"}else{dwr.engine._handleWarning(e,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);try{e.req.open(e.httpMethod,c.url,e.async);try{for(a in e.headers){var j=e.headers[a];if(typeof j=="string"){e.req.setRequestHeader(a,j)}}if(!e.headers["Content-Type"]){e.req.setRequestHeader("Content-Type","text/plain")}}catch(h){dwr.engine._handleWarning(e,h)}e.req.send(c.body);if(!e.async){dwr.engine._stateChange(e)}}catch(h){dwr.engine._handleError(e,h)}}else{if(e.rpcType!=dwr.engine.ScriptTag){var f=e.isPoll?"dwr-if-poll-"+e.map.batchId:"dwr-if-"+e.map.batchId;e.div=document.createElement("div");document.body.appendChild(e.div);e.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+f+"' name='"+f+"' onload='dwr.engine._iframeLoadingComplete ("+e.map.batchId+");'></iframe>";e.document=document;e.iframe=e.document.getElementById(f);e.iframe.batch=e;e.mode=e.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(e.isPoll){dwr.engine._outstandingIFrames.push(e.iframe)}c=dwr.engine._constructRequest(e);if(e.httpMethod=="GET"){e.iframe.setAttribute("src",c.url)}else{e.form=e.document.createElement("form");e.form.setAttribute("id","dwr-form");e.form.setAttribute("action",c.url);e.form.setAttribute("style","display:none;");e.form.setAttribute("target",f);e.form.target=f;e.form.setAttribute("method",e.httpMethod);for(a in e.map){var j=e.map[a];if(typeof j!="function"){var k=e.document.createElement("input");k.setAttribute("type","hidden");k.setAttribute("name",a);k.setAttribute("value",j);e.form.appendChild(k)}}e.document.body.appendChild(e.form);e.form.submit()}}else{e.httpMethod="GET";e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);e.script=document.createElement("script");e.script.id="dwr-st-"+e.map["c0-id"];e.script.src=c.url;document.body.appendChild(e.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(b){var c={url:b.path+b.mode,body:null};if(b.isPoll==true){c.url+="ReverseAjax.dwr"}else{if(b.map.callCount==1){c.url+=b.map["c0-scriptName"]+"."+b.map["c0-methodName"]+".dwr"}else{c.url+="Multiple."+b.map.callCount+".dwr"}}var e=location.href.match(/jsessionid=([^?]+)/);if(e!=null){c.url+=";jsessionid="+e[1]}var d;if(b.httpMethod=="GET"){b.map.callCount=""+b.map.callCount;c.url+="?";for(d in b.map){if(typeof b.map[d]!="function"){c.url+=encodeURIComponent(d)+"="+encodeURIComponent(b.map[d])+"&"}}c.url=c.url.substring(0,c.url.length-1)}else{c.body="";if(document.all&&!window.opera){var a=[];for(d in b.map){if(typeof b.map[d]!="function"){a.push(d+"="+b.map[d]+dwr.engine._postSeperator)}}c.body=a.join("")}else{for(d in b.map){if(typeof b.map[d]!="function"){c.body+=d+"="+b.map[d]+dwr.engine._postSeperator}}}c.body=dwr.engine._contentRewriteHandler(c.body)}c.url=dwr.engine._urlRewriteHandler(c.url);return c};dwr.engine._stateChange=function(c){var b;if(c.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return}var f=c.req;try{if(f.readyState!=4){return}}catch(d){dwr.engine._handleWarning(c,d);dwr.engine._clearUp(c);return}if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return}try{var e=f.responseText;e=dwr.engine._replyRewriteHandler(e);var a=f.status;if(e==null||e==""){dwr.engine._handleWarning(c,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(a!=200){dwr.engine._handleError(c,{name:"dwr.engine.http."+a,message:f.statusText})}else{var g=f.getResponseHeader("Content-Type");if(!g.match(/^text\/plain/)&&!g.match(/^text\/javascript/)){if(g.match(/^text\/html/)&&typeof c.textHtmlHandler=="function"){c.textHtmlHandler({status:a,responseText:e,contentType:g})}else{dwr.engine._handleWarning(c,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+g+"'"})}}else{if(c.isPoll&&c.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(e,c)}else{if(e.search("//#DWR")==-1){dwr.engine._handleWarning(c,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{b=e}}}}}}catch(d){dwr.engine._handleWarning(c,d)}dwr.engine._callPostHooks(c);dwr.engine._receivedBatch=c;if(b!=null){b=b.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(b);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(c);if(!c.completed){dwr.engine._clearUp(c)}};dwr.engine._validateBatch=function(a){if(!a.completed){for(var b=0;b<a.map.callCount;b++){if(a.handlers[b]!=null){dwr.engine._handleWarning(a,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(a){var b=dwr.engine._batches[a];if(b){dwr.engine._validateBatch(b)}};dwr.engine._remoteHandleCallback=function(a,f,e){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+a,true);return}try{var b=c.handlers[f];c.handlers[f]=null;if(!b){dwr.engine._debug("Warning: Missing handlers. callId="+f,true)}else{if(typeof b.callback=="function"){b.callback(e)}}}catch(d){dwr.engine._handleError(c,d)}};dwr.engine._remoteHandleException=function(a,e,d){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return}var b=c.handlers[e];c.handlers[e]=null;if(b==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return}if(d.message==undefined){d.message=""}if(typeof b.exceptionHandler=="function"){b.exceptionHandler(d.message,d)}else{if(typeof c.errorHandler=="function"){c.errorHandler(d.message,d)}}};dwr.engine._remoteHandleBatchException=function(c,a){var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remotePollCometDisabled=function(c,a){dwr.engine.setActiveReverseAjax(false);var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remoteBeginIFrameResponse=function(b,a){if(b!=null){dwr.engine._receivedBatch=b.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(a){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(a){if(a&&!a.completed){dwr.engine._clearUp(a);if(a.req){a.req.abort()}dwr.engine._handleError(a,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(a){if(a.postHooks){for(var b=0;b<a.postHooks.length;b++){a.postHooks[b]()}a.postHooks=null}};dwr.engine._clearUp=function(b){if(!b){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return}if(b.completed){dwr.engine._debug("Warning: Double complete",true);return}if(b.div){b.div.parentNode.removeChild(b.div)}if(b.iframe){for(var c=0;c<dwr.engine._outstandingIFrames.length;c++){if(dwr.engine._outstandingIFrames[c]==b.iframe){dwr.engine._outstandingIFrames.splice(c,1)}}b.iframe.parentNode.removeChild(b.iframe)}if(b.form){b.form.parentNode.removeChild(b.form)}if(b.req){if(b.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete b.req}if(b.timeoutId){clearTimeout(b.timeoutId);delete b.timeoutId}if(b.map&&(b.map.batchId||b.map.batchId==0)){delete dwr.engine._batches[b.map.batchId];dwr.engine._batchesLength--}b.completed=true;if(dwr.engine._batchQueue.length!=0){var a=dwr.engine._batchQueue.shift();dwr.engine._sendData(a)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var a in dwr.engine._batches){var b=dwr.engine._batches[a];if(b&&b.map){if(b.req){b.req.abort()}dwr.engine._clearUp(b)}}};if(window.addEventListener){window.addEventListener("unload",dwr.engine._unloader,false)}else{if(window.attachEvent){window.attachEvent("onunload",dwr.engine._unloader)}}dwr.engine._handleError=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.errorHandler=="function"){a.errorHandler(b.message,b)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._handleWarning=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.warningHandler=="function"){a.warningHandler(b.message,b)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._serializeAll=function(b,d,c,a){if(c==null){b.map[a]="null:null";return}switch(typeof c){case"boolean":b.map[a]="boolean:"+c;break;case"number":b.map[a]="number:"+c;break;case"string":b.map[a]="string:"+encodeURIComponent(c);break;case"object":if(c instanceof String){b.map[a]="String:"+encodeURIComponent(c)}else{if(c instanceof Boolean){b.map[a]="Boolean:"+c}else{if(c instanceof Number){b.map[a]="Number:"+c}else{if(c instanceof Date){b.map[a]="Date:"+c.getTime()}else{if(c&&c.join){b.map[a]=dwr.engine._serializeArray(b,d,c,a)}else{b.map[a]=dwr.engine._serializeObject(b,d,c,a)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof c+", attempting default converter."});b.map[a]="default:"+c;break}};dwr.engine._lookup=function(e,c,a){var d;for(var b=0;b<e.length;b++){if(e[b].data==c){d=e[b];break}}if(d){return"reference:"+d.name}e.push({data:c,name:a});return null};dwr.engine._serializeObject=function(c,h,g,b){var f=dwr.engine._lookup(h,g,b);if(f){return f}if(g.nodeName&&g.nodeType){return dwr.engine._serializeXml(c,h,g,b)}var e="Object_"+dwr.engine._getObjectClassName(g)+":{";var d;for(d in g){if(typeof g[d]!="function"){c.paramCount++;var a="c"+dwr.engine._batch.map.callCount+"-e"+c.paramCount;dwr.engine._serializeAll(c,h,g[d],a);e+=encodeURIComponent(d)+":reference:"+a+", "}}if(e.substring(e.length-2)==", "){e=e.substring(0,e.length-2)}e+="}";return e};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(c){if(c&&c.constructor&&c.constructor.toString){var d=c.constructor.toString();var a=d.match(/function\s+(\w+)/);if(a&&a.length==2){return a[1]}}if(c&&c.constructor){for(var b in dwr.engine._errorClasses){if(c.constructor==dwr.engine._errorClasses[b]){return b}}}if(c){var d=Object.prototype.toString.call(c);var a=d.match(/\[object\s+(\w+)/);if(a&&a.length==2){return a[1]}}return"Object"};dwr.engine._serializeXml=function(c,f,e,b){var d=dwr.engine._lookup(f,e,b);if(d){return d}var a;if(window.XMLSerializer){a=new XMLSerializer().serializeToString(e)}else{if(e.toXml){a=e.toXml}else{a=e.innerHTML}}return"XML:"+encodeURIComponent(a)};dwr.engine._serializeArray=function(h,c,f,a){var d=dwr.engine._lookup(c,f,a);if(d){return d}if(document.all&&!window.opera){var b=["Array:["];for(var g=0;g<f.length;g++){if(g!=0){b.push(",")}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);b.push("reference:");b.push(j)}b.push("]");e=b.join("")}else{var e="Array:[";for(var g=0;g<f.length;g++){if(g!=0){e+=","}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);e+="reference:";e+=j}e+="]"}return e};dwr.engine._unserializeDocument=function(a){var c;if(window.DOMParser){var e=new DOMParser();c=e.parseFromString(a,"text/xml");if(!c.documentElement||c.documentElement.tagName=="parsererror"){var b=c.documentElement.firstChild.data;b+="\n"+c.documentElement.firstChild.nextSibling.firstChild.data;throw b}return c}else{if(window.ActiveXObject){c=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);c.loadXML(a);return c}else{var d=document.createElement("div");d.innerHTML=a;return d}}};dwr.engine._newActiveXObject=function(a){var d;for(var c=0;c<a.length;c++){try{d=new ActiveXObject(a[c]);break}catch(b){}}return d};dwr.engine._debug=function(f,d){var a=false;try{if(window.console){if(d&&window.console.trace){window.console.trace()}window.console.log(f);a=true}else{if(window.opera&&window.opera.postError){window.opera.postError(f);a=true}}}catch(c){}if(!a){var b=document.getElementById("dwr-debug");if(b){var e=f+"<br/>"+b.innerHTML;if(e.length>2048){e=e.substring(0,2048)}b.innerHTML=e}}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.share=="undefined"){jive.soy.share={}}jive.soy.share.control=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="',(A.type=="text")?"share-link ":(A.type=="largeButton")?"j-social-action ":"",(A.classes)?soy.$$escapeHtml(A.classes):"",'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.link.title"),[])),'" data-command="share" data-object-type="',soy.$$escapeHtml(A.objectType),'" data-object-id="',soy.$$escapeHtml(A.objectId),'">',(A.icon)?"<span"+((A.type=="smallButton")?' class="j-ui-elem"':"")+'><span class="jive-icon-med jive-icon-share"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.link"),[]))+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.link"),[])),"</a>");if(!C){return B.toString()}};jive.soy.share.share=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal" id="jive-modal-share"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.title"),[A.objectNameLower])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content clearfix"><div id="share-error" class="jive-error-box" style="display:none" ></div><form class="j-form">',(A["private"])?'<p class="j-info"><span class="j-info-icon j-ui-elem"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.private.access"),[A.objectNameLower]))+"</p>":"",'<p class="ie-zindex-fix"><label for="share-users">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.people.label"),[])),'<strong class="required"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.required.parens"),[])),'</strong></label><input type="text" name="share-users" id="share-users"  class="j-user-autocomplete jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on"/></p><p><label for="jive-send-content-not-message">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.message.label"),[])),'<strong class="required"> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.required.parens"),[])),'</strong></label><textarea name="message" class="jive-form-element-textarea" id="jive-send-content-not-message">',soy.$$escapeHtml(A.message),'</textarea></p><p><input type="submit" name="share-content-submit" class="j-btn-callout" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.submit.button"),[])),'" /><button type="button" class="close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</button></p></form></section></div>");if(!C){return B.toString()}};jive.soy.share.shareConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.confirm"),[])),"</p>");if(!C){return B.toString()}};jive.soy.share.secretGroupMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.secretgroup"),[])),"</p>");if(!C){return B.toString()}};jive.soy.share.send_private_msg=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("send.private.autoaccess"),[A.objectName])));if(!C){return B.toString()}};jive.soy.share.usersWithoutPermission=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-warn"></span>',(A["private"]&&A.editor)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.nopermission.private"),[])):(A.attachmentAvailable)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.nopermission.attachment"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.nopermission.noattachment"),[])),"</p>");if(!C){return B.toString()}};jive.soy.share.usersNotRelated=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.notrelated"),[])),"</p>");if(!C){return B.toString()}}
;
jive.namespace("ShareApp");jive.ShareApp.ShareSource=jive.RestService.extend(function(a){this.init=function(){this.suppressGenericErrorMessages()};this.save=function(b,f,d){var e=new jive.conc.Promise(),c=this;$j.ajax({type:"POST",url:jive.rest.url("/objects/")+b+"/"+f+"/shares",dataType:"json",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",success:function(g,i,h){if(g){c.merge(d,g)}e.emitSuccess(d)},error:c.errorCallback(e),timeout:30000});return e};this.get=function(b,e){var d=new jive.conc.Promise(),c=this;$j.ajax({type:"GET",url:jive.rest.url("/objects/")+b+"/"+e+"/sharetemplate",dataType:"json",data:{},contentType:"application/json; charset=utf-8",success:function(f,h,g){d.emitSuccess(f)},error:c.errorCallback(d),timeout:30000});return d}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.error=="undefined"){jive.error={}}if(typeof jive.error.rest=="undefined"){jive.error.rest={}}if(typeof jive.error.rest.soy=="undefined"){jive.error.rest.soy={}}jive.error.rest.soy.errorSaving=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_saving"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");if(!C){return B.toString()}};jive.error.rest.soy.errorFinding=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_finding"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");if(!C){return B.toString()}};jive.error.rest.soy.errorUpdating=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_updating"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");if(!C){return B.toString()}};jive.error.rest.soy.errorDestroying=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.error_destroying"),[])),' <a href="',soy.$$escapeHtml(A.href),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.rest.refresh_page"),[])),"</a></p>");if(!C){return B.toString()}}
;
jive.namespace("ShareApp");jive.ShareApp.ShareView=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(){this.submitShare=function(g,c,e,f){var b=this,d={message:$j("#jive-send-content-not-message").val(),recipients:$j("input:hidden[name=share-users]").val(),subject:$j("#jive-send-content-not-subject").val()};d.message=d.message.replace(/</g,"&lt;").replace(/>/g,"&gt;");b.emitP("share",c,g,d).addCallback(function(){$j(jive.soy.share.shareConfirmation({objectName:f})).message({style:"success"});e.trigger("close")}).addErrback(function(i){var h=i?$j("<p>"+i+"</p>"):$j(jive.error.rest.soy.errorUpdating({href:window.location}));h.message({showClose:true,style:"error"});e.find("input, button").removeAttr("disabled")})};this.checkExternalUsers=function(b){$j("#jive-include-attach-div").hide();b.users.forEach(function(c){if(c.id==-1||!c.entitled){$j("#jive-include-attach-div").show()}})}};this.openShareModal=function(d,c){var b=this;b.emitP("prepareShare",c,d).addCallback(function(g){if(g.secretGroup){$j(jive.soy.share.secretGroupMessage()).message({showClose:true,style:"error"})}else{var f=$j(jive.soy.share.share(g));f.lightbox_me({destroyOnClose:true,centered:true,onLoad:function(){f.find("input:visible:first").focus()}});f.find("form").submit(function(){$j(this).find("input,button").attr("disabled","disabled");b.submitShare(d,c,f,g.objectNameCapital);return false});var e=new jive.UserPicker.Main({multiple:true,listAllowed:true,emailAllowed:g.externallyShareable,message:"",object:{objectID:d,objectType:c},entitlement:"VIEW",$input:$j("#share-users"),permissionsMessage:$j(jive.soy.share.usersWithoutPermission(g)),relatedMessage:$j(jive.soy.share.usersNotRelated())});e.addListener("selectedUsersChanged",b.checkExternalUsers)}}).addErrback(function(f){var e=f?$j("<p>"+f+"</p>"):$j(jive.error.rest.soy.errorFinding({href:window.location}));e.message({showClose:true,style:"error"})})}});
;
jive.namespace("ShareApp");jive.ShareApp.Main=jive.oo.Class.extend(function(){this.init=function(){var a=new jive.ShareApp.ShareSource();this.view=new jive.ShareApp.ShareView();this.view.addListener("prepareShare",function(b,d,c){a.get(b,d).addCallback(c.emitSuccess.bind(c)).addErrback(c.emitError.bind(c))});this.view.addListener("share",function(b,e,c,d){a.save(b,e,c).addCallback(d.emitSuccess.bind(d).aritize(0)).addErrback(d.emitError.bind(d))})};this.showModal=function(b,a){this.view.openShareModal(b,a)}});
;
jive.share=(function(a){jive.dispatcher.listen("share",function(b){a=a||new jive.ShareApp.Main();a.showModal(b.objectId,b.objectType)});return{}})(undefined);
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.socialgroups=="undefined"){jive.socialgroups={}}if(typeof jive.socialgroups.soy=="undefined"){jive.socialgroups.soy={}}jive.socialgroups.soy.leaveGroup=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-medium" id="jive-modal-leave-group"><header>',(A.pendingApproval)?'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.cancel"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[]))+" "+soy.$$escapeHtml(A.groupName)+"</h2>":'<h2 class="jive-modal-title jive-modal-title-leave-group">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.title"),[]))+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[]))+" "+soy.$$escapeHtml(A.groupName)+"</h2>",'</header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon  j-ui-elem"></span></a><!-- Manage categories listing --><section class="jive-modal-content j-modal-content-text jive-modal-leave-group clearfix">',(A.canLeaveSocialGroup)?((A.pendingApproval)?"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.canceljoin"),[A.groupName]))+"</h3>"+((A.requiresApproval)?"<p>"+soy.$$escapeHtml(A.leaveI18n)+"</p>":""):"<h3>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.confirm"),[A.groupName]))+"</h3>"+((A.requiresApproval)?"<p>"+soy.$$escapeHtml(A.leaveI18n)+"</p>":"")+"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.follow.remove"),[]))+"</p>")+'<div class="jive-form-buttons"><button type="button" class="j-btn-callout" id="group-leave-submit">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.accept"),[]))+'</button><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+"</button></div>":(A.onlyOneOwner)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.onlyowner"),[]))+"</p><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.onlyowner.info"),[]))+'</p><div class="jive-form-buttons"><button type="button" class="jive-modal-close close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+"</button></div>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.already.gone"),[])),"</section></div>");if(!C){return B.toString()}};jive.socialgroups.soy.joinConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pendingApproval)?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.apprvl.info"),[]))+"</div>":(A.banned)?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.banned_member.msg"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.confirm"),[]))+"</div>");if(!C){return B.toString()}};jive.socialgroups.soy.leaveConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append((A.pendingApproval)?"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.cancel.message"),[]))+"</div>":"<div>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.leave.message"),[]))+"</div>");if(!C){return B.toString()}};jive.socialgroups.soy.renderError=function(A,C){var B=C||new soy.StringBuilder();switch(A.code){case 4026:B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.join.notallowed"),[])),"</p>");break;case 4008:B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.not.found"),[])),"</p>");break;default:if(A.message){B.append("<p>",soy.$$escapeHtml(A.message),"</p>")}else{jive.error.rest.soy.errorFinding({href:A.href},B)}}if(!C){return B.toString()}}
;
jive.namespace("MembershipApp");jive.MembershipApp.MembershipView=jive.oo.Class.extend(function(a){var b="browse",c="landing";jive.conc.observable(this);this.init=function(f,h,e){var d=this;this.joinContainer=f;this.leaveContainer=h;this.options=e||{};var g="objectID" in e?c:b;this.isPage=function(i){return g===i};$j(document).ready(function(){if(d.isPage(c)){$j(d.joinContainer).live("click",function(i){d.joinGroup($j(this));i.preventDefault()});$j(d.leaveContainer).click(function(i){d.displayLeaveGroupModal($j(this));i.preventDefault()})}else{$j("body").delegate(".sgroup-join, .sgroup-leave","click",function(j){j.preventDefault();var i=$j(this);if(i.is(".sgroup-join")){d.joinGroup(i)}else{d.displayLeaveGroupModal(i)}})}})};this.joinGroup=function(e){var d=this;var f=d.determineObjectID(e);d.emitP("join",f).addCallback(function(g){var h=$j.noop;if(d.isPage(c)){if(!g.banned){$j(d.leaveContainer).show();$j(d.joinContainer).hide()}h=function(){if(g.memberToContribute){window.location.reload()}}}else{$j(e).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-leave").show();$j(e).hide()}d.displayMessage(jive.socialgroups.soy.joinConfirmation(g),h);$j("#jive-link-socialgroup-startFollowing").hide();$j("#jive-link-socialgroup-stopFollowing").show()}).addErrback(function(h,g){console.log("got error message: "+h+" code: "+g);d.displayError(h,g)})};this.displayLeaveGroupModal=function(e){var d=this;var f=d.determineObjectID(e);d.emitP("prepareLeave",f).addCallback(function(i){var g=$j(jive.socialgroups.soy.leaveGroup(i));$j("body").append(g);var h=$j("body").find("#jive-modal-leave-group");h.lightbox_me({closeSelector:".jive-modal-close, .close",destroyOnClose:true});h.find("#group-leave-submit").click(function(){d.leaveGroup(e,i);h.trigger("close")})}).addErrback(function(h,g){d.displayError(h,g)})};this.leaveGroup=function(e,f){var d=this;var g=d.determineObjectID(e);d.emitP("leave",g).addCallback(function(){var h=$j.noop;if(d.isPage(c)){$j(d.joinContainer).show();$j(d.leaveContainer).hide();$j("#jive-link-socialgroup-stopFollowing").hide();$j("#jive-link-socialgroup-startFollowing").show();h=function(){if(!f.visibleAfterLeaving){window.location=jive.app.url({path:"/groups"})}else{if(f.memberToContribute){window.location.reload()}}}}else{$j(e).closest(".j-thumb-back, .j-td-follow-action").find("a.sgroup-join").show();$j(e).hide()}d.displayMessage(jive.socialgroups.soy.leaveConfirmation(f),h)}).addErrback(function(i,h){d.displayError(i,h)})};this.displayMessage=function(d,e){$j("<p />").html(d).message({style:"success",dismissCallback:e||$j.noop})};this.displayError=function(f,e){var d=jive.socialgroups.soy.renderError({message:f,code:e,href:window.location.href});$j(d).message({style:"error",showClose:true})};this.determineObjectID=function(d){var e=this.options.objectID||d.attr("data-objectid")||0;return parseInt(e,10)}});
;
jive.namespace("MembershipApp");jive.MembershipApp.MembershipSource=jive.RestService.extend(function(a){a.resourceType="socialgroup";a.init=function(b){this._super(b)};this.save=function(d){var e=new jive.conc.Promise(),c=this;var b={};b[this.resourceType]=d;$j.ajax({type:"POST",url:this.RESOURCE_ENDPOINT+"/"+d.objectID+"/members",dataType:"json",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(f,h,g){e.emitSuccess(f)},error:function(h,j,i){try{var g=$j.parseJSON(h.responseText);if(g&&g.error&&g.error.message){e.emitError(g.error.message,g.error.code)}}catch(f){e.emitError(null,h&&h.status)}}});return e};this.get=function(d){var e=new jive.conc.Promise(),c=this;var b={};b[this.resourceType]=d;$j.ajax({type:"GET",url:this.RESOURCE_ENDPOINT+"/"+d.objectID+"/memberInfo",dataType:"json",data:JSON.stringify(b),contentType:"application/json; charset=utf-8",success:function(f,h,g){e.emitSuccess(f)},error:function(h,j,i){try{var g=$j.parseJSON(h.responseText);if(g&&g.error&&g.error.message){e.emitError(g.error.message,g.error.code)}}catch(f){e.emitError(null,h&&h.status)}}});return e};this.destroy=function(b){var c=new jive.conc.Promise();$j.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+b.objectID+"/members",success:function(){c.emitSuccess()},error:function(d){c.emitError(null,d.status)}});return c}});
;
jive.namespace("MembershipApp");jive.MembershipApp.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.membershipSource=new jive.MembershipApp.MembershipSource(c);this.membershipView=new jive.MembershipApp.MembershipView("#jive-link-joinSocialGroup,.jive-link-joinSocialGroup","#jive-link-leaveSocialGroup,.jive-link-leaveSocialGroup",c);this.membershipView.addListener("join",function(e,d){b.membershipSource.save({objectID:e}).addCallback(function(f){d.emitSuccess(f);jive.switchboard.emit("sgroup.member.join",f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("leave",function(e,d){b.membershipSource.destroy({objectID:e}).addCallback(function(){jive.switchboard.emit("sgroup.member.leave",e);d.emitSuccess()}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})}).addListener("prepareLeave",function(e,d){b.membershipSource.get({objectID:e}).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){console.log("got a err in main.js");d.emitError(g,f)})})}});
;
jive.namespace("EmailNotification");jive.EmailNotification.Main=function(e,d,b){var a=new jive.EmailNotification.Source(),c={watch:{newId:"jive-link-thread-unwatch",save:a.watch.bind(a),view:jive.soy.email_notification.stop},unwatch:{newId:"jive-link-thread-watch",save:a.unwatch.bind(a),view:jive.soy.email_notification.start}};$j("#jive-link-thread-watch, #jive-link-thread-unwatch").delegate("a","click",function(g){g.preventDefault();var h=$j(this).closest("#jive-link-thread-watch, #jive-link-thread-unwatch"),f=h.attr("id").split("-").pop();c[f].save(e,d).addCallback(function(){h.attr("id",c[f].newId).html(c[f].view({type:h.attr("data-type")||"common"}));$j(jive.soy.email_notification.message({type:f,isUser:!!b})).message({style:"success"})})})};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.email_notification=="undefined"){jive.soy.email_notification={}}jive.soy.email_notification.start=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"common":jive.soy.email_notification.common({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.start_watch.link"),[]))},B);break;case"socialButton":jive.soy.email_notification.commonInSocialButton({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.start_watch.link"),[]))},B);break}if(!C){return B.toString()}};jive.soy.email_notification.stop=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"common":jive.soy.email_notification.common({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.stop_watch.link"),[]))},B);break;case"socialButton":jive.soy.email_notification.commonInSocialButton({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("thread.stop_watch.link"),[]))},B);break}if(!C){return B.toString()}};jive.soy.email_notification.message=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"watch":B.append((A.isUser)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watchuser.start"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watch.start"),[]))+"</p>");break;case"unwatch":B.append((A.isUser)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watchuser.stop"),[]))+"</p>":"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.watch.stop"),[]))+"</p>");break}if(!C){return B.toString()}};jive.soy.email_notification.common=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" rel="nofollow"><span class="jive-icon-med jive-icon-message-open"></span>',soy.$$escapeHtml(A.message),"</a>");if(!C){return B.toString()}};jive.soy.email_notification.commonInSocialButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-social-button j-rc5 j-button-toggle-email-notifications j-ui-elem"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-message-open"></span>',soy.$$escapeHtml(A.message),"</span></a>");if(!C){return B.toString()}}
;
jive.namespace("EmailNotification");jive.EmailNotification.Source=jive.RestService.extend(function(a){a.resourceType="emailwatches";a.pluralizedResourceType=a.resourceType;a.resourceType="emailwatches";this.watch=function(d,b){var c=this.RESOURCE_ENDPOINT+"/watch/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.unwatch=function(d,b){var c=this.RESOURCE_ENDPOINT+"/unwatch/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.movecontent=="undefined"){jive.movecontent={}}jive.movecontent.imports=function(A,C){var B=C||new soy.StringBuilder();if(!C){return B.toString()}};jive.movecontent.successMessage=function(A,E){var B=E||new soy.StringBuilder();B.append('<div class="jive-success-box"><div><span class="jive-icon-med jive-icon-check"></span>');var D=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.prevContainer},D);var C=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.container},C);jive.shared.soy.i18nHelper({i18nKey:"content.mv.success",arg0:soy.$$escapeHtml(A.contentTypeName),arg1:D.toString(),arg2:C.toString(),noAutoEscape:"true"},B);B.append("</div></div>");if(!E){return B.toString()}};jive.movecontent.confirm=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-move-confirm-section"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.confirm.title"),[])),'</h2></header><a class="j-modal-close-top close" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content jive-modal-content-move clearfix"><h6>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.really_move_it.text"),[A.content.objectTypeName])),'</h6><p><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(A.content.iconCss),' jive-icon-med" /> ',A.content.subject,"</p><h6>");if(A.targetPersonalContainer){jive.shared.soy.i18nHelper({i18nKey:"content.mv.into_ctr.text",arg0:'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png"))+'" alt="" class="'+soy.$$escapeHtml(A.content.iconCss)+' jive-icon-med" /> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.personalContainerKey),[])),noAutoEscape:"true"},B)}else{B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.into_this_ctr.text"),[A.targetContainer.objectTypeName])))}B.append("</h6>",(!A.targetPersonalContainer)?'<p><img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png"))+'" alt="" class="'+soy.$$escapeHtml(A.targetContainer.iconCss)+' jive-icon-med" /> '+A.targetContainer.subject+"</p>":"",(A.docWithCollaborators)?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.remove_collab.text"),[]))+"</span></p>":"",(A.restrictedSocialGroup)?'<p class="jive-warning"><span><span class="jive-icon-sml jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.restricted_group.text"),[]))+"</span></p>":"",'<div class="j-form-row"><button class="js-move-confirm j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("content.mv.confirm.button"),[])),'</button><button class="js-move-confirm-cancel">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</button></div></section></div>");if(!C){return B.toString()}}
;
jive.NestedRestService=jive.RestService.extend(function(a){a.init=function(b){this._super(b);this.parentType=b.parentType;this.parentID=b.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});
;
jive.namespace("Browse.Content");jive.Browse.Content.ItemSource=jive.RestService.extend(function(a){a.resourceType="content";a.pluralizedResourceType=a.resourceType});
;
jive.namespace("Browse.Container");jive.Browse.Container.ItemSource=jive.RestService.extend(function(a){a.resourceType="container";this.getContainerProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerType+"/"+c.containerID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.setContainerProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerType+"/"+c.containerID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c.propValue})};this.getSpaceChildren=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.containerID+"/children";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:c})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.loading=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-loading-container"><div class="j-loading-content"><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),'</span><div class="j-running-loader"></div></div></div>');if(!C){return B.toString()}}
;
jive.namespace("loader");jive.loader.LoaderView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(m){this.content=b(jive.shared.soy.loading());m=$j.extend({showLabel:true,inline:false,size:null},m||{});var f=this.content.find(".j-running-loader");var l=0,j=23,h=10,i="0",e=40;this.loadingTimer=setTimeout(d,e);if(m.size=="small"){j=17;h=8;i="-176px";f.addClass("j-running-loader-small")}else{if(m.size=="big"){this.content.addClass("cover")}}if(m.showLabel===false){this.content.find("span").remove()}if(m.inline){this.content.addClass("j-running-loader-inline")}var k=this,c=0,g=e*20;function d(){f.css("background-position",i+" "+(l*-j+"px"));l=(l+1)%h;var n=++c*e>=g;if(n){if(!f.is(":visible")){return}else{c=0}}k.loadingTimer=window.setTimeout(d,e)}};this.destroy=function(){clearTimeout(this.loadingTimer)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.placepicker=="undefined"){jive.placepicker={}}jive.placepicker.containers=function(A,C){var B=C||new soy.StringBuilder();B.append('<nav class="j-nav-back"><p class="font-color-meta"><strong><span class="',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(A.selectedContentType.uploadLink.iconCss):soy.$$escapeHtml(A.selectedContentType.iconCss),' jive-icon-med"></span>',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.headingKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.headingKey),[])),'</strong>(<a href="#" class="back">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.select_different_type"),[])),'</a>)</p></nav><div><input type="search" name="container-filter" placeholder="',(A.upload&&A.selectedContentType.uploadLink)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.searchPlaceholderKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.searchPlaceholderKey),[])),'" class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="j-places-list">');jive.placepicker.recentPlaces(A,B);B.append('</div><a href="#" class="j-menu-quick-bottomlink">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.browse_places"),[])),"</a>");if(!C){return B.toString()}};jive.placepicker.recentPlaces=function(A,C){var B=C||new soy.StringBuilder();if(A.suggestCreatePersonalBlog){B.append('<div class="j-places-list-personal">');jive.shared.soy.i18nHelper({i18nKey:"blogs.picker.create.new.text",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"blogs-create-blog!input.jspa"))+'">',arg1:"</a>",noAutoEscape:true},B);B.append("</div>")}else{if(A.userContainerType&&A.userContainerID){B.append('<div class="j-places-list-personal">');jive.placepicker.containerLink({subject:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerTitleKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerTitleKey),[]),type:A.userContainerType,id:A.userContainerID,contentType:A.selectedContentType.id,iconCss:"jive-icon-profile",iconSize:"sml",caption:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerCaptionKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:true,upload:A.upload},B);B.append("</div>")}else{if(A.personalBlogType&&A.personalBlogID){B.append('<div class="j-places-list-personal">');jive.placepicker.containerLink({subject:A.personalBlogName,type:A.personalBlogType,id:A.personalBlogID,contentType:A.selectedContentType.id,iconCss:"jive-icon-blog",iconSize:"sml",caption:A.upload&&A.selectedContentType.uploadLink?jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.uploadLink.personalContainerCaptionKey),[]):jive.i18n.i18nText(jive.i18n.getMsg(A.selectedContentType.personalContainerCaptionKey),[]),writableByUser:true},B);B.append("</div>")}}}if(A.containers&&A.containers.length>0){B.append('<h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.recent"),[])),"</h4>");jive.placepicker.containerList(A,B)}if(!C){return B.toString()}};jive.placepicker.searchResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<h4 class="j-place-search-results font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.search.results"),[])),' <em>(<a href="#" class="j-clear-search">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.clear.results"),[])),"</a>)</em></h4>");jive.placepicker.containerList(A,B);if(!C){return B.toString()}};jive.placepicker.containerList=function(A,G){var B=G||new soy.StringBuilder();B.append((A.containerName)?'<div class="j-container-selected-space"><a href="#" class="js-parent-container j-subspace-back-link"><span class="jive-icon-sml ui-icon-triangle-1-w"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("community.list.spaces.navigate.back_to"),[]))+" "+soy.$$escapeHtml(A.containerName)+"</a></div>":"",'<ul class="j-icon-list wide">');var E=A.containers;var D=E.length;if(D>0){for(var F=0;F<D;F++){var C=E[F];jive.placepicker.containerListEntry({container:C,contentType:A.contentType,containerType:A.containerType,containerID:A.containerID,upload:A.upload,showSubspaces:A.showSubspaces},B)}}else{B.append("<li>",(A.emptyKey)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.emptyKey),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.noresults"),[])),"</li>")}B.append("</ul>");if(!G){return B.toString()}};jive.placepicker.containerListEntry=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.container.type==A.containerType&&A.container.id==A.containerID)?'class="current"':"",">");jive.placepicker.containerLink(soy.$$augmentData(A.container,{contentType:A.contentType,iconSize:"sml",upload:A.upload,writableByUser:A.container.prop&&A.container.prop.perms&&A.container.prop.perms.allowedToContribute&&A.container.prop.perms.allowedToMove}),B);B.append((A.container.type==A.containerType&&A.container.id==A.containerID)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.current_place"),[]))+"</em>":"",(A.showSubspaces)?(A.container.prop&&A.container.prop.childInfo&&A.container.prop.childInfo.hasChildren)?'<a href="#" class="js-child-spaces j-subspace-view-link font-color-meta" data-objecttype="'+soy.$$escapeHtml(A.container.type)+'" data-objectid="'+soy.$$escapeHtml(A.container.id)+'"'+((A.container.prop.parentInfo)?'data-parent-objecttype="'+soy.$$escapeHtml(A.container.prop.parentInfo.type)+'" data-parent-objectid="'+soy.$$escapeHtml(A.container.prop.parentInfo.id)+'"':"")+' title="'+((A.container.prop.childInfo.numChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.container.prop.childInfo.numChildren])))+'">'+((A.container.prop.childInfo.numChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.container.prop.childInfo.numChildren])))+'<span class="jive-icon-sml ui-icon-triangle-1-e"></span></a>':"":"","</li>");if(!C){return B.toString()}};jive.placepicker.containerLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.writableByUser)?(A.contentType==14)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/community-create!input.jspa")+"?"+encodeURIComponent("community")+"="+encodeURIComponent(A.id))+'" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" class="js-target-container">':'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/choose-container.jspa")+"?"+encodeURIComponent("contentType")+"="+encodeURIComponent(A.contentType)+"&"+encodeURIComponent("containerType")+"="+encodeURIComponent(A.type)+"&"+encodeURIComponent("container")+"="+encodeURIComponent(A.id)+"&"+encodeURIComponent("upload")+"="+encodeURIComponent(A.upload?"true":"false"))+'" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" class="js-target-container">':"",'<span class="',(A.writableByUser)?soy.$$escapeHtml(A.iconCss)+" jive-icon-"+((A.iconSize)?soy.$$escapeHtml(A.iconSize):"med"):"jive-icon-sml jive-icon-place-unavailable",'"></span><span class="',(!A.writableByUser)?"jive-container-unavailable-text":"",' js-container-title" ',(!A.writableByUser)?'title="'+((A.type==2020)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.usercontainer.unavailable"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.unavailable"),[])))+'"':"",">",soy.$$escapeHtml(A.subject),"</span>",(A.writableByUser)?"</a>":"",(A.caption)?' <span class="j-container-caption font-color-meta">'+soy.$$escapeHtml(A.caption)+"</span>":"");if(!C){return B.toString()}};jive.placepicker.browseContainers=function(B,G){var E=G||new soy.StringBuilder();E.append('<div class="j-container-browse jive-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("place.picker.choose"),[])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content"><div><input type="search" name="container-filter" ',(B.selectedContentType.searchPlaceholderKey)?'placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.selectedContentType.searchPlaceholderKey),[]))+'"':"",' class="j-form-elem-special j-container-browse-search j-ui-elem" /></div><div class="js-place-picker-content"><div class="j-container-browse-personal">');if(B.suggestCreatePersonalBlog){jive.shared.soy.i18nHelper({i18nKey:"blogs.picker.create.new.text",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"blogs-create-blog!input.jspa"))+'">',arg1:"</a>",noAutoEscape:true},E)}else{if(B.userContainer){if(B.selectedContentType.id==38){jive.placepicker.containerLink({subject:B.userContainer.subject,type:B.userContainer.type,id:B.userContainer.id,contentType:B.selectedContentType.id,iconCss:"jive-icon-blog",iconSize:"sml",caption:jive.i18n.i18nText(jive.i18n.getMsg(B.selectedContentType.personalContainerCaptionKey),[]),writableByUser:B.userContainer.prop&&B.userContainer.prop.perms&&B.userContainer.prop.perms.allowedToContribute&&B.userContainer.prop.perms.allowedToMove},E)}else{jive.placepicker.containerLink({subject:jive.i18n.i18nText(jive.i18n.getMsg(B.selectedContentType.personalContainerTitleKey),[]),type:B.userContainer.type,id:B.userContainer.id,contentType:B.selectedContentType.id,iconCss:"jive-icon-profile",iconSize:"sml",caption:jive.i18n.i18nText(jive.i18n.getMsg(B.selectedContentType.personalContainerCaptionKey),[]),writableByUser:B.userContainer.prop&&B.userContainer.prop.perms&&B.userContainer.prop.perms.allowedToContribute&&B.userContainer.prop.perms.allowedToMove,upload:B.upload},E)}}}E.append('</div><section class="j-accordion-container">');var D=B.filterGroupBean.filters;var A=D.length;for(var C=0;C<A;C++){var F=D[C];E.append('<h4 class="j-accordion-toggle selected"><a href="#" class="js-accordion-link" data-placefilter="',soy.$$escapeHtml(F.id),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.description),[])),'</a></h4><div class="j-places-list" style="display:none"></div>')}E.append("</section></div></section><div>");if(!G){return E.toString()}};jive.placepicker.moreContainers=function(A,G){var B=G||new soy.StringBuilder();var C=A.containers;var F=C.length;for(var D=0;D<F;D++){var E=C[D];jive.placepicker.containerListEntry({container:E,contentType:A.contentType,containerType:A.containerType,containerID:A.containerID,upload:A.upload,showSubspaces:A.showSubspaces},B)}if(!G){return B.toString()}}
;
jive.namespace("Move.Content");jive.Move.Content.MoveView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Move.Content;a.init=function(){var d=this;c(document).ready(function(){c("#jive-link-move a, a#jive-link-move").click(function(e){d.emit("browse");e.preventDefault()})})};this.confirm=function(f){var d=this;var e=c(".jive-modal");var g=jive.movecontent.confirm(f);d.prevContent=e.children();d.visibleContent=d.prevContent.filter(":visible");d.visibleContent.hide();e.append(g).removeClass("j-container-browse").trigger("resize");e.find(".js-move-confirm").click(function(h){d.emit("moveConfirmed",{targetContainerType:f.targetContainer.type,targetContainerID:f.targetContainer.id});h.preventDefault()});e.find(".js-move-confirm-cancel").click(function(h){e.find(".js-move-confirm-section").remove();d.visibleContent.show();e.addClass("j-container-browse").trigger("resize");h.preventDefault()});e.find(".close").click(function(h){e.find(".js-move-confirm-section").remove();h.preventDefault()});c("body").find(".js_lb_overlay").click(function(h){e.find(".js-move-confirm-section").remove();h.preventDefault()})}});
;
jive.namespace("Move.Content");jive.Move.Content.CapabilitiesSource=jive.NestedRestService.extend(function(a){a.resourceType="capability";a.init=function(b){this._super(b);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["content",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});
;
jive.namespace("Move.Container");jive.Move.Container.CapabilitiesSource=jive.NestedRestService.extend(function(a){a.resourceType="capability";a.init=function(b){this._super(b);this.pluralizedResourceType="capabilities";this.RESOURCE_ENDPOINT=jive.rest.url("/"+["containers",this.parentType,this.parentID,this.pluralizedResourceType].join("/"));this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT}});
;
jive.TypeaheadInput=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.init=function(e,d){var c=this;d=d||{};this.element=b(e);this.minLength=d.minLength||2;this.delay=d.delay||333;var f=this.processKey.bind(this);if(b.browser.mozilla){this.element.keypress(f)}else{this.element.keydown(f)}this.element.bind("search change",f);this.element.focus(function(){c.focused=true;c.startWatch(f)});this.element.blur(function(){c.focused=false;c.stopWatch(f)});if(!("placeholder" in b("<input>")[0])){this.placeholder=this.element.attr("placeholder");this.placeheldClass=((this.element.data("placeHeld")||{}).options||{}).className}};this.val=function(c){if(this.focused&&typeof c!="undefined"){}else{if(c===""&&this.placeholder){this.element.val(this.placeholder);this.element.addClass(this.placeheldClass)}else{return this.element.val.apply(this.element,arguments)}}};a.processKey=function(){var d=this.element.val(),c=this;if(d!==this.prevValue){if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(function(){c.emitChange(c.element.val())},this.delay);this.prevValue=d}};a.emitChange=function(c){if(b.trim(c)===""||c.length<this.minLength){this.emit("clear")}else{if(c.length>=this.minLength&&!this.placeheld()){this.emit("change",c)}}};a.placeheld=function(){if(this.placeholder&&this.placeheldClass){return this.element.val()===this.placeholder&&this.element.hasClass(this.placeheldClass)}else{return false}};a.startWatch=function(d){var c=this;this.stopWatch(d);this.watchTimeout=setTimeout(function(){d();c.startWatch(d)},333)};a.stopWatch=function(){clearTimeout(this.watchTimeout)}});
;
jive.namespace("Placepicker");jive.Placepicker.ContainerSearchView=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);this.init=function(d,f,e){var c=this;this.target=b(f);this.prevContent=this.target.children();this.visibleContent=this.prevContent.filter(":visible");b(d).each(function(){var g=new jive.TypeaheadInput(this);g.addListener("change",function(h){c.emitP("search",h).addCallback(function(i){if(c.searchResults){c.searchResults.remove()}c.searchResults=b(jive.placepicker.searchResults(i));c.flatFind(c.searchResults,".j-clear-search").click(function(j){c.restoreContent();g.val("");j.preventDefault()});if(c.visibleContent.size()==0){c.visibleContent=c.prevContent.filter(":visible")}c.visibleContent.hide();f.append(c.searchResults);c.resizePopover()})});g.addListener("clear",c.restoreContent.bind(c))})};this.update=function(){};a.restoreContent=function(){if(this.searchResults){this.searchResults.remove()}this.visibleContent.show();this.resizePopover()};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.resizePopover=function(){this.target.parents(".j-popover *").trigger("popover.resize",[{fade:false}])}});
;
(function(a){a.fn.endlessScroll=function(c){var f={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};var c=a.extend(f,c);var d=true;var e=false;var b=0;if(c.ceaseFire.apply(this)===true){d=false}if(d===true){a(this).scroll(function(){var h=a(".endless_scroll_inner_wrap",this);if(h.length==0){a(this).wrapInner('<div class="endless_scroll_inner_wrap" />')}if(h.length>0&&(h.height()-a(this).height()<=a(this).scrollTop()+c.bottomPixels)){if((c.fireOnce==false||(c.fireOnce==true&&e!=true))){if(c.resetCounter.apply(this)===true){b=0}e=true;b++;a(c.insertAfter).after('<div id="endless_scroll_loader">'+c.loader+"</div>");if(typeof c.data=="function"){data=c.data.apply(this)}else{data=c.data}if(data!==false){a("div#endless_scroll_loader").remove();a(c.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>");a("div#endless_scroll_data").hide().fadeIn();a("div#endless_scroll_data").removeAttr("id");var g=new Array();g[0]=b;c.callback.apply(this,g);if(c.fireDelay!==false||c.fireDelay!==0){a("body").after('<div id="endless_scroll_marker"></div>');a("div#endless_scroll_marker").fadeTo(c.fireDelay,1,function(){a(this).remove();e=false})}else{e=false}}}}})}}})(jQuery);
;
jive.namespace("Placepicker");jive.Placepicker.ContainerBrowseView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(c){this.containerStack=new Array();c=c||{};this.filterGroup=c.filterGroup||"placePicker";this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false};this.render=function(e){var f=new jive.conc.Promise(),c=this;c.rootCommunity=e.rootCommunity;c.showRootCommunity=e.showRootCommunity;c.contentType=e.contentType;c.modal=b(jive.placepicker.browseContainers(e));c.modal.delegate(".js-target-container","click",function(j){var h=b(this).data("objecttype");var i=b(this).data("objectid");var g=$j(this).find(".js-container-title").text();c.emit("container",{targetContainerType:h,targetContainerID:i,targetContainerName:g});if(c.closeOnSelect){c.modal.trigger("close")}if(!c.followLinks){j.preventDefault()}});var d=function(){c.setupSubspaceHandlers(c.modal);var g=c.serviceArgs("following");c.showSpinner();c.emitP("browseLoad",g).addCallback(function(i){var j=b(jive.placepicker.containerList(jQuery.extend({emptyKey:"browse.places.empty.message"},i)));c.addListToAccordionSection(c.modal.find(".j-places-list").first(),j,true);var h=c.modal.find(".j-accordion-container").accordion({changestart:function(n,o){if(o.newContent.find("li").length==0){var m=o.newHeader.find(".js-accordion-link");var l=c.serviceArgs(m.data("placefilter"));c.setupAccordionSection(o.newHeader.next(),l,true)}}});var k=new jive.Placepicker.ContainerSearchView(c.modal.find("input[name=container-filter]"),c.modal.find(".js-place-picker-content"));c.proxyListener(k,"search")}).always(function(){c.hideSpinner()})};c.modal.lightbox_me({closeSelector:".close",destroyOnClose:true,onLoad:d,showOverlay:true,parentLightbox:b(c.parent).closest(".jive-modal:visible")});return f};this.close=function(){if(this.modal){this.modal.trigger("close")}};a.setupAccordionSection=function(d,g,i){var c=this;var f=c.isSpacesSection(g.filterID);var e=c.isFollowingSection(g.filterID);if(f){g=c.setupSpaceArgs(g);d.data("containerType",g.containerType);d.data("containerID",g.containerID);if(c.isRootCommunity(g)){var h=c.rootCommunityList();return c.addListToAccordionSection(d,h,i)}}var j=null;if(e){j="browse.places.empty.message"}c.showSpinner(d);c.emitP("browseLoad",g).addCallback(function(l){c.hideSpinner(d);if(f){if(c.isRootCommunityChildren(g)&&!c.showRootCommunity){l.containerName=null}}var k=b(jive.placepicker.containerList(jQuery.extend({showSubspaces:f,emptyKey:j},l)));return c.addListToAccordionSection(d,k,i)})};a.addScroller=function(d){var c=this;d.endlessScroll({fireDelay:false,callback:function(){var i=b(this).find("li").size();if(i%20==0){var g=b(this).prev().find("a");var f=g.data("placefilter");var h=c.serviceArgs(f,i);var e=b(this).data("containerID");var j=b(this).data("containerType");if(e>-1){h=b.extend({containerType:j,containerID:e},h)}c.emitP("browseLoad",h).addCallback(function(l){var k=b(jive.placepicker.moreContainers(b.extend({showSubspaces:c.isSpacesSection(f)},l)));d.find("ul").append(k)})}}})};a.setupSubspaceHandlers=function(d){var c=this;c.containerStack.push({containerType:c.rootCommunity.type,containerID:-1});d.delegate(".js-child-spaces","click",function(h){var g=b(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var e=g.data("placefilter");var f=b.extend({containerType:b(this).data("objecttype"),containerID:b(this).data("objectid")},c.serviceArgs(e));c.containerStack.push({containerType:b(this).data("parent-objecttype"),containerID:b(this).data("parent-objectid")});c.setupAccordionSection(b(this).closest(".j-places-list"),f,false);h.preventDefault()});d.delegate(".js-parent-container","click",function(h){var g=b(this).closest(".j-places-list").prev(".j-accordion-toggle").find(".js-accordion-link");var e=g.data("placefilter");var j=c.containerStack.pop();if(c.isRootCommunity(j)){var i=c.rootCommunityList();c.addListToAccordionSection(b(this).closest(".j-places-list"),i,false)}else{var f=b.extend({containerType:j.containerType,containerID:j.containerID},c.serviceArgs(e));c.setupAccordionSection(b(this).closest(".j-places-list"),f,false)}h.preventDefault()})};a.flatFind=function(d,c){return d.find("*").andSelf().filter(c)};a.isSpacesSection=function(c){return c=="space"};a.isFollowingSection=function(c){return c=="following"};a.isRootCommunityChildren=function(d){var c=this;return d.containerType==c.rootCommunity.type&&d.containerID==c.rootCommunity.id};a.isRootCommunity=function(d){var c=this;return d.containerType==c.rootCommunity.type&&d.containerID==-1};a.setupSpaceArgs=function(d){var c=this;if(!d.containerType&&!d.containerID){if(c.showRootCommunity){d.containerType=c.rootCommunity.type;d.containerID=-1}else{d.containerType=c.rootCommunity.type;d.containerID=c.rootCommunity.id}}return d};a.addListToAccordionSection=function(d,e,f){var c=this;d.html(e);d.show();if(f){c.addScroller(d)}};a.serviceArgs=function(d,f){var c=this;var e=c.isSpacesSection(d)?"spaceOrder":"subject";return{filterGroupID:c.filterGroup,filterID:d,start:f?f:0,sortKey:e,numResults:20}};a.rootCommunityList=function(){var c=this;return b(jive.placepicker.containerList({showSubspaces:true,containers:[c.rootCommunity],contentType:c.contentType,containerType:-1,containerID:-1}))};a.createSpinner=function(c){this.$spinner=b(jive.shared.soy.loading());if(c){c.append(this.$spinner)}};a.destroySpinner=function(c){if(this.$spinner){this.$spinner.remove()}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.displayutil=="undefined"){jive.shared.displayutil={}}jive.shared.displayutil.avatar=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.anonymous)?((!A.hideLink)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username))+'" class="j-avatar'+((!A.hideTooltip)?" jiveTT-hover-user":"")+'" data-userId="'+((A.ID)?soy.$$escapeHtml(A.ID):soy.$$escapeHtml(A.id))+'" '+((A.prop&&A.prop.presence&&A.prop.presence.jsObject!="null")?'data-online="'+soy.$$escapeHtml(A.prop.presence.online)+'" data-presence="'+soy.$$escapeHtml(A.prop.presence.jsObject)+'" data-externalId="'+((A.prop.presence.userExternalID)?soy.$$escapeHtml(A.prop.presence.userExternalID):"")+'" '+((A.avatarID)?'data-avatarId="'+soy.$$escapeHtml(A.avatarID)+'" ':"")+((A.username)?'data-username="'+soy.$$escapeHtml(encodeURIComponent(A.username))+'" ':""):"")+">":"")+((!A.enabled)?'<img class="jive-avatar" src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-avatar-disabled.png")+'" width="'+soy.$$escapeHtml(A.size)+'" height="'+soy.$$escapeHtml(A.size)+'"/>':'<img class="jive-avatar" src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-avatar-default.png")+'" '+((!A.hideHeight)?'height="'+soy.$$escapeHtml(A.size)+'" data-height="'+soy.$$escapeHtml(A.size)+'"':"")+' width="'+soy.$$escapeHtml(A.size)+'" '+((A.storeSizeData)?'data-size="'+soy.$$escapeHtml(A.size)+'"':"")+' data-username="'+soy.$$escapeHtml(encodeURIComponent(A.username))+'" data-avatarId="'+soy.$$escapeHtml(A.avatarID)+'" data-random="'+soy.$$escapeHtml(jive.soy.func.randomString())+'" onload="loadAvatar(this)" alt="'+soy.$$escapeHtml(A.displayName)+'"/>')+((!A.hideLink)?"</a>":""):'<img class="jive-avatar" src="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/people/guest/avatar/"+A.size+".png")+'" height="'+soy.$$escapeHtml(A.size)+'" width="'+soy.$$escapeHtml(A.size)+'" alt="'+soy.$$escapeHtml(A.displayName)+'" title="'+soy.$$escapeHtml(A.displayName)+'"/>');if(!C){return B.toString()}};jive.shared.displayutil.cardError=function(A,C){var B=C||new soy.StringBuilder();B.append((A.type=="user")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.tooltip.error"),[])):(A.type=="container")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("container.tooltip.error"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.general"),[])));if(!C){return B.toString()}};jive.shared.displayutil.cardLoading=function(A,C){var B=C||new soy.StringBuilder();B.append('<strong class="jive-tooltip2-loading">',(A.type=="user")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.tooltip.loading"),[])):(A.type=="container")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("container.tooltip.loading"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.loading"),[])),"</strong>");if(!C){return B.toString()}};jive.shared.displayutil.userDisplayNameLink=function(A,C){var B=C||new soy.StringBuilder();B.append((A.displayName)?(!A.anonymous)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.username))+'" data-username="'+soy.$$escapeHtml(encodeURIComponent(A.username))+'" data-avatarId="'+soy.$$escapeHtml(A.avatarID)+'" data-userId="'+soy.$$escapeHtml(A.id)+'" '+((A.prop&&A.prop.presence&&A.prop.presence.jsObject!="null")?'data-online="'+soy.$$escapeHtml(A.prop.presence.online)+'" data-presence="'+soy.$$escapeHtml(A.prop.presence.jsObject)+'" data-externalId="'+((A.prop.presence.userExternalID)?soy.$$escapeHtml(A.prop.presence.userExternalID):"")+'" ':"")+'class="jive-username-link '+((!A.hideTooltip)?" jiveTT-hover-user":"")+" "+((!A.enabled)?" jive-user-disabled":"")+" "+((A.extraCss)?" "+soy.$$escapeHtml(A.extraCss):"")+'" '+((A.renderInvisible)?'style="display:none;"':"")+">"+((A.displayNameOverride)?soy.$$escapeHtml(A.displayNameOverride):soy.$$escapeHtml(A.displayName))+"</a>":'<em class="guest">'+soy.$$escapeHtml(A.displayName)+"</em>":"");if(!C){return B.toString()}};jive.shared.displayutil.userDisplayName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.displayName)?(!A.anonymous)?soy.$$escapeHtml(A.displayName):'<em class="guest">'+soy.$$escapeHtml(A.displayName)+"</em>":"");if(!C){return B.toString()}};jive.shared.displayutil.remoteUserDisplayNameLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<span><img src="',soy.$$escapeHtml(A.avatarUrl),'" width="48" height="48" class="jive-avatar" /></span><h5>',soy.$$escapeHtml(A.userDisplayName),'</h5><span class="jive-note-user-status">',soy.$$escapeHtml(A.userStatus),'</span><ul class="jive-profile-tt-fields">',(A.userPhone)?"<li><strong>Phone Number:</strong> "+soy.$$escapeHtml(A.userPhone)+"</li>":"",(A.userEmail)?'<li><strong>Email:</strong> <a href="mailto:'+soy.$$escapeHtml(A.userEmail)+'">'+soy.$$escapeHtml(A.userEmail)+"</a></li>":"",'</ul><p><a href="',soy.$$escapeHtml(A.profileUrl),'">View ',soy.$$escapeHtml(A.userDisplayName),"'s profile</a></p>");if(!C){return B.toString()}};jive.shared.displayutil.renderGuestDisplayName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.message.displayName)?soy.$$escapeHtml(A.message.displayName):(A.message.username)?soy.$$escapeHtml(A.message.username):(A.message.userEmail)?soy.$$escapeHtml(A.message.userEmail):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.guest"),[])));if(!C){return B.toString()}};jive.shared.displayutil.containerDisplayNameLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.container.jiveObjectURL)),'" class="font-color-meta ',(!A.hideTooltip)?" jivecontainerTT-hover-container":"",'" data-objectId="',soy.$$escapeHtml(A.container.id),'" data-objectType="',soy.$$escapeHtml(A.container.type),'" >',(A.container.typeSocialGroup)?soy.$$escapeHtml(A.container.name):(A.container.typeUserContainer&&A.container.typeWallEntry)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.in_user_container2.we"),[A.container.userDisplayName])):(A.container.typeUserContainer)?soy.$$escapeHtml(A.container.userDisplayName):soy.$$escapeHtml(A.container.name),"</a>");if(!C){return B.toString()}};jive.shared.displayutil.groupTypeIcon=function(A,C){var B=C||new soy.StringBuilder();B.append((A.size)?(A.size=="med")?'<span class="jive-icon-med jive-icon-group-'+soy.$$escapeHtml(A.typeName)+'"></span>':(A.size=="big"||A.size=="large")?'<span class="jive-icon-big jive-icon-group-'+soy.$$escapeHtml(A.typeName)+'"></span>':'<span class="jive-icon-sml jive-icon-group-'+soy.$$escapeHtml(A.typeName)+'"></span>':"");if(!C){return B.toString()}};jive.shared.displayutil.renderIconElement=function(A,C){var B=C||new soy.StringBuilder();switch(A.icon.tag){case"img":B.append("<img ");jive.shared.displayutil.renderIconElementAttrs(A.icon,B);B.append("/>");break;case"span":B.append("<span ");jive.shared.displayutil.renderIconElementAttrs({attributeNames:A.icon.attributeNames,attributes:A.icon.attributes,extraAttributes:A.extraAttributes},B);B.append("></span>");break;case"div":B.append("<div ");jive.shared.displayutil.renderIconElementAttrs(A.icon,B);B.append("></div>");break}if(!C){return B.toString()}};jive.shared.displayutil.renderIconElementAttrs=function(A,G){var C=G||new soy.StringBuilder();var F=A.attributeNames;var D=F.length;for(var E=0;E<D;E++){var B=F[E];C.append(soy.$$escapeHtml(B),'="',soy.$$escapeHtml(A.attributes[B]),(A.extraAttributes)?" "+soy.$$escapeHtml(A.extraAttributes):"",'" ')}if(!G){return C.toString()}};jive.shared.displayutil.messagePopup=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-alert-container"><div class="j-alert j-rc5 j-alert-',soy.$$escapeHtml(A.style)," clearfix ",(A.showClose)?"j-alert-withbutton":"",'"><span class="j-js-alert-message"></span>');if(A.showClose){B.append('<button class="j-js-message-popup-close-button">');if(A.closeTitle){B.append(soy.$$escapeHtml(A.closeTitle))}else{jive.shared.displayutil.close(null,B)}B.append("</button>")}B.append("</div></div>");if(!C){return B.toString()}};jive.shared.displayutil.close=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])));if(!C){return B.toString()}}
;
jive.namespace("Placepicker");jive.Placepicker.BrowseContainersSource=jive.RestService.extend(function(a){a.resourceType="container";a.init=function(b){this._super(b);this.RESOURCE_ENDPOINT=jive.rest.url("/containers")}});
;
jive.namespace("Placepicker");jive.Placepicker.SearchContainersSource=jive.RestService.extend(function(a){a.resourceType="container";a.init=function(b){this._super(b);this.RESOURCE_ENDPOINT=jive.rest.url("/containers/search")}});
;
jive.namespace("Placepicker");jive.Placepicker.PlacePickerSource=jive.RestService.extend(function(a){a.resourceType="placepicker";a.init=function(c,b){b=b||{};this._super(b);$j.extend(this.defaultParams,{containerType:b.containerType,containerID:b.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/placepicker/"+c)}});
;
jive.namespace("Placepicker");jive.Placepicker.Main=jive.oo.Class.extend(function(a){jive.conc.observable(this);a.init=function(c){var b=this;this.pickerContext=c.pickerContext||"create";this.objectType=c.objectType;this.objectID=c.objectID||-1;this.upload=c.upload;this.personalContainerTitleKey=c.personalContainerTitleKey;this.personalContainerCaptionKey=c.personalContainerCaptionKey;this.searchPlaceholderKey=c.searchPlaceholderKey;this.containerType=c.containerType;this.containerID=c.containerID;this.filterGroup=c.filterGroup;this.followLinks=c.followLinks||false;this.parent=c.parent||null;this.closeOnSelect=c.closeOnSelect||false;this.filterByContainer=c.filterByContainer||false;this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource(this.pickerContext,{containerType:this.containerType,containerID:this.containerID});this.containerBrowseView=new jive.Placepicker.ContainerBrowseView({filterGroup:this.filterGroup,parent:this.parent,followLinks:this.followLinks,closeOnSelect:this.closeOnSelect});this.containerBrowseView.addListener("browseLoad",function(d,f){var e=jQuery.extend({contentType:b.objectType,contentID:b.objectID},d);if(b.filterByContainer){e=jQuery.extend({},{containerType:b.containerType,containerID:b.containerID},e)}b.browseContainers.findAll(e).addCallback(function(g){f.emitSuccess({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload,containers:g.items,containerName:g.containerName,parentName:g.parentName})})});this.containerBrowseView.addListener("search",function(d,e){b.containers.findAll({query:d,contentType:b.objectType,contentID:b.objectID}).addCallback(function(f){e.emitSuccess(jQuery.extend({contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,upload:b.upload},f))})});this.containerBrowseView.addListener("container",function(d){b.emit("container",d)})};this.showPicker=function(){var b=this;b.placePicker.findAll({contentType:b.objectType,contentID:b.objectID}).addCallback(function(c){b.containerBrowseView.render(jQuery.extend({contentID:b.contentID,contentType:b.objectType,containerType:b.containerType,containerID:b.containerID,selectedContentType:{id:b.objectType,personalContainerTitleKey:b.personalContainerTitleKey,personalContainerCaptionKey:b.personalContainerCaptionKey,searchPlaceholderKey:b.searchPlaceholderKey}},c))})}});
;
jive.namespace("Move.Content");jive.Move.Content.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.objectType=c.objectType;this.objectID=c.objectID;this.containerType=c.containerType;this.containerID=c.containerID;this.isContainer=c.isContainer||false;this.contentCapabilitiesSource=new jive.Move.Content.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.containerCapabilitiesSource=new jive.Move.Container.CapabilitiesSource({parentID:this.objectID,parentType:this.objectType});this.contentSource=new jive.Browse.Content.ItemSource();this.containerSource=new jive.Browse.Container.ItemSource();this.moveView=new jive.Move.Content.MoveView();this.placePicker=new jive.Placepicker.Main($j.extend({pickerContext:"move"},c));this.moveView.addListener("browse",function(d){b.placePicker.showPicker()});this.moveView.addListener("moveConfirmed",function(d){if(b.isContainer){b.handleConfirmation(b.containerSource,d)}else{b.handleConfirmation(b.contentSource,d)}});this.placePicker.addListener("container",function(d,e){if(b.isContainer){b.handleContainerSelected(b.containerCapabilitiesSource,d)}else{b.handleContainerSelected(b.contentCapabilitiesSource,d)}})};a.handleConfirmation=function(d,c){var b=this;d.save({id:b.objectType+"/"+b.objectID,objectType:c.targetContainerType,objectID:c.targetContainerID}).addCallback(function(e){window.location=jive.app.url({path:e.link+"?prevContainerType="+b.containerType+"&prevContainerID="+b.containerID})})};a.handleContainerSelected=function(d,c){var b=this;d.findAll({containerType:c.targetContainerType,containerID:c.targetContainerID}).addCallback(function(e){b.moveView.confirm(e)})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.modalizer=="undefined"){jive.modalizer={}}jive.modalizer.foo=function(A,C){var B=C||new soy.StringBuilder();if(!C){return B.toString()}}
;
jive.namespace("Modalizer");jive.Modalizer.ModalView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Modalizer;a.init=function(h){var e=this,f,g={};if(h.width&&h.width.match(/^(narrow|medium|wide)$/i)){f="jive-modal-"+h.width}else{if(h.width){g.width=h.width}else{f="jive-modal-medium"}}var d=function(j){var i=c(this).attr("href")||c(this).find("a:first").attr("href");if(i){e.emitP("launch",i).addCallback(function(o){var n=c("<div/>",{"class":"jive-modal j-modal"+(f?" "+f:""),id:"js-modalized"}).css(g);var m=e.separateScripts(o);var l=e.shiv(m[0]);var k=m[1];if(f){n.addClass(f)}n.html(l);n.lightbox_me({destroyOnClose:true,onClose:h.onClose});k()})}else{alert("No valid URL found to modalize")}j.preventDefault()};c(document).ready(function(){if(h.triggers){c.each(h.triggers,function(){c(""+this).click(d)})}if(h.liveTriggers){c.each(h.liveTriggers,function(){c(""+this).live("click",d)})}})}});
;
jive.namespace("Modalizer");jive.Modalizer.ModalSource=jive.oo.Class.extend(function(a){this.getConfirmation=function(b,c){$j.ajax({url:b,type:"GET",dataType:"html",success:function(d){c(d)},error:function(){alert("failed..")}})}});
;
jive.namespace("Modalizer");jive.Modalizer.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.modalView=new jive.Modalizer.ModalView(c);this.modalSource=jive.Modalizer.ModalSource();this.modalView.addListener("launch",function(d,e){b.modalSource.getConfirmation(d,function(f){e.emitSuccess(f)})})}});
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (ToggleFeatured == null) var ToggleFeatured = {};
ToggleFeatured._path = '/dwr';
ToggleFeatured.toggleFeatured = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(ToggleFeatured._path, 'ToggleFeatured', 'toggleFeatured', p0, p1, p2, p3, callback);
}

;
$j(document).ready(function(){$j("#j-place-parents-link").click(function(a){$j("#j-place-parents-container").popover({context:$j("#j-place-parents-link"),darkPopover:true,destroyOnClose:false});a.preventDefault()})});
;
jive.Rate=function(h,g,p,s,w,l,y,r,b){var o=jive.rest.url("/rating/"+p+"/"+s);var q;var d;var c;var e;var u;var f;var t;$j.getJSON(o,function(A){q=A.ratingInfo;x();v();j();if(f){var z={body:"",element:t,i18n:l,containerType:h,containerID:g,resourceType:p,resourceID:s,rteOptions:b};new jive.Rate.Main(z)}});function v(){if(r){t=$j('.jive-content-rating[data-guid="'+r+'"]')}else{t=$j("#jive-content-rating")}}function x(){d=(q.ratedByUser&&q.userRating.score>0)?q.userRating.score:0;c=q.userRating?q.userRating.description:"";e=false;u=q.availableRatings;f=q.commentable&&y}function i(){$j.getJSON(o+"/mean",function(z){k(z)});$j.getJSON(o+"/count",function(z){m(z)});return false}function k(z){t.find(".jive-content-avgrating-score").attr("title",l.avgUserRatingLabeli18n+": "+z);$j.each(u,function(A,B){t.find(".jive-icon-avgrating-"+B.score).toggleClass("jive-icon-rate-avg-on",z>=B.score).toggleClass("jive-icon-rate-avg-half",z<B.score&&z>=B.score-0.5).toggleClass("jive-icon-rate-avg-off",z<B.score-0.5)})}function m(z){var A=(z==1)?l.rateRatingLabel:l.rateRatingsLabel;t.find(".jive-content-avgrating-count").text("("+z+" "+A+")")}function a(A){e=true;var z=t.find(".j-rating-comment-instruct .font-color-okay strong");z.html(l.rateSavingText);if(!t.find(".j-rating-container").hasClass("j-rating-container-active")){t.find(".j-rating-container").addClass("j-rating-container-active");if(!t.find(".j-rating-container").hasClass("j-rating-container-active-tab")){t.find(".j-rating-comment-instruct").css("opacity","0").animate({width:"toggle",opacity:1},500)}}$j.post(o,{score:A},function(){i();d=A;n(A);z.html(l.rateSavedText);if(!f){t.find(".j-rating-comment-instruct").fadeOut(2500,function(){t.find(".j-rating-container").removeClass("j-rating-container-active")})}e=false})}function n(z){$j.each(u,function(A,B){if(z==0){t.find(".jive-content-userrating-desc").html("")}if(z==B.score){t.find(".jive-content-userrating-desc").html(B.description)}t.find(".jive-icon-userrating-"+B.score).toggleClass("jive-icon-rate-usr-on",z>=B.score).toggleClass("jive-icon-rate-usr-off",z<B.score)})}function j(){var z=jive.rate.soy.renderRating({ratingInfo:q,i18n:l});if(q.rateable){z+=jive.rate.soy.renderUserRating({ratingInfo:q,userRating:d,commentable:f,ratingDescription:c,i18n:l})}t.append(z);t.find(".jive-content-userrating").show();$j.each(q.availableRatings,function(B,A){t.find(".jive-icon-userrating-"+A.score).bind("click",function(){a(A.score)});t.find(".jive-icon-userrating-"+A.score).hover(function(){n(A.score)},function(){n(d)})})}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.rate=="undefined"){jive.rate={}}if(typeof jive.rate.soy=="undefined"){jive.rate.soy={}}jive.rate.soy.renderRating=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="jive-content-avgrating"><div class="jive-content-avgrating-title">',soy.$$escapeHtml(A.i18n.avgUserRatingTitlei18n),'</div><div class="jive-content-avgrating-score" title="',soy.$$escapeHtml(A.i18n.avgUserRatingLabeli18n),": ",soy.$$escapeHtml(A.ratingInfo.meanRating),'">');var F=A.ratingInfo.availableRatings;var D=F.length;for(var B=0;B<D;B++){var E=F[B];C.append('<span class="jive-icon-avgrating-',soy.$$escapeHtml(E.score)," jive-icon-med jive-icon-rate-avg-",(A.ratingInfo.meanRating>=E.score)?"on":(A.ratingInfo.meanRating>=E.score-0.5)?"half":"off",'"></span>')}C.append('</div><div class="jive-content-rating-print" style="display: none;">',soy.$$escapeHtml(A.ratingInfo.meanRating),'</div><div class="jive-content-avgrating-count">(',soy.$$escapeHtml(A.ratingInfo.ratingCount)," ",(A.ratingInfo.ratingCount==1)?soy.$$escapeHtml(A.i18n.rateRatingLabel):soy.$$escapeHtml(A.i18n.rateRatingsLabel),")</div></div>");if(!G){return C.toString()}};jive.rate.soy.renderUserRating=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="jive-content-userrating jive-content-myrating-print"><div class="j-rating-container clearfix"><div class="j-rating clearfix"><div class="jive-content-userrating-title">',soy.$$escapeHtml(A.i18n.myRatingLabel),' <span class="jive-content-userrating-desc">',soy.$$escapeHtml(A.ratingDescription),'</span></div><div class="jive-content-userrating-score">');var D=A.ratingInfo.availableRatings;var F=D.length;for(var E=0;E<F;E++){var C=D[E];B.append('<a href="javascript:void(0);" class="jive-icon-userrating-',soy.$$escapeHtml(C.score)," jive-icon-med jive-icon-rate-usr-",(A.userRating>=C.score)?"on":"off",'" title="',soy.$$escapeHtml(C.description),"(",soy.$$escapeHtml(C.score),')"></a>')}B.append('<div class="jive-content-userrating-saved" style="display: none;"></div></div></div><div class="j-rating-comment-instruct"><p class="font-color-okay"><strong>',soy.$$escapeHtml(A.i18n.rateRatingSaved),"</strong></p>",(A.commentable)?'<p class="font-color-meta"><a href="#" class="j-comment-on-rating"><strong>'+soy.$$escapeHtml(A.i18n.writeAReview)+"</strong></a></p>":"",'</div></div></div><div class="j-rating-comment"><ul class="jive-comment"><li><div class="jive-comment-arrow"></div><div class="jive-comment-content"><p class="jive-comment-meta font-color-meta-light">',soy.$$escapeHtml(A.i18n.commentOnRating),'</p><div class="jive-rating-comment-body"> </div></div></li></ul></div>');if(!G){return B.toString()}}
;
jive.namespace("Rate");jive.Rate.Main=function(k){var j=k.containerID;var g=k.containerType;var a=k.container;var b=k.resourceType;var i=k.resourceID;var c=k.i18n;var h=k.body,d=k.element?k.element:"#jive-rating-content",f;function e(m,l){window.jive.CommentApp.comments.closeForms();if(f){f.remove()}jive.CommentApp.comments.renderForm(jive.CommentApp.FormView,m,$j.extend({commentMode:"rate",i18n:c},l))}$j(document).ready(function(){var l=$j(d);$j(function(){l.find(".j-comment-on-rating").click(function(){e(l.find(".jive-rating-comment-body"),{formActionContainer:".jive-rating-comment-body",bodyContent:h,containerType:g,containerID:j,resourceType:b,resourceID:i,rteOptions:k.rteOptions});l.find(".jive-content-avgrating").css("height","30px").animate({padding:"0",width:"0",opacity:"0"},500,function(){l.find(".j-rating-comment").animate({opacity:"toggle"},800).slideDown()});l.find(".jive-content-userrating").animate({padding:"0"},500).css("border","none");l.find(".j-rating-comment-instruct").animate({width:"0",opacity:"0",padding:"0"},400,function(){$j(this).hide()}).css("border","none");l.find(".j-rating-container").removeClass("j-rating-container-active");l.find(".j-rating-container").addClass("j-rating-container-active-tab");return false})});var m=function(){l.find(".j-rating-comment").hide();l.find(".jive-content-userrating").removeAttr("style");l.find(".jive-content-avgrating").removeAttr("style");l.find(".j-rating-comment-instruct").removeAttr("style");l.find(".j-rating-container").removeClass("j-rating-container-active");l.find(".j-rating-container").removeClass("j-rating-container-active-tab")};jive.CommentApp.comments.addCommentListViewListener("cancelComment",m);jive.CommentApp.comments.addCommentListViewListener("savedComment",m);jive.CommentApp.comments.addCommentListViewListener("createComment",m);jive.CommentApp.comments.addCommentListViewListener("replyComment",m);jive.CommentApp.comments.addCommentListViewListener("editComment",m)})};
;
var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,c=function(g,f){g=String(g);f=f||2;while(g.length<f){g="0"+g}return g};var d=function(g,f){var i=g.getTime();var j=g.getTimezoneOffset()*60000;var h=i+j;return new Date(h+(3600000*f))};return function(j,w,r){var h=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(j)=="[object String]"&&!/\d/.test(j)){w=j;j=undefined}j=j?new Date(j):new Date;if(isNaN(j)){throw SyntaxError("invalid date")}j=d(j,_jive_timezoneoffset);w=String(h.masks[w]||w||h.masks["default"]);if(w.slice(0,4)=="UTC:"){w=w.slice(4);r=true}var u=r?"getUTC":"get",n=j[u+"Date"](),f=j[u+"Day"](),k=j[u+"Month"](),q=j[u+"FullYear"](),t=j[u+"Hours"](),l=j[u+"Minutes"](),v=j[u+"Seconds"](),p=j[u+"Milliseconds"](),g=r?0:j.getTimezoneOffset(),i={d:n,dd:c(n),ddd:h.i18n.dayNames[f],dddd:h.i18n.dayNames[f+7],m:k+1,mm:c(k+1),mmm:h.i18n.monthNames[k],mmmm:h.i18n.monthNames[k+12],yy:String(q).slice(2),yyyy:q,h:t%12||12,hh:c(t%12||12),H:t,HH:c(t),M:l,MM:c(l),s:v,ss:c(v),l:c(p,3),L:c(p>99?Math.round(p/10):p),t:t<12?"a":"p",tt:t<12?"am":"pm",T:t<12?"A":"P",TT:t<12?"AM":"PM",Z:r?"UTC":(String(j).match(b)||[""]).pop().replace(e,""),o:(g>0?"-":"+")+c(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4),S:["th","st","nd","rd"][n%10>3?0:(n%100-n%10!=10)*n%10]};return w.replace(a,function(m){return m in i?i[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",longDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",longTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};$j(document).ready(function(){dateFormat.i18n={dayNames:[jive.i18n.getMsg("date.format.js.sun.short"),jive.i18n.getMsg("date.format.js.mon.short"),jive.i18n.getMsg("date.format.js.tue.short"),jive.i18n.getMsg("date.format.js.wed.short"),jive.i18n.getMsg("date.format.js.thu.short"),jive.i18n.getMsg("date.format.js.fri.short"),jive.i18n.getMsg("date.format.js.sat.short"),jive.i18n.getMsg("date.format.js.sun.long"),jive.i18n.getMsg("date.format.js.mon.long"),jive.i18n.getMsg("date.format.js.tue.long"),jive.i18n.getMsg("date.format.js.wed.long"),jive.i18n.getMsg("date.format.js.thu.long"),jive.i18n.getMsg("date.format.js.fri.long"),jive.i18n.getMsg("date.format.js.sat.long")],monthNames:[jive.i18n.getMsg("date.format.js.jan.short"),jive.i18n.getMsg("date.format.js.feb.short"),jive.i18n.getMsg("date.format.js.mar.short"),jive.i18n.getMsg("date.format.js.apr.short"),jive.i18n.getMsg("date.format.js.may.short"),jive.i18n.getMsg("date.format.js.jun.short"),jive.i18n.getMsg("date.format.js.jul.short"),jive.i18n.getMsg("date.format.js.aug.short"),jive.i18n.getMsg("date.format.js.sep.short"),jive.i18n.getMsg("date.format.js.oct.short"),jive.i18n.getMsg("date.format.js.nov.short"),jive.i18n.getMsg("date.format.js.dec.short"),jive.i18n.getMsg("date.format.js.jan.long"),jive.i18n.getMsg("date.format.js.feb.long"),jive.i18n.getMsg("date.format.js.mar.long"),jive.i18n.getMsg("date.format.js.apr.long"),jive.i18n.getMsg("date.format.js.may.long"),jive.i18n.getMsg("date.format.js.jun.long"),jive.i18n.getMsg("date.format.js.jul.long"),jive.i18n.getMsg("date.format.js.aug.long"),jive.i18n.getMsg("date.format.js.sep.long"),jive.i18n.getMsg("date.format.js.oct.long"),jive.i18n.getMsg("date.format.js.nov.long"),jive.i18n.getMsg("date.format.js.dec.long")]}});Date.prototype.format=function(a,b){return dateFormat(this,a,b)};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.UserPicker=="undefined"){jive.UserPicker={}}if(typeof jive.UserPicker.soy=="undefined"){jive.UserPicker.soy={}}jive.UserPicker.soy.renderUserPickerModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal" id="user-autocomplete-modal-container" style="display: none;"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.title"),[])),'</h2></header><a href="javascript:;" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.close"),[])),' <span class="j-close-icon j-ui-elem"></span></a><section id="user-picker-modal-content" class="jive-modal-content jive-modal-content-userpicker">',A.body,"</section></div>");if(!C){return B.toString()}};jive.UserPicker.soy.renderModalBrowseButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="javascript:;" class="jive-chooser-browse">',(A.plural)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.title"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.title.singular"),[])),"</a>");if(!C){return B.toString()}};jive.UserPicker.soy.renderModalLoading=function(A,C){var B=C||new soy.StringBuilder();B.append("<div class='jive-user-modal-loading'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.adding_users"),[])),"</div>");if(!C){return B.toString()}};jive.UserPicker.soy.searching=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.searching"),[])));if(!C){return B.toString()}};jive.UserPicker.soy.renderDocumentViewersAdded=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.invited.users"),[])),"<br></p>");if(!C){return B.toString()}};jive.UserPicker.soy.renderSelectedUsersList=function(L,I){var D=I||new soy.StringBuilder();if(L.results.userlists.length>0||L.results.users.length>0){D.append((L.message)?L.message:"",'<ul class="clearfix">');var J=L.results.userlists;var F=J.length;for(var C=0;C<F;C++){var A=J[C];D.append('<li style="display: list-item;" class="connections d" data-list-id="',soy.$$escapeHtml(A.id),'"><img width="16" height="16" border="0" alt="',soy.$$escapeHtml(A.displayName),'" style="background-color: #',soy.$$escapeHtml(A.style),';" src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" class="lbl jive-icon-med jive-icon-label-frame"><strong>',(A.excluded)?'<span class="excluded">':"",soy.$$escapeHtml(A.displayName)," <span>(",soy.$$escapeHtml(A.users.length),")</span>",(A.excluded)?"</span>":"",'</strong><em>(<a class="showConnections" href="javascript:;">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.show.label"),[])),"</a>",(!L.disabled)?" - "+((!A.excluded)?'<a class="remove" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.remove.label"),[]))+"</a>":'<a class="add" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.add.label"),[]))+"</a>")+")":"",'</em><div class="j-grouped-users-popover" style="display: none;">');var K=A.users;var N=K.length;for(var O=0;O<N;O++){var G=K[O];jive.shared.displayutil.userDisplayNameLink(G,D)}D.append("</div></li>")}var E=L.results.users;var H=E.length;for(var M=0;M<H;M++){var B=E[M];D.append('<li style="display: list-item;" class="',(B.disabled)?"disabled":""," ",(!B.entitled||!B.prop.directMessageActionLinkShown&&L.relationship)?"j-warning":"",'" data-user-id="',soy.$$escapeHtml(B.id),'" data-user-email="',soy.$$escapeHtml(B.email),'">');jive.shared.displayutil.avatar(soy.$$augmentData(B,{size:"26",hideLink:true}),D);D.append('<span class="font-color-meta ',(B.excluded)?"excluded":"",'">',soy.$$escapeHtml(B.displayName)," ",(!L.disabled&&!B.disabled)?"<em>("+((!B.excluded)?'<a class="remove" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.remove.label"),[]))+"</a>":'<a class="add" href="javascript:;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.add.label"),[]))+"</a>")+")</em>":"","</span>",(!B.entitled)?'<span class="jive-icon-sml jive-icon-warn"></span>':"",(L.relationship&&!B.prop.directMessageActionLinkShown)?'<span class="jive-icon-sml jive-icon-redalert"></span>':"","</li>")}D.append("</ul>")}if(!I){return D.toString()}};jive.UserPicker.soy.renderSelectedUser=function(A,G){var C=G||new soy.StringBuilder();if(A.results.users.length>0){C.append('<ul class="jive-chooser-list j-people-list clearfix">');var F=A.results.users;var E=F.length;for(var B=0;B<E;B++){var D=F[B];if(B==0){C.append('<li style="display: list-item;" class="',(D.disabled)?"disabled":"",(!D.entitled)?"notEntitled ":"",'" data-user-id="',soy.$$escapeHtml(D.id),'" data-user-email="',soy.$$escapeHtml(D.email),'">');jive.shared.displayutil.avatar(soy.$$augmentData(D,{size:"26",hideLink:true}),C);C.append('<span class="font-color-meta">',soy.$$escapeHtml(D.displayName)," ",(!A.disabled)?'<em>(<a class="remove" href="javascript:;" style="display: inline;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.picker.tab.change.label"),[]))+"</a>)</em>":"","</span></li>")}}C.append("</ul>")}if(!G){return C.toString()}};jive.UserPicker.soy.renderUserList=function(G,E){var D=E||new soy.StringBuilder();if(G.results.userlists.length>0){D.append('<header class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.labels.title"),[])),'</header><ul class="j-label-list">');var I=G.results.userlists;var A=I.length;for(var B=0;B<A;B++){var F=I[B];D.append('<li class="user-autocomplete-item clearfix"><a href="#" id="userlist_',soy.$$escapeHtml(F.id),'" data-list-id="',soy.$$escapeHtml(F.id),'"><img width="26" height="26" border="0" alt="',soy.$$escapeHtml(F.displayName),'" style="background-color: #',soy.$$escapeHtml(F.style),';" src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" class="lbl jive-icon-med jive-icon-label-frame">',soy.$$escapeHtml(F.displayName)," <span>(",soy.$$escapeHtml(F.users.length),")</span></a></li>")}D.append("</ul>")}if(G.results.users.length>0){D.append((G.results.users.length>0&&G.results.userlists.length>0)?'<header class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.people"),[]))+"</header>":"",'<ul class="j-people-list">');var H=G.results.users;var C=H.length;for(var K=0;K<C;K++){var J=H[K];D.append('<li class="user-autocomplete-item clearfix"><a href="#" id="user_',soy.$$escapeHtml(J.id),'" data-user-id="',soy.$$escapeHtml(J.id),'">');jive.shared.displayutil.avatar(soy.$$augmentData(J,{size:"26",hideLink:true}),D);D.append("<span>",soy.$$escapeHtml(J.displayName),"</span></a></li>")}D.append("</ul>")}D.append((G.results.users.length==0&&G.results.userlists.length==0)?G.noResultsMessage:"");if(!E){return D.toString()}};jive.UserPicker.soy.noUsersMatchMessage=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.none"),[])),"</p>");if(!C){return B.toString()}};jive.UserPicker.soy.pleaseEnterValidEmail=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.notemail"),[])),"</p>");if(!C){return B.toString()}};jive.UserPicker.soy.pleaseEnterNonUserEmail=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta empty">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("user.autocomplete.email.of.existing.user"),[])),"</p>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}jive.nav.menu.generic=function(A,G){var B=G||new soy.StringBuilder();B.append("<ul>");var E=A.links;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(C.visible){jive.nav.menu.link(C,B)}}B.append("</ul>");if(!G){return B.toString()}};jive.nav.menu.link=function(A,C){var B=C||new soy.StringBuilder();B.append("<li",(A.itemCss)?' class="'+soy.$$escapeHtml(A.itemCss)+'"':"",'><a id="',soy.$$escapeHtml(A.id),'" href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.url),'"',(A.urlParams&&A.urlParams.contentType)?' data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'" ':"",(A.headingKey)?' data-heading-key="'+soy.$$escapeHtml(A.headingKey)+'" ':"",(A.linkCss)?'class="'+soy.$$escapeHtml(A.linkCss)+'"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),"</a></li>");if(!C){return B.toString()}}
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateSource=jive.oo.Class.extend(function(a){this.fetch=function(b,d){var c=d||new jive.conc.Promise();$j.get(b,function(e){c.emitSuccess({body:e})});return c}});
;
/*
 * Copyright 2010 Jive Software
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


/*jslint laxbreak:true forin:true browser:true */
/*extern jive */

this.jive = this.jive || {};
jive.oo = jive.oo || {};

/**
 * Singleton representing an abstract member.  You can set the value of a field
 * or method of a class implemented with jive.oo.Class to jive.oo.abstract to
 * make that class abstract.  An abstract class or a subclass of an abstract
 * class cannot be instantiated unless any abstract members are overridden with
 * concrete definitions.
 *
 * @field
 * @requires jive.oo.Class
 */
jive.oo.abstract = function() {};

;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}jive.nav.loading=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta-light j-menu-loading clearfix"><img src="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-image-loading.gif")),'" alt="" /> <span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),"</span></p>");if(!C){return B.toString()}}
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
jive.namespace('Navbar.Menu');

/*globals $j */

/**
 * Handles UI for a list of bookmark items
 *
 * @extends jive.AbstractView
 * @depends path=/resources/scripts/lib/jiverscripts/src/oo/class.js
 * @depends path=/resources/scripts/lib/jiverscripts/src/oo/abstract.js
 * @depends path=/resources/scripts/apps/shared/views/abstract_view.js
 * @depends template=jive.nav.loading
 */
jive.Navbar.Menu.AbstractListView = jive.AbstractView.extend(function(protect) {

    this.init = function(buttonSelector, menuSelector, menuOpts) {
        var self = this;

        self.$menu = $j(menuSelector);
        self.$button = $j(buttonSelector);
        self.menuOpts = menuOpts || {};
        self.popoverOpen = false;

        //handle button click
        self.$button.click(function(event) {
            if (!self.popoverOpen) {
                self.$button.addClass('active');
                self.showSpinner();

                if (self.spinning) {
                    self.spinning = false;
                    self.openPopover();
                    self.spinning = true;
                }

                //emit an event for the controller to handle, and add callback for view
                self.emitP('toggle').addCallback(function(data) {
                    self.data = data || self.data;

                    //call render method on an extending class
                    self.render(self.data);

                    //hide or show as necessary
                    self.openPopover();
                }).always(function() {
                    self.hideSpinner();
                });
            }

            //propogate event, but don't follow link, so thoer popovers close
            event.preventDefault();
        });

    };

    this.render = jive.oo.abstract;

    protect.setContent = function(content, callback) {
        this.content = $j(content);

        if (this.popoverOpen) {
            this.$menu.trigger('popover.html', [this.content, callback]);
        } else {
            this.$menu.children().remove();
            this.$menu.append(this.content);
            if (callback) { callback(); }
        }
    };

    this.getContent = function() {
        this.content = this.content || this.$menu.children();
        return this.content;
    };

    this.close = function(){
        this.$menu.trigger('close');
    };

    protect.createSpinner = function() {
        if (!this.popoverOpen) {
            this.spinner = new jive.loader.LoaderView();
            this.setContent(this.spinner.getContent());
            this.openPopover();
        } else {
            this._super();
        }

        this.spinning = true;
    };

    protect.destroySpinner = function() {
        this.spinning = false;
        this._super();
        if (this.spinner) {
            this.spinner.destroy();
        }
    };

    protect.openPopover = function() {
        var self = this;

        if (!self.popoverOpen && !self.spinning) {
            self.$button.addClass('active');
//            self.$menu.css('width', '260px');
            self.$menu.popover($j.extend({
                context: self.$button,
                onClose: function() {
                    self.$button.removeClass('active');
                    self.popoverOpen = false;
                }
            }, self.menuOpts));

            self.popoverOpen = true;
        }
    };
});

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */
jive.namespace('Navbar.Menu');  // Creates the jive.Navbar.Menu.Bookmarks namespace if it does not already exist.

/**
 * Abstract controller class for a navbar menu.
 *
 * @param {jQuery|DOMElement|String}buttonSelector reference or selector to the menu button
 * @param {jQuery|DOMElement|String} menuSelector reference or selector to the menu container
 *
 * @depends path=/resources/scripts/lib/jiverscripts/src/oo/abstract.js
 * @depends path=/resources/scripts/apps/navbar/menu/view/abstract_list.js
 */
jive.Navbar.Menu.Main = jive.oo.Class.extend(function(protect) {

    protect.init = function(buttonSelector, menuSelector, menuOpts) {
        
        var main = this;  // Captures a reference to this instance.
        this.initialized = false;
        this.listView = this.buildListView(buttonSelector, menuSelector, menuOpts);

        // Set up component instances.
        this.itemSource = this.buildItemSource();

        //on button click, show the menu
        this.listView.addListener('toggle', function(promise) {
            // Retrieve existing items.
            main.populate(promise);
        });
        
    };

    protect.populate = function(promise) {
        var main = this;  // Captures a reference to this instance.
        if (!main.initialized) {
            //if an item source is defined, use it
            if (main.itemSource != null) {
                main.itemSource.findAll(main.sourceParams()).addCallback(function(data) {
                    promise.emitSuccess(data);
                    main.initialized = true;
                });
            }
            else {
                //if no item source, nothing to do (assuming a pre-rendered menu)
                promise.emitSuccess({});
                main.initialized = true;
            }
        }
        else {
            promise.emitSuccess();
        }
        return promise;
    };

    /**
     * Invalidate the menu so it is fully rebuilt on any successive calls
     */
    protect.invalidate = function(){
        this.initialized = false;
    };

    protect.sourceParams = function() {
        return {};
    };

    protect.buildListView = jive.oo.abstract;
    protect.buildItemSource = jive.oo.abstract;
});

;
/*
 * Copyright 2010 Jive Software
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


/*jslint laxbreak:true forin:true browser:true */
/*extern jive */

this.jive = this.jive || {};
jive.oo = jive.oo || {};

/**
 * Function for renaming properties of a class.  It takes a map from old names
 * to new names and a class and returns a new class that is the same as the
 * original except that the given property names have been changed.
 *
 * For example, you may want to compose two classes that implement incompatible
 * definitions of the `init()` method.  You can use `jive.oo.resolve()` to
 * rename those `init()` methods before composing the classes so that a
 * subclass of the composed classes can call the `init()` methods of both of
 * its parents:
 *
 *     var Spork = jive.oo.compose(
 *         jive.oo.resolve({ init: 'initSpoon' }, Spoon),
 *         jive.oo.resolve({ init: 'initFork' }, Fork)
 *     ).extend(function(protect) {
 *         protect.init = function(spoonOpts, forkOpts) {
 *             this.initSpoon(spoonOpts);
 *             this.initFork(forkOpts);
 *         };
 *     });
 *
 * You can also use `jive.oo.resolve()` to exclude members from a class by giving
 * a value of `undefined` instead of a new name.
 *
 * This method was inspired by a similar method in [traits.js][].
 *
 * [traits.js]: http://www.traitsjs.org/  (traits.js)
 *
 * @function
 * @param {Object} resolutions map of old names to new names (strings to strings)
 * @param {jive.oo.Class} klass a class to modify
 * @returns {jive.oo.Class} a new class that has been modified appropriately
 * @requires jive.oo.Class
 */
jive.oo.resolve = function(resolutions, klass) {
    var undefined;

    return klass.superclass.extend(function(protect) {
        var definition = klass.definition
          , public = this;

        if (typeof definition == 'function') {
            definition.call(public, protect);
        } else {
            for (name in definition) {
                if (definition.hasOwnProperty(name)) {
                    public[name] = definition[name];
                }
            }
        }

        exclude(public);
        exclude(protect);

        rename(public);
        rename(protect);

        function exclude(def) {
            eachProp(def, function(name) {
                if (resolutions[name] === undefined) {
                    delete def[name];
                }
            });
        }

        function rename(def) {
            eachProp(def, function(name) {
                if (resolutions[name]) {
                    def[resolutions[name]] = def[name];
                    delete def[name];
                }
            });
        }

        function eachProp(def, callback) {
            for (var name in def) {
                if (resolutions.hasOwnProperty(name) && def.hasOwnProperty(name)) {
                    callback(name);
                }
            }
        }
    });
};

;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/*jslint laxbreak:true */

/**
 * Manages transitions between views.
 *
 * @depends path=/resources/scripts/lib/jiverscripts/src/oo/class.js
 * @depends path=/resources/scripts/lib/jiverscripts/src/oo/abstract.js
 */
jive.AbstractFlowController = jive.oo.Class.extend(function(protect) {
    protect.init = function(transitions, initialView) {
        var controller = this;

        this.initialView = initialView;
        this.activeView = initialView;
        this.transitions = transitions;
        this.events = Object.keys(transitions);
        this.views = [initialView].concat(Object.values(transitions)).unique();
        this.resetHistory();

        controller.views.forEach(function(view) {
            controller.events.forEach(function(event) {
                view.addListener(event, function(/* args */) {
                    var args = Array.prototype.slice.call(arguments)
                      , view = controller.transitions[event];

                    controller.transitionTo.apply(controller, [view].concat(args));
                    controller.viewHistory.push({
                        view: view,
                        args: args
                    });
                    controller.activeView = view;
                });
            });

            view.addListener('back', function() {
                controller.viewHistory.pop();

                var prev = controller.viewHistory.last()
                  , view = prev.view
                  , args = prev.args;

                if (controller.transitionBack) {
                    controller.transitionBack.apply(controller, [view].concat(args));
                } else {
                    controller.transitionTo.apply(controller, [view].concat(args));
                }

                controller.activeView = view;
            });
        });
    };

    protect.transitionTo = jive.oo.abstract;

    protect.resetHistory = function() {
        this.viewHistory = [{ view: this.initialView, data: [] }];
    };
});

;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.CreateFlowController=jive.oo.compose(jive.oo.resolve({init:"initFlowController"},jive.AbstractFlowController),jive.oo.resolve({init:"initListView"},jive.Navbar.Menu.AbstractListView)).extend(function(a){a.init=function(b,d,e,c){this.initFlowController(e,c);this.initListView(b,d);this.views.forEach(function(f){f.addListener("browse",function(){jQuery(d).trigger("close")})})};this.render=function(b){this.activeView=this.initialView;this.activeView.render(b);this.setContent(this.activeView.getContent());this.setClass();this.resetHistory()};this.getContent=function(){return this.activeView.getContent()};a.setContent=function(b,c){this.setClass();this._super(b,c)};a.transitionTo=function(c){var e=Array.prototype.slice.call(arguments,1),b=this,d=this.activeView.getClass?this.activeView.getClass():"",g=c.getClass?c.getClass():"";var h=c.render.apply(c,e).addCallback(function(){var i=c.getContent();b.setContent(i,function(){i.find(":input:visible").first().focus()})});var f=e.last();if(e.last()&&e.last().emitSuccess&&e.last().emitError){h.addCallback(f.emitSuccess.bind(f));h.addErrback(f.emitError.bind(f))}};a.setClass=function(){var b=this.$menu,c=this.activeView.getClass?this.activeView.getClass():"";this.views.filter(function(d){return d.getClass||d.getClassToRemove}).forEach(function(e){var d=e.getClassToRemove?e.getClassToRemove():e.getClass;b.removeClass(d)});if(c){b.addClass(c)}}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.TypeChooserView=jive.AbstractView.extend(function(a){var b=jQuery;this.getContent=function(){return this.content};this.getClass=function(){if(this.data&&!this.data.smallView){return"j-choose-type j-large-view"}else{return"j-choose-type j-small-view"}};this.getClassToRemove=function(){return"j-choose-type j-small-view j-large-view"};this.render=function(d){var c=b(jive.nav.menu.create.contentTypes(this.data||d)),f=new jive.conc.Promise(),e=this;e.$sections=c.find(".j-create-menu-section");e.$sections.find("a").click(function(){e.$sections.removeClass("active");var h=b(this).closest("li");var g=(h.attr("id").match(/-(\d+)$/)||[])[1];h.addClass("active");b(".js-create-list").hide();b("#create-list-"+g).show();return false});e.$items=c.filter(".js-create-list");e.$items.find("a").click(function(){var h=b(this).attr("data-content-type"),g=!!b(this).attr("data-upload");e.showSpinner({size:"small",showLabel:false,context:b(this).parent("li")});if(h&&b(this).hasClass("js-createmenu-containerchooser")){e.emitP("contentType",h,g).always(function(){e.hideSpinner()});return false}});e.$items.find("a.quick").click(function(){var h=b(this).attr("data-content-type"),g=b(this).data("quick-create-url");e.emit("quickCreate",h,g);return false});e.flatFind(c,".js-use-small-menu").click(function(g){e.emit("toggleView",true);e.data.smallView=true;g.preventDefault()});e.flatFind(c,".js-use-large-menu").click(function(g){e.emit("toggleView",false);e.data.smallView=false;g.preventDefault()});this.content=c;this.data=this.data||d;f.emitSuccess();return f};a.flatFind=function(d,c){return d.find(c).andSelf().filter(c)}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.ContainerChooserView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Navbar.Menu.Create;this.getContent=function(){return this.content};this.getClass=function(){return"j-choose-container"};this.render=function(){var e=new jive.conc.Promise(),d=this;this.emitP("render").addCallback(function(h){var g,i,j;d.content=c(jive.placepicker.containers(h));d.content.find(".back").one("click",function(k){d.emit("back");k.preventDefault()});d.content.filter(".j-menu-quick-bottomlink").one("click",function(k){d.emit("browse",h);k.preventDefault()});i=d.flatFind(d.content,".j-places-list");var f=d.flatFind(d.content,"input[name=container-filter]");j=new jive.Placepicker.ContainerSearchView(f,i);c(f).placeHeld();d.proxyListener(j,"search");e.emitSuccess()});return e};a.flatFind=function(e,d){return e.find("*").andSelf().filter(d)}});
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.CreateSource=jive.RestService.extend(function(a){a.resourceType=a.pluralizedResourceType="createmenu"});
;
jive.namespace("Placepicker");jive.Placepicker.SuggestedContainersSource=jive.RestService.extend(function(a){a.resourceType="container";a.init=function(b){this._super(b);$j.extend(this.defaultParams,{containerType:b.containerType,containerID:b.containerID});this.RESOURCE_ENDPOINT=jive.rest.url("/containers/suggested")}});
;
jive.namespace("Browse.User");jive.Browse.User.ItemSource=jive.RestService.extend(function(a){a.resourceType="user";this.findAll=function(d){var c=(d.userID)?d.userID:"current";var b=this.RESOURCE_ENDPOINT+"/"+c+"/browse";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:d||{}})};this.findAllOrgChart=function(d){var c=(d.userID)?d.userID:"current";var b=this.RESOURCE_ENDPOINT+"/"+c+"/orgchart";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:d||{}})};this.getDirectReportCount=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/directreports/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.getDirectReports=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/directreports";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.getUserProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b,data:{}})};this.setUserProperty=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c.userID+"/prop/"+c.propName;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c.propValue})}});
;
/*
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={};function E(F){return typeof F==="string"}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H){L=L.replace(h,r)}}O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else{O=M(F!==i?F:p[g][k])}return O}a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else{N=0}if(K.length===2){J=r(K[1]);if(F){J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J}if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else{if($.isArray(H[P])){H[P].push(J)}else{if(H[P]!==i){H[P]=[H[P],J]}else{H[P]=J}}}}else{if(P){H[P]=F?i:""}}});return H};function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else{F=E(F)?F.replace(H?w:x,""):F}return l(F,G)}l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y];function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i}return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i){F=2}var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})}q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H;function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)}if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);
/*
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h;function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e){return false}$(j.start)},teardown:function(){if(e){return false}$(j.stop)}});j=(function(){var m={},r,n,o,q;function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}}m.start=function(){if(r){return}var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else{if(u!==t){i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u}}r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this);
;
(function(){jive.localexchange=jive.localexchange||(function(){var a={};jive.conc.observable(a);return a})()})();
;
jive.namespace("DirectMessaging");jive.DirectMessaging.create=function(){var c=new jive.Browse.User.ItemSource(),b=new jive.DirectMessaging.MessageSource(c),a=new jive.DirectMessaging.CreateMessageView();return new jive.DirectMessaging.Main(b,a)};jive.DirectMessaging.sendMessageToUserIds=function(c){var b=new jive.conc.Promise(),a=jive.DirectMessaging.create();b.addCallback($j.proxy(a.showModal,a));a.addRecipientsById(c,b)};jive.DirectMessaging.isContentTypeEqualTo=function(a){return a+""==="109016030"};
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.Main=jive.Navbar.Menu.Main.extend(function(a){var b=jive.Navbar.Menu.Create;a.init=function(d,e){var c=this;this._super(d,e);this.suggestedContainers=new jive.Placepicker.SuggestedContainersSource({containerType:containerType,containerID:containerID});this.containers=new jive.Placepicker.SearchContainersSource();this.browseContainers=new jive.Placepicker.BrowseContainersSource();this.placePicker=new jive.Placepicker.PlacePickerSource("create",{containerType:containerType,containerID:containerID});this.quickCreateSource=new b.QuickCreateSource();this.userPrefSource=new jive.Browse.User.ItemSource();this.contentTypes={};this.listView.addListener("toggle",function(f){f.addCallback(function(g){c.initializeData(g)})});jive.localexchange.addListener("actions.create",function(f){c.selectedContentType=f.contentType;c.upload=f.upload;c.populate(new jive.conc.Promise()).addCallback(function(h){c.initializeData(h);var g=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:c.selectedContentType,upload:c.upload},c.contentTypes[c.selectedContentType]));g.showPicker();c.invalidate()})})};a.buildListView=function(f,g){var d=new b.TypeChooserView(),e=new b.ContainerChooserView(),h=new b.QuickCreateView(),c=this;c.flowController=new b.CreateFlowController(f,g,{contentType:e,toggleView:d},d);d.addListener("contentType",function(j,i){c.selectedContentType=j;c.upload=i}).addListener("toggleView",function(i){c.userPrefSource.setUserProperty({userID:"current",propName:"CreateMenuService.smallView",propValue:String(i)})});e.addListener("render",function(i){c.suggestedContainers.get(c.selectedContentType).addCallback(function(j){i.emitSuccess(jQuery.extend({upload:c.upload,selectedContentType:c.contentTypes[c.selectedContentType]},j))})});e.addListener("search",function(i,j){c.containers.findAll({query:i,contentType:c.selectedContentType,maxReturned:10}).addCallback(function(k){j.emitSuccess(jQuery.extend({contentType:c.selectedContentType,containerType:containerType,containerID:containerID,upload:c.upload},k))})});e.addListener("browse",function(j){var i=new jive.Placepicker.Main($j.extend({pickerContext:"create",followLinks:true,objectType:c.selectedContentType,containerType:j.containerType,containerID:j.containerID,upload:c.upload},j.selectedContentType));i.showPicker()});d.addListener("quickCreate",function(j,i){c.selectedContentType=j;c.url=i;if(jive.DirectMessaging.isContentTypeEqualTo(j)){c.flowController.close();jive.DirectMessaging.create().showModal()}else{h.render()}});h.addListener("fetch",function(i){c.flowController.close();c.quickCreateSource.fetch(c.url,i)});return c.flowController};a.buildItemSource=function(){return new jive.Navbar.Menu.CreateSource()};a.sourceParams=function(){return{containerType:containerType,containerID:containerID}};a.initializeData=function(d){var c=this;if(d){d.sections.reduce(function(e,f){return e.concat(f.items)},[]).filter(function(e){return e.urlParams&&e.urlParams.contentType}).forEach(function(e){if(e.id===null){delete e.id}c.contentTypes[e.urlParams.contentType]=jQuery.extend({id:e.urlParams.contentType,headingKey:e.headingKey,personalContainerTitleKey:e.personalContainerTitleKey,personalContainerCaptionKey:e.personalContainerCaptionKey,searchPlaceholderKey:e.searchPlaceholderKey},e)})}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.create=="undefined"){jive.nav.menu.create={}}jive.nav.menu.create.contentTypes=function(I,H){var D=H||new soy.StringBuilder();D.append("<nav><ul>");var M=I.sections;var E=M.length;for(var O=0;O<E;O++){var G=M[O];D.append((G.visible)?'<li class="'+((O==0)?"active":"")+' j-create-menu-section" id="create-section-'+soy.$$escapeHtml(O)+'"><a href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(G.name),[]))+"</a></li>":"")}D.append("</ul></nav>");var C=I.sections;var F=C.length;for(var B=0;B<F;B++){var A=C[B];if(A.visible){D.append('<ul id="create-list-',soy.$$escapeHtml(B),'" class="j-icon-list js-create-list" ',(!(B==0))?'style="display: none;"':"",">");var L=A.items;var K=L.length;for(var N=0;N<K;N++){var J=L[N];if(J.visible){jive.nav.menu.create.contentTypeLinkItem(soy.$$augmentData(J,{smallView:I.smallView}),D)}}D.append("</ul>")}}D.append((I.smallView)?'<a href="#" class="toggle j-menu-quick-bottomlink js-use-large-menu">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.use_large_link"),[]))+"</a>":'<a href="#" class="toggle j-menu-quick-bottomlink js-use-small-menu">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.use_small_link"),[]))+"</a>");if(!H){return D.toString()}};jive.nav.menu.create.contentTypeLinkItem=function(A,C){var B=C||new soy.StringBuilder();B.append("<li>");jive.nav.menu.create.contentTypeLink(A,B);B.append("</li>");if(A.uploadable){B.append("<li>");jive.nav.menu.create.contentTypeLink(soy.$$augmentData(A.uploadLink,{upload:true,smallView:A.smallView}),B);B.append("</li>")}if(!C){return B.toString()}};jive.nav.menu.create.contentTypeLink=function(A,C){var B=C||new soy.StringBuilder();if(A.iconCss){B.append('<a href="');jive.nav.menu.create.contentTypeHref(soy.$$augmentData(A,{legacy:((A.linkCss).match(new RegExp("js-legacy-create",""))||[]).length>0}),B);B.append('" class="',soy.$$escapeHtml(A.linkCss),'"',(A.urlParams&&A.urlParams.contentType)?' data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'"':"",(A.upload)?' data-upload="true"':"");if(((A.linkCss).match(new RegExp("quick",""))||[]).length>0){B.append(' data-quick-create-url="');jive.nav.menu.create.contentTypeHref(soy.$$augmentData(A,{legacy:true}),B);B.append('"')}B.append('><span class="',soy.$$escapeHtml(A.iconCss)," jive-icon-",(A.iconSize)?soy.$$escapeHtml(A.iconSize):(A.smallView)?"med":"big",'"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.smallView&&A.smallNameKey?A.smallNameKey:A.nameKey),[])),"</a>")}B.append((!A.smallView&&A.descriptionKey)?"<p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.descriptionKey),[]))+"</p>":"");if(!C){return B.toString()}};jive.nav.menu.create.contentTypeHref=function(A,C){var B=C||new soy.StringBuilder();B.append((A.legacy)?(A.urlParams)?soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(A.urlParams)):soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)):"javascript:void(0)");if(!C){return B.toString()}};jive.nav.menu.create.quick=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-quickcreate"><header><h2 class="js-title">',soy.$$escapeHtml(A.title),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content">',A.body,"</section></div>");if(!C){return B.toString()}}
;
jive.namespace("Navbar.Menu.Create");jive.Navbar.Menu.Create.QuickCreateView=jive.AbstractView.extend(function(a){var b=jQuery;this.render=function(){var d=new jive.conc.Promise();var c=this;c.emitP("fetch").addCallback(function(f){var h=c.separateScripts(f.body),g=h[0],e=h[1],j=(g.match(/data-title\s*=\s*(['"])(.+?)\1/)||[])[2]||"",i;j=b("<div/>",{html:j}).text();i=b(jive.nav.menu.create.quick({title:j,body:g}));i.lightbox_me({closeSelector:".close",destroyOnClose:true,onLoad:function(){i.find("input[type=text]:first").focus();d.emitSuccess()},onClose:function(){i.trigger("lightboxclose");delete c.content}});e();c.content=i});return d}});
;
jive.namespace("Navbar.Menu.Satellite");jive.Navbar.Menu.Satellite.View=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.init=function(d,f,e){var c=this;this._super(d,f,e);c.$menu.find("a.quick").live("click",function(h){var g=b(this).attr("href");c.emit("modalize",g);h.preventDefault()})};this.render=function(c){};a.createSpinner=function(){};a.destroySpinner=function(){}});
;
jive.namespace("Navbar.Menu.Satellite");jive.Navbar.Menu.Satellite.Main=jive.Navbar.Menu.Main.extend(function(a){this.init=function(c,e,d){var b=this;b._super(c,e,d);b.quickCreateView=new jive.Navbar.Menu.Create.QuickCreateView();b.quickCreateSource=new jive.Navbar.Menu.Create.QuickCreateSource();b.listView.addListener("modalize",function(f){b.url=f;b.quickCreateView.render()});b.quickCreateView.addListener("fetch",function(f){b.listView.close();b.quickCreateSource.fetch(b.url,f)})};a.buildListView=function(b,d,c){return new jive.Navbar.Menu.Satellite.View(b,d,c)};a.buildItemSource=function(){return null}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}jive.nav.globalLink=function(A,G){var B=G||new soy.StringBuilder();B.append('<li id="',soy.$$escapeHtml(A.id),'" class="');jive.nav.selectedLink(A,B);B.append(" ",(A.includeCounter&&A.count&&A.count!="0")?"new":""," ",(A.showChildren&&(A.dynamicChildren||A.children&&A.children.length>0))?" navWithMenu":""," ",(A.itemCss)?" "+soy.$$escapeHtml(A.itemCss):"",' j-ui-elem">');if(A.nestedChildren&&(A.children&&A.children.length>0)){B.append("<ul>");var D=A.children;var F=D.length;for(var E=0;E<F;E++){var C=D[E];if(C.visible){jive.nav.globalLink(soy.$$augmentData(C,{selectedLinkID:A.selectedLinkID}),B)}}B.append("</ul>")}else{B.append('<a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.url),'" ',(A.titleKey)?'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.titleKey),[]))+'"':"",' class="',soy.$$escapeHtml(A.linkCss)," ",(A.extraLinkCss)?soy.$$escapeHtml(A.extraLinkCss):"",'"><span class="nav-link ',(A.nameCss)?soy.$$escapeHtml(A.nameCss):"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),"</span>",(A.includeCounter)?'<span class="nav-count-wrapper"><span class="nav-count j-rc5" data-count="'+((A.count)?soy.$$escapeHtml(A.count):"0")+'" '+((A.id=="jive-nav-link-activity"||!A.count||A.count=="0")?'style="display:none"':"")+">"+((A.count)?(A.count>50)?"50+":soy.$$escapeHtml(A.count):"0")+"</span></span>":"","</a>");if(A.showChildren&&(A.dynamicChildren||A.children&&A.children.length>0)){jive.nav.globalLinkSubMenu({id:A.id,links:A.children,menuAppScript:A.menuAppScript,actionPopover:true},B)}}B.append("</li>");if(!G){return B.toString()}};jive.nav.selectedLink=function(A,G){var D=G||new soy.StringBuilder();if(A.id==A.selectedLinkID){D.append("active")}else{if(A.children){var F=A.children;var C=F.length;for(var B=0;B<C;B++){var E=F[B];jive.nav.selectedLink(soy.$$augmentData(E,{selectedLinkID:A.selectedLinkID}),D)}}}if(!G){return D.toString()}};jive.nav.globalLinkSubMenu=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:A.menuAppScript},B);B.append('<span id="',soy.$$escapeHtml(A.id),'-more" class="j-nav-more"><a title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.more"),[])),'" class="j-ui-elem" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.more"),[])),"</a></span>");jive.nav.globalLinkSubLinks({id:A.id,links:A.links,actionPopover:A.actionPopover},B);if(!C){return B.toString()}};jive.nav.globalLinkSubLinks=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="',(A.id)?soy.$$escapeHtml(A.id)+"-menu":"",'" class="j-nav-menu ',(A.actionPopover)?"j-action-popover":"",'" style="display: none;">');if(A.links){jive.nav.menu.generic({links:A.links},B)}B.append("</div>");if(!C){return B.toString()}}
;
jive.namespace("Navbar.Menu.History");jive.Navbar.Menu.History.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){this.render=function(c){var b=$j(jive.nav.menu.history.content(c));this.setContent(b)}});
;
jive.HistorySectionSource=jive.RestService.extend(function(a){a.init=function(b){this.resourceType="section";this.pluralizedResourceType="sections";this.RESOURCE_ENDPOINT=jive.rest.url("/history/"+this.pluralizedResourceType)}});
;
jive.namespace("Navbar.Menu.History");jive.Navbar.Menu.History.Main=jive.Navbar.Menu.Main.extend(function(a){var b=jive.Navbar.Menu.History;this.buildListView=function(c,d){return new b.ListView(c,d)};this.buildItemSource=function(){return new jive.HistorySectionSource()};this.sourceParams=function(){return{numResults:5}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.history=="undefined"){jive.nav.menu.history={}}jive.nav.menu.history.content=function(G,E){var C=E||new soy.StringBuilder();var J=G.sections;var D=J.length;for(var A=0;A<D;A++){var F=J[A];C.append("<h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(F.name),[])),'</h4><ul class="j-icon-list">');var K=F.items;var B=K.length;for(var I=0;I<B;I++){var H=K[I];C.append('<li><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,H.link),'"><span class="',soy.$$escapeHtml(H.iconCss),' jive-icon-sml"></span>',(H.displayName)?soy.$$escapeHtml(H.displayName):H.subject,"</a></li>")}C.append('</ul><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,F.browseURL)),'" class="j-showAll j-menu-quick-bottomlink">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.history."+F.archetype+".link"),[])),"</a>")}C.append((G.sections.length==0)?'<p class="empty font-color-meta">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("userbar.no_history_to_view.text"),[]))+"</p>":"");if(!E){return C.toString()}}
;
jive.namespace("Navbar.Menu.Bookmarks");jive.Navbar.Menu.Bookmarks.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.render=function(e){var c=this;var d=b(jive.nav.menu.bookmarks.content(e));d.find(".j-removeBookmark").click(function(){var f=b(this);var g=f.attr("data-id");c.emitP("delete",g).addCallback(function(){c.removeItem(f)})});c.setContent(d)};this.removeItem=function(e){var c=this;var f=e.closest("ul");var d=e.closest("li");d.fadeOut("fast",function(){d.remove();if(f.is(":empty")){c.render({bookmarks:[]})}})};this.puff=function(){var c=this;this.$button.append(b('<div class="puff j-ui-elem"></div>'));this.$button.find(".puff").fadeIn(200,function(){setTimeout(function(){c.$button.find(".puff").fadeOut(2000)},700)})}});
;
jive.BookmarkSource=jive.RestService.extend(function(a){a.resourceType="bookmark"});
;
jive.namespace("Navbar.Menu.Bookmarks");jive.Navbar.Menu.Bookmarks.Main=jive.Navbar.Menu.Main.extend(function(a){var b=jive.Navbar.Menu.Bookmarks;this.init=function(d,e){this._super(d,e);var c=this;this.listView.addListener("delete",function(g,f){c.itemSource.destroy(g).addCallback(function(){jive.switchboard.emit("bookmark.destroy",jQuery.extend({},{id:g}));f.emitSuccess()})});jive.switchboard.addListener("bookmark.create",function(){c.invalidate();c.listView.puff()});jive.switchboard.addListener("bookmark.destroy",function(){c.invalidate()})};this.buildListView=function(c,d){return new b.ListView(c,d)};this.buildItemSource=function(){return new jive.BookmarkSource()};a.sourceParams=function(){return{filterGroupID:"bookmarksMenu",numResults:10}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.bookmarks=="undefined"){jive.nav.menu.bookmarks={}}jive.nav.menu.bookmarks.content=function(A,G){var B=G||new soy.StringBuilder();B.append("<h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.bookmarks.title"),[])),"</h4>");if(A.items&&A.items.length>0){B.append('<ul class="j-icon-list">');var E=A.items;var F=E.length;for(var C=0;C<F;C++){var D=E[C];if(C<10){jive.nav.menu.bookmarks.item(D,B)}}B.append("</ul>")}else{B.append('<p class="empty font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.no.bookmarks.message"),[])),"<p>")}B.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/bookmarks")),'" class="j-showAll j-menu-quick-bottomlink">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.bookmarks.all.link"),[])),"</a>");if(!G){return B.toString()}};jive.nav.menu.bookmarks.item=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.link),'"><span class="',soy.$$escapeHtml(A.iconCss),' jive-icon-sml"></span>',A.subject,'</a><a href="#" class="j-removeBookmark" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.bookmarks.remove"),[])),'" data-id="',soy.$$escapeHtml(A.id),'"><span class="jive-icon-sml jive-icon-bookmark-ribbon"></span></a></li>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.paginationLinks=function(A,F){var C=F||new soy.StringBuilder();C.append('<div class="j-pagination"',(A.elementID)?'id="'+soy.$$escapeHtml(A.elementID)+'"':"",(A.max<=1&&!A.alwaysShow)?'style="display:none"':"",">");if(A.current>=1){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:1,active:A.current==1}),C)}C.append((A.current>5)?'<span class="ellipsis">&hellip;</span>':"");var B=A.current-3;var E=A.current+4;for(var D=B;D<E;D++){if(D>1&&D<=A.max){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:D,active:A.current==D}),C)}}C.append((A.max>A.current+4)?'<span class="ellipsis">&hellip;</span>':"");if(A.max>A.current+3){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:A.max}),C)}C.append('<span class="j-pagination-prevnext">');if(A.current>1){C.append('<a href="');jive.shared.soy.pageUrl(soy.$$augmentData(A,{page:A.current-1}),C);C.append('" class="j-pagination-prev" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous_page_title"),[])),'" data-start="');jive.shared.soy.pageToStart(soy.$$augmentData(A,{page:A.current-1}),C);C.append('">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[])),"</a>")}else{C.append('<span class="j-pagination-prev j-disabled font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[])),"</span>")}if(A.current<A.max){C.append('<a href="');jive.shared.soy.pageUrl(soy.$$augmentData(A,{page:A.current+1}),C);C.append('" class="j-pagination-next" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next_page_title"),[])),'" data-start="');jive.shared.soy.pageToStart(soy.$$augmentData(A,{page:A.current+1}),C);C.append('">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[])),"</a>")}else{C.append('<span class="j-pagination-next j-disabled font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[])),"</span>")}C.append("</span></div>");if(!F){return C.toString()}};jive.shared.soy.numberedPageLink=function(A,C){var B=C||new soy.StringBuilder();if(A.active){B.append('<a href="');jive.shared.soy.pageUrl(soy.$$augmentData(A,{page:A.number}),B);B.append('" class="j-pagination-current font-color-normal" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.numbered_page_title"),[A.number])),'" data-start="');jive.shared.soy.pageToStart(soy.$$augmentData(A,{page:A.number}),B);B.append('"><strong>',soy.$$escapeHtml(A.number),"</strong></a>")}else{B.append('<a href="');jive.shared.soy.pageUrl(soy.$$augmentData(A,{page:A.number}),B);B.append('" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.numbered_page_title"),[A.number])),'" data-start="');jive.shared.soy.pageToStart(soy.$$augmentData(A,{page:A.number}),B);B.append('">',soy.$$escapeHtml(A.number),"</a>")}if(!C){return B.toString()}};jive.shared.soy.pageUrl=function(A,C){var B=C||new soy.StringBuilder();B.append((A.urlParams)?soy.$$escapeHtml(A.urlPath)+soy.$$escapeHtml((Object.keys(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())).length>0?"?"+jQuery.param(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"")):soy.$$escapeHtml(A.urlPath)+soy.$$escapeHtml((Object.keys((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()).length>0?"?"+jQuery.param((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()):"")));if(!C){return B.toString()}};jive.shared.soy.pageToStart=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml((A.page-1)*A.pageSize));if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.actionLink=function(A,C){var B=C||new soy.StringBuilder();B.append("<a ",(A.id)?'id="'+soy.$$escapeHtml(A.id)+'"':"",' href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(A.urlParams)),'" class="',(A.linkCss)?soy.$$escapeHtml(A.linkCss):"",(A.activeTab)?" j-ui-elem":"",'"',(A.urlParams&&A.urlParams.contentType)?'data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'"':"",(A.urlParams&&A.urlParams.containerType)?'data-container-type="'+soy.$$escapeHtml(A.urlParams.containerType)+'"':"",">",(!A.hideIcon)?'<span class="'+((A.iconCss)?soy.$$escapeHtml(A.iconCss):"")+" jive-icon-"+((A.iconSize)?soy.$$escapeHtml(A.iconSize):"med")+'"></span>':"",(A.subject)?soy.$$escapeHtml(A.subject):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])));if(A.includeCounter){B.append(' <span class="j-js-newCount j-rc5" ',(!A.count||A.count=="0")?'style="display:none"':"",">");jive.shared.soy.newCount({count:A.count},B);B.append("</span>")}B.append("</a>");if(!C){return B.toString()}};jive.shared.soy.newCount=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count&&50<A.count)?"50+":(A.count)?soy.$$escapeHtml(A.count):"0");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}if(typeof jive.nav.menu=="undefined"){jive.nav.menu={}}if(typeof jive.nav.menu.apps=="undefined"){jive.nav.menu.apps={}}if(typeof jive.nav.menu.apps.dashboards=="undefined"){jive.nav.menu.apps.dashboards={}}jive.nav.menu.apps.dashboards.content=function(A,G){var B=G||new soy.StringBuilder();B.append("<ul>");var E=A.links;var F=E.length;for(var D=0;D<F;D++){var C=E[D];B.append('<li><a id="',soy.$$escapeHtml(C.id),'" href="',C.dashboardURL,'">',soy.$$escapeHtml(C.displayName),"</a></li>")}B.append("</ul>");if(!G){return B.toString()}}
;
jive.namespace("Navbar.Menu.Apps.Dashboards");jive.Navbar.Menu.Apps.Dashboards.ListView=jive.Navbar.Menu.AbstractListView.extend(function(a){var b=jQuery;this.render=function(d){var c=b(jive.nav.menu.apps.dashboards.content({links:d}));this.$menu.html(c)};this.toggleButton=function(d){var c=this;if(d>1){c.$button.show()}else{c.$button.hide()}}});
;
jive.AppDashboardSource=jive.RestService.extend(function(a){a.init=function(b){this.resourceType="dashboard";this.pluralizedResourceType="dashboards";this.RESOURCE_ENDPOINT=jive.api.apps(this.pluralizedResourceType)}});
;
jive.namespace("Navbar.Menu.Apps.Dashboards");jive.Navbar.Menu.Apps.Dashboards.Main=jive.Navbar.Menu.Main.extend(function(a){var b=jive.Navbar.Menu.Apps.Dashboards;this.init=function(d,f,e){this._super(d,f,e);var c=this;jive.switchboard.addListener("dashboard.create",function(g){c.listView.toggleButton(g.count);c.invalidate()});jive.switchboard.addListener("dashboard.edit",function(g){c.invalidate()});jive.switchboard.addListener("dashboard.destroy",function(g){c.listView.toggleButton(g.count);c.invalidate()});jive.switchboard.addListener("dashboard.reorder",function(g){c.invalidate()})};this.buildListView=function(c,e,d){return new b.ListView(c,e,d)};this.buildItemSource=function(){return new jive.AppDashboardSource()}});
;
(function(c){function a(d){if(d.attr("title")||typeof(d.attr("original-title"))!="string"){d.attr("original-title",d.attr("title")||"").removeAttr("title")}}function b(e,d){this.$element=c(e);this.options=d;this.enabled=true;a(this.$element)}b.prototype={show:function(){var g=this.getTitle();if(g&&this.enabled){var f=this.tip();f.find(".tipsy-inner")[this.options.html?"html":"text"](g);f[0].className="tipsy";f.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var j=c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var d=f[0].offsetWidth,i=f[0].offsetHeight;var h=(typeof this.options.gravity=="function")?this.options.gravity.call(this.$element[0]):this.options.gravity;var e;switch(h.charAt(0)){case"n":e={top:j.top+j.height+this.options.offset,left:j.left+j.width/2-d/2};break;case"s":e={top:j.top-i-this.options.offset,left:j.left+j.width/2-d/2};break;case"e":e={top:j.top+j.height/2-i/2,left:j.left-d-this.options.offset};break;case"w":e={top:j.top+j.height/2-i/2,left:j.left+j.width+this.options.offset};break}if(h.length==2){if(h.charAt(1)=="w"){e.left=j.left+j.width/2-15}else{e.left=j.left+j.width/2-d+15}}f.css(e).addClass("tipsy-"+h);if(this.options.fade){f.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{f.css({visibility:"visible",opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){c(this).remove()})}else{this.tip().remove()}},getTitle:function(){var f,d=this.$element,e=this.options;a(d);var f,e=this.options;if(typeof e.title=="string"){f=d.attr(e.title=="title"?"original-title":e.title)}else{if(typeof e.title=="function"){f=e.title.call(d[0])}}f=(""+f).replace(/(^\s*|\s*$)/,"");return f||e.fallback},tip:function(){if(!this.$tip){this.$tip=c('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"/></div>')}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};c.fn.tipsy=function(h){if(h===true){return this.data("tipsy")}else{if(typeof h=="string"){return this.data("tipsy")[h]()}}h=c.extend({},c.fn.tipsy.defaults,h);function g(k){var l=c.data(k,"tipsy");if(!l){l=new b(k,c.fn.tipsy.elementOptions(k,h));c.data(k,"tipsy",l)}return l}function j(){var k=g(this);k.hoverState="in";if(h.delayIn==0){k.show()}else{setTimeout(function(){if(k.hoverState=="in"){k.show()}},h.delayIn)}}function f(){var k=g(this);k.hoverState="out";if(h.delayOut==0){k.hide()}else{setTimeout(function(){if(k.hoverState=="out"){k.hide()}},h.delayOut)}}if(!h.live){this.each(function(){g(this)})}if(h.trigger!="manual"){var d=h.live?"live":"bind",i=h.trigger=="hover"?"mouseenter":"focus",e=h.trigger=="hover"?"mouseleave":"blur";this[d](i,j)[d](e,f)}return this};c.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover"};c.fn.tipsy.elementOptions=function(e,d){return c.metadata?c.extend({},d,c(e).metadata()):d};c.fn.tipsy.autoNS=function(){return c(this).offset().top>(c(document).scrollTop()+c(window).height()/2)?"s":"n"};c.fn.tipsy.autoWE=function(){return c(this).offset().left>(c(document).scrollLeft()+c(window).width()/2)?"e":"w"}})(jQuery);
;
jive.namespace("ActivityStream");jive.ActivityStream.TabView=jive.AbstractView.extend(function(a){this.init=function(b){this._super(b);this.streamType=b.streamType;this.streamTypeID=b.streamTypeID;this.count=0};this.deselect=function(){this.getContent().removeClass("j-tab-selected")};this.select=function(){this.getContent().removeClass("j-tab-selected");this.getContent().addClass("j-tab-selected")}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.formwaiting=="undefined"){jive.shared.formwaiting={}}jive.shared.formwaiting.formWaitingOverlay=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="',soy.$$escapeHtml(A.bgCssClass),'"></div></div>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.carousel=="undefined"){jive.eae.carousel={}}jive.eae.carousel.eaeAvatarCarousel=function(A,G){var C=G||new soy.StringBuilder();C.append('<span class="j-act-carousel-list">');if(A.streamType!="inbox"){var E=A.activityList;var F=E.length;for(var B=0;B<F;B++){var D=E[B];if(!(B==0)&&(!D.parentActivity||D.content.typeTask)&&(!A.maxItems||B<A.maxItems)){jive.eae.carousel.eaeAvatarCarouselItem({content:D.content,user:D.activityUser},C)}}if(A.more){jive.eae.carousel.carouselEllipsis(null,C)}}C.append("</span>");if(!G){return C.toString()}};jive.eae.carousel.carouselEllipsis=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-ellipsis j-js-carousel-item">...</span>');if(!C){return B.toString()}};jive.eae.carousel.eaeAvatarCarouselItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-js-carousel-item j-js-act-tooltip-user" title="',soy.$$escapeHtml(A.user.displayName),'" id="carouselItem_',soy.$$escapeHtml(A.content.domIDPostfix),'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:19,hideHeight:true,hideLink:true,storeSizeData:true}),B);B.append("</span>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.wall=="undefined"){jive.wall={}}jive.wall.renderStatusSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-successful-post clearfix"><h3 class="font-color-okay">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status.post.success.title"),[])),'</h3><a href="javascript:void(0);" class="j-success-post-dismiss close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status.post.success.dismiss"),[])),"</a>");jive.wall.renderActivityStatus({entry:A.entry},B);jive.statusinput.attachments.renderAttachments({entry:A.entry},B);B.append("</div>");if(!C){return B.toString()}};jive.wall.renderActivityStatus=function(A,C){var B=C||new soy.StringBuilder();B.append(A.entry.message);if(!C){return B.toString()}};jive.wall.commentForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="comment-form clearfix">');if(A.canComment){jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:30,useLinks:true,showHover:true}),B);B.append('<div class="jive-comment-arrow"></div><div class="jive-comment-content">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="s-c-form-',soy.$$escapeHtml(A.statusID),'" name="',soy.$$escapeHtml(A.statusID),'" data-status-id="',soy.$$escapeHtml(A.statusID),'" class="j-form j-mb-comment-form js-mb-comment-form">');jive.wall.statusInput({statusInputIdPostfix:A.statusID},B);B.append('<input type="hidden" name="imageURL" />');jive.wall.statusInputErrorWarnBox(null,B);B.append('<div class="j-status-input-actions j-act-comment-actions clearfix"><input type="button"  class="j-comment-submit j-btn-global j-btn-callout" id="',soy.$$escapeHtml(A.statusID),'" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.button.comment.label"),[])),'" />');jive.wall.statusInputActionContainer({displayImageBtn:false,canCreateImage:A.canCreateImage,canCreateVideo:false,repost:false,canAtMention:A.canAtMention},B);B.append("</div></form></div>")}B.append("</li>");if(!C){return B.toString()}};jive.wall.repostForm=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-repost-form jive-form-container clearfix">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="s-r-form-',soy.$$escapeHtml(A.statusID),'" name="',soy.$$escapeHtml(A.statusID),'" data-status-id="',soy.$$escapeHtml(A.statusID),'" class="js-mb-repost-form">');jive.wall.statusInput({statusInputIdPostfix:"s-r-input-"+soy.$$escapeHtml(A.statusID),messageCSSClasses:"j-eae-txt-area"},B);B.append('<input type="hidden" name="imageURL" />');jive.wall.statusInputErrorWarnBox(null,B);B.append('</form><div class="j-status-input-actions j-act-comment-actions clearfix">');jive.wall.statusInputActionContainer({displayImageBtn:true,canCreateImage:A.canCreateImage,canCreateVideo:true,repost:true,statusID:A.statusID,canAtMention:A.canAtMention},B);B.append("</div></div>");if(!C){return B.toString()}};jive.wall.statusInput=function(A,C){var B=C||new soy.StringBuilder();B.append((A.immediatelyFocus)?'<script type="text/javascript">$j(function(){jive.MicroBlogging.StatusInput.setupLiveFocusHandler(\'message-'+soy.$$escapeHtml(A.statusInputIdPostfix)+"'); jive.MicroBlogging.StatusInput.focus('message-"+soy.$$escapeHtml(A.statusInputIdPostfix)+"');});<\/script>":"",'<div id="statusInputs-',soy.$$escapeHtml(A.statusInputIdPostfix),'" class="j-mb-entry"><div class="j-rc4 jive-statusinput-default font-color-meta  jive-statusinput ',(A.defaultTxtCSSClasses)?A.defaultTxtCSSClasses:"jive-form-element-text",' jive-js-statusinput-default">',(A.defaultTxt)?A.defaultTxt:"",'</div><div id="message-',soy.$$escapeHtml(A.statusInputIdPostfix),'" class="j-rc4 jive-js-statusinput ',(A.messageCSSClasses)?A.messageCSSClasses:"jive-statusinput jive-form-element-text",'" style="position:relative;"></div></div>');if(!C){return B.toString()}};jive.wall.statusInputNotificationBoxes=function(A,C){var B=C||new soy.StringBuilder();jive.wall.statusInputNotificationBox({cssClass:"jive-info-box"},B);jive.wall.statusInputNotificationBox({cssClass:"jive-warn-box"},B);jive.wall.statusInputNotificationBox({cssClass:"jive-error-box"},B);if(!C){return B.toString()}};jive.wall.statusInputNotificationBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="',soy.$$escapeHtml(A.cssClass),'" style="display:none"></div>');if(!C){return B.toString()}};jive.wall.charLenErrors=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-icon-sml jive-icon-',(A.error)?"redalert":"warn",'"></span>',(A.error)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.chars.over"),[A.numChars])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.chars.remaining"),[A.numChars])));if(!C){return B.toString()}};jive.wall.submitErrors=function(A,C){var B=C||new soy.StringBuilder();B.append((A.key=="over")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.character.limit.over"),[])):(A.key=="none")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.character.limit.none"),[])):"");if(!C){return B.toString()}};jive.wall.statusInputErrorWarnBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-wall-error" style="display:none"><strong>');if(jive.i18n.i18nText(jive.i18n.getMsg("we.form.character.limit.over.many"),[])==1){jive.shared.soy.i18nHelper({i18nKey:"we.form.character.limit.over.one",arg0:'<span class="j-number-over"></span>',noAutoEscape:true},B)}else{jive.shared.soy.i18nHelper({i18nKey:"we.form.character.limit.over.many",arg0:'<span class="j-number-over"></span>',noAutoEscape:true},B)}B.append('</strong></span><span class="j-wall-warn" style="display:none"><strong>');jive.shared.soy.i18nHelper({i18nKey:"we.form.character.limit.left",arg0:'<span class="j-number-left"></span>',noAutoEscape:true},B);B.append('</strong></span><span class="jive-js-error-general j-mb-message j-rc3" style="display:none"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.statusInput.error"),[])),"</strong></span>");if(!C){return B.toString()}};jive.wall.statusInputActionContainer=function(A,C){var B=C||new soy.StringBuilder();B.append((A.canCreateImage&&A.displayImageBtn)?'<div class="jive-js-image-container j-attachment-container clearfix"></div>':"",(A.repost)?'<input type="button" class="j-repost-submit j-btn-callout" data-statusid="'+soy.$$escapeHtml(A.statusID)+'" value="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.repost"),[]))+'"><input type="button" class="close" value="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+'">':"",(A.canCreateImage&&A.displayImageBtn)?'<a href="javascript:void(0);" class="j-btn-global j-wall-meta-image jive-js-imgattach-button" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[]))+'"><span class="jive-icon-med jive-icon-photo"></span></a>':"",(A.canAtMention)?'<a href="javascript:void(0);" class="jive-js-mention-button j-wall-meta-reference j-btn-global" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[]))+'"><span class="jive-icon-med jive-icon-mention"></span></a>':"",(A.canCreateImage)?'<div class="j-wall-meta-image-container j-attach-tab j-rc4"><form method="post" enctype="multipart/form-data"><input type="file" name="image" /><input type="hidden" name="imageURL" /></form></div>':"",(A.canCreateVideo)?'<div class="j-wall-meta-video-container j-attach-tab j-rc4"><form method="post"><input type="file" name="image" /><input type="hidden" name="imageURL" /></form></div>':"");if(!C){return B.toString()}};jive.wall.deleteCommentConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal jive-modal-narrow" id="jive-modal-delete-we-comment"><header><h2 class="jive-modal-title jive-modal-delete-we-comment">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.delete.comment"),[])),'</h2></header><div class="jive-modal-content jive-modal-delete-we-comment clearfix"><div class="jive-warn-box"><div><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.delete.comment.confirm_del"),[])),'</div></div><div class="jive-form-buttons"><input id="we-comment-delete-submit-button" type="button" class="jive-modal-close j-btn-callout" name="delete" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.delete.comment.button"),[])),'"><input id="we-comment-delete-close-button" type="button" class="jive-modal-close close" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'"></div></div></div>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.dropdown=="undefined"){jive.statusinput.dropdown={}}jive.statusinput.dropdown.ddLoading=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div><div class="loading"></div></div>');if(!C){return B.toString()}};jive.statusinput.dropdown.ddSearchContent=function(A,C){var B=C||new soy.StringBuilder();jive.statusinput.dropdown.ddOutputEntries(A,B);B.append('<p class="j-search-hint">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.search.hint"),["Hint: Use an underscore to search multiple words"])),"</p>");if(!C){return B.toString()}};jive.statusinput.dropdown.ddSearch=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div>');jive.statusinput.dropdown.ddSearchContent(A,B);B.append("</div>");if(!C){return B.toString()}};jive.statusinput.dropdown.ddTagsContent=function(A,C){var B=C||new soy.StringBuilder();if(A.currentTagText){jive.statusinput.dropdown.ddOutputTags(soy.$$augmentData(A,{shouldCreateTag:soy.$$escapeHtml(A.shouldCreateTag),creationHTML:(A.allowTagCreation)?'<a class="jive-js-status-input-selectable jive-js-status-input-create" href="javascript:void(0)" data-id="'+soy.$$escapeHtml(A.currentTagText)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.tags.create.title"),["create #"]))+soy.$$escapeHtml(A.currentTagText)+"</a>":""}),B)}else{B.append('<p class="font-color-meta j-autocomplete-tag-prompt">',(A.allowTagCreation)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.tags.title"),["Continue typing to search tags or create new tags"])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.tags.title_no_create"),["Continue typing to search tags"])),"</p>")}if(!C){return B.toString()}};jive.statusinput.dropdown.ddTags=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div>');jive.statusinput.dropdown.ddTagsContent(A,B);B.append("</div>");if(!C){return B.toString()}};jive.statusinput.dropdown.ddFriendsContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.friends.title"),["Friends"])),'</p><ul class="j-autocomplete-nav clearfix"><li>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.friends.link.text"),["Friends"])),'</li><li><a class="jive-js-status-input-selectable jive-js-history" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.history.link.text"),["History"])),"</a></li></ul>");jive.statusinput.dropdown.ddOutputEntries(soy.$$augmentData(A,{emptyEntriesStr:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.self.nofriends.label"),["No friends"]))}),B);if(!C){return B.toString()}};jive.statusinput.dropdown.ddFriends=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div>');jive.statusinput.dropdown.ddFriendsContent(A,B);B.append("</div>");if(!C){return B.toString()}};jive.statusinput.dropdown.ddHistoryContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.history.title"),["History"])),'</p><ul class="j-autocomplete-nav clearfix"><li><a class="jive-js-status-input-selectable jive-js-friends" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.friends.link.text"),["Friends"])),"</a></li><li>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("wallentry.status_input.dd.history.link.text"),["History"])),"</li></ul>");jive.statusinput.dropdown.ddOutputEntries(soy.$$augmentData(A,{emptyEntriesStr:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("userbar.no_history_to_view.text"),["No history"]))}),B);if(!C){return B.toString()}};jive.statusinput.dropdown.ddHistory=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div>');jive.statusinput.dropdown.ddHistoryContent(A,B);B.append("</div>");if(!C){return B.toString()}};jive.statusinput.dropdown.ddOutputEntries=function(C,G){var F=G||new soy.StringBuilder();F.append('<ul class="j-autocomplete-results">');var B=C.entries;var D=B.length;if(D>0){for(var E=0;E<D;E++){var A=B[E];F.append("<li>",A.html,"</li>")}}else{F.append((C.emptyEntriesHTML)?"<li>"+C.emptyEntriesHTML+"</li>":soy.$$escapeHtml(C.emptyEntriesStr))}F.append("</ul>");if(!G){return F.toString()}};jive.statusinput.dropdown.ddOutputTags=function(C,G){var F=G||new soy.StringBuilder();F.append('<ul class="j-autocomplete-results">',(C.shouldCreateTag=="true")?"<li>"+C.creationHTML+"</li>":"");var B=C.entries;var D=B.length;for(var E=0;E<D;E++){var A=B[E];F.append("<li>",A.html,"</li>")}F.append("</ul>");if(!G){return F.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.attachments=="undefined"){jive.statusinput.attachments={}}jive.statusinput.attachments.renderAttachments=function(D,G){var E=G||new soy.StringBuilder();if(D.entry.meta){E.append('<a class="j-attachment-arrow j-attachment-arrow-left clearfix" href="javascript:void(0);"><span class="jive-icon-link-back"></span></a><ul class="j-attached-items clearfix">');var C=D.entry.meta;var F=C.length;for(var B=0;B<F;B++){var A=C[B];jive.statusinput.attachments.renderAttachment(soy.$$augmentData(D,{attachment:A,entry:D.entry,removable:D.removable}),E)}E.append((D.removable)?"<li class='j-attached-loading'></li>":"",'</ul><a class="j-attachment-arrow j-attachment-arrow-right clearfix" href="javascript:void(0);"><span class="jive-icon-link-forward"></span></a>')}if(!G){return E.toString()}};jive.statusinput.attachments.renderAttachment=function(A,C){var B=C||new soy.StringBuilder();switch(A.attachment.objectType){case 102:jive.statusinput.attachments.renderCommonAttachment(soy.$$augmentData(A,{linkUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.entry.jiveObjectURL),containerClass:"j-attached-document"}),B);break;case 111:jive.statusinput.attachments.renderCommonAttachment(soy.$$augmentData(A,{linkUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.fullImageUrl),containerClass:"j-attached-image"}),B);break;case 801:B.append('<li class="j-attached-video" ',(A.attachment.id)?'id="'+A.attachment.id+'"':"",'><a rel="fb" href="',A.attachment.properties.videoURL,'" style="width: ',soy.$$escapeHtml(A.attachment.properties.thumbnailWidth),"px; height: ",soy.$$escapeHtml(A.attachment.properties.thumbnailHeight),'px" class="j-attach-anchor j-attach-video"><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.properties.thumbnailURL),'" width="',soy.$$escapeHtml(A.attachment.properties.thumbnailWidth),'" height="',soy.$$escapeHtml(A.attachment.properties.thumbnailHeight),'" alt="" /><span class="j-icon-play" style="display: none; position: absolute; left: ',soy.$$escapeHtml((A.attachment.properties.thumbnailWidth+12-40)/2),'px; top: 20px; "></span></a>',(A.removable)?'<a href="javascript:void(0);" class="j-remove-attachment">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[]))+"</a>":"","</li>");break}B.append('<script type="text/javascript">$j(function() {jive.bindLightboxMedia();});<\/script>');if(!C){return B.toString()}};jive.statusinput.attachments.renderCommonAttachment=function(A,C){var B=C||new soy.StringBuilder();B.append("<li",(A.attachment.id)?' id="'+A.attachment.id+'"':"",(A.containerClass)?' class="'+soy.$$escapeHtml(A.containerClass)+'"':"",'><a href="',soy.$$escapeHtml(A.linkUrl),'" ',(A.attachment.originalURL)?'jiveOriginalURL="'+soy.$$escapeHtml(A.attachment.originalURL)+'"':"",'style="display: block;',(A.attachment.thumbnailWidth)?"width: "+soy.$$escapeHtml(A.attachment.thumbnailWidth)+"px;":"",(A.attachment.thumbnailHeight)?"height:"+soy.$$escapeHtml(A.attachment.thumbnailHeight)+"px;":"",'" class="j-attach-anchor"><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.imageThumbnailUrl),'" ',(A.attachment.thumbnailWidth)?'width="'+soy.$$escapeHtml(A.attachment.thumbnailWidth)+'"':""," ",(A.attachment.thumbnailHeight)?'height="'+soy.$$escapeHtml(A.attachment.thumbnailHeight)+'"':"",' alt=""/></a>',(A.removable)?'<a href="javascript:void(0);" class="j-remove-attachment">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[]))+"</a>":"","</li>");if(!C){return B.toString()}}
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MicroBloggingSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="wall";a.pluralizedResourceType=a.resourceType;this.publishEntry=function(b,d){var c=this.RESOURCE_ENDPOINT+"/"+b.objectType+"/"+b.objectID;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.createDraft=function(b,d){var c=this.RESOURCE_ENDPOINT+"/"+b.objectType+"/"+b.objectID+"/draft";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.repost=function(b,d){var c=this.RESOURCE_ENDPOINT+"/repost/"+b.wallEntryID;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:d},d)};this.createRepostDraft=function(b,d){var c=this.RESOURCE_ENDPOINT+"/repost/"+b.wallEntryID+"/draft";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)}});
;
jive.action=(function(){var a=_jive_base_url+"/";return{url:function(b,c){var d="";Object.keys(c).forEach(function(e){d+=e+"="+c[e]+"&"});if(d.length>0){d="?"+d.slice(0,d.length-1)}return a+b+".jspa"+d}}})();
;
jive.MetaSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="meta";a.pluralizedResourceType=a.resourceType;this.createLink=function(d){var e=new jive.conc.Promise(),b=this,c={url:jive.action.url("link-meta",{url:encodeURIComponent(d)}),dataType:"html",success:function(f){console.log("jive.MetaSource.createLink SUCCESS "+f);e.emitSuccess(f)},error:function(f){console.log("jive.MetaSource.createLink ERROR "+f);b.errorCallback(e,this.errorSaving)}};$j.ajax(c);return e};this.createVideo=function(d,g){var f=new jive.conc.Promise(),b=this,e={contentObjectType:d.objectType,object:d.objectId,videoURL:encodeURIComponent(g)},c={url:jive.action.url("video-link-meta",e),dataType:"json",success:function(h){console.log("jive.MetaSource.createVideo SUCCESS "+h);f.emitSuccess(h)},error:function(h){console.log("jive.MetaSource.createVideo ERROR "+h);b.errorCallback(f,this.errorSaving)}};$j.ajax(c);return f};this.normalizeVideoData=function(b){if(b.meta&&b.meta.length>0){b.meta.forEach(function(d){var c=d.properties;if(c!=undefined){var g={};if(c.entry!=undefined&&c.entry.length!=0){var f=c.entry;for(var e=0;e<f.length;e++){g[f[e].key]=f[e].value}}d.properties=g}})}else{b.meta=[]}return b};this.createImage=function(f,d,b,k){var h=this,c=this.RESOURCE_ENDPOINT+"/imageJackson/"+f.objectType+"/"+f.objectId+"/attachment",g="",j=new jive.conc.Promise();if(b){console.log("Got image url");g=encodeURIComponent(d);c=this.RESOURCE_ENDPOINT+"/imageJackson/"+f.objectType+"/"+f.objectId}var i={url:c,dataType:"xml",data:{imageURL:g},contentType:"text/xml; charset=utf-8",complete:function(m,l){if($j(m.responseXML).find("meta id").length>0){h.fetch($j(m.responseXML).find("meta id").text()).addCallback(function(p){j.emitSuccess(p)}).addErrback(function(q,p){h.errorCallback(j,this.errorSaving)})}else{var o=$j(m.responseXML).find("code").text();var n=$j(m.responseXML).find("message").text();j.emitError(n,o)}},error:function(n,p,o){console.log("Error jive.Wall.ImageMetaSource create"+n+", "+p+", "+o);var m=$j(n.responseXML).find("code").text();var l=$j(n.responseXML).find("message").text();h.errorCallback(j,this.errorSaving)}};if(b){var e=k.find("input[name=image]");if(e.length>0){e.val("")}}else{k.find("input[name=imageURL]").val("")}k.ajaxSubmit(i);return j};this.fetch=function(c){var b=this.RESOURCE_ENDPOINT+"/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})};this.remove=function(c){var b=this.RESOURCE_ENDPOINT+"/remove/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.CommonController=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(c){if(!c){c={}}this.microbloggingService=new jive.MicroBlogging.MicroBloggingSource();this.metaService=new jive.MetaSource();this.draftWallEntry=null;this.viewOptions=c.viewOptions||{};this.initMBView();this.manuallyRenderView=c.manuallyRenderView||false;this.submitURLParams={objectType:14,objectID:1};var b=this;this.microbloggingView.addListener("submit",function(d,e){b.submitHandler(d,e)}).addListener("linkURLMatch",function(d,e){console.log("linkURL match");b.metaService.createLink(d).addCallback(function(f){e.emitSuccess(f,d)}).addErrback(function(g,f){e.emitError(g,f)})}).addListener("imageURLMatch",function(f,d,e,h){b.draftData=e;function g(){var i=b.metaService.createImage(b.draftWallEntry.wallentry,f,f!=null,d);i.addCallback(function(j){h.emitSuccess(j,f)}).addErrback(function(k,j){h.emitError(k,j)})}if(b.draftWallEntry==null){b.createDraft(g,h)}else{g()}}).addListener("removeImage",function(e,d){b.metaService.remove(e).addCallback(function(f){d.emitSuccess(f)}).addErrback(function(g,f){d.emitError(g,f)})}).addListener("youtubeURLMatch",function(f,e,g){b.draftData=e;function d(){b.metaService.createVideo(b.draftWallEntry.wallentry,f).addCallback(function(h){b.metaService.fetch(h.id).addCallback(function(i){if(i.meta.length>0){g.emitSuccess(b.metaService.normalizeVideoData(i),f)}else{g.emitError(message,status)}}).addErrback(function(j,i){g.emitError(j,i)})}).addErrback(function(i,h){g.emitError(i,h)})}if(b.draftWallEntry==null){b.createDraft(d,g)}else{d()}}).addListener("cancel",function(){b.emit("cancel")});if(!this.manuallyRenderView){this.renderView()}};a.submitHandler=function(c,d){var b;if(this.draftWallEntry!=null){b=$j.extend(true,{},this.draftWallEntry,c)}else{b=c}this.submitServiceCall(b,d)};a.submitServiceCall=function(c,d){var b=this;this.microbloggingService.publishEntry(this.submitURLParams,c).addCallback(function(e){b.submitSuccessCallback(e,d)}).addErrback(function(f,e){b.submitErrCallback(f,e,d)})};a.submitSuccessCallback=function(b,c){this.draftWallEntry=null;b.wallentry=this.metaService.normalizeVideoData(b.wallentry);c.emitSuccess(b);this.emitP("submitSuccess",b)};a.submitErrCallback=function(c,b,d){d.emitError(c,b);this.emitP("submitError",c,b)};a.createDraft=function(d,c){var b=this;this.microbloggingService.createDraft({objectType:14,objectID:1},{wallentry:{}}).addCallback(function(e){b.draftWallEntry=e;d()}).addErrback(function(f,e){c.emitError(f,e)})};a.initMBView=function(){throw"initMBView method is abstract. Need to implmenet in subclass"};this.renderView=function(){this.microbloggingView.postRender()};this.getMicrobloggingView=function(){return this.microbloggingView}});
;
if(!jive.Selection){jive.Selection=$Class.extend({init:function(b,a,e,d,c){this._supportsDomRange=$j.isFunction(window.getSelection);this._selection=jive.Selection.getSelection(d,c);if(b!=null){if(this._supportsDomRange){if(this._selection.rangeCount==0){this._selection.addRange(jive.Selection.createRangeAtNode(b,c))}}this._doc=c;this._win=d;this._range=this.getRangeAt(0);this.moveToNodeAndCollapse(b,a,e)}else{this._range=this.getRangeAt(0)}},getSelection:function(){return this._selection},getRangeAt:function(a){return jive.Selection.getRangeAt(this._selection,a,this._doc)},makeRangeTheSelection:function(){if(!this._supportsDomRange){this._selection.empty();this._range.select()}else{if(this._selection.rangeCount>0){this._selection.removeAllRanges()}this._selection.addRange(this._range)}},rangeInsertNode:function(d){if(!this._supportsDomRange){var a=this.getRangeStartContainer();var c=this.getRangeStartOffset();var b=a.parentNode;if(a.nodeType==3){var g=new String(a.nodeValue);var f=document.createTextNode(g.substring(0,c));var e=document.createTextNode(g.substring(c));b.insertBefore(f,a);b.insertBefore(d,a.nextSibling);b.insertBefore(e,d.nextSibling);b.removeChild(a);this.moveToNodeAndCollapse(d,true)}else{b.insertBefore(d,a.nextSibling)}}else{this._range.insertNode(d)}},setRangeStart:function(b,a){if(!this._supportsDomRange){this._setRangeStartEndHelper(b,a,false)}else{this._range.setStart(b,a)}},setRangeEnd:function(a,b){if(!this._supportsDomRange){this._setRangeStartEndHelper(a,b,true)}else{this._range.setEnd(a,b)}},getRangeStartContainer:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(true).container}else{return this._range.startContainer}},getRangeEndContainer:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(false).container}else{return this._range.endContainer}},getRangeStartOffset:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(true).offset}else{return this._range.startOffset}},getRangeEndOffset:function(){if(!this._supportsDomRange){return this._getIERangeContainerHelper(false).offset}else{return this._range.endOffset}},getWordAtRange:function(){return this._wordAtRangeCommon()},replaceWordAtRange:function(c,b,a){return this._wordAtRangeCommon(c,b,a)},_wordAtRangeCommon:function(e,a,b){var q=this.getRangeStartContainer();var k=jive.Selection.replaceNbspWithWhitespace(q.nodeValue);if(this.alignRangeWithNearestTextNode(q)){q=this.getRangeStartContainer();k=q.nodeValue}if(e==null){if(this._normalizeTextNode(q,this.getRangeStartOffset())){k=q.nodeValue;this._range.collapse(true);this.makeRangeTheSelection()}}var i=this.getRangeStartOffset();var o=new String(k).substring(0,i);var g=new String(k).substring(i);var f=/\S+$/,p=/^\S+/;if(e!=null&&e.length>0){a=a||"";b=b||{tag:"txt"};var l=a+e;o=o.replace(f,"");g=g.replace(p,"");if((g==null||g.length==0)&&b.tag!="txt"){g=" "}var c;if(b.tag=="txt"){c=document.createTextNode(l)}else{c=document.createElement(b.tag);for(var n in b.attrs){c.setAttribute(n,b.attrs[n])}c.innerHTML=l}var h=q.parentNode;if(o!=null&&o.length>0){h.insertBefore(document.createTextNode(o),q)}h.insertBefore(c,q);var j=null;if(g!=null&&g.length>0){j=document.createTextNode(g);h.insertBefore(j,q)}h.removeChild(q);var d=j==null?c:j;this.moveToNodeAndCollapse(d);return c}else{o=o.match(f);g=g.match(p);var m=(o==null?"":o)+(g==null?"":g);return m}},_normalizeTextNode:function(d,h){h=h||0;if(d==null||!d.nodeValue||jive.Selection.replaceNbspWithWhitespace(d.nodeValue).search(/\S+/)==-1){return false}var c="";var a=d.parentNode;function g(k){var j=k?d.previousSibling:d.nextSibling;while(j!=null&&j.nodeType==3&&jive.Selection.replaceNbspWithWhitespace(j.nodeValue).search(/\S+/)>-1){if(k){c=j.nodeValue+c}else{c+=j.nodeValue}var i=k?j.previousSibling:j.nextSibling;a.removeChild(j);j=i}}g(true);var f=c.length+h;c+=d.nodeValue;g(false);if(c!=d.nodeValue){if(!this._supportsDomRange){var e=this._range.duplicate();var b=document.createTextNode(c);a.replaceChild(b,d);this._range=e.duplicate();this._range.moveStart("character",f)}else{d.nodeValue=c;this.setRangeStart(d,f)}this._range.collapse(true);this.makeRangeTheSelection();return true}return false},insertNodeAtRange:function(b,c){var a=typeof b=="string"?document.createTextNode(b):b;c=c||0;if(this._supportsDomRange){this._range.collapse(true)}this.rangeInsertNode(a);if(a.nodeType==3){if(!this._normalizeTextNode(a,c)){if(!this._supportsDomRange){this._range.moveStart("character",c);this._range.collapse(true)}else{this.setRangeStart(b,c)}this.makeRangeTheSelection()}}},selectNode:function(a){this._range.selectNode(a)},collapseRange:function(a){this._range.collapse(!!a)},selectNodeContents:function(a){if(!this._supportsDomRange){var d=this.getRangeStartOffset()*-1;var c=this._range.duplicate();c.moveToElementText(c.parentElement());c.setEndPoint("StartToEnd",this._range);var b=c.text.length;this._range.moveStart("character",d);this._range.moveEnd("character",b);this._range.select()}else{this.getSelection().selectAllChildren(a)}},moveToNodeAndCollapse:function(b,a,c){if(a){this.setRangeStart(b,c)}else{this.setRangeEnd(b,c)}this._range.collapse(a);this.makeRangeTheSelection()},alignRangeWithNearestTextNode:function(a){a=a||this.getRangeStartContainer();if(a.nodeType!=3){var f=$j(a).contents();if(f.length>0){var c=this.getRangeStartOffset();var e=f.get(c);if(e.nodeType==3){this.init(d,false);return true}else{return this.alignRangeWithNearestTextNode(e)}}else{f=$j(a).parent().contents();var g=f.index(a);var b=false;var d=f.filter(function(h){return h<g&&this.nodeType==3}).last();if(d.length==0){d=f.filter(function(h){return h>g&&this.nodeType==3}).first();b=true}if(d.length>0){this.init(d[0],b,b?0:d[0].length);return true}else{if(f.length){d=f.first();this.init(d[0],b,b?0:d[0].length);return true}else{throw ("alignRangeWithNearestTextNode Failed to find a text node to align with.")}}}}return false},_getIERangeContainerHelper:function(c){var g=c?this._getIERangeStartOffsetHelper():this._getIERangeEndOffsetHelper();var a=this._range.parentElement();var e=0;var f=a.childNodes;if(f.length==0){return a}for(var d=0;d<f.length;d++){var h=f[d];var b=$j(h).text().length;if(b==0&&h.nodeName=="BR"){b=2}if(g<=e+b){return{container:h,offset:g-e}}else{e+=b}}return{container:h,offset:e};throw ("Error jive.selection._getIERangeContainerHelper could not find range container")},_getIERangeStartOffsetHelper:function(){var a=this._range.duplicate();a.moveToElementText(a.parentElement());a.setEndPoint("EndToStart",this._range);return a.text.length},_getIERangeEndOffsetHelper:function(){return this._range.text.length+this._getIERangeStartOffsetHelper()},_setRangeStartEndHelper:function(h,k,g){var n=h.nodeType==3;var l=n?h.parentNode:h;var i=this._range.duplicate();i.moveToElementText(l);k=k||0;var c=$j(h).parent().contents();var p=c.index(h);var a;if(n){a=c.slice(0,p).text().length+k}else{a=c.slice(0,p+k).text().length}i.moveStart("character",a);var f;var e;if(n){f=p+1;e=jive.Selection.replaceNbspWithWhitespace($j(h).text()).substring(k)}else{f=p+k+1;e=jive.Selection.replaceNbspWithWhitespace(c.slice(p+k))}var o=new RegExp("(.*)"+e);function j(){return new String(i.text).replace(new RegExp(c.slice(f).text()+"$"),"")}var b=j();var d=0;while(b!=e){b=j();var m=b.match(o);if(m!=null&&m.length==2){i.moveStart("character",m[1].length)}else{throw ("jive.Selection _setRangeStartEndHelper failed to setRange Start or End")}d++;if(d==10){throw ("jive.Selection _setRangeStartEndHelper failed to setRange Start or End")}}if(g){this._range.setEndPoint("EndToStart",i)}else{this._range.setEndPoint("StartToStart",i)}}});jive.Selection.getSelection=function(b,a){if(!b){b=window}if(!a){a=document}if(b.getSelection){return b.getSelection()}else{if(a.all){return a.selection}else{if(a.getSelection){return a.getSelection()}}}throw ("jive.Selection.getSelector Error: unable to obtain seleciton object")};jive.Selection.getRangeAt=function(b,a,c){if(!c){c=document}if(b.getRangeAt){return b.getRangeAt(a)}else{if(c.selection){return b.createRange()}}throw ("jive.Selection.getRangeAt Error: unable to obtain seleciton object")};jive.Selection.moveCursorAfter=function(b,c){if(!c){c=document}var d=c.createElement("span");d.setAttribute("data-jive-statusinputadd","true");d.innerHTML="&nbsp;";b.parentNode.insertBefore(d,b);b.parentNode.insertBefore(b,d);var a=new jive.Selection(d,true);b.parentNode.removeChild(d)};jive.Selection.createRangeAtNode=function(b,c){if(!c){c=document}if(c.createRange){var a=c.createRange();a.selectNodeContents(b);return a}else{if(b.createRange){return b.createRange()}}throw ("jive.Selection.createRange Error: unable to obtain range object")};jive.Selection.replaceNbspWithWhitespace=function(a){return String(a).replace(/\xA0/g," ")}};
;
jive.namespace("StatusInput");if(!jive.StatusInput.StatusInputDropDown){jive.StatusInput.StatusInputDropDown=$Class.extend({init:function(b,a){this._$statusInputContainer=$j(b);this._i18n=a.i18n;this._dd=null;this._data={search:null,friends:null,history:null};this._statusInputIdPostfix=a.statusInputIdPostfix},_getCollectionFromData:function(a){return a.mentionCollection},_getCollectionEntriesFromData:function(a){return a.mentionCollection.entries},_makeSelection:function(e,f,b){var d=e.html(),c=e.attr("href"),a;$j.each(f.mentionCollection.entries,function(g){var h=$j(this.html).attr("href");if(h===c){a=g;return false}});this.emit("interactionFinished",$j.extend({index:a,value:d,href:c},this._getCollectionEntriesFromData(f)[a]))},_renderData:function(c,e,l,o){o=o||{};var h=o.fnHandleRender;var i=o.renderIfDataIsNull||false;var a=o.fnHandleRenderNoData;var k=o.selectionPrefix;var b=o.extraTemplateData||{};if(typeof this._getCollectionFromData(c)=="object"||i){var j=this._data[e]=c;var f=this._getCollectionEntriesFromData(j)||{};var g=this;var d=l.call(this,$j.extend({i18n:g._i18n,entries:f},b));var n=$j(".j-js-autocomplete");if(n.length>0){n.remove()}this._$statusInputContainer.after(d);this._dd=$j(".j-js-autocomplete");var m=this._$statusInputContainer.position();this._dd.css("top",(m.top+this._$statusInputContainer.parent().height())+"px");this._dd.css("left",m.left+"px");this._dd.bind("keyup mouseup",function(p){p.stopPropagation()});this._dd.bind("keydown",function(p){p.stopPropagation();switch(p.keyCode){case 27:g.emit("interactionFinished");break;case 38:g.selectItem(g._getSelectItemIndex()-1);p.stopImmediatePropagation();return false;break;case 40:g.selectItem(g._getSelectItemIndex()+1);p.stopImmediatePropagation();return false;break;case 13:p.stopImmediatePropagation();break;case 32:g.selectItem(g._getSelectItemIndex());g._makeSelection(g._getSelectedItem(),j,k);p.preventDefault();break;default:break}});this._dd.find(".j-autocomplete-results a").click(function(p){g._makeSelection($j(this),j,k);p.preventDefault()});if(h!=null){h()}this.show()}else{this.dataRef=null;if(a!=null){a()}else{this.hide()}}},renderSearchData:function(a){this._renderData(a,"search",jive.statusinput.dropdown.ddSearch)},hide:function(){if(this._dd!=null){this._dd.hide()}},show:function(){if(this._dd!=null){this._dd.slideDown("fast")}},isVisible:function(){var a=$j(".j-js-autocomplete");return this._dd&&!!a.length&&a.is(":visible")},selectItem:function(a){if(this._dd==null){return}var b=this._getSelectItems();if(a<0||a>=b.length){return}this.deselectItem();this._selectItemHelper(b[a],true)},deselectItem:function(b){var c=this._getSelectItems();if(b!=null&&(b<0||b>=c.length)){return}var a=b==null?this._getSelectedItem():c[b];if(a.length==0){return}this._selectItemHelper(a);this._selectedIndex=-1},_getSelectItems:function(){return this._dd.find("."+jive.StatusInput.StatusInputDropDown.selectableItemClassName)},_getSelectedItem:function(){return this._dd.find("."+jive.StatusInput.StatusInputDropDown.selectedItemClassName)},_getSelectItemIndex:function(a){a=a||this._getSelectedItem()[0];return this._getSelectItems().index(a)},_selectItemHelper:function(c,d){var a=d?"focus":"blur",b=jive.StatusInput.StatusInputDropDown.selectedItemClassName+" j-selected";$j(c).toggleClass(b,d)[a]()}});jive.StatusInput.StatusInputDropDown.selectedItemClassName="jive-js-status-input-selected";jive.StatusInput.StatusInputDropDown.selectableItemClassName="jive-js-status-input-selectable";jive.conc.observable(jive.StatusInput.StatusInputDropDown.prototype);jive.StatusInput.StatusInputDropDown.delay=(function(){var a=0;return function(c,b){clearTimeout(a);a=setTimeout(c,b)}})()};
;
var rangy=function(){function A(k,f){var e=typeof k[f];return e=="function"||!!(e=="object"&&k[f])||e=="unknown"}function b(f,e){return !!(typeof f[e]=="object"&&f[e])}function h(f,e){return typeof f[e]!="undefined"}function j(e){return function(k,f){for(var l=f.length;l--;){if(!e(k,f[l])){return false}}return true}}function c(e){window.alert("Rangy not supported in your browser. Reason: "+e);w.initialized=true;w.supported=false}function n(){if(!w.initialized){var l,f=false,e=false;if(A(document,"createRange")){l=document.createRange();if(d(l,C)&&r(l,a)){f=true}l.detach()}if((l=b(document,"body")?document.body:document.getElementsByTagName("body")[0])&&A(l,"createTextRange")){l=l.createTextRange();if(d(l,o)&&r(l,z)){e=true}}!f&&!e&&c("Neither Range nor TextRange are implemented");w.initialized=true;w.features={implementsDomRange:f,implementsTextRange:e};f=I.concat(J);e=0;for(l=f.length;e<l;++e){try{f[e](w)}catch(k){b(window,"console")&&A(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",k)}}}}function g(e){this.name=e;this.supported=this.initialized=false}var a=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],C=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],z=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],o=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint"],d=j(A),v=j(b),r=j(h),w={initialized:false,supported:true,util:{isHostMethod:A,isHostObject:b,isHostProperty:h,areHostMethods:d,areHostObjects:v,areHostProperties:r},features:{},modules:{},config:{alertOnWarn:false}};w.fail=c;w.warn=function(e){e="Rangy warning: "+e;if(w.config.alertOnWarn){window.alert(e)}else{typeof window.console!="undefined"&&typeof window.console.log!="undefined"&&window.console.log(e)}};var J=[],I=[];w.init=n;w.addInitListener=function(e){w.initialized?e(w):J.push(e)};var D=[];w.addCreateMissingNativeApiListener=function(e){D.push(e)};w.createMissingNativeApi=function(k){k=k||window;n();for(var f=0,e=D.length;f<e;++f){D[f](k)}};g.prototype.fail=function(e){this.initialized=true;this.supported=false;throw Error("Module '"+this.name+"' failed to load: "+e)};g.prototype.warn=function(e){w.warn("Module "+this.name+": "+e)};g.prototype.createError=function(e){return Error("Error in Rangy "+this.name+" module: "+e)};w.createModule=function(k,f){var e=new g(k);w.modules[k]=e;I.push(function(l){f(l,e);e.initialized=true;e.supported=true})};w.requireModules=function(m){for(var k=0,e=m.length,l,f;k<e;++k){f=m[k];l=w.modules[f];if(!l||!(l instanceof g)){throw Error("Module '"+f+"' not found")}if(!l.supported){throw Error("Module '"+f+"' not supported")}}};var i=false;v=function(){if(!i){i=true;w.initialized||n()}};if(typeof window=="undefined"){c("No window found")}else{if(typeof document=="undefined"){c("No document found")}else{A(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",v,false);if(A(window,"addEventListener")){window.addEventListener("load",v,false)}else{A(window,"attachEvent")?window.attachEvent("onload",v):c("Window does not have required addEventListener or attachEvent method")}return w}}}();rangy.createModule("DomUtil",function(d,g){function k(m){for(var l=0;m=m.previousSibling;){l++}return l}function o(q,p){var l=[],m;for(m=q;m;m=m.parentNode){l.push(m)}for(m=p;m;m=m.parentNode){if(a(l,m)){return m}}return null}function h(p,m,l){for(l=l?p:p.parentNode;l;){p=l.parentNode;if(p===m){return l}l=p}return null}function u(l){l=l.nodeType;return l==3||l==4||l==8}function j(q,p){var l=p.nextSibling,m=p.parentNode;l?m.insertBefore(q,l):m.appendChild(q);return q}function f(l){if(l.nodeType==9){return l}else{if(typeof l.ownerDocument!="undefined"){return l.ownerDocument}else{if(typeof l.document!="undefined"){return l.document}else{if(l.parentNode){return f(l.parentNode)}else{throw Error("getDocument: no document found for node")}}}}}function e(l){if(!l){return"[No node]"}return u(l)?'"'+l.data+'"':l.nodeType==1?"<"+l.nodeName+(l.id?' id="'+l.id+'"':"")+">["+l.childNodes.length+"]":l.nodeName}function c(l){this._next=this.root=l}function n(m,l){this.node=m;this.offset=l}function i(l){this.code=this[l];this.codeName=l;this.message="DOMException: "+this.codeName}var b=d.util;b.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||g.fail("document missing a Node creation method");b.isHostMethod(document,"getElementsByTagName")||g.fail("document missing getElementsByTagName method");var r=document.createElement("div");b.areHostMethods(r,["insertBefore","appendChild","cloneNode"])||g.fail("Incomplete Element implementation");r=document.createTextNode("test");b.areHostMethods(r,["splitText","deleteData","insertData","appendData","cloneNode"])||g.fail("Incomplete Text Node implementation");var a=function(p,m){for(var l=p.length;l--;){if(p[l]===m){return true}}return false};c.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){var m=this._current=this._next,l;if(this._current){if(l=m.firstChild){this._next=l}else{for(l=null;m!==this.root&&!(l=m.nextSibling);){m=m.parentNode}this._next=l}}return this._current},detach:function(){this._current=this._next=this.root=null}};n.prototype={equals:function(l){return this.node===l.node&this.offset==l.offset},inspect:function(){return"[DomPosition("+e(this.node)+":"+this.offset+")]"}};i.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};i.prototype.toString=function(){return this.message};d.dom={arrayContains:a,getNodeIndex:k,getCommonAncestor:o,isAncestorOf:function(p,m,l){for(m=l?m:m.parentNode;m;){if(m===p){return true}else{m=m.parentNode}}return false},getClosestAncestorIn:h,isCharacterDataNode:u,insertAfter:j,splitDataNode:function(p,m){var l;if(p.nodeType==3){l=p.splitText(m)}else{l=p.cloneNode();l.deleteData(0,m);p.deleteData(0,p.length-m);j(l,p)}return l},getDocument:f,getWindow:function(l){l=f(l);if(typeof l.defaultView!="undefined"){return l.defaultView}else{if(typeof l.parentWindow!="undefined"){return l.parentWindow}else{throw Error("Cannot get a window object for node")}}},getIframeWindow:function(l){if(typeof l.contentWindow!="undefined"){return l.contentWindow}else{if(typeof l.contentDocument!="undefined"){return l.contentDocument.defaultView}else{throw Error("getIframeWindow: No Window object found for iframe element")}}},getIframeDocument:function(l){if(typeof l.contentDocument!="undefined"){return l.contentDocument}else{if(typeof l.contentWindow!="undefined"){return l.contentWindow.document}else{throw Error("getIframeWindow: No Document object found for iframe element")}}},getBody:function(l){return b.isHostObject(l,"body")?l.body:l.getElementsByTagName("body")[0]},comparePoints:function(q,p,l,m){var s;if(q==l){return p===m?0:p<m?-1:1}else{if(s=h(l,q,true)){return p<=k(s)?-1:1}else{if(s=h(q,l,true)){return k(s)<m?-1:1}else{p=o(q,l);q=q===p?p:h(q,p,true);l=l===p?p:h(l,p,true);if(q===l){throw Error("comparePoints got to case 4 and childA and childB are the same!")}else{for(p=p.firstChild;p;){if(p===q){return -1}else{if(p===l){return 1}}p=p.nextSibling}throw Error("Should not be here!")}}}}},inspectNode:e,createIterator:function(l){return new c(l)},DomPosition:n};d.DOMException=i});rangy.createModule("DomRange",function(aG){function V(a,d){return a.nodeType!=3&&(aJ.isAncestorOf(a,d.startContainer,true)||aJ.isAncestorOf(a,d.endContainer,true))}function af(a){return aJ.getDocument(a.startContainer)}function ag(a,e,d){if(e=a._listeners[e]){for(var f=0,i=e.length;f<i;++f){e[f].call(a,{target:a,args:d})}}}function av(a){return new h(a.parentNode,aJ.getNodeIndex(a))}function ah(a){return new h(a.parentNode,aJ.getNodeIndex(a)+1)}function ae(a){return aJ.isCharacterDataNode(a)?a.length:a.childNodes?a.childNodes.length:0}function M(a,e,d){var f=a.nodeType==11?a.firstChild:a;if(aJ.isCharacterDataNode(e)){d==e.length?aJ.insertAfter(a,e):e.parentNode.insertBefore(a,d==0?e:aJ.splitDataNode(e,d))}else{d>=e.childNodes.length?e.appendChild(a):e.insertBefore(a,e.childNodes[d])}return f}function aH(a){for(var e,d,f=af(a.range).createDocumentFragment();d=a.next();){e=a.isPartiallySelectedSubtree();d=d.cloneNode(!e);if(e){e=a.getSubtreeIterator();d.appendChild(aH(e));e.detach(true)}if(d.nodeType==10){throw new L("HIERARCHY_REQUEST_ERR")}f.appendChild(d)}return f}function aE(a,e,d){var f,i;for(d=d||{stop:false};f=a.next();){if(a.isPartiallySelectedSubtree()){if(e(f)===false){d.stop=true;return}else{f=a.getSubtreeIterator();aE(f,e,d);f.detach(true);if(d.stop){return}}}else{for(f=aJ.createIterator(f);i=f.next();){if(e(i)===false){d.stop=true;return}}}}}function aA(a){for(var d;a.next();){if(a.isPartiallySelectedSubtree()){d=a.getSubtreeIterator();aA(d);d.detach(true)}else{a.remove()}}}function ax(a){for(var e,d=af(a.range).createDocumentFragment(),f;e=a.next();){if(a.isPartiallySelectedSubtree()){e=e.cloneNode(false);f=a.getSubtreeIterator();e.appendChild(ax(f));f.detach(true)}else{a.remove()}if(e.nodeType==10){throw new L("HIERARCHY_REQUEST_ERR")}d.appendChild(e)}return d}function ak(a,f,e){var i=!!(f&&f.length),k,d=!!e;if(i){k=RegExp("^("+f.join("|")+")$")}var j=[];aE(new aD(a,false),function(l){if((!i||k.test(l.nodeType))&&(!d||e(l))){j.push(l)}});return j}function aB(a){return"["+(typeof a.getName=="undefined"?"Range":a.getName())+"("+aJ.inspectNode(a.startContainer)+":"+a.startOffset+", "+aJ.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function aD(a,e){this.range=a;this.clonePartiallySelectedTextNodes=e;if(!a.collapsed){this.sc=a.startContainer;this.so=a.startOffset;this.ec=a.endContainer;this.eo=a.endOffset;var d=a.commonAncestorContainer;if(this.sc===this.ec&&aJ.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc}else{this._first=this._next=this.sc===d&&!aJ.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:aJ.getClosestAncestorIn(this.sc,d,true);this._last=this.ec===d&&!aJ.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:aJ.getClosestAncestorIn(this.ec,d,true)}}}function aM(a){this.code=this[a];this.codeName=a;this.message="RangeException: "+this.codeName}function aL(a,e,d){this.nodes=ak(a,e,d);this._next=this.nodes[0];this._position=0}function aI(a){return function(e,d){for(var f,i=d?e:e.parentNode;i;){f=i.nodeType;if(aJ.arrayContains(a,f)){return i}i=i.parentNode}return null}}function az(a){for(var d;d=a.parentNode;){a=d}return a}function aF(a,d){if(aj(a,d)){throw new aM("INVALID_NODE_TYPE_ERR")}}function aC(a){if(!a.startContainer){throw new L("INVALID_STATE_ERR")}}function al(a,d){if(!aJ.arrayContains(d,a.nodeType)){throw new aM("INVALID_NODE_TYPE_ERR")}}function S(a,d){if(d<0||d>(aJ.isCharacterDataNode(a)?a.length:a.childNodes.length)){throw new L("INDEX_SIZE_ERR")}}function ad(a,d){if(aN(a,true)!==aN(d,true)){throw new L("WRONG_DOCUMENT_ERR")}}function z(a){if(aK(a,true)){throw new L("NO_MODIFICATION_ALLOWED_ERR")}}function c(a,d){if(!a){throw new L(d)}}function ac(a){if(!aN(a.startContainer,true)||!aN(a.endContainer,true)||!(a.startOffset<=(aJ.isCharacterDataNode(a.startContainer)?a.startContainer.length:a.startContainer.childNodes.length))||!(a.endOffset<=(aJ.isCharacterDataNode(a.endContainer)?a.endContainer.length:a.endContainer.childNodes.length))){throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}}function w(a){a.START_TO_START=R;a.START_TO_END=n;a.END_TO_END=g;a.END_TO_START=aw;a.NODE_BEFORE=aq;a.NODE_AFTER=v;a.NODE_BEFORE_AND_AFTER=ay;a.NODE_INSIDE=ap}function an(a){w(a);w(a.prototype)}function ao(a,i,f){function j(o,m){return function(p){aC(this);al(p,ar);al(az(p),au);p=(o?av:ah)(p);(m?l:e)(this,p.node,p.offset)}}function l(r,p,q){var o=r.endContainer,m=r.endOffset;if(p!==r.startContainer||q!==this.startOffset){if(az(p)!=az(o)||aJ.comparePoints(p,q,o,m)==1){o=p;m=q}i(r,p,q,o,m)}}function e(r,p,q){var o=r.startContainer,m=r.startOffset;if(p!==r.endContainer||q!==this.endOffset){if(az(p)!=az(o)||aJ.comparePoints(p,q,o,m)==-1){o=p;m=q}i(r,o,m,p,q)}}function k(p,m,o){if(m!==p.startContainer||o!==this.startOffset||m!==p.endContainer||o!==this.endOffset){i(p,m,o,m,o)}}function d(m){return function(){aC(this);ac(this);var q=this.startContainer,r=this.startOffset,p=this.commonAncestorContainer,o=new aD(this,true);if(q!==p){q=aJ.getClosestAncestorIn(q,p,true);r=ah(q);q=r.node;r=r.offset}aE(o,z);o.reset();p=m(o);o.detach();i(this,q,r,q,r);return p}}a.prototype={attachListener:function(o,m){this._listeners[o].push(m)},setStart:function(o,m){aC(this);aF(o,true);S(o,m);l(this,o,m)},setEnd:function(o,m){aC(this);aF(o,true);S(o,m);e(this,o,m)},setStartBefore:j(true,true),setStartAfter:j(false,true),setEndBefore:j(true,false),setEndAfter:j(false,false),collapse:function(m){aC(this);ac(this);m?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(m){aC(this);aF(m,true);i(this,m,0,m,ae(m))},selectNode:function(o){aC(this);aF(o,false);al(o,ar);var m=av(o);o=ah(o);i(this,m.node,m.offset,o.node,o.offset)},compareBoundaryPoints:function(q,o){aC(this);ac(this);ad(this.startContainer,o.startContainer);var p=q==aw||q==R?"start":"end",m=q==n||q==R?"start":"end";return aJ.comparePoints(this[p+"Container"],this[p+"Offset"],o[m+"Container"],o[m+"Offset"])},insertNode:function(m){aC(this);ac(this);al(m,am);z(this.startContainer);if(aJ.isAncestorOf(m,this.startContainer,true)){throw new L("HIERARCHY_REQUEST_ERR")}this.setStartBefore(M(m,this.startContainer,this.startOffset))},cloneContents:function(){aC(this);ac(this);var o,m;if(this.collapsed){return af(this).createDocumentFragment()}else{if(this.startContainer===this.endContainer&&aJ.isCharacterDataNode(this.startContainer)){o=this.startContainer.cloneNode(true);o.data=o.data.slice(this.startOffset,this.endOffset);m=af(this).createDocumentFragment();m.appendChild(o);return m}else{m=new aD(this,true);o=aH(m);m.detach()}return o}},extractContents:d(ax),deleteContents:d(aA),canSurroundContents:function(){aC(this);ac(this);z(this.startContainer);z(this.endContainer);var o=new aD(this,true),m=o._first&&V(o._first,this)||o._last&&V(o._last,this);o.detach();return !m},surroundContents:function(o){al(o,aO);if(!this.canSurroundContents()){throw new aM("BAD_BOUNDARYPOINTS_ERR")}var m=this.extractContents();if(o.hasChildNodes()){for(;o.lastChild;){o.removeChild(o.lastChild)}}M(o,this.startContainer,this.startOffset);o.appendChild(m);this.selectNode(o)},cloneRange:function(){aC(this);ac(this);for(var p=new ab(af(this)),m=ai.length,o;m--;){o=ai[m];p[o]=this[o]}return p},detach:function(){f(this)},toString:function(){aC(this);ac(this);var o=this.startContainer;if(o===this.endContainer&&aJ.isCharacterDataNode(o)){return o.nodeType==3||o.nodeType==4?o.data.slice(this.startOffset,this.endOffset):""}else{var m=[];o=new aD(this,true);aE(o,function(p){if(p.nodeType==3||p.nodeType==4){m.push(p.data)}});o.detach();return m.join("")}},compareNode:function(p){aC(this);ac(this);var m=p.parentNode,o=aJ.getNodeIndex(p);if(!m){throw new L("NOT_FOUND_ERR")}p=this.comparePoint(m,o);m=this.comparePoint(m,o+1);return p<0?m>0?ay:aq:m>0?v:ap},comparePoint:function(o,m){aC(this);ac(this);c(o,"HIERARCHY_REQUEST_ERR");ad(o,this.startContainer);if(aJ.comparePoints(o,m,this.startContainer,this.startOffset)<0){return -1}else{if(aJ.comparePoints(o,m,this.endContainer,this.endOffset)>0){return 1}}return 0},createContextualFragment:function(p){aC(this);var m=af(this),o=m.createElement("div");o.innerHTML=p;for(p=m.createDocumentFragment();m=o.firstChild;){p.appendChild(m)}return p},intersectsNode:function(r,p){aC(this);ac(this);c(r,"NOT_FOUND_ERR");if(aJ.getDocument(r)!==af(this)){return false}var q=r.parentNode,o=aJ.getNodeIndex(r);c(q,"NOT_FOUND_ERR");var m=aJ.comparePoints(q,o,this.endContainer,this.endOffset);q=aJ.comparePoints(q,o+1,this.startContainer,this.startOffset);return p?m<=0&&q>=0:m<0&&q>0},isPointInRange:function(o,m){aC(this);ac(this);c(o,"HIERARCHY_REQUEST_ERR");ad(o,this.startContainer);return aJ.comparePoints(o,m,this.startContainer,this.startOffset)>=0&&aJ.comparePoints(o,m,this.endContainer,this.endOffset)<=0},intersectsRange:function(m){aC(this);ac(this);if(af(m)!=af(this)){throw new L("WRONG_DOCUMENT_ERR")}return aJ.comparePoints(this.startContainer,this.startOffset,m.endContainer,m.endOffset)<0&&aJ.comparePoints(this.endContainer,this.endOffset,m.startContainer,m.startOffset)>0},intersection:function(q){if(this.intersectsRange(q)){var o=aJ.comparePoints(this.startContainer,this.startOffset,q.startContainer,q.startOffset),p=aJ.comparePoints(this.endContainer,this.endOffset,q.endContainer,q.endOffset),m=this.cloneRange();o==-1&&m.setStart(q.startContainer,q.startOffset);p==1&&m.setEnd(q.endContainer,q.endOffset);return m}return null},containsNode:function(o,m){return m?this.intersectsNode(o,false):this.compareNode(o)==ap},containsNodeContents:function(m){return this.comparePoint(m,0)>=0&&this.comparePoint(m,ae(m))<=0},splitBoundaries:function(){ac(this);var r=this.startContainer,p=this.startOffset,q=this.endContainer,o=this.endOffset,m=r===q;aJ.isCharacterDataNode(q)&&o>0&&o<q.length&&aJ.splitDataNode(q,o);if(aJ.isCharacterDataNode(r)&&p>0&&p<r.length){r=aJ.splitDataNode(r,p);if(m){o-=p;q=r}else{q==r.parentNode&&o>=aJ.getNodeIndex(r)&&o++}p=0}i(this,r,p,q,o)},normalizeBoundaries:function(){ac(this);var t=this.startContainer,r=this.startOffset,s=this.endContainer,p=this.endOffset,o=function(u){var x=u.nextSibling;if(x&&x.nodeType==u.nodeType){s=u;p=u.length;u.appendData(x.data);x.parentNode.removeChild(x)}},q=function(u){var x=u.previousSibling;if(x&&x.nodeType==u.nodeType){t=u;var y=u.length;r=x.length;u.insertData(0,x.data);x.parentNode.removeChild(x);if(t==s){p+=r;s=t}else{if(s==u.parentNode){x=aJ.getNodeIndex(u);if(p==x){s=u;p=y}else{p>x&&p--}}}}},m=true;if(aJ.isCharacterDataNode(s)){s.length==p&&o(s)}else{if(p>0){(m=s.childNodes[p-1])&&aJ.isCharacterDataNode(m)&&o(m)}m=!this.collapsed}if(m){if(aJ.isCharacterDataNode(t)){r==0&&q(t)}else{if(r<t.childNodes.length){(o=t.childNodes[r])&&aJ.isCharacterDataNode(o)&&q(o)}}}else{t=s;r=p}i(this,t,r,s,p)},createNodeIterator:function(o,m){aC(this);ac(this);return new aL(this,o,m)},getNodes:function(o,m){aC(this);ac(this);return ak(this,o,m)},collapseToPoint:function(o,m){aC(this);ac(this);aF(o,true);S(o,m);k(this,o,m)},collapseBefore:function(m){aC(this);this.setEndBefore(m);this.collapse(false)},collapseAfter:function(m){aC(this);this.setStartAfter(m);this.collapse(true)},getName:function(){return"DomRange"},equals:function(m){return ab.rangesEqual(this,m)},inspect:function(){return aB(this)}};an(a)}function b(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;a.commonAncestorContainer=a.collapsed?a.startContainer:aJ.getCommonAncestor(a.startContainer,a.endContainer)}function at(a,f,e,i,k){var d=a.startContainer!==f||a.startOffset!==e,j=a.endContainer!==i||a.endOffset!==k;a.startContainer=f;a.startOffset=e;a.endContainer=i;a.endOffset=k;b(a);ag(a,"boundarychange",{startMoved:d,endMoved:j})}function ab(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};b(this)}aG.requireModules(["DomUtil"]);var aJ=aG.dom,h=aJ.DomPosition,L=aG.DOMException;aD.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return !!this._next},next:function(){var a=this._current=this._next;if(a){this._next=a!==this._last?a.nextSibling:null;if(aJ.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes){if(a===this.ec){(a=a.cloneNode(true)).deleteData(this.eo,a.length-this.eo)}if(this._current===this.sc){(a=a.cloneNode(true)).deleteData(0,this.so)}}}return a},remove:function(){var a=this._current,e,d;if(aJ.isCharacterDataNode(a)&&(a===this.sc||a===this.ec)){e=a===this.sc?this.so:0;d=a===this.ec?this.eo:a.length;e!=d&&a.deleteData(e,d-e)}else{a.parentNode&&a.parentNode.removeChild(a)}},isPartiallySelectedSubtree:function(){return V(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode){a=this.range.cloneRange();a.collapse()}else{a=new ab(af(this.range));var f=this._current,e=f,i=0,j=f,d=ae(f);if(aJ.isAncestorOf(f,this.sc,true)){e=this.sc;i=this.so}if(aJ.isAncestorOf(f,this.ec,true)){j=this.ec;d=this.eo}at(a,e,i,j,d)}return new aD(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach();this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};aM.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};aM.prototype.toString=function(){return this.message};aL.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var ar=[1,3,4,5,7,8,10],au=[2,9,11],am=[1,3,4,5,7,8,10,11],aO=[1,3,4,5,7,8],aN=aI([9,11]),aK=aI([5,6,10,12]),aj=aI([6,10,12]),ai=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],R=0,n=1,g=2,aw=3,aq=0,v=1,ay=2,ap=3;ao(ab,at,function(a){aC(a);a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.collapsed=a.commonAncestorContainer=null;ag(a,"detach",null);a._listeners=null});ab.fromRange=function(a){var d=new ab(af(a));at(d,a.startContainer,a.startOffset,a.endContainer,a.endOffset);return d};ab.rangeProperties=ai;ab.RangeIterator=aD;ab.copyComparisonConstants=an;ab.createPrototypeRange=ao;ab.inspect=aB;ab.getRangeDocument=af;ab.rangesEqual=function(a,d){return a.startContainer===d.startContainer&&a.startOffset===d.startOffset&&a.endContainer===d.endContainer&&a.endOffset===d.endOffset};ab.getEndOffset=ae;aG.DomRange=ab;aG.RangeException=aM});rangy.createModule("WrappedRange",function(a){function g(j,r,k,i){var u=j.duplicate();u.collapse(k);var m=u.parentElement();h.isAncestorOf(r,m,true)||(m=r);if(!m.canHaveHTML){return new f(m.parentNode,h.getNodeIndex(m))}r=h.getDocument(m).createElement("span");var n,o=k?"StartToStart":"StartToEnd";do{m.insertBefore(r,r.previousSibling);u.moveToElementText(r)}while((n=u.compareEndPoints(o,j))>0&&r.previousSibling);o=r.nextSibling;if(n==-1&&o&&h.isCharacterDataNode(o)){u.setEndPoint(k?"EndToStart":"EndToEnd",j);if(/[\r\n]/.test(o.data)){m=u.duplicate();k=m.text.replace(/\r\n/g,"\r").length;for(k=m.moveStart("character",k);m.compareEndPoints("StartToEnd",m)==-1;){k++;m.moveStart("character",1)}}else{k=u.text.length}m=new f(o,k)}else{o=(i||!k)&&r.previousSibling;m=(k=(i||k)&&r.nextSibling)&&h.isCharacterDataNode(k)?new f(k,0):o&&h.isCharacterDataNode(o)?new f(o,o.length):new f(m,h.getNodeIndex(r))}r.parentNode.removeChild(r);return m}function c(j,r){var k,i,u=j.offset,m=h.getDocument(j.node),n=m.body.createTextRange(),o=h.isCharacterDataNode(j.node);if(o){k=j.node;i=k.parentNode}else{k=j.node.childNodes;k=u<k.length?k[u]:null;i=j.node}m=m.createElement("span");m.innerHTML="&#feff;";k?i.insertBefore(m,k):i.appendChild(m);n.moveToElementText(m);n.collapse(!r);i.removeChild(m);if(o){n[r?"moveStart":"moveEnd"]("character",u)}return n}a.requireModules(["DomUtil","DomRange"]);var e,h=a.dom,f=h.DomPosition,b=a.DomRange;if(a.features.implementsDomRange){(function(){function j(q){for(var l=k.length,p;l--;){p=k[l];q[p]=q.nativeRange[p]}}var r,k=b.rangeProperties,i,u;e=function(l){if(!l){throw Error("Range must be specified")}this.nativeRange=l;j(this)};b.createPrototypeRange(e,function(t,p,q,v,s){var l=t.endContainer!==v||t.endOffset!=s;if(t.startContainer!==p||t.startOffset!=q||l){t.setEnd(v,s);t.setStart(p,q)}},function(q){q.nativeRange.detach();q.detached=true;for(var l=k.length,p;l--;){p=k[l];q[p]=null}});r=e.prototype;r.selectNode=function(l){this.nativeRange.selectNode(l);j(this)};r.deleteContents=function(){this.nativeRange.deleteContents();j(this)};r.extractContents=function(){var l=this.nativeRange.extractContents();j(this);return l};r.cloneContents=function(){return this.nativeRange.cloneContents()};r.surroundContents=function(l){this.nativeRange.surroundContents(l);j(this)};r.collapse=function(l){this.nativeRange.collapse(l);j(this)};r.cloneRange=function(){return new e(this.nativeRange.cloneRange())};r.refresh=function(){j(this)};r.toString=function(){return this.nativeRange.toString()};var m=document.createTextNode("test");h.getBody(document).appendChild(m);var n=document.createRange();n.setStart(m,0);n.setEnd(m,0);try{n.setStart(m,1);i=true;r.setStart=function(p,l){this.nativeRange.setStart(p,l);j(this)};r.setEnd=function(p,l){this.nativeRange.setEnd(p,l);j(this)};u=function(l){return function(p){this.nativeRange[l](p);j(this)}}}catch(o){i=false;r.setStart=function(q,l){try{this.nativeRange.setStart(q,l)}catch(p){this.nativeRange.setEnd(q,l);this.nativeRange.setStart(q,l)}j(this)};r.setEnd=function(q,l){try{this.nativeRange.setEnd(q,l)}catch(p){this.nativeRange.setStart(q,l);this.nativeRange.setEnd(q,l)}j(this)};u=function(p,l){return function(q){try{this.nativeRange[p](q)}catch(s){this.nativeRange[l](q);this.nativeRange[p](q)}j(this)}}}r.setStartBefore=u("setStartBefore","setEndBefore");r.setStartAfter=u("setStartAfter","setEndAfter");r.setEndBefore=u("setEndBefore","setStartBefore");r.setEndAfter=u("setEndAfter","setStartAfter");n.selectNodeContents(m);r.selectNodeContents=n.startContainer==m&&n.endContainer==m&&n.startOffset==0&&n.endOffset==m.length?function(l){this.nativeRange.selectNodeContents(l);j(this)}:function(l){this.setStart(l,0);this.setEnd(l,b.getEndOffset(l))};n.selectNodeContents(m);n.setEnd(m,3);i=document.createRange();i.selectNodeContents(m);i.setEnd(m,4);i.setStart(m,2);r.compareBoundaryPoints=n.compareBoundaryPoints(n.START_TO_END,i)==-1&n.compareBoundaryPoints(n.END_TO_START,i)==1?function(p,l){l=l.nativeRange||l;if(p==l.START_TO_END){p=l.END_TO_START}else{if(p==l.END_TO_START){p=l.START_TO_END}}return this.nativeRange.compareBoundaryPoints(p,l)}:function(p,l){return this.nativeRange.compareBoundaryPoints(p,l.nativeRange||l)};h.getBody(document).removeChild(m);n.detach();i.detach()})()}else{if(a.features.implementsTextRange){e=function(i){this.textRange=i;this.refresh()};e.prototype=new b(document);e.prototype.refresh=function(){var j,m,k=this.textRange;j=k.parentElement();var i=k.duplicate();i.collapse(true);m=i.parentElement();i=k.duplicate();i.collapse(false);k=i.parentElement();m=m==k?m:h.getCommonAncestor(m,k);m=m==j?m:h.getCommonAncestor(j,m);if(this.textRange.compareEndPoints("StartToEnd",this.textRange)==0){m=j=g(this.textRange,m,true,true)}else{j=g(this.textRange,m,true,false);m=g(this.textRange,m,false,false)}this.setStart(j.node,j.offset);this.setEnd(m.node,m.offset)};e.rangeToTextRange=function(i){if(i.collapsed){return c(new f(i.startContainer,i.startOffset),true)}else{var k=c(new f(i.startContainer,i.startOffset),true),j=c(new f(i.endContainer,i.endOffset),false);i=h.getDocument(i.startContainer).body.createTextRange();i.setEndPoint("StartToStart",k);i.setEndPoint("EndToEnd",j);return i}};b.copyComparisonConstants(e);var d=function(){return this}();if(typeof d.Range=="undefined"){d.Range=e}}}e.prototype.getName=function(){return"WrappedRange"};a.WrappedRange=e;a.createNativeRange=function(i){i=i||document;if(a.features.implementsDomRange){return i.createRange()}else{if(a.features.implementsTextRange){return i.body.createTextRange()}}};a.createRange=function(i){i=i||document;return new e(a.createNativeRange(i))};a.createRangyRange=function(i){i=i||document;return new b(i)};a.createIframeRange=function(i){return a.createRange(h.getIframeDocument(i))};a.createIframeRangyRange=function(i){return a.createRangyRange(h.getIframeDocument(i))};a.addCreateMissingNativeApiListener(function(i){i=i.document;if(typeof i.createRange=="undefined"){i.createRange=function(){return a.createRange(this)}}i=i=null})});rangy.createModule("WrappedSelection",function(an,v){function L(e){return(e||window).getSelection()}function M(e){return(e||window).document.selection}function ae(e,k,f){var j=f?"end":"start";f=f?"start":"end";e.anchorNode=k[j+"Container"];e.anchorOffset=k[j+"Offset"];e.focusNode=k[f+"Container"];e.focusOffset=k[f+"Offset"]}function P(e){e.anchorNode=e.focusNode=null;e.anchorOffset=e.focusOffset=0;e.rangeCount=0;e.isCollapsed=true;e._ranges.length=0}function D(e){var f;if(e instanceof ap){f=e._selectionNativeRange;if(!f){f=an.createNativeRange(at.getDocument(e.startContainer));f.setEnd(e.endContainer,e.endOffset);f.setStart(e.startContainer,e.startOffset);e._selectionNativeRange=f;e.attachListener("detach",function(){this._selectionNativeRange=null})}}else{if(e instanceof ag){f=e.nativeRange}else{if(window.Range&&e instanceof Range){f=e}}}return f}function i(e){var k=e.getNodes(),f;e:if(!k.length||k[0].nodeType!=1){f=false}else{f=1;for(var j=k.length;f<j;++f){if(!at.isAncestorOf(k[0],k[f])){f=false;break e}}f=true}if(!f){throw Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element")}return k[0]}function ao(e,j){var f=new ag(j);e._ranges=[f];ae(e,f,false);e.rangeCount=1;e.isCollapsed=f.collapsed}function al(e){e._ranges.length=0;if(e.docSelection.type=="None"){P(e)}else{var l=e.docSelection.createRange();if(l&&typeof l.text!="undefined"){ao(e,l)}else{e.rangeCount=l.length;for(var f,k=at.getDocument(l.item(0)),j=0;j<e.rangeCount;++j){f=an.createRange(k);f.selectNode(l.item(j));e._ranges.push(f)}e.isCollapsed=e.rangeCount==1&&e._ranges[0].collapsed;ae(e,e._ranges[e.rangeCount-1],false)}}}function ah(e,o){var f=e.docSelection.createRange(),m=i(o),l=at.getDocument(f.item(0));l=at.getBody(l).createControlRange();for(var k=0,p=f.length;k<p;++k){l.add(f.item(k))}try{l.add(m)}catch(j){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}l.select();al(e)}function af(e,j,f){this.nativeSelection=e;this.docSelection=j;this._ranges=[];this.win=f;this.refresh()}function R(e,m){var f=at.getDocument(m[0].startContainer);f=at.getBody(f).createControlRange();for(var l=0,k;l<rangeCount;++l){k=i(m[l]);try{f.add(k)}catch(j){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}f.select();al(e)}function ai(e,f){if(e.anchorNode&&at.getDocument(e.anchorNode)!==at.getDocument(f)){throw new am("WRONG_DOCUMENT_ERR")}}function ak(e){var m=[],f=new aj(e.anchorNode,e.anchorOffset),l=new aj(e.focusNode,e.focusOffset),k=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined"){for(var j=0,o=e.rangeCount;j<o;++j){m[j]=ap.inspect(e.getRangeAt(j))}}return"["+k+"(Ranges: "+m.join(", ")+")(anchor: "+f.inspect()+", focus: "+l.inspect()+"]"}an.requireModules(["DomUtil","DomRange","WrappedRange"]);an.config.checkSelectionRanges=true;var at=an.dom,ar=an.util,ap=an.DomRange,ag=an.WrappedRange,am=an.DOMException,aj=at.DomPosition,S,n,C=an.util.isHostMethod(window,"getSelection"),g=an.util.isHostObject(document,"selection");if(C){S=L;an.isSelectionValid=function(){return true}}else{if(g){S=M;an.isSelectionValid=function(e){e=(e||window).document;var f=e.selection;return f.type!="None"||at.getDocument(f.createRange().parentElement())==e}}else{v.fail("No means of obtaining a selection object")}}an.getNativeSelection=S;C=S();var b=an.createNativeRange(document),z=at.getBody(document),d=ar.areHostObjects(C,ar.areHostProperties(C,["anchorOffset","focusOffset"]));an.features.selectionHasAnchorAndFocus=d;var X=ar.isHostMethod(C,"extend");an.features.selectionHasExtend=X;var aa=typeof C.rangeCount=="number";an.features.selectionHasRangeCount=aa;var a=false,ac=true;ar.areHostMethods(C,["addRange","getRangeAt","removeAllRanges"])&&typeof C.rangeCount=="number"&&an.features.implementsDomRange&&function(){var e=document.createElement("iframe");z.appendChild(e);var l=at.getIframeDocument(e);l.open();l.write("<html><head></head><body>12</body></html>");l.close();var f=at.getIframeWindow(e).getSelection(),k=l.documentElement.lastChild.firstChild;l=l.createRange();l.setStart(k,1);l.collapse(true);f.addRange(l);ac=f.rangeCount==1;f.removeAllRanges();var j=l.cloneRange();l.setStart(k,0);j.setEnd(k,2);f.addRange(l);f.addRange(j);a=f.rangeCount==2;l.detach();j.detach();z.removeChild(e)}();an.features.selectionSupportsMultipleRanges=a;an.features.collapsedNonEditableSelectionsSupported=ac;var w=false,aq;if(z&&ar.isHostMethod(z,"createControlRange")){aq=z.createControlRange();if(ar.areHostProperties(aq,["item","add"])){w=true}}an.features.implementsControlRange=w;n=d?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:false};var c;if(ar.isHostMethod(C,"getRangeAt")){c=function(e,j){try{return e.getRangeAt(j)}catch(f){return null}}}else{if(d){c=function(e){var f=at.getDocument(e.anchorNode);f=an.createRange(f);f.setStart(e.anchorNode,e.anchorOffset);f.setEnd(e.focusNode,e.focusOffset);if(f.collapsed!==this.isCollapsed){f.setStart(e.focusNode,e.focusOffset);f.setEnd(e.anchorNode,e.anchorOffset)}return f}}}an.getSelection=function(e){e=e||window;var k=e._rangySelection,f=S(e),j=g?M(e):null;if(k){k.nativeSelection=f;k.docSelection=j;k.refresh(e)}else{k=new af(f,j,e);e._rangySelection=k}return k};an.getIframeSelection=function(e){return an.getSelection(at.getIframeWindow(e))};aq=af.prototype;if(d&&ar.areHostMethods(C,["removeAllRanges","addRange"])){aq.removeAllRanges=function(){this.nativeSelection.removeAllRanges();P(this)};var h=function(e,j){var f=ap.getRangeDocument(j);f=an.createRange(f);f.collapseToPoint(j.endContainer,j.endOffset);e.nativeSelection.addRange(D(f));e.nativeSelection.extend(j.startContainer,j.startOffset);e.refresh()};aq.addRange=aa?function(e,j){if(w&&g&&this.docSelection.type=="Control"){ah(this,e)}else{if(j&&X){h(this,e)}else{var f;if(a){f=this.rangeCount}else{this.removeAllRanges();f=0}this.nativeSelection.addRange(D(e));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==f+1){if(an.config.checkSelectionRanges){if((f=c(this.nativeSelection,this.rangeCount-1))&&!ap.rangesEqual(f,e)){e=new ag(f)}}this._ranges[this.rangeCount-1]=e;ae(this,e,V(this.nativeSelection));this.isCollapsed=n(this)}else{this.refresh()}}}}:function(e,f){if(f&&X){h(this,e)}else{this.nativeSelection.addRange(D(e));this.refresh()}};aq.setRanges=function(e){if(w&&e.length>1){R(this,e)}else{this.removeAllRanges();for(var j=0,f=e.length;j<f;++j){this.addRange(e[j])}}}}else{if(ar.isHostMethod(C,"empty")&&ar.isHostMethod(b,"select")&&w&&g){aq.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var e;if(this.anchorNode){e=at.getDocument(this.anchorNode)}else{if(this.docSelection.type=="Control"){var j=this.docSelection.createRange();if(j.length){e=at.getDocument(j.item(0)).body.createTextRange()}}}if(e){e.body.createTextRange().select();this.docSelection.empty()}}}catch(f){}P(this)};aq.addRange=function(e){if(this.docSelection.type=="Control"){ah(this,e)}else{ag.rangeToTextRange(e).select();this._ranges[0]=e;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;ae(this,e,false)}};aq.setRanges=function(e){this.removeAllRanges();var f=e.length;if(f>1){R(this,e)}else{f&&this.addRange(e[0])}}}else{v.fail("No means of selecting a Range or TextRange was found");return false}}aq.getRangeAt=function(e){if(e<0||e>=this.rangeCount){throw new am("INDEX_SIZE_ERR")}else{return this._ranges[e]}};var ab;if(ar.isHostMethod(C,"getRangeAt")&&typeof C.rangeCount=="number"){ab=function(e){if(w&&g&&e.docSelection.type=="Control"){al(e)}else{e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount;if(e.rangeCount){for(var j=0,f=e.rangeCount;j<f;++j){e._ranges[j]=new an.WrappedRange(e.nativeSelection.getRangeAt(j))}ae(e,e._ranges[e.rangeCount-1],V(e.nativeSelection));e.isCollapsed=n(e)}else{P(e)}}}}else{if(d&&typeof C.isCollapsed=="boolean"&&typeof b.collapsed=="boolean"&&an.features.implementsDomRange){ab=function(e){var f;f=e.nativeSelection;if(f.anchorNode){f=c(f,0);e._ranges=[f];e.rangeCount=1;f=e.nativeSelection;e.anchorNode=f.anchorNode;e.anchorOffset=f.anchorOffset;e.focusNode=f.focusNode;e.focusOffset=f.focusOffset;e.isCollapsed=n(e)}else{P(e)}}}else{if(ar.isHostMethod(C,"createRange")&&g){ab=function(e){var f;if(an.isSelectionValid(e.win)){f=e.docSelection.createRange()}else{f=at.getBody(e.win.document).createTextRange();f.collapse(true)}if(e.docSelection.type=="Control"){al(e)}else{f&&typeof f.text!="undefined"?ao(e,f):P(e)}}}else{v.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false}}}aq.refresh=function(e){var f=e?this._ranges.slice(0):null;ab(this);if(e){e=f.length;if(e!=this._ranges.length){return false}for(;e--;){if(!ap.rangesEqual(f[e],this._ranges[e])){return false}}return true}};var ad=function(e,m){var f=e.getAllRanges(),l=false;e.removeAllRanges();for(var k=0,j=f.length;k<j;++k){if(l||m!==f[k]){e.addRange(f[k])}else{l=true}}e.rangeCount||P(e)};aq.removeRange=w?function(e){if(this.docSelection.type=="Control"){var m=this.docSelection.createRange();e=i(e);var f=at.getDocument(m.item(0));f=at.getBody(f).createControlRange();for(var l,k=false,j=0,o=m.length;j<o;++j){l=m.item(j);if(l!==e||k){f.add(m.item(j))}else{k=true}}f.select();al(this)}else{ad(this,e)}}:function(e){ad(this,e)};var V;if(d&&an.features.implementsDomRange){V=function(e){var f=false;if(e.anchorNode){f=at.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1}return f};aq.isBackwards=function(){return V(this)}}else{V=aq.isBackwards=function(){return false}}aq.toString=function(){for(var e=[],j=0,f=this.rangeCount;j<f;++j){e[j]=""+this._ranges[j]}return e.join("")};aq.collapse=function(e,j){ai(this,e);var f=an.createRange(at.getDocument(e));f.collapseToPoint(e,j);this.removeAllRanges();this.addRange(f);this.isCollapsed=true};aq.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}else{throw new am("INVALID_STATE_ERR")}};aq.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}else{throw new am("INVALID_STATE_ERR")}};aq.selectAllChildren=function(e){ai(this,e);var f=an.createRange(at.getDocument(e));f.selectNodeContents(e);this.removeAllRanges();this.addRange(f)};aq.deleteFromDocument=function(){if(w&&g&&this.docSelection.type=="Control"){for(var e=this.docSelection.createRange(),j;e.length;){j=e.item(0);e.remove(j);j.parentNode.removeChild(j)}this.refresh()}else{if(this.rangeCount){e=this.getAllRanges();this.removeAllRanges();j=0;for(var f=e.length;j<f;++j){e[j].deleteContents()}this.addRange(e[f-1])}}};aq.getAllRanges=function(){return this._ranges.slice(0)};aq.setSingleRange=function(e){this.setRanges([e])};aq.containsNode=function(e,k){for(var f=0,j=this._ranges.length;f<j;++f){if(this._ranges[f].containsNode(e,k)){return true}}return false};aq.getName=function(){return"WrappedSelection"};aq.inspect=function(){return ak(this)};aq.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null};af.inspect=ak;an.Selection=af;an.addCreateMissingNativeApiListener(function(e){if(typeof e.getSelection=="undefined"){e.getSelection=function(){return an.getSelection(this)}}e=null})});
;
jive.namespace("StatusInput");if(!jive.StatusInput.StatusInputs){jive.StatusInput.StatusInputs=$Class.extend({init:function(a,b){this._container=$j(a);this._i18n=b.i18n;this.statusInputs={};var c=this;$j(document).asyncReady(function(){c._docReadyInit(b);c.emit("ready")})},getSubmitVals:function(a){return this.getStatusInput(a).getSubmitVals(true)},resetText:function(a){this.getStatusInput(a).resetText()},_docReadyInit:function(a){var b=this;this._container.find(".jive-js-statusinput").each(function(){var c=$j(this).attr("id");b.statusInputs[c]=new jive.StatusInput.StatusInput($j(this),a)})},getStatusInput:function(a){return this.statusInputs[a]}});jive.conc.observable(jive.StatusInput.StatusInputs.prototype);jive.StatusInput.StatusInput=$Class.extend({init:function(a,b){b.mobileUI=b.mobileUI||jive.rte.mobileUI;this._container=$j(a);this.mobileUI=b.mobileUI;if(this.mobileUI){this._container=$j("<input type='text' class='rteReplacement'/>");$j(a).before(this._container);$j(a).remove()}this._mobileEditor=b.mobileUI;this._i18n=b.i18n;this._selection=null;this._replacedInitialText=false;this._initDD(b);this._initDataHandlers();this._initDDHandlers();this._maxCharCount=b.maxCharCount;this._maxCharCountBeforeWarning=((this._maxCharCount)?(b.maxCharCountBeforeWarn||this._maxCharCount*0.8):0);this._previousMatchReqsSpaceAfter=null;this._previousPasteVal=null;this._previousSanitizedHTML=null;this._supportsDomRange=$j.isFunction(window.getSelection);this._id=this._container.attr("id");var c=this;$j(document).bind("keyup mouseup",function(d){d.stopPropagation();switch(d.which){case 1:case 2:case 3:break;case 13:d.preventDefault();break;case 27:c._dd.hide();return;break;default:break}});this._container.bind("keypress",function(d){switch(d.which){case 13:d.preventDefault();if(this._mobileEditor){return false}break}});this.delay=(function(){var d=0;return function(f,e){clearTimeout(d);d=setTimeout(f,e)}})();this._container.bind("keydown",function(g){g.stopPropagation();switch(g.which){case 13:g.preventDefault();break;case 37:if(!$j.browser.msie){if(c._selection._selection.anchorNode&&c._selection._selection.anchorNode.parentNode==c._container[0].firstChild&&c._selection._selection.anchorOffset==0){$j(c._container[0]).html("&nbsp"+$j(c._container[0]).html());c._selection.moveToNodeAndCollapse(c._container[0].firstChild,true,0)}}else{var f=document.selection.createRange(),d=rangy.getSelection();if(f&&f.parentElement()==c._container[0].firstChild&&d.anchorOffset==0){$j(c._container[0]).html("&nbsp"+$j(c._container[0]).html());c._selection.moveToNodeAndCollapse(c._container[0].firstChild,true,0)}}return;break;case 38:case 40:if(c._dd.isVisible()){g.preventDefault()}break;default:break}c.delay(function(){c._selection=new jive.Selection();switch(g.which){case 13:if(this._mobileEditor){return false}if(c._dd.isVisible()){c._dd.hide();return false}if(c._supportsDomRange){var i=document.createElement("br");i.setAttribute("data-jive-statusinputadd","true");var j=document.createTextNode("");c._selection.insertNodeAtRange(j);c._selection.insertNodeAtRange(i);c._selection.moveToNodeAndCollapse(i.nextSibling,false,0)}else{var h=document.selection.createRange();h.pasteHTML("<br data-jive-statusinputadd='true'>");h.select();c._selection._range=h;c._selection._selection=document.selection}break;case 27:c._dd.hide();c.emit("escapeKeyPress");return;break;case 32:c._dd.hide();return;break;case 37:case 39:return;break;case 38:return;break;case 40:c._dd.selectItem(0);return;break;default:break}if((c._mobileEditor&&c._container.val().length==0)||(!c._mobileEditor&&c._container.text().length==0)){c._dd.hide();if(c._maxCharCount){c.emit("characterLenMsg","ok",{charCount:c.getCharCount()})}return}c.sanitizeHTML();if(!c._replacedInitialText){c._replacedInitialText=true}c._processToken();if(c._maxCharCount){var e=c.getCharCount();if(e>c._maxCharCountBeforeWarning){if(c.getCharCount()>c._maxCharCount){c.emit("characterLenMsg","error",{charCount:e,charOver:e-c._maxCharCount})}else{c.emit("characterLenMsg","warning",{charCount:e,charLeft:c._maxCharCount-e})}}else{c.emit("characterLenMsg","ok",{charCount:c.getCharCount()})}}},75)});this._container.bind("focus",function(){c.sanitizeHTMLInterval=window.setInterval($j.proxy(c.sanitizeHTML,c),500)});this._container.blur(function(){c._processCompleteToken();c.emit("blur");window.clearInterval(c.sanitizeHTMLInterval)});this._addInstanceToInstanceObj()},_addInstanceToInstanceObj:function(){jive.StatusInput.StatusInput.instances[this._id]=this},_initDD:function(a){this._dd=new jive.StatusInput.StatusInputDropDown(this._container,a)},_initDataHandlers:function(){var a=this;this.addListener("searchDataObtained",function(b){a._dd.renderSearchData(b)})},_initDDHandlers:function(){var a=this;this._dd.addListener("interactionFinished",function(g,f,k){if(g!=null){var j=$j("<div />").html(g.value),i=jive.util.escapeHTML(j.text()),h=j.find("span"),c=$j.extend({"data-jive-statusInputadd":"true",href:g.href,"data-jive-statusInputInteral":"true"},k||{});g.id&&(c.jiveID=g.id);var d=(h.attr("class")||"").split(/\s+/);c["class"]=a._generateIconClass(d);var b=document.createTextNode(" ");var e=a._selection.replaceWordAtRange(i,f||"",{tag:"a",attrs:c});e.parentNode.insertBefore(b,e.nextSibling);a._selection.moveToNodeAndCollapse(b,false,b.nodeValue.length)}a._dd.hide();a._focus(true);a.emit("atMentionFinished",g.id,g.value)})},_generateIconClass:function(c){var b={"jive-icon-blog":"jive-link-blog-small","jive-icon-doctype-compressed":"jive-icon-doctype-compressed-small","jive-icon-discussion":"jive-icon-discussion-small","jive-icon-discussion-bridged":"jive-icon-discussion-bridged-small","jive-icon-discussion-correct":"jive-icon-discussion-correct-small","jive-icon-discussion-question":"jive-icon-discussion-question-small","jive-icon-doctype-acrobat":"jive-icon-doctype-acrobat-small","jive-icon-doctype-document":"jive-icon-doctype-document-small","jive-icon-doctype-image":"jive-icon-doctype-image-small","jive-icon-doctype-presentation":"jive-icon-doctype-presentation-small","jive-icon-doctype-spreadsheet":"jive-icon-doctype-spreadsheet-small","jive-icon-document":"jive-link-wiki-small","jive-icon-external-site":"jive-link-url-small","jive-icon-group":"jive-link-socialgroup-small","jive-icon-poll":"jive-link-poll-small","jive-icon-profile":"jive-link-profile-small","jive-icon-project":"jive-link-project-small","jive-icon-tag":"jive-link-tag-small","jive-icon-space":"jive-link-community-small"},a=$j.map(c,function(d){return d in b?b[d]:null});return a.shift()||""},getContainer:function(){return this._container},getSubmitVals:function(a){if(a){this._truncateNodes()}var b;if(this._mobileEditor){b=jive.util.escapeHTML(this._container.val())}else{b=this._container.html()}b=b.replace(/<\/?br _[^>]*>/gi,"");b=b.replace(/(<\/?)(\w+)([^>]*>)/gi,function(f,e,d,c){return e+d.toLowerCase()+c.replace(/((data-jive-statusInputadd)|(data-jive-truncation-flag))=["']true["']/gi,"")});b=b.replace(/(<\/?[aA]\s+[^>]*href=")([^"]*)("[^>]*>)/gi,function(g,f,e,d){if(g.search(/<\w+[^>]*data-jive-statusinputinteral="true"[^>]*>/gi)!=-1){var c=e.replace(/https?\:\/\//,"").split("/").slice(1).join("/");return f+"/"+c+d}else{return g}});return b},_truncateNodes:function(){if(this.getCharCount()>this._maxCharCount){var g=this._container[0].childNodes;var f=0;var e=false;for(var c=0;c<g.length;c++){var b=g[c];if(e){this._container[0].removeChild(b)}else{var a=$j(b).text().length;if(f+a>this._maxCharCount){var d=this._maxCharCount-f;this._truncateNode(b,d);e=true}f+=a}}}},_truncateNode:function(c,a){if(c.nodeType==3){var d=c.nodeValue;if(d.length<a){return a-d.length}else{c.nodeValue=c.nodeValue.substr(0,a);return 0}}else{var e=c.childNodes;for(var b=0;b<e.length;b++){if(a==0){c.removeChild(e[b])}else{a=this._truncateNode(e[b],a)}}}},truncateAnchors:function(){$j(this._container).find("[data-jive-statusinputadd=true]:not([data-jive-truncation-flag=true],[data-jive-statusinputinteral=true])").each(function(){var a=$j(this);a.contents().filter(function(){return this.nodeType==3}).each(function(){var b=$j(this);b.replaceWith(document.createTextNode(jive.util.truncateStr(b.text())))});a.attr("data-jive-truncation-flag",true)})},sanitizeHTML:function(){var a=this._container.html();if(this._previousSanitizedHTML==a){return}var c=this._container[0].lastChild;if(!$j.browser.msie&&(c==null||c.nodeType==3||c.nodeName&&c.nodeName.toLowerCase()!="br")){var d=document.createElement("br");d.setAttribute("_moz_dirty","");this._container[0].appendChild(d)}this.truncateAnchors();if(!$j.browser.msie){a=a.replace(/<\/?br[^>]*>$/mi,"")}var h=this;this._container.find("a[data-jive-statusinputadd=true]").filter(function(){return $j(this).text()==""}).each(function(){var j=h._selection.getRangeStartContainer();var m=$j(this);if($j(j).parents(m).length>0){var l=m.parent().contents(":not(br)");var o=l.index(m);var n;var k=0;if(o>0){n=l[o-1];k=$j(n).text().length}else{if(o<l.length-1){n=l[o+1]}}if(!n&&m.parent()[0]!==h._container[0]){n=m.parent()[0]}if(n){h._selection.moveToNodeAndCollapse(n,true,k)}}m.remove()});var e=this._container.children("[data-jive-statusInputadd!=true]");if(!$j.browser.msie){e=e.filter(":not(:last)")}e.filter("br").not("[_moz_dirty]").each(function(){$j(this).replaceWith("<br />")});e=e.not("br");if(e.length>0){var b,f=0,g=function(j){return/^style$/i.test(j.nodeName||"")},i=function(j){if(/^(p|div)$/i.test(j.tagName)){return f++>0}return false};e.each(function(){var j=$j(this);if(g(this)){j.remove()}else{if(i(this)){j.before('<br data-statusInputadd="true" />')}b=document.createTextNode(j.text());h._container[0].replaceChild(b,this)}});if(this._selection){this._selection.moveToNodeAndCollapse(b,true,b.nodeValue.length)}}this._previousPasteVal=this._container.text();this._previousSanitizedHTML=this._container.html()},resetText:function(){this._setText("");this._replacedInitialText=false;this.emit("characterLenMsg","ok",{charCount:this.getCharCount()})},handleAtMentionButtonClick:function(){this._replacedInitialText=true;var a=this._selection==null?null:this._selection.getRangeStartContainer();if(this._selection==null||$j(a).parents("#"+this._container.attr("id")).length==0||this._container.contents().length==0){this._createNewSelectionUtil()}else{this._selection.alignRangeWithNearestTextNode(a)}},getCharCount:function(){if(this.mobileUI){return this._container.val().length}else{return this._container.text().length}},_setText:function(a){if(this._mobileEditor){this._container.val(jive.util.unescapeHTML(a))}else{this._container.html(a)}},_focus:function(a){this._container.focus()},_createNewSelectionUtil:function(){var a=false;if($j.browser.msie){if(this._container.contents().length==0){this._selection=null;return}}else{var b=this._container[0].lastChild;if(!b){this.sanitizeHTML();b=this._container[0].lastChild}a=b.nodeName.toLowerCase()=="br"}this._selection=new jive.Selection(this._container[0].lastChild,a)},_getTokens:function(){return jive.StatusInput.StatusInput.Tokens},_getPatterns:function(){return jive.StatusInput.StatusInput.Patterns},_isMatch:function(b,a){return a.search(new RegExp(this._getPatterns()[b],"gi"))>-1},_matchUtil:function(b,a){return a.match(new RegExp(this._getPatterns()[b],"gi"))},_processToken:function(){if(!this._mobileEditor){var a=this._selection.getWordAtRange();if(a===""){this._processCompleteToken()}else{this._processPartialToken(a,this._selection.getRangeStartContainer())}}},_processCompleteToken:function(){if(!this._dd.isVisible()){var a=this._tokenCallbacks||[];a.forEach(function(b){b()});if(a.length<1){this._dd.hide()}this._tokenCallbacks=[]}},_processPartialToken:function(f,d){var c=[],e=this._getTokens(),a=false,b=this;Object.keys(e).forEach(function(g){var h=e[g],i=f.match(h.regExp);if(i){a=true;i.push(d);if(h.complete){c.push(function(){h.complete.apply(b,i)})}if(h.keypress){h.keypress.apply(b,i)}}});if(!a){this._dd.hide()}this._tokenCallbacks=c},_obtainData:function(b,c,a){if(jive.StatusInput.StatusInput.dataCache[b]==undefined){var d=this;$j.ajax({url:b,dataType:"json",success:function(e){jive.StatusInput.StatusInput.dataCache[b]=e;d.emit(c,e,a)},error:function(e){d.emit("dataError",e.responseText,a)}})}else{this.emit(c,jive.StatusInput.StatusInput.dataCache[b],a)}},_obtainSearchData:function(a){this._obtainData(jive.rest.url("/emention/search/")+encodeURI(a)+"*","searchDataObtained",{queryVal:a})}});jive.StatusInput.StatusInput.dataCache={};jive.StatusInput.StatusInput.instances={};$j(document).asyncReady(function(){window.setInterval(function(){jive.StatusInput.StatusInput.dataCache={}},300000)});jive.StatusInput.StatusInput.sanitizeHTMLIntervalHandler=function(){for(var a in jive.StatusInput.StatusInput.instances){jive.StatusInput.StatusInput.instances[a].sanitizeHTML()}};jive.StatusInput.StatusInput.getRegExpsFromPatterns=function(a){var b={};Object.keys(a).forEach(function(c){var d=a[c],e;if($j.isArray(d)){e=d.map(function(f){return"("+f+")"}).join("|")}else{e=d}b[c]=new RegExp(e)});return b};jive.StatusInput.StatusInput.Patterns={mention:"@([^@ ]+)?"};jive.StatusInput.StatusInput.Tokens={mention:{regExp:new RegExp(jive.StatusInput.StatusInput.Patterns.mention,"i"),keypress:function(b,a){if(a){this._obtainSearchData(a)}else{}}}};jive.conc.observable(jive.StatusInput.StatusInput.prototype);jive.StatusInput.renderAttachmentsWrapper=function(b,a,c){if(b.attachments){a.append(jive.statusinput.attachments.renderAttachments({entry:{meta:b.attachments},removable:c}))}else{a.append(jive.statusinput.attachments.renderAttachments($j.extend({},b,{removable:c})))}if(c){a.slideDown("fast",function(){$j(this).animate({opacity:1},500)})}else{a.css("opacity","1").show()}jive.StatusInput.bindAttachment(a.find("ul.j-attached-items"),c)};jive.StatusInput.renderAttachmentWrapper=function(b,a,c){a.append(jive.statusinput.attachments.renderAttachment($j.extend(b,{removable:c})))};jive.StatusInput.bindAttachment=function(b,d){var a=0,c;b.find("li:visible").each(function(){a+=$j(this).outerWidth()});b.css("width",a+"px").data("innerWidth",a);c=b.width()-b.closest(".j-attachment-container").width();if(c>0&&d){b.animate({left:(c*-1-40)},300)}b.find("li a.j-attach-anchor").unbind("hover").hover(function(){$j(this).find(".j-icon-play").stop().fadeTo("fast",0.6)},function(){$j(this).find(".j-icon-play").stop().fadeOut("fast")});b.parent().find(".j-attachment-arrow").unbind().mousedown(function(){try{var g;var i=$j(this).outerWidth()*2;c=b.width()-b.closest(".j-attachment-container").width();var f=parseInt(b.css("left"));if(isNaN(f)){f=0}if($j(this).hasClass("j-attachment-arrow-right")&&c>0){g=f+(c+i);b.stop().animate({left:(-c-i)},g*5,"linear")}else{if(c>0){g=f*-1;b.stop().animate({left:0},g*5,"linear")}}}catch(h){console.log(h)}}).mouseup(function(){b.stop();return false}).click(function(){return false});if(!d){jive.StatusInput.sizeContainer(b.parent().parent())}else{jive.StatusInput.showArrows()}};jive.StatusInput.sizeContainer=function(k){var h;k=k||$j(document);var a=k.find("div.j-attachment-container"),e=a.length;for(var c=0;c<e;c++){var d=$j(a[c]),l=d.find("ul.j-attached-items");if(l.length&&d.is(":visible")){d.hide();var g=d.closest(".jive-table-cell-activity"),f=d.closest(".j-wall-repost-content"),b=d.parent(),j;if(g.length>0){j=g.width()}else{if(f.length>0){j=f.width()}else{if(d.closest(".j-wall-form").length>0){j=0}else{if($j.browser.msie){j=b.width()-12}else{j=b.width()}}}}h=l.data("innerWidth")||Number.POSITIVE_INFINITY;if(j>0){d.width(Math.min(j,h)).show()}else{d.show()}}}jive.StatusInput.showArrows(k)};jive.StatusInput.showArrows=function(f){f=f||$j(document);var c=f.find("ul.j-attached-items");for(var d=0,a=c.length;d<a;d++){var b=$j(c[d]);if(b.is(":visible")){var e=b.parent();if(e.innerWidth()<b.innerWidth()){e.find(".j-attachment-arrow").css("display","block");b.css("margin","0 20px")}else{e.find(".j-attachment-arrow").hide();b.css({margin:"0",left:0})}}}}};
;
jive.namespace("MicroBlogging");if(!jive.MicroBlogging.StatusInputDropDown){jive.MicroBlogging.StatusInputDropDown=jive.StatusInput.StatusInputDropDown.extend({init:function(b,a){this._super(b,a);this._allowTagCreation=a.allowTagCreation==undefined?true:a.allowTagCreation},renderFriendsData:function(b){var a=this;this._renderData(b,"friends",jive.statusinput.dropdown.ddFriends,{fnHandleRender:function(){a._renderFriedsDataHelper()},renderIfDataIsNull:true})},_renderFriedsDataHelper:function(){var a=this;this._dd.find(".jive-js-history").click(function(b){a.emit("historyLinkClicked");b.stopPropagation()})},renderHistoryData:function(b){var a=this;this._renderData(b,"history",jive.statusinput.dropdown.ddHistory,{fnHandleRender:function(){a._renderHistoryDataHelper()},renderIfDataIsNull:true})},_renderHistoryDataHelper:function(){var a=this;this._dd.find(".jive-js-friends").click(function(b){a.emit("friendsLinkClicked");b.stopPropagation()})},renderTagsData:function(b,c){var a=true;if(b){$j.each(b.tagSearchResult,function(e,d){if(d.name===c){a=false}})}if(this._allowTagCreation||c==null||b!=null&&b.tagSearchResult.length>0){this._renderData(this._normalizeTagsData(b),"tags",jive.statusinput.dropdown.ddTags,{renderIfDataIsNull:true,selectionPrefix:"#",extraTemplateData:{currentTagText:c,allowTagCreation:this._allowTagCreation,shouldCreateTag:a}})}else{this.hide()}},_normalizeTagsData:function(c){var d={mentionCollection:""};if(c!=null&&c.tagSearchResult){for(var b=0;b<c.tagSearchResult.length;b++){var a=c.tagSearchResult[b];if(a.found){if(d.mentionCollection==""){d.mentionCollection={};d.mentionCollection.entries=new Array()}d.mentionCollection.entries.push({html:'<a  class="jive-js-status-input-selectable" href="'+_jive_base_url+"/tags#/?tags="+encodeURIComponent(a.name)+'"><span class="jive-icon-med jive-icon-tag"></span>'+jive.util.escapeHTML(a.name)+"</a>",id:a.name})}}}return d},_makeSelection:function(c,d,b){if(c.hasClass("jive-js-status-input-create")){var e=c.attr("data-id");var a={newtag:1};this.emit("interactionFinished",{index:-1,value:'<span class="jive-icon-med jive-icon-tag"></span>'+e,href:_jive_base_url+"/tags#/?tags="+e,html:c.html()},null,a)}else{this._super(c,d,b)}}})};
;
jive.namespace("MicroBlogging");if(!jive.MicroBlogging.StatusInputs){jive.MicroBlogging.StatusInputs=jive.StatusInput.StatusInputs.extend({_docReadyInit:function(a){this._container.find(".jive-js-statusinput").each(function(d,b){var f=$j(b).attr("id"),e=this.emit.bind(this,"characterLenMsg"),c=this.emit.bind(this,"atMentionFinished");this.statusInputs[f]=new jive.MicroBlogging.StatusInput(b,a).addListener("characterLenMsg",e).addListener("atMentionFinished",c)}.bind(this))}});jive.MicroBlogging.StatusInput=jive.StatusInput.StatusInput.extend({init:function(a,b){this._super(a,b);this._focusOnRdy=b.focusOnRdy;this._allowTagCreation=b.allowTagCreation==undefined?true:b.allowTagCreation;var d=this;if(b.defaultValue){d._container.prev(".jive-js-statusinput-default").hide()}else{var e=0;function c(){if(e==0){e=$j(d._container).height()}}}this._container.bind("click",function(f){d._container.trigger("focus")});this._container.bind("focus",function(f){d._container.prev(".jive-js-statusinput-default").hide();$j("#j-js-mb-success").hide();if(!b.doNotAnimate){c();d._container.animate({minHeight:Math.max(e*2.2,15)},150);d._container.addClass("j-mb-focused")}d._container.attr("contentEditable",true);d.emit("focus")});this._container.prev().click(function(){d._container.focus()})},triggerOnFocusAnimation:function(){if(this._focusOnRdy){this._container.trigger("focus")}},_initDD:function(a){this._dd=new jive.MicroBlogging.StatusInputDropDown(this._container,a)},_initDataHandlers:function(){this._super();var a=this;this.addListener("friendsDataObtained",function(c,b){a._dd.renderFriendsData(c);if(b.selectItemOnLoad){a._dd.selectItem(0)}});this.addListener("historyDataObtained",function(c,b){a._dd.renderHistoryData(c);if(b.selectItemOnLoad){a._dd.selectItem(0)}});this.addListener("tagsDataObtained",function(c,b){a._dd.renderTagsData(c,b.queryVal)})},_initDDHandlers:function(){this._super();var a=this;this._dd.addListener("friendsLinkClicked",function(){a._obtainFriendsData(true)});this._dd.addListener("historyLinkClicked",function(){a._obtainHistoryData(true)})},_getTokens:function(){return jive.MicroBlogging.StatusInput.Tokens},_getPatterns:function(){return jive.MicroBlogging.StatusInput.Patterns},_obtainFriendsData:function(a){this._obtainData(jive.rest.url("/emention/friends"),"friendsDataObtained",{selectItemOnLoad:a})},_obtainHistoryData:function(a){this._obtainData(jive.rest.url("/emention/history"),"historyDataObtained",{selectItemOnLoad:a})},_obtainTagsData:function(a){this._obtainData(jive.rest.url("/tags/search?query="+encodeURIComponent(a)+"*"),"tagsDataObtained",{queryVal:a})},handleAtMentionButtonClick:function(){this._super();if(this._selection==null){this._container.append(document.createTextNode("@"));this._selection=new jive.Selection(this._container[0].lastChild,false,1)}else{var e=this._selection.getRangeStartContainer();var b=this._selection.getRangeStartOffset();var f=e.nodeValue;var d="";if(f!=null){if(f.substring(b-1,b).search(/\S/)>-1){d+=" "}d+="@";if(f.substring(b,b+1).search(/\S/)>-1){d+=" "}}else{d="@"}var c=document.createTextNode(d);var a=Math.min(d.length,2);if(!$j.browser.msie&&e.tagName&&e.tagName.toLowerCase()=="br"){$j(c).insertBefore(e);this._selection.moveToNodeAndCollapse(c,true,a);this._container.focus()}else{this._container.focus();this._selection=new jive.Selection();this._selection.insertNodeAtRange(c,a)}}this._obtainFriendsData()},swapLinkFor:function(a,c){function b(g,e,f){if(g.nodeType==3){var d=null;var k=g.nodeValue;if(k.indexOf(e)<0){return}if(k.indexOf(e)==0){g.nodeValue=k.substring(e.length);g.parentNode.insertBefore($j(c)[0],g);d=g}else{if(k.indexOf(e)==(k.length-e.length)){g.nodeValue=k.substring(0,k.indexOf(e));g.parentNode.insertBefore($j(c)[0],g);g.parentNode.insertBefore(g,g.previousSibling);d=$j(c)[0]}else{var l=k.substring(0,k.indexOf(e));var m=k.substring(k.indexOf(e)+e.length);g.nodeValue=m;g.parentNode.insertBefore(document.createTextNode(l),g);g.parentNode.insertBefore($j(c)[0],g);d=g}}if(d.nodeType==3&&d.nodeValue.length>1){var j=document.createTextNode(d.nodeValue.substring(1));d.nodeValue=d.nodeValue.substring(0,1);g.parentNode.insertBefore(j,d);g.parentNode.insertBefore(d,j)}jive.Selection.moveCursorAfter(d)}if(g.nodeType==1){if(g.nodeName.toLowerCase()=="a"){return}else{for(var h=0;h<g.childNodes.length;h++){b(g.childNodes[h],e,f)}}}}b(this._container[0],a,c)}});(function(a){var b={mention:"^@([^@ ]+)?",tags:"^#([^# ]+)?",youtubeURL:"https?\\://(?:[\\w\\-]+\\.)?youtube\\.com/watch\\S*[&?]v=([^&\\s]+)\\S*",imageURL:"https?\\://\\S+(\\.png|\\.jpg|\\.gif|\\.jpeg)",linkURL:"https?\\://\\S+"};a.Patterns=b;a.Tokens={mention:{regExp:new RegExp(b.mention,"i"),keypress:function(d,c){if(c){this._obtainSearchData(c)}else{this._obtainFriendsData()}}},tags:{regExp:new RegExp(b.tags,"i"),keypress:function(d,c){if(c){this._obtainTagsData(c)}else{this._dd.renderTagsData()}}},youtubeURL:{regExp:new RegExp(b.youtubeURL,"i"),keypress:function(c,d){this.emit("youtubeURLMatch",c);this.emit("linkURLMatch",c);this._dd.hide()}},imageURL:{regExp:new RegExp(b.imageURL,"i"),keypress:function(d,f,e){if(!$j(e).parent().attr("data-jive-statusinputImageURL")){this.emit("imageURLMatch",d);var c={href:d};c["data-jive-statusinputadd"]=true;c["data-jive-statusinputImageURL"]=true;this._selection.replaceWordAtRange(d,null,{tag:"a",attrs:c});this._focus(true)}this._dd.hide()}},linkURL:{regExp:new RegExp(b.linkURL,"i"),complete:function(c,d){if(!$j(d).parent().attr("data-jive-statusinputImageURL")){this.emit("linkURLMatch",c)}this._dd.hide()}}}})(jive.MicroBlogging.StatusInput);jive.MicroBlogging.StatusInput.setupLiveFocusHandler=function(a){$j("#"+a).live("focus",jive.MicroBlogging.StatusInput.initialFocusHandler)};jive.MicroBlogging.StatusInput.focus=function(a){$j("#"+a).click()};jive.MicroBlogging.StatusInput.initialFocusHandler=function(a){if(!jive.MicroBlogging.StatusInput.focusedIDs){jive.MicroBlogging.StatusInput.focusedIDs={}}jive.MicroBlogging.StatusInput.focusedIDs[$j(this).attr("id")]=true;$j("#"+$j(this).attr("id")).die("focus",jive.MicroBlogging.StatusInput.initialFocusHandler)}};
;
jive.namespace("MicroBlogging");jive.MicroBlogging.AttachmentView=jive.AbstractView.extend(function(a){this.init=function(b){this._super(b);this.$imageContainer=null;this.isCreateForm=b.isCreateForm||true;this.resizeHandlerRegistered=false;this.ie7=$j.browser.msie&&$j.browser.version<8;if(this.ie7){$j.fx.off=true}};a.getSoyTemplate=function(b){return jive.statusinput.attachments.renderAttachment(b)};a.getSoyTemplateAttachments=function(b){return jive.statusinput.attachments.renderAttachments(b)};a.renderAttachments=function(c){var b=this.getContent();b.append(this.getSoyTemplateAttachments($j.extend({removable:this.isCreateForm},c)));if(this.isCreateForm){b.slideDown("fast",function(){$j(this).animate({opacity:1},500)})}else{b.css("opacity","1").show()}};a.renderAttachment=function(c){var b=this.getContent().find("li.j-attached-loading");b.before(this.getSoyTemplate($j.extend({removable:this.isCreateForm},c)))};a.registerResizeHandler=function(){if(!this.resizeHandlerRegistered){var b=this;$j(window).resize((function(){var c;return function(){var d=$j(window).width();if(c&&d!==c){b.resize()}c=d}})());this.resizeHandlerRegistered=true}};this.postRender=function(){this._super();var d=this.getContent();this.registerResizeHandler();var c=d.find("ul.j-attached-items"),b=this;d.undelegate();d.delegate("a.j-attachment-arrow","mousedown",function(){try{b.scrollHandler($j(this),c)}catch(f){console.log(f)}}).delegate("a.j-attachment-arrow","mouseup",function(){c.stop();return false}).delegate("a.j-attachment-arrow","click",function(){return false});this.resize()};this.add=function(d,e){var b=this,f=e.meta,c=this.getContent(),h=c.find("ul.j-attached-items"),g=f[0];$j.extend(g,{originalURL:d});if(h.length>0){this.renderAttachment({attachment:g});b.postRender()}else{this.renderAttachments({attachments:f})}c.find("li:not(.j-attached-loading):last > .j-remove-attachment").click(function(){b.emitP("removeImage",g.id).addCallback(function(i){b.removeAttachment(g.id)}).addErrback(function(j,i){console.log("error removing attachment with id "+g.id)});return false});this.hideLoadingNotification();this.resize();this.scrollHandler(c.find("a.j-attachment-arrow-right"),h)};this.showLoadingNotification=function(){var b=this.getContent().find("li.j-attached-loading");if(b.length==0){this.renderAttachments({entry:{meta:[]}})}b.show()};this.hideLoadingNotification=function(){var b=this.getContent().find("li.j-attached-loading");b.hide();if(b.length&&b.siblings(":not(.j-attached-loading)").size()==0){this.reset()}};this.reset=function(){this.getContent().html("").hide().find("li.j-attached-loading").hide();this.metaData=[]};this.removeAttachment=function(c){var b=$j("#"+c);if(b.size()>0&&b.siblings(":not(.j-attached-loading)").size()==0){this.reset()}b.remove();this.metaData=this.metaData.filter(function(d){return c!==d.id})};this.removeAllAttachments=function(){var c=this;var b=this.getContent().find("ul.j-attached-items li:not(.j-attached-loading)").map(function(){return parseInt(this.id)});for(var e=0,d=b.length;e<d;e++){c.emitP("removeImage",b[e]).addCallback(function(f){c.removeAttachment(b[e])}).addErrback(function(g,f){console.log("error removing attachment with id "+b[e])})}};this.hide=function(){this.hideAllMenus();this.getContent().hide()};this.resize=function(){var d=0,c=this.getContent(),b=c.width();c.find("li.j-attached-image, li.j-attached-video").each(function(){d+=$j(this).outerWidth()});var e=this.getAttachmentScrollDim();if(e.containerWidth<e.attachmentsWidth){this.showArrows()}else{this.hideArrows()}c.find("ul.j-attached-items").css("width",e.attachmentsWidth+"px")};this.scrollHandler=function(d,c){var e,h=d.outerWidth()*2,g=this.getAttachmentScrollDim(),f=g.attachmentsWidth-g.containerWidth,b=parseInt(c.css("left"));if(isNaN(b)){b=0}if(d.hasClass("j-attachment-arrow-right")&&f>0){e=b+(f+h);c.stop().animate({left:(-f-h)},e*5,"linear")}else{if(f>0){e=b*-1;c.stop().animate({left:0},e*5,"linear")}}};a.getAttachmentScrollDim=function(){var b=this.getContent(),c={containerWidth:b.width(),attachmentsWidth:0};b.find("li.j-attached-image, li.j-attached-video").each(function(){c.attachmentsWidth+=$j(this).outerWidth()});return c};a.showArrows=function(){var b=this.getContent();b.find("a.j-attachment-arrow").css("display","block");b.find("ul.j-attached-items").css("margin-left","20px")};a.hideArrows=function(){var b=this.getContent();b.find("a.j-attachment-arrow").hide();b.find("li.j-attached-image, li.j-attached-video").first().css("margin-left","0px")}});jive.MicroBlogging.AttachmentView.views={};
;
jive.namespace("shared");jive.shared.FormWaitingView=$Class.extend({init:function(a,b){this._$container=$j(a);b=b||{};if(b.containerPadding){this._containerPadding=b.containerPadding}else{this._containerPadding=this._$container.css("padding-left")==null?0:Number(this._$container.css("padding-left").replace("px",""))}this._buttonSelector=b.buttonSelector||"input[type=button], input[type=submit]";this._bgCssClass=b.bgCssClass||"jive-form-waiting-disable-bg"},disableForm:function(){var e=new jive.loader.LoaderView({size:"big"});if(this._$container.find(".jive-js-form-disable").length==0){var c={width:this._$container.innerWidth(),height:this._$container.innerHeight(),left:0,top:0};var d=$j(jive.shared.formwaiting.formWaitingOverlay({bgCssClass:this._bgCssClass}));for(var b in c){d.css(b,c[b]+"px")}d.prependTo(this._$container);var a=e.getContent();e.appendTo(d);a.css("left",(c.width/2-a.width()/2)+"px");a.css("top",(c.height/2-a.height()/2)+"px");this._$container.find(this._buttonSelector).attr("disabled",true)}},enableForm:function(){this._$container.find(".jive-js-form-disable").remove();this._$container.find(this._buttonSelector).removeAttr("disabled")}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.CommonView=jive.AbstractView.extend(function(a){this.init=function(b){this._super(b);this.idPostfix=b.idPostfix;this.maxCharCount=b.maxCharCount;this.statusInput=null;this.attachmentsView=null;this.$waitingViewElem=null;this.$formElem=null;this.$imageFormElem=null;this.mobileUI=b.mobileUI||jive.rte.mobileUI;this.atMentionBtn=b.atMentionBtn;this.imgAttachmentBtn=b.imgAttachmentBtn;this.submitBtn=b.submitBtn;this.cancelBtn=b.cancelBtn;if(b.supportAttachments==undefined){this.supportAttachments=true}else{this.supportAttachments=b.supportAttachments}this.doNotAnimate=!!b.doNotAnimate;this.allowTagCreation=b.allowTagCreation};this.postRender=function(){var b=this;if(this.mobileUI&&this.atMentionBtn.length){this.atMentionBtn.remove()}this.createFormElem();this.createWaitingViewElem();this.createWatingView();this.createActionContainer();this.statusInput=new jive.MicroBlogging.StatusInput(this.getContent().find(".jive-js-statusinput"),{maxCharCount:this.maxCharCount,idPostfix:this.idPostfix,focusOnRdy:true,doNotAnimate:this.doNotAnimate,allowTagCreation:this.allowTagCreation,i18n:{}});this.statusInput.addListener("escapeKeyPress",b.resetStatusInput.bind(b)).addListener("characterLenMsg",b.handleCharacterLenMsg.bind(b)).addListener("atMentionFinished",b.handleAtMentionResult.bind(b));this.atMentionBtn.click(function(c){b.handleAtMentionClick(c,$j(this))});if(this.imgAttachmentBtn&&window._jive_images_enabled){this.imgAttachmentBtn.jiveFileButton({name:"image"}).bind("choose",function(d,f){var c=b._getMetaImageContainer().find("form");c.prepend(f);c.submit()})}this._getMetaImageContainer().find("form").submit(function(){var c=$j(this);if(c.find("input[type=file]").val()==""){return false}b.handleImageURLMatch(null);return false});this.submitBtn.click(function(c){b.handleSubmitClick(c)});if(this.cancelBtn){this.cancelBtn.click(function(c){b.attachmentsView.removeAllAttachments();b.attachmentsView.reset();b.resetStatusInput();b.emit("cancel")})}this.statusInput.addListener("linkURLMatch",function(c){b.handleLinkURLMatch(c)}).addListener("imageURLMatch",function(c){if(!b.supportAttachments){return}b.handleImageURLMatch(c)}).addListener("youtubeURLMatch",function(c){if(!b.supportAttachments){return}b.handleYoutubeURLMatch(c)}).addListener("focus",function(c){b.handleFocus(c)});this.attachmentsView=new jive.MicroBlogging.AttachmentView(this._getAttachmentsViewOptions());this.attachmentsView.addListener("removeImage",function(d,c){if(!b.supportAttachments){return}b.emitP("removeImage",d).addCallback(function(e){c.emitSuccess(e)}).addErrback(function(f,e){c.emitError(f,e)})})};this.getStatusInput=function(){return this.statusInput};this.focus=function(){this.statusInput._focus()};this.createWaitingViewElem=function(){throw"createWaitingViewElem method is abstract. Need to implmenet in subclass"};this.createWatingView=function(){this.waitingView=new jive.shared.FormWaitingView(this.$waitingViewElem)};this.enableForm=function(){this.waitingView.enableForm()};this.disableForm=function(){this.waitingView.disableForm()};this.createFormElem=function(){throw"createFormElem method is abstract. Need to implement in subclass"};this.createActionContainer=function(){this.$actionContainer=this.$formElem.find("[id^=status-input-actions-]")};this.handleAtMentionClick=function(c,b){this.statusInput.handleAtMentionButtonClick();this.emit("atMentionClick");c.stopPropagation()};this.handleAtMentionResult=function(){return null};this.handleCharacterLenMsg=function(c){var e=arguments[1]||{},b=this.$formElem.eq(0).find(".j-js-status-input-characters-remaining"),d=({ok:{msg:""},warning:{msg:jive.wall.charLenErrors({error:false,numChars:e.charLeft}),className:"warning"},error:{msg:jive.wall.charLenErrors({error:true,numChars:e.charOver}),className:"danger"}})[c];b.html(d.msg).removeClass("warning danger");if(c!=="ok"){b.addClass(d.className)}};this.handleLinkURLMatch=function(c){var b=this;this.emitP("linkURLMatch",c).addCallback(function(e,d){b.renderResolvedLink(d,e)}).addErrback(function(e,d){b.renderError(e,d)})};this.renderResolvedLink=function(c,b){this.statusInput.swapLinkFor(c,b)};a.getDraftData=function(){return null};this._getAttachmentsViewOptions=function(){return{selector:this.selector+" .jive-js-attachment-container"}};this._getMetaImageContainer=function(){return this.getContent().find("div.j-meta-image-container")};this.handleImageURLMatch=function(c){this.attachmentsView.showLoadingNotification();this.setDataForURLImage(c);var b=this;this.emitP("imageURLMatch",c,this.$imageFormElem,this.getDraftData()).addCallback(function(e,d){b.renderImageAttachment(d,e)}).addErrback(function(e,d){b.attachmentsView.hideLoadingNotification();b.renderError(e,d)})};this.handleYoutubeURLMatch=function(c){this.attachmentsView.showLoadingNotification();var b=this;this.emitP("youtubeURLMatch",c,this.getDraftData()).addCallback(function(e,d){b.renderVideoAttachment(d,e)}).addErrback(function(e,d){b.renderError(e,d)})};this.renderImageAttachment=function(b,c){this.attachmentsView.add(b,c)};this.renderVideoAttachment=function(b,c){this.attachmentsView.add(b,c)};a.setDataForURLImage=function(b){this.$imageFormElem.find("input[name=imageURL]").val(b)};this.handleFocus=function(c){var b=this;if(this.$actionContainer.is(":hidden")){this._initialStatusInputHeight=this.statusInput.getContainer().height();if(!window._jive_images_enabled&&this.imgAttachmentBtn!=null){this.imgAttachmentBtn.hide()}if(($j.browser.msie&&$j.browser.version<7)){this.$actionContainer.show();this.$actionContainer.addClass("j-act-comment-actions clearfix")}else{this.$actionContainer.addClass("j-act-comment-actions clearfix");this.$actionContainer.css({opacity:0,height:1}).show().animate({height:"24px",opacity:1},200,"linear",function(){$j(this).css("height","auto")})}this.$formElem.closest("article").find("div.j-act-reply-form").addClass("r-active");this.$formElem.closest("article").find("div.eae-reply-avatar").fadeIn("fast")}if(b.getContent().find("#j-js-mb-success").length){b.getContent().find("#j-js-mb-success").fadeOut("fast",function(){$j(this).remove();b.getContent().find(".j-mb-last-update").show()})}this.emit("focus")};this.handleSubmitClick=function(c){if(this.statusInput.getCharCount()!=0||this.attachmentsView.getContent().find("li:not(.j-attached-loading)").length){if(this.maxCharCount&&this.statusInput.getCharCount()>this.maxCharCount){this.renderError(jive.wall.submitErrors({key:"over"}));this.emit("submitError",jive.wall.submitErrors({key:"over"}))}else{$j(".jive-js-error-general",this.$formElem).hide();this.waitingView.disableForm();var b=this;this.emitP("submit",this.getDataFromDom()).addCallback(function(e,d){b.renderResponse(e)}).addErrback(function(e,d){b.renderError(e,d)})}}else{this.renderError(jive.wall.submitErrors({key:"none"}));this.emit("submitError",jive.wall.submitErrors({key:"none"}))}};this.getDataFromDom=function(){throw"getDataFromDom method is abstract. Need to implmenet in subclass"};this.normalizeData=function(){return this.statusInput.getSubmitVals()};this.renderError=function(c,b){this.waitingView.enableForm();$j(".jive-js-error-general",this.$formElem).text(c);$j(".jive-js-error-general",this.$formElem).slideDown(100);setTimeout(function(){$j(".jive-js-error-general",this.$formElem).fadeOut("fast")},1500)};this.renderResponse=function(b){this.waitingView.enableForm();this.attachmentsView.reset()};this.renderResponseCommon=function(d){this.getContent().find("#j-js-mb-success").fadeOut("fast");var c=this.getContent().find(".j-mb-last-update");if(c.length){c.hide();if(d.wallentry.status!="AWAITING_MODERATION"){var e=$j(d.wallentry.message).text();e=$j("<div/>").text(e).html();c.html(jive.statusinput.containers.microbloggingStatusInputLastUpdate({latestStatusUpdate:{text:e,url:d.wallentry.URL,commentcount:0}}))}}var b=$j(jive.statusinput.containers.microbloggingStatusInputSuccess({entry:d.wallentry}));b.hide();b.find(".j-js-mb-success-dismiss").click(function(){b.fadeOut("fast",function(){$j(".j-mb-hint").show();c.show()})});this.getContent().append(b);b.animate({height:"toggle"},{duration:600},function(){if(d.wallentry.meta&&d.wallentry.meta.length>0){b.find(".jive-js-attachment-container").slideDown("fast",function(){$j(this).animate({opacity:1},500)})}});this.resetStatusInput()};this.resetStatusInput=function(){this.statusInput.resetText();this.$actionContainer.hide();this.$formElem.closest("article").find("div.eae-reply-avatar").hide();this.$formElem.closest("article").find("div.j-act-reply-form").removeClass("r-active");var b=this.statusInput.getContainer();b.css("minHeight","20px");b.prev(".jive-js-statusinput-default").show();b.removeClass("j-mb-focused");b.removeAttr("contenteditable")}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.mention_warnings=="undefined"){jive.statusinput.mention_warnings={}}jive.statusinput.mention_warnings.jsI18nHelper=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));if(!C){return B.toString()}}
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MicroBloggingView=jive.MicroBlogging.CommonView.extend(function(a){this.init=function(b){this.options=b;this._super(b)};a.getSoyTemplate=function(b){return jive.statusinput.containers.microbloggingStatusInput(b)};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this.createFormElem=function(){var b=this.getContent();this.$formElem=b.find("form");this.$imageFormElem=b.find("div.j-meta-image-container form")};this.renderResponse=function(b){this._super(b);this.renderResponseCommon(b)};this.getDataFromDom=function(){var b=this.normalizeData();return{wallentry:{message:this.normalizeData()}}};this.handleAtMentionResult=function(g,d){var e=this;if(g&&g.split("-").length==2){var c=g.split("-")[0],f=g.split("-")[1];if(c!=3){var b=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});if(b&&c){b.checkEntitlement(c,f).addCallback(function(h){if(!h){var i="";if(c==700){i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}$j("<p>"+d+" "+i+"</p>").message({style:"warn"})}})}}}}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MBCreateModalController=jive.MicroBlogging.CommonController.extend(function(a){this.init=function(b){this.options=b;this._super(b)};a.initMBView=function(){var b=$j("#j-js-mb-modal-editor");this.microbloggingView=new jive.MicroBlogging.MicroBloggingView({selector:"#j-js-mb-modal-editor",idPostfix:"mbASHeader",atMentionBtn:b.find("a.jive-js-mention-button"),imgAttachmentBtn:b.find("a.jive-js-imgattach-button"),submitBtn:b.find("a.j-status-input-submit"),maxCharCount:420})};a.submitSuccessCallback=function(b,c){this._super(b,c);$j("div.jive-modal-quickcreate").trigger("close");$j(jive.statusinput.containers.microbloggingStatusInputModalSuccess({wallentry:b.wallentry})).message({style:"success"})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.statusinput=="undefined"){jive.statusinput={}}if(typeof jive.statusinput.containers=="undefined"){jive.statusinput.containers={}}jive.statusinput.containers.microbloggingStatusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-js-',soy.$$escapeHtml(A.statusID),'" class="j-mb j-rc5 j-rc-none-bottom">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="form-',soy.$$escapeHtml(A.statusID),'" name="',soy.$$escapeHtml(A.statusID),'">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,messageCSSClasses:"j-eae-txt-area",defaultTxt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.default.text"),[])),immediatelyFocus:A.focusStatusUpdate},B);jive.statusinput.containers.renderAttachmentsContainer({removable:true},B);B.append('<input type="hidden" name="ID" value="',soy.$$escapeHtml(A.statusID),'"/>');jive.statusinput.containers.statusInputType({type:"mb"},B);jive.statusinput.containers.statusInputActions({statusID:A.statusID,i18nSubmitKey:"eae.mb.submit.text",displayImageBtn:A.canCreateMbImage,i18nCancelKey:"eae.mb.comment.cancel.text",displayAtMentionBtn:A.canAtMention},B);jive.wall.statusInputErrorWarnBox(null,B);B.append("</form>");jive.statusinput.containers.statusInputActionContainer({canCreateImage:A.canCreateMbImage,canCreateVideo:A.canCreateMbVideo},B);if(A.latestStatusUpdate){B.append('<div class="j-mb-last-update font-color-meta" style="',(!A.latestStatusUpdate.text)?"display:none":"",'">');jive.statusinput.containers.microbloggingStatusInputLastUpdate({latestStatusUpdate:A.latestStatusUpdate},B);B.append("</div>")}B.append("</div>");if(!C){return B.toString()}};jive.statusinput.containers.microbloggingStatusInputModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-update-status-quick" class="jive-userbar-slidedown-status jive-modal-content-status" data-title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.create.heading.status"),[])),'"><div id="jive-quickstatuscreate-form">');jive.statusinput.containers.microbloggingStatusInput({statusID:"mb-modal-editor",focusStatusUpdate:true,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,canAtMention:A.canAtMention},B);B.append('</div></div><script type="text/javascript">$j(function() {var mb_create_modal = new jive.MicroBlogging.MBCreateModalController(); mb_create_modal.getMicrobloggingView().focus();});<\/script>');if(!C){return B.toString()}};jive.statusinput.containers.microbloggingStatusInputModalSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",(A.wallentry.status!="AWAITING_MODERATION")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.post.success.title"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.moderation"),[])),"</p>");if(!C){return B.toString()}};jive.statusinput.containers.microbloggingStatusInputLastUpdate=function(A,C){var B=C||new soy.StringBuilder();B.append("<strong>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.last_update"),[])),"</strong> ",A.latestStatusUpdate.text,' <strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.latestStatusUpdate.url),'" class="j-comment-count j-inline-link font-color-meta-light" title="',(A.latestStatusUpdate.commentcount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comments.singular"),[A.latestStatusUpdate.commentcount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comments.plural"),[A.latestStatusUpdate.commentcount])),'"><span class="jive-icon-sml jive-glyph-comment"></span>',soy.$$escapeHtml(A.latestStatusUpdate.commentcount),"</a></strong>");if(!C){return B.toString()}};jive.statusinput.containers.microbloggingStatusInputSuccess=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-js-mb-success" class="j-mb-success-msg j-rc4"><header class="font-color-new">',(A.entry.status!="AWAITING_MODERATION")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.post.success.title"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.moderation"),[])),'<a href="javascript:void(0)" style="float:right" class="j-js-mb-success-dismiss j-mb-dismiss"><span class="jive-icon-sml jive-icon-follow-stop"></span></a></header><p>',A.entry.message,"</p><p>");if(A.entry&&A.entry.meta&&A.entry.meta.length>0){jive.statusinput.containers.renderAttachmentsContainer({id:"attachmentContainer-success",entry:A.entry,visible:true},B);B.append("<script type=\"text/javascript\">$j(function() {window.setInterval(function(){var attachmentView = new jive.MicroBlogging.AttachmentView({selector:'#attachmentContainer-success'}); attachmentView.postRender();}, 0);});<\/script>")}B.append("</p><div>");if(!C){return B.toString()}};jive.statusinput.containers.microbloggingCommentStatusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-mb j-js-mb-comment j-act-reply-form">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="form-',soy.$$escapeHtml(A.statusID),'" name="',soy.$$escapeHtml(A.statusID),'">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,messageCSSClasses:"j-eae-txt-area",defaultTxt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.comment.default.text"),[]))},B);B.append('<input type="hidden" name="ID" value="',soy.$$escapeHtml(A.statusID),'"/><input type="hidden" name="contentID" value="',soy.$$escapeHtml(A.jiveObject.id),'"/><input type="hidden" name="typeID" value="',soy.$$escapeHtml(A.jiveObject.objectType),'"/>');jive.statusinput.containers.statusInputType({type:"mbComment"},B);jive.statusinput.containers.statusInputActions({statusID:A.statusID,i18nSubmitKey:"eae.mb.submit.text",displayImageBtn:false,i18nCancelKey:"eae.mb.comment.cancel.text",displayAtMentionBtn:A.canAtMention},B);jive.wall.statusInputErrorWarnBox(null,B);B.append("</form>");jive.statusinput.containers.statusInputActionContainer({canCreateImage:false,canCreateVideo:false},B);B.append("</div>");if(!C){return B.toString()}};jive.statusinput.containers.repostStatusInput=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-eae-repost-form j-act-reply-form">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="form-',soy.$$escapeHtml(A.statusID),'" name="',soy.$$escapeHtml(A.statusID),'">');jive.wall.statusInput({statusInputIdPostfix:A.statusID,messageCSSClasses:"j-eae-txt-area",defaultTxt:""},B);jive.statusinput.containers.renderAttachmentsContainer({removable:true},B);B.append('<input type="hidden" name="ID" value="',soy.$$escapeHtml(A.statusID),'"/><input type="hidden" name="subject" value="',soy.$$escapeHtml(A.jiveObject.subject),'"/><input type="hidden" name="contentID" value="',soy.$$escapeHtml(A.jiveObject.id),'"/><input type="hidden" name="typeID" value="',soy.$$escapeHtml(A.jiveObject.objectType),'"/>');jive.statusinput.containers.statusInputType({type:"repost"},B);jive.statusinput.containers.statusInputActions({statusID:A.statusID,i18nSubmitKey:"eae.menu.repost",displayImageBtn:A.canCreateMbImage,displayAtMentionBtn:A.canAtMention,i18nCancelKey:"eae.mb.comment.cancel.text"},B);jive.wall.statusInputErrorWarnBox(null,B);B.append("</form>");jive.statusinput.containers.statusInputActionContainer({canCreateImage:A.canCreateMbImage,canCreateVideo:A.canCreateMbVideo},B);B.append("</div>");if(!C){return B.toString()}};jive.statusinput.containers.statusInputActions=function(A,C){var B=C||new soy.StringBuilder();B.append("<div id='",(A.idPrefix)?A.idPrefix:"status-input-actions-",soy.$$escapeHtml(A.statusID),'\' class="j-status-input-actions" style="display:none"><a href="javascript:void(0);" class="j-status-input-submit j-btn-global j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18nSubmitKey),[])),"</a>",(A.i18nCancelKey)?'<a href="javascript:void(0);" class="j-status-input-cancel j-btn-global close">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.i18nCancelKey),[]))+"</a>":"",(A.displayImageBtn)?'<a href="javascript:void(0);" class="jive-js-imgattach-button j-wall-meta-image j-btn-global"  title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[]))+'"><span class="jive-icon-med jive-icon-photo"></span></a>':"",(A.displayAtMentionBtn)?'<a href="javascript:void(0);" class="jive-js-mention-button j-wall-meta-reference j-btn-global" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[]))+'"><span class="jive-icon-med jive-icon-mention"></span></a>':"",'<span class="j-js-status-input-characters-remaining j-status-input-chars-left j-rc4"></span></div>');if(!C){return B.toString()}};jive.statusinput.containers.statusInputActionContainer=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-status-input-attach-action-container clearfix j-rc4">',(A.canCreateImage)?'<div class="j-meta-image-container j-attach-tab clearfix"><form method="post" enctype="multipart/form-data"><input type="file" name="image" /><input type="hidden" name="imageURL" /><input type="hidden" name="privateDM" value="'+((A.isPrivateDM)?"true":"false")+'" /></form></div>':"",(A.canCreateVideo)?'<div class="j-meta-video-container j-attach-tab clearfix"><form method="post"><input type="file" name="image" /><input type="hidden" name="imageURL" /><input type="hidden" name="privateDM" value="'+((A.isPrivateDM)?"true":"false")+'" /></form></div>':"","</div>");if(!C){return B.toString()}};jive.statusinput.containers.statusInputType=function(A,C){var B=C||new soy.StringBuilder();B.append('<input type="hidden" name="statusInputType" value="',soy.$$escapeHtml(A.type),'"/>');if(!C){return B.toString()}};jive.statusinput.containers.renderAttachmentsContainer=function(A,C){var B=C||new soy.StringBuilder();B.append("<div ",(A.id)?'id="'+A.id+'" ':"",'class="jive-js-attachment-container j-attachment-container clearfix" ',(A.visible)?'style="display:block"':"",">");if(A.entry&&A.entry.meta){jive.statusinput.attachments.renderAttachments({entry:A.entry,removable:A.removable},B)}B.append("</div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.activitystream=="undefined"){jive.eae.activitystream={}}if(typeof jive.eae.activitystream.include=="undefined"){jive.eae.activitystream.include={}}jive.eae.activitystream.include.activityVerbPhrase=function(H,F){var D=F||new soy.StringBuilder();if(H.object.deleted){D.append((H.type==2)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.replied.to"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.commentedon"),[]))+" ")}else{if(H.object.typeThread){D.append((H.type=="created")?(H.object.hasQuestion)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.asked"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.starteddiscussion"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type."+H.type),[])))}else{if(H.object.parentAuthor&&(!H.hideDetailedReplyTo||H.object.typeWallEntryComment)){if(H.object.typeWallEntryComment){var B=new soy.StringBuilder();var A=new soy.StringBuilder();if(H.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(H.object.parentAuthor,A)}else{A.append(soy.$$escapeHtml(H.object.parentAuthor.displayName))}jive.shared.soy.escapeHelper({stringToEscape:A.toString()},B);jive.shared.soy.i18nHelper({i18nKey:"activity.type.wallentrycomment",arg0:B.toString(),noAutoEscape:true},D)}else{if(!H.hideDetailedReplyTo){var I=new soy.StringBuilder();var G=new soy.StringBuilder();if(H.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(H.object.parentAuthor,G)}else{G.append(soy.$$escapeHtml(H.object.parentAuthor.displayName))}jive.shared.soy.escapeHelper({stringToEscape:G.toString()},I);jive.shared.soy.i18nHelper({i18nKey:(H.object.commentContentResource&&H.object.commentContentResource.objectType==129)?"activity.type.authorcommentedinresponseto":(H.object.typeMessage)?"activity.type.repliedinresponseto":"activity.type.commentedinresponseto",arg0:I.toString(),noAutoEscape:true},D);D.append((H.againstObject)?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.on"),[]))+" ":"")}}}else{if(H.object.typeMessage||H.type=="share"){D.append((!H.againstObject)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.replied"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.replied.to"),[]))+" ")}else{if(H.object.typeComment){D.append((H.object.commentContentResource&&H.object.commentContentResource.objectType==129)?(!H.againstObject)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.authorcomment"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.authorcommentto"),[]))+" ":(!H.againstObject)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.commented"),[]))+" ":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.commentedon"),[]))+" ")}else{if(H.object.typePoll&&H.type=="created"){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.startedpoll"),[])))}else{if((H.object.typeBlogPost||H.object.typeDocument)&&H.type=="created"){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.wrote"),[])))}else{if(H.object.typeUserStatus){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status"),[])))}else{if(H.object.typeWallEntry){if(H.type=="liked"){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.liked"),[])))}else{if(H.type=="repost"){var E=new soy.StringBuilder();var C=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(H.object.repostedUser,C);jive.shared.soy.escapeHelper({stringToEscape:C.toString()},E);jive.shared.soy.i18nHelper({i18nKey:(H.object.repostedUser.id==H.user.id)?"activity.type.status.repost.your":"activity.type.status.repost",arg0:E.toString(),noAutoEscape:true},D)}else{if(H.object.wallCreationSrc!=""){jive.shared.soy.i18nHelper({i18nKey:"activity.type.status.with.source",arg0:H.object.wallCreationSrc,noAutoEscape:true},D)}else{D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status"),[])))}}}}else{if(H.object.typeProjectStatus){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.updatedStatus"),[])))}else{if(H.object.typeUserRelationship){var K=new soy.StringBuilder();var J=new soy.StringBuilder();jive.shared.displayutil.avatar(soy.$$augmentData(H.object.relatedUser,{size:"32"}),J);jive.shared.displayutil.userDisplayNameLink(H.object.relatedUser,J);jive.shared.soy.escapeHelper({stringToEscape:J.toString()},K);jive.shared.soy.i18nHelper({i18nKey:"activity.type."+H.type,arg0:K.toString(),noAutoEscape:true},D)}else{if(H.object.typeExternalActivity){D.append(H.object.text," ")}else{if(H.object.typeDirectMessage){D.append((H.object.user.id==H.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.directmessage.you.sent"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.directmessage"),[])))}else{D.append((H.type!="")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type."+H.type),[])):"")}}}}}}}}}}}}}if(!F){return D.toString()}}
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamCount=$Class.extend({init:function(a){this.lastRefreshTimes={index0:0,index1:0,index2:0,index7:0,index8:0,index9:0,index11:0};this.lastCheckTimes={index0:0,index1:0,index2:0,index7:0,index8:0,index9:0,index11:0};this.newActivityCounts={index0:0,index1:0,index2:0,index7:0,index8:0,index9:0,index10:0};this.fullCounts={index1:{unreadCount:0,unreadItems:[]},index7:0,index8:0,index9:0,index11:0,index12:0}}});
;
jive.namespace("ActivityStream");jive.ActivityStream.FillInTheGapRequest=$Class.extend({init:function(a){this.originalIDs=a.originalIDs;this.timestamp=a.timestamp;this.fullContent=a.fullContent;this.pageSize=a.pageSize}});
;
jive.namespace("ActivityStream");jive.ActivityStream.FullRepliesRequest=$Class.extend({init:function(a){this.originalIDs=a.originalIDs}});
;
jive.namespace("ActivityStream");jive.ActivityStream.StreamSource=jive.RestService.extend(function(a){a.resourceType="activity-stream";a.pluralizedResourceType=a.resourceType;jive.conc.observable(this);a.init=function(b){this._super(b);this.suppressGenericErrorMessages()};this.list=function(c,d){var b=this.RESOURCE_ENDPOINT+"/"+c.userId+"/"+c.streamType+"/"+c.filterType+"/list";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:d})};this.getMore=function(d,b){var c=this.RESOURCE_ENDPOINT+"/"+d.objectType+"/"+d.objectID+"/"+d.streamType+"/"+d.filterType+"/list/before";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:b})};this.exclude=function(c,d){var b=this.RESOURCE_ENDPOINT+"/exclusions/object/set";if(c!="item"){b=this.RESOURCE_ENDPOINT+"/exclusions/context/set"}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(d)},d)};this.saveActiveStreamTab=function(c){var b=this.RESOURCE_ENDPOINT+"/activetab/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:c})};this.saveActiveStreamFilter=function(c,d){var b=this.RESOURCE_ENDPOINT+"/activefilter/save/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:d})};this.saveActiveInboxItem=function(b,d){var c=this.RESOURCE_ENDPOINT+"/activeitem/save/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.saveRefreshTime=function(b){var c=this.RESOURCE_ENDPOINT+"/refreshtime/save";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:b})};this.updatePrevRefreshTime=function(c,d){var b=this.RESOURCE_ENDPOINT+"/prevrefreshtime/save/"+c;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:d})};this.exclusionRules=function(c){var b=this.RESOURCE_ENDPOINT+"/exclusions/list";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)},c)};this.removeExclusions=function(c){var b=this.RESOURCE_ENDPOINT+"/exclusions/remove";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b,data:JSON.stringify(c)},c)};this.newCount=function(){var b=this.RESOURCE_ENDPOINT+"/new/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:b})};this.getFullContent=function(b,d){var c=this.RESOURCE_ENDPOINT+"/fullcontent/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,dataType:"html"})};this.getFullReplies=function(b,e,d){var c=this.RESOURCE_ENDPOINT+"/fullreplies/"+b+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.fillInTheGaps=function(b,e,d){var c=this.RESOURCE_ENDPOINT+"/fillinthegaps/"+b+"/"+e;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.communications=="undefined"){jive.eae.communications={}}if(typeof jive.eae.communications.include=="undefined"){jive.eae.communications.include={}}jive.eae.communications.include.filtermenu=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="',soy.$$escapeHtml(A.streamType),'-filtermenu" class="j-act-filter-menu j-quick-menu j-action-popover" style="display:none;"><ul><li><a data-filterName=\'all\' href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.all"),[])),"</a></li><li><a data-filterName='mentions' href=\"#\">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.mentions"),[])),"</a></li>",(A.dmEnabled)?"<li><a data-filterName='directmessages' href=\"#\">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.directmessages"),[]))+"</a></li>":"","<li><a data-filterName='shares' href=\"#\">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.shares"),[])),"</a></li></ul></div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.actionqueue=="undefined"){jive.eae.actionqueue={}}if(typeof jive.eae.actionqueue.item=="undefined"){jive.eae.actionqueue.item={}}jive.eae.actionqueue.item.contentNotificationRequest=function(F,D){var B=D||new soy.StringBuilder();B.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data mod-request clearfix"><div class="j-actionQ-item-actions clearfix">');var I=F.data.actions;var C=I.length;for(var E=0;E<C;E++){var G=I[E];jive.eae.actionqueue.actionQueueItemAction({action:G},B)}B.append('</div><h4><span class="jive-icon-med jive-icon-moderation"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.moderation.label"),[])),"</h4>");if(F.data.messageKey){var H=new soy.StringBuilder("<a ",(F.data.objData.href)?'href="'+jive.soy.func.normalizeUrl(window._jive_base_url,F.data.objData.href)+'"':"",' class="title">');jive.eae.actionqueue.item.renderContentLabel({data:F.data},H);H.append("</a>");var A=new soy.StringBuilder();if(F.data.container){jive.shared.displayutil.containerDisplayNameLink({container:F.data.container,hideTooltip:false},A)}else{}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(F.data.messageKey),arg0:H.toString(),arg1:A.toString(),noAutoEscape:true},B)}B.append("<p>",(F.data.responseMessage)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(F.data.responseMessage):"","</p></div></div>");if(!D){return B.toString()}};jive.eae.actionqueue.item.renderContentLabel=function(A,C){var B=C||new soy.StringBuilder();B.append("\t");if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName));if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.actionqueue=="undefined"){jive.eae.actionqueue={}}jive.eae.actionqueue.actionQueue=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-action-queue" class="j-aq">');if(A.actionQueue.actionQueueList&&A.actionQueue.actionQueueList.length>0){jive.eae.actionqueue.actionQueueList({actionQueue:A.actionQueue},B)}else{jive.eae.actionqueue.noActionQueueResults({queueType:A.queueType},B)}B.append("</div>");if(!C){return B.toString()}};jive.eae.actionqueue.actionQueueList=function(B,G){var C=G||new soy.StringBuilder();if(B.actionQueue.actionQueueList){var F=B.actionQueue.actionQueueList;var A=F.length;for(var D=0;D<A;D++){var E=F[D];jive.eae.actionqueue.actionQueueItemView({actionQueueItem:E},C)}}C.append((B.actionQueue.hasMore)?"<a class='j-js-load-more j-act-append j-rc6' href='#'><span class=\"j-rc6\">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.load_more"),[]))+"</span></a>":"");if(!G){return C.toString()}};jive.eae.actionqueue.noActionQueueResults=function(A,C){var B=C||new soy.StringBuilder();B.append('<article class="j-js-aq-noresults j-aq-noresults"><span class="j-empty font-color-meta">',(A.queueType==0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.no.unread.notifications"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.no_pending_actions"),[])),"</span></article>");if(!C){return B.toString()}};jive.eae.actionqueue.actionQueueItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="article_actionqueue_',soy.$$escapeHtml(A.actionQueueItem.entryID),'" data-creationdate="',soy.$$escapeHtml(A.actionQueueItem.creationDate),'" class="j-action-entry clearfix">');if(A.actionQueueItem.template){jive.shared.soy.render({templateName:A.actionQueueItem.template,data:(function(){var F={};var E=[["data",A.actionQueueItem.templateData],["creationTime",A.actionQueueItem.creationTime]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:false},B)}B.append("</article>");if(!C){return B.toString()}};jive.eae.actionqueue.excerptActionQueueItemView=function(C,G){var F=G||new soy.StringBuilder();F.append('<div class="j-av">');if(C.actionQueueItem.user){jive.shared.displayutil.avatar(soy.$$augmentData(C.actionQueueItem.user,{size:"32"}),F)}else{if(C.actionQueueItem.nonUserSource){jive.eae.actionqueue.nonUserSourceImage({source:C.actionQueueItem.nonUserSource,size:"32"},F)}}F.append("</div>");jive.eae.actionqueue.actionQueueItemInfo({actionQueueItem:C.actionQueueItem},F);F.append('<div class="j-actionQ-item-actions clearfix">');var B=C.actionQueueItem.actions;var D=B.length;for(var E=0;E<D;E++){var A=B[E];jive.eae.actionqueue.actionQueueItemAction({action:A},F)}F.append("</div>");if(!G){return F.toString()}};jive.eae.actionqueue.nonUserSourceImage=function(A,C){var B=C||new soy.StringBuilder();B.append('<img class="jive-avatar" src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.source.imgurl),'" width="',soy.$$escapeHtml(A.size),'" alt="" height="',soy.$$escapeHtml(A.size),'"/>');if(!C){return B.toString()}};jive.eae.actionqueue.actionQueueItemInfo=function(A,C){var B=C||new soy.StringBuilder();if(A.actionQueueItem.user){if(!A.actionQueueItem.user.anonymous){jive.shared.displayutil.userDisplayNameLink(A.actionQueueItem.user,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}}B.append(" ",soy.$$escapeHtml(A.actionQueueItem.message),'<a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.actionQueueItem.jiveObject.jiveObjectURL),'" class="title"><span class="jive-icon-med  ',soy.$$escapeHtml(A.actionQueueItem.jiveObject.jiveObjectCSS),'"></span>',soy.$$escapeHtml(A.actionQueueItem.jiveObject.renderedSubject),"</a>",(A.actionQueueItem.details)?"<div class='j-action-details clearfix'><a href='#' class='j-js-view-action-details'>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.details.more"),[]))+"</a></div>":"");if(!C){return B.toString()}};jive.eae.actionqueue.actionQueueItemAction=function(A,C){var B=C||new soy.StringBuilder();B.append((A.action.href)?'<a href="'+soy.$$escapeHtml(A.action.href)+'" class="j-btn-global j-action-button">'+soy.$$escapeHtml(A.action.name)+"</a>":'<a href="#" name="'+soy.$$escapeHtml(A.action.code)+'" class="j-btn-global j-action-button">'+soy.$$escapeHtml(A.action.name)+"</a>");if(!C){return B.toString()}};jive.eae.actionqueue.actionQueueItemActionResult=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-action-result">');if(A.data.templateData.template){jive.shared.soy.render({templateName:A.data.templateData.template,data:(function(){var F={};var E=[["data",A.data.templateData]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:false},B)}B.append("</div>");if(!C){return B.toString()}};jive.eae.actionqueue.actionError=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-action-result" style="">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.error_performing_action"),[])),"</div>");if(!C){return B.toString()}};jive.eae.actionqueue.actionQueueItemDetails=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(A.actionQueueItem.details));if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.license=="undefined"){jive.license={}}jive.license.smbTitle=function(A,C){var B=C||new soy.StringBuilder();B.append("<!--       --><!-- Title --><!--       -->");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.date",arg0:soy.$$escapeHtml(A.date),noAutoEscape:true},B);if(!A.smb.platformMoreAlarming){B.append("<p>");switch(A.smb.maxAlarmLevel){case"fail":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.failed"),[])),"</h2>");break;case"critical":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.critical"),[])),"</h2>");break;case"warning":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.warning"),[])),"</h2>");break;case"notice":B.append(" <h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.notice"),[])),"</h2>");break}B.append("</p>")}if(!C){return B.toString()}};jive.license.smbFooter=function(A,C){var B=C||new soy.StringBuilder();B.append("<br><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.footer"),[])),"</p>");if(!C){return B.toString()}};jive.license.smbBody=function(P,Q){var M=Q||new soy.StringBuilder();M.append("<!-- platform message -->");if(P.smb.platformAlarmLevel!="normal"){M.append("<p>");switch(P.smb.platformAlarmLevel){case"fail":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.failed",arg0:soy.$$escapeHtml(P.smb.platformInfo.expiration),arg1:soy.$$escapeHtml(P.smb.platformInfo.shutdown),noAutoEscape:true},M);M.append("</h2>");break;case"critical":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.critical",arg0:soy.$$escapeHtml(P.smb.platformInfo.expiration),arg1:soy.$$escapeHtml(P.smb.platformInfo.shutdown),arg2:soy.$$escapeHtml(P.smb.platformInfo.daysToShutdown),noAutoEscape:true},M);M.append("</h2>");break;case"warning":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.warning",arg0:soy.$$escapeHtml(P.smb.platformInfo.expiration),noAutoEscape:true},M);M.append("</h2>");break;case"notice":M.append("<h2>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.platform.notice",arg0:soy.$$escapeHtml(P.smb.platformInfo.daysToExpiration),arg1:soy.$$escapeHtml(P.smb.platformInfo.expiration),noAutoEscape:true},M);M.append("</h2>");break}M.append("</p>")}if(!P.smb.purePlatform){M.append("<!-- modules are in the mix -->");if(P.smb.hasExpiredGroups){M.append("<br>");if(P.smb.hasCritical){M.append("<p>");if(P.smb.hasFailedGroups){M.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.failed.header"),[])))}else{jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.header",arg0:soy.$$escapeHtml(P.smb.graceDays)},M)}M.append("</p><p><ul>");var T=P.smb.expiredGroups;var S=T.length;for(var L=0;L<S;L++){var N=T[L];M.append("<li>");if(N.daysToShutdown>0){jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.critical",arg0:soy.$$escapeHtml(N.expiration),arg1:soy.$$escapeHtml(N.daysToShutdown),arg2:soy.$$escapeHtml(N.shutdown),noAutoEscape:true},M)}else{jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.failure",arg0:soy.$$escapeHtml(N.expiration),arg1:soy.$$escapeHtml(N.shutdown),noAutoEscape:true},M)}var B=N.modules;var F=B.length;for(var a=0;a<F;a++){var K=B[a];M.append((!(a==0))?",":""," <b>",soy.$$escapeHtml(K),"</b>")}M.append("</li>")}M.append("</ul></p>")}else{M.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("license.compliance.messaging.subscription.modules.expired.warning.header"),[])),"</p><p><ul>");var C=P.smb.warnGroups;var D=C.length;for(var W=0;W<D;W++){var X=C[W];M.append("<li>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expired.warning",arg0:soy.$$escapeHtml(X.expiration),noAutoEscape:true},M);var I=X.modules;var J=I.length;for(var E=0;E<J;E++){var O=I[E];M.append((!(E==0))?",":""," <b>",soy.$$escapeHtml(O),"</b>")}M.append("</li>")}M.append("</ul></p>")}}if(P.smb.noticeGroups){M.append("<br>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expiring.header",arg0:soy.$$escapeHtml(P.smb.warningDays)},M);M.append("<br><p><ul>");var H=P.smb.noticeGroups;var G=H.length;for(var Y=0;Y<G;Y++){var Z=H[Y];M.append("<li>");jive.shared.soy.i18nHelper({i18nKey:"license.compliance.messaging.subscription.modules.expiring",arg0:soy.$$escapeHtml(Z.expiration),noAutoEscape:true},M);var U=Z.modules;var V=U.length;for(var R=0;R<V;R++){var A=U[R];M.append((!(R==0))?",":""," <b>",soy.$$escapeHtml(A),"</b>")}M.append("</li>")}M.append("</ul></p>")}}if(!Q){return M.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.actionqueue=="undefined"){jive.eae.actionqueue={}}if(typeof jive.eae.actionqueue.item=="undefined"){jive.eae.actionqueue.item={}}jive.eae.actionqueue.item.socialGroupJoinRequest=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data clearfix"><div class="j-actionQ-item-actions clearfix">');var F=A.data.actions;var B=F.length;for(var D=0;D<B;D++){var E=F[D];jive.eae.actionqueue.actionQueueItemAction({action:E},C)}C.append('</div><div class="j-av">');if(A.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(A.data.user,{size:"32"}),C)}C.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.request.label"),[])),"</h4>");jive.eae.actionqueue.item.actionQueueItemInfo({data:A.data},C);C.append("</div></div>");if(!G){return C.toString()}};jive.eae.actionqueue.item.socialGroupJoinRequestResult=function(A,C){var B=C||new soy.StringBuilder();if(A.data.user){if(!A.data.user.anonymous){jive.shared.displayutil.userDisplayNameLink(A.data.user,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a>");if(!C){return B.toString()}};jive.eae.actionqueue.item.userRelApprovalRequest=function(C,B){var A=B||new soy.StringBuilder();A.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data user-approved clearfix"><div class="j-actionQ-item-actions clearfix">');var G=C.data.actions;var H=G.length;for(var D=0;D<H;D++){var E=G[D];jive.eae.actionqueue.actionQueueItemAction({action:E},A)}A.append('</div><div class="j-av">');if(C.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(C.data.user,{size:"32"}),A)}A.append('</div><h4><span class="jive-icon-med jive-icon-people"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.relationship.label"),[])),"</h4>");var I=new soy.StringBuilder();if(C.data.isCurrentUser){I.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.you"),[])))}else{if(!C.data.user.anonymous){jive.shared.displayutil.userDisplayNameLink(C.data.user,I)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},I)}}var F=new soy.StringBuilder();if(C.data.isRelatedUser){F.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.apprv.you"),[])))}else{if(!C.data.relatedUser.anonymous){jive.shared.displayutil.userDisplayNameLink(C.data.relatedUser,F)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},F)}}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.request_connection",arg0:I.toString(),arg1:F.toString(),arg2:soy.$$escapeHtml(C.data.label),noAutoEscape:true},A);A.append((C.data.requestMessage)?"<p>&#147;"+soy.$$escapeHtml(C.data.requestMessage)+"&#148;</p>":"");jive.eae.actionqueue.item.notifiedUsers({data:C.data},A);A.append("</div></div>");if(!B){return A.toString()}};jive.eae.actionqueue.item.userRelApprovalRequestResult=function(A,F){var C=F||new soy.StringBuilder();var D=new soy.StringBuilder();if(A.data.isCurrentUser){D.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.you"),[])))}else{if(!A.data.user.anonymous){jive.shared.displayutil.userDisplayNameLink(A.data.user,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},D)}}var B=new soy.StringBuilder();if(A.data.isRelatedUser){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.apprv.your"),[])))}else{var E=new soy.StringBuilder();if(!A.data.relatedUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.data.relatedUser,E)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},E)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.user.plural",arg0:E.toString(),noAutoEscape:true},B)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(A.data.messageKey),arg0:D.toString(),arg1:(A.data.isCurrentUser)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.have"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.has"),[])),arg2:B.toString(),arg3:soy.$$escapeHtml(A.data.label),noAutoEscape:true},C);if(!F){return C.toString()}};jive.eae.actionqueue.item.userRelNotificationRequest=function(F,D){var B=D||new soy.StringBuilder();B.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data user-rel-request clearfix"><div class="j-actionQ-item-actions clearfix">');var C=F.data.actions;var I=C.length;for(var J=0;J<I;J++){var E=C[J];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}B.append((F.data.isFollowing)?'<div class="js-follow-user-link j-action-button clearfix" data-userid="'+soy.$$escapeHtml(F.data.user.id)+'" data-bidirectional="false" data-displayname="'+soy.$$escapeHtml(F.data.user.displayName)+'" data-approvals-enabled="'+soy.$$escapeHtml(F.data.approvalsEnabled)+'"><a href="#" class="js-follow j-action-button j-btn-global" '+((F.data.isFollowing=="true"||F.data.isPendingApproval=="true")?'style="display:none"':"")+"><span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.startfollowing.text"),[F.data.user.displayName]))+'</span></a><span class="js-pending j-action-button j-btn-global j-disabled" '+((F.data.isPendingApproval=="false")?'style="display:none"':"")+"><span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.follow.pendingapproval.text"),[]))+'</span></span><a href="#" class="j-connection-remove js-unfollow j-action-button j-btn-global" '+((F.data.isFollowing=="false")?'style="display:none"':"")+"><span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.stopfollowing.text"),[F.data.user.displayName]))+"</span></a></div>":"",'</div><div class="j-av">');if(F.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(F.data.user,{size:"32"}),B)}B.append('</div><h4><span class="jive-icon-med jive-icon-people"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.relationship.label"),[])),"</h4>");var H=new soy.StringBuilder();if(F.data.isCurrentUser){H.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.you"),[])))}else{if(!F.data.user.anonymous){jive.shared.displayutil.userDisplayNameLink(F.data.user,H)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},H)}}var A=new soy.StringBuilder();if(F.data.isRelatedUser){A.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.apprv.your"),[])))}else{var G=new soy.StringBuilder();if(!F.data.relatedUser.anonymous){jive.shared.displayutil.userDisplayNameLink(F.data.relatedUser,G)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},G)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.rel.user.plural",arg0:G.toString(),noAutoEscape:true},A)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(F.data.messageKey),arg0:H.toString(),arg1:(F.data.isCurrentUser)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.have"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.rel.has"),[])),arg2:A.toString(),arg3:soy.$$escapeHtml(F.data.label),noAutoEscape:true},B);jive.eae.actionqueue.item.notifiedUsers({data:F.data},B);B.append("</div></div>");if(!D){return B.toString()}};jive.eae.actionqueue.item.socialGroupJoinNotificationRequest=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data sg-join-reqest clearfix"><div class="j-actionQ-item-actions">');var C=A.data.actions;var D=C.length;for(var F=0;F<D;F++){var E=C[F];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}B.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p></div></div>");if(!G){return B.toString()}};jive.eae.actionqueue.item.invitationNotificationRequest=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data invite-request clearfix"><div class="j-actionQ-item-actions clearfix">');var C=A.data.actions;var D=C.length;for(var F=0;F<D;F++){var E=C[F];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}B.append('</div><div class="j-av">');if(A.data.inviter){jive.shared.displayutil.avatar(soy.$$augmentData(A.data.inviter,{size:"32"}),B)}B.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.invite.label"),[])),"</h4><p>");if(!A.data.inviter.anonymous){jive.shared.displayutil.userDisplayNameLink(A.data.inviter,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}B.append(" ",soy.$$escapeHtml(A.data.inviteText),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p></div></div>");if(!G){return B.toString()}};jive.eae.actionqueue.item.documentApprovalRequest=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data doc-approved clearfix"><div class="j-actionQ-item-actions clearfix">');var C=A.data.actions;var D=C.length;for(var F=0;F<D;F++){var E=C[F];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}B.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.request.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.doc.approval.request"),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p></div></div>");if(!G){return B.toString()}};jive.eae.actionqueue.item.documentApprovalNotificationRequest=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data doc-request-approval clearfix"><div class="j-actionQ-item-actions clearfix">');var B=A.data.actions;var D=B.length;for(var F=0;F<D;F++){var E=B[F];jive.eae.actionqueue.actionQueueItemAction({action:E},C)}C.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p><p>",(A.data.rejectionNote)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(A.data.rejectionNote):"","</p></div></div>");if(!G){return C.toString()}};jive.eae.actionqueue.item.externalApprovalRequest=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data ext-request-approval clearfix"><div class="j-actionQ-item-actions clearfix">');var E=A.data.actions;var F=E.length;for(var C=0;C<F;C++){var B=E[C];jive.eae.actionqueue.actionQueueItemAction({action:B},D)}D.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.doc.approval.request"),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},D)}else{D.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}D.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.externalNotificationRequest=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data ext-request clearfix"><div class="j-actionQ-item-actions clearfix">');var E=A.data.actions;var F=E.length;for(var C=0;C<F;C++){var B=E[C];jive.eae.actionqueue.actionQueueItemAction({action:B},D)}D.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},D)}else{D.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}D.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p><p>",(A.data.rejectionNote)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(A.data.rejectionNote):"","</p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.moderatedContentNotificationRequest=function(A,H){var B=H||new soy.StringBuilder();B.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data mod-request clearfix"><div class="j-actionQ-item-actions clearfix">');var D=A.data.actions;var E=D.length;for(var G=0;G<E;G++){var F=D[G];jive.eae.actionqueue.actionQueueItemAction({action:F},B)}B.append('</div><h4><span class="jive-icon-med jive-icon-moderation"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.moderation.label"),[])),"</h4>");var C=new soy.StringBuilder('<a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),"</a>");jive.shared.soy.i18nHelper({i18nKey:(A.data.commentMessageKey)?soy.$$escapeHtml(A.data.commentMessageKey):soy.$$escapeHtml(A.data.messageKey),arg0:C.toString(),noAutoEscape:true},B);B.append("<p>",(A.data.responseMessage)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reason"),[]))+": "+soy.$$escapeHtml(A.data.responseMessage):"","</p></div></div>");if(!H){return B.toString()}};jive.eae.actionqueue.item.collaboratorNotificationRequest=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data j-collab-request clearfix"><div class="j-actionQ-item-actions clearfix">');var F=A.data.actions;var B=F.length;for(var E=0;E<B;E++){var D=F[E];jive.eae.actionqueue.actionQueueItemAction({action:D},C)}C.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},C)}else{C.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}C.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p></div></div>");if(!G){return C.toString()}};jive.eae.actionqueue.item.pendingTaskNotification=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data task-pending clearfix"><div class="j-actionQ-item-actions clearfix">');var A=B.data.actions;var C=A.length;for(var F=0;F<C;F++){var E=A[F];jive.eae.actionqueue.actionQueueItemAction({action:E},D)}D.append('</div><h4><span class="jive-icon-med jive-icon-task"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.task.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(B.data.messageKey),[])),': <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.data.objData.href),'" class="title">');if(B.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:B.data.objData.iconElement},D)}else{D.append('<span class="',soy.$$escapeHtml(B.data.objData.iconCSS),'"></span>')}D.append(soy.$$escapeHtml(B.data.objData.displayName),"</a></p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.userRegistrationApproval=function(B,H){var D=H||new soy.StringBuilder();D.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data user-approved clearfix"><div class="j-actionQ-item-actions clearfix">');var A=B.data.actions;var C=A.length;for(var F=0;F<C;F++){var E=A[F];jive.eae.actionqueue.actionQueueItemAction({action:E},D)}D.append('</div><div class="j-av">');if(B.data.user){jive.shared.displayutil.avatar(soy.$$augmentData(B.data.user,{size:"32",hideTooltip:"true"}),D)}D.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>");var G=new soy.StringBuilder();if(!B.data.user.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(B.data.user,{hideTooltip:"true"}),G)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},G)}jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.user.reg.approval_request",arg0:G.toString(),noAutoEscape:true},D);D.append("</p>",(B.data.requestMessage)?"<p>&#147;"+soy.$$escapeHtml(B.data.requestMessage)+"&#148;</p>":"");jive.eae.actionqueue.item.notifiedUsers({data:B.data},D);D.append("</div></div>");if(!H){return D.toString()}};jive.eae.actionqueue.item.assignedTaskNotification=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data task-assigned clearfix"><div class="j-actionQ-item-actions clearfix">');var E=A.data.actions;var F=E.length;for(var C=0;C<F;C++){var B=E[C];jive.eae.actionqueue.actionQueueItemAction({action:B},D)}D.append('</div><div class="j-av">');if(A.data.assignor){jive.shared.displayutil.avatar(soy.$$augmentData(A.data.assignor,{size:"32"}),D)}D.append('</div><h4><span class="jive-icon-med jive-icon-task"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.task.label"),[])),"</h4><p>");if(!A.data.assignor.anonymous){jive.shared.displayutil.userDisplayNameLink(A.data.assignor,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},D)}D.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.data.messageKey),[])),': <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},D)}else{D.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}D.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.upgradeEmailPreferences=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data j-act-emailprefs clearfix"><div class="j-actionQ-item-actions clearfix">');var E=A.data.actions;var F=E.length;for(var C=0;C<F;C++){var B=E[C];jive.eae.actionqueue.actionQueueItemAction({action:B},D)}D.append("</div><h2>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.title"),[])),"</h2><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.desc"),[])),"</p><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.new.title"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.new.desc"),[])),"</p><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.old.title"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.old.desc"),[])),'</p><p><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,"/user-preferences!input.jspa"),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.edit.lnk"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.edit.lnk"),[])),"</a></p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.upgradeEmailPreferencesResult=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.i18nHelper({i18nKey:A.data.messageKey,noAutoEscape:true,arg0:'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/user-preferences!input.jspa")+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.email.pref.aq.customize"),[]))+"</a>"},B);if(!C){return B.toString()}};jive.eae.actionqueue.item.actionQueueItemInfo=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>");if(A.data.user){if(!A.data.user.anonymous){jive.shared.displayutil.userDisplayNameLink(A.data.user,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},B)}}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.sg.join.request"),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.data.objData.href),'" class="j-jq-obj title">');if(A.data.objData.iconElement){jive.shared.displayutil.renderIconElement({icon:A.data.objData.iconElement},B)}else{B.append('<span class="',soy.$$escapeHtml(A.data.objData.iconCSS),'"></span>')}B.append(soy.$$escapeHtml(A.data.objData.displayName),"</a></p>");jive.eae.actionqueue.item.notifiedUsers({data:A.data},B);if(!C){return B.toString()}};jive.eae.actionqueue.item.notifiedUsers=function(A,G){var C=G||new soy.StringBuilder();if(A.data.notifiers.length>0){C.append('<p class="j-jq-users">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.also.seen.by"),[])),": ");var B=A.data.notifiers;var E=B.length;for(var F=0;F<E;F++){var D=B[F];jive.shared.displayutil.userDisplayNameLink(D,C);C.append((!(F==E-1))?", ":"")}C.append("</p>")}if(!G){return C.toString()}};jive.eae.actionqueue.item.widgetsDeprecatedNotification=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data widgets-deprecated clearfix"><div class="j-actionQ-item-actions clearfix">');var A=B.data.actions;var C=A.length;for(var F=0;F<C;F++){var E=A[F];jive.eae.actionqueue.actionQueueItemAction({action:E},D)}D.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.deprecated.notification"),[])),'</p><p><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.data.url),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.gotoyourplaces.link"),[])),"</a></p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.personalizedHomepage=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data personalized-homepage"><div class="j-actionQ-item-actions">');var E=A.data.actions;var F=E.length;for(var C=0;C<F;C++){var B=E[C];jive.eae.actionqueue.actionQueueItemAction({action:B},D)}D.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.personalhome.notification.title"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.personalhome.notification.text"),[])),'</p><p><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,"/index.jspa?showpersonalized=true"),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.personalhome.notification.link"),[])),"</a></p></div></div>");if(!G){return D.toString()}};jive.eae.actionqueue.item.colleagueFollow=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data colleague-follows clearfix"><div class="j-actionQ-item-actions clearfix">');var C=A.data.actions;var D=C.length;for(var F=0;F<D;F++){var E=C[F];jive.eae.actionqueue.actionQueueItemAction({action:E},B)}B.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.colleague.follow.text"),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,"/people?filterID=following"),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("upgrade.colleague.follow.following.link"),[])),"</a></p></div></div>");if(!G){return B.toString()}};jive.eae.actionqueue.item.licenseSubscriptionNotice=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-aq-no-av clearfix"><div class="j-actionQ-item-data compliance-notice ',soy.$$escapeHtml(A.data.smb.platformAlarmLevel=="normal"?A.data.smb.maxAlarmLevel:A.data.smb.maxAlarmLevel),' clearfix"><div class="j-actionQ-item-actions clearfix">');var F=A.data.actions;var B=F.length;for(var E=0;E<B;E++){var D=F[E];jive.eae.actionqueue.actionQueueItemAction({action:D},C)}C.append('</div><h4><span class="jive-icon-med jive-icon-gear"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.actionqueue.system.label"),[])),"</h4>");jive.license.smbTitle({smb:A.data.smb,date:A.data.date},C);jive.license.smbBody({smb:A.data.smb},C);jive.license.smbFooter(null,C);C.append("</div></div>");if(!G){return C.toString()}};jive.eae.actionqueue.item.externalActivityEntry=function(C,H){var D=H||new soy.StringBuilder();D.append('<div class="j-aq-av clearfix"><div class="j-actionQ-item-data app-activity-temp clearfix"><div class="j-actionQ-item-actions clearfix">');var E=C.data.actions;var F=E.length;for(var B=0;B<F;B++){var A=E[B];jive.eae.actionqueue.actionQueueItemAction({action:A},D)}D.append('</div><div class="j-av">');if(C.data.assignor){jive.shared.displayutil.avatar(soy.$$augmentData(C.data.assignor,{size:"32"}),D);if(C.data.objData.icon){jive.shared.displayutil.renderIconElement({icon:C.data.objData.icon},D)}}D.append("</div><h4>");if(!C.data.assignor){if(C.data.objData.icon){jive.shared.displayutil.renderIconElement({icon:C.data.objData.icon},D);D.append(" ")}}D.append(C.data.objData.body,'</h4><div class="j-aq-summary">',C.data.objData.title,"</div>");if(C.data.objData.summary){D.append('<nav class="clearfix"><a href="#" onclick="return false;" class="j-actionQ-detail-show">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.details.more"),[])),'</a><a href="#" onclick="return false;" class="j-actionQ-detail-hide" style="display:none;">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.details.less"),[])),'</a></nav><div style="display:none;" class="j-rc4 j-aq-detail clearfix">');if(C.data.meta){jive.eae.activitystream.renderStreamAttachments({object:C.data,domIDPostfix:C.data.objData.jiveID},D)}else{if(C.data.thumbnailImage){jive.shared.displayutil.renderIconElement({icon:C.data.thumbnailImage},D)}}D.append(C.data.objData.summary,(C.data.objData.mediaLink)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,C.data.objData.mediaLink.contentUrl?C.data.objData.mediaLink.contentUrl:C.data.objData.mediaLink.imageUrl)+'" target="_blank" title="'+soy.$$escapeHtml(C.data.objData.mediaLink.filename?C.data.objData.mediaLink.filename:"")+'"><div class="j-act-attachment">'+((C.data.objData.mediaLink.thumbnailUrl)?'<div class="j-media-attachment"><img src="'+soy.$$escapeHtml(C.data.objData.mediaLink.thumbnailUrl)+'" title="'+soy.$$escapeHtml(C.data.objData.mediaLink.title)+'" alt="'+soy.$$escapeHtml(C.data.objData.mediaLink.title)+'" width="'+soy.$$escapeHtml(C.data.objData.mediaLink.thumbnailWidth)+'" height="'+soy.$$escapeHtml(C.data.objData.mediaLink.thumbnailHeight)+'" border="0"/></div>':(C.data.objData.mediaLink.iconClass)?'<span class="jive-icon-big '+soy.$$escapeHtml(C.data.objData.mediaLink.iconClass)+'"></span><span>'+soy.$$escapeHtml(C.data.objData.mediaLink.title)+"</span>":"")+"</div></a>":"","</div>")}D.append(' <div class="j-act-meta font-color-meta">',(C.creationTime)?'<span class="j-act-time font-color-meta-light">'+soy.$$escapeHtml(C.creationTime)+"</span>":""," ");var G=new soy.StringBuilder();jive.eae.actionqueue.item.externalActivityEntryGeneratorName(C.data.objData.generator,G);jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.from.external.activity.generator",noAutoEscape:true,arg0:G.toString()},D);D.append("</div></div></div>");if(!H){return D.toString()}};jive.eae.actionqueue.item.externalActivityEntryGeneratorName=function(A,C){var B=C||new soy.StringBuilder();B.append((A!=null)?(A.name)?(A.url)?(((A.url).match(new RegExp("/^https?:\\/\\//",""))||[]))?'<a href="'+A.url+'">'+soy.$$escapeHtml(A.name)+"</a>":'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+'">'+soy.$$escapeHtml(A.name)+"</a>":soy.$$escapeHtml(A.name):"":"");if(!C){return B.toString()}}
;
jive.namespace("ActionQueue");jive.ActionQueue.ListItemView=jive.AbstractView.extend(function(a){this.init=function(b){this._super(b);this.itemID=b.itemID;this.creationDate=b.creationDate};a.getSoyTemplate=function(b){return jive.eae.actionqueue.actionQueueItemView(b)};this.postRender=function(){var b=this;var c=this.getContent();c.find(".j-action-button").unbind();c.find(".j-action-button").click(function(j){var d=$j(this).attr("name");if(!d){$j(".j-loading-bg").show();return}var f=parseInt(d),i=$j(this),g=i.closest("article");var h="";b.emit("performAction",b.itemID,f,h,function(e){g.fadeOut("fast",function(){if(e.templateData.template){var k=$j(jive.eae.actionqueue.actionQueueItemActionResult({data:e}));g.html(k);g.addClass("j-aq-processed");g.fadeIn("fast",function(){window.setTimeout(function(){g.fadeOut("fast",function(){g.remove();b.emit("actionCompleted",{itemID:b.itemID})})},e.notificationTimeout)})}else{g.remove();b.emit("actionCompleted",{itemID:b.itemID})}})},function(){g.append(jive.eae.actionqueue.actionError());g.addClass("font-color-danger j-aq-error")});j.preventDefault()});c.find(".j-actionQ-detail-show, .j-actionQ-detail-hide").unbind();c.find(".j-actionQ-detail-show").click(function(){c.find(".j-aq-detail").slideDown("fast",function(){c.find(".j-actionQ-detail-show").hide();c.find(".j-actionQ-detail-hide").fadeIn("fast")})});c.find(".j-actionQ-detail-hide").click(function(){c.find(".j-aq-detail").slideUp("fast",function(){c.find(".j-actionQ-detail-hide").hide();c.find(".j-actionQ-detail-show").fadeIn("fast")})})};this.getID=function(){return this.itemID};this.getCreationDate=function(){return this.creationDate}});
;
jive.namespace("ActionQueue");jive.ActionQueue.ListView=jive.AbstractView.extend(function(a){this.init=function(b){var c=this;c._super(b);c.queueType=b.queueType;c.actionQueueItems=new Array();c.counter=1;c.$listView=$j("#j-action-queue");c.previousCount=0};a.getSoyTemplate=function(b){return jive.eae.actionqueue.actionQueueList(b)};this.postRender=function(){var b=this;b.actionQueueItems=new Array();this.getContent().find("a.j-js-load-more").live("click",function(c){var f=$j(this);this.spinner=new jive.loader.LoaderView({size:"small",showLabel:false});this.spinner.appendTo(f);var d=this.spinner;f.find(".j-more-label").hide();f.addClass("j-append-active");b.emit("loadMore",b.actionQueueItems[b.actionQueueItems.length-1].getCreationDate(),function(e){f.remove();e.queueType=b.queueType;var g=$j(b.getSoyTemplate(e));g.hide();b.append(g);g.fadeIn(2000);f.removeClass("j-append-active");g.filter("[id^=article_]").each(function(h){b.initQueueItem($j(this),h,true)})});c.preventDefault()});this.getContent().find("[id^=article_]").each(function(c){b.initQueueItem($j(this),c,true)})};a.initQueueItem=function(c,f,d){var b=this,e=new jive.ActionQueue.ListItemView({selector:b.selector+"  #"+c.attr("id"),itemID:parseInt(c.attr("id").split("_")[2]),creationDate:c.attr("data-creationDate")});e.addListener("performAction",function(k,i,j,h,g){if(b.queueType==1){if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("actions",1)}}b.emit("performAction",k,i,j,h,g)}).addListener("actionCompleted",function(h){var g=b.actionQueueItems[b.actionQueueItems.length-1].getCreationDate();b.emit("actionCompleted",g,function(i){if(i.actionQueue.actionQueueList.length){var k=b.getContent().find("a.j-js-load-more");k.addClass("j-append-active");k.remove();i.queueType=b.queueType;var j=$j(b.getSoyTemplate(i));j.hide();b.append(j);j.fadeIn(2000);k.removeClass("j-append-active");j.filter("[id^=article_]").each(function(l){b.initQueueItem($j(this),l,true)})}else{if(!b.getContent().find("[id^=article_]").length&&!b.getContent().find(".j-js-aq-noresults").length){b.getContent().prepend(jive.eae.actionqueue.noActionQueueResults({queueType:b.queueType}))}}})});e.postRender();if(d){b.actionQueueItems.push(e)}else{return e}};this.refresh=function(f){var d=this;var e=d.getContent().find(".j-js-aq-noresults");e.remove();var b=this;f.queueType=b.queueType;var h=$j(b.getSoyTemplate(f)),g=true;if(!b.getContent().find("[id^=article_]").length){g=false}if(h.filter("[id^=article_]").length<=b.getContent().find("[id^=article_]").length){h.filter(".j-js-load-more").remove()}h.filter("[id^=article_]").each(function(k){var n=$j(this);var l=n.attr("id");$j(b.selector).find("#"+l).remove();for(var i=0;i<b.actionQueueItems.length;i++){if(b.actionQueueItems[i].getID()==l){var m=b.actionQueueItems.splice(i,1);delete (m);break}}});this.prepend(h);h.hide();if(g){h.animate({height:"toggle"},{duration:600,specialEasing:{height:"easeInOutQuad"}})}else{h.show()}var c=[];h.filter("[id^=article_]").each(function(j){c.push(b.initQueueItem($j(this),j,false))});b.actionQueueItems=c.concat(b.actionQueueItems)}});
;
jive.namespace("ActionQueue");jive.ActionQueue.ListSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="action-queue";a.pluralizedResourceType=a.resourceType;var b=null;this.list=function(f,e,d){var c=this.RESOURCE_ENDPOINT+"/"+f.userId+"/"+f.queueType+"/list";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{sinceThisTime:e,numResults:d}})};this.getMore=function(f,e,d){var c=this.RESOURCE_ENDPOINT+"/"+f.userId+"/"+f.queueType+"/list/before";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:{beforeThisTime:e,numResults:d}})};this.performAction=function(d){var c=this.RESOURCE_ENDPOINT+"/performAction";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify(d)},d)};this.newCount=function(d){var c=this.RESOURCE_ENDPOINT+"/"+d.userId+"/new/count";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:""})};this.countPollIntervalHandler=function(d){var c=this;this.newCount(d).addCallback(function(e){if(e){c.emit("newCount",e)}}).addErrback(function(f,e){c.emit("newCountError",f,e)})};this.countPollStart=function(d,e){this.countPollStop();var c=this;c.countPollIntervalHandler(e);b=window.setInterval(function(){c.countPollIntervalHandler(e)},d||15000)};this.countPollStop=function(){if(b){window.clearInterval(b);b=null}}});
;
jive.namespace("ActionQueue");jive.ActionQueue.ActionResult=$Class.extend({init:function(a,d,b,c){this.userID=a;this.itemID=d;this.actionCode=b;this.message=c}});
;
jive.namespace("ActionQueue");jive.ActionQueue.Main=jive.oo.Class.extend(function(a){this.init=function(c){this.userId=window._jive_effective_user_id;this.queueType=c.queueType;this.savedRefreshTime=c.savedRefreshTime;this.streamTypeID=c.streamTypeID;this.numResults=c.numResults;var b=this;this.actionQueueService=new jive.ActionQueue.ListSource();this.listView=new jive.ActionQueue.ListView({selector:"#j-action-queue",queueType:b.queueType,savedRefreshTime:b.savedRefreshTime});this.listService=new jive.ActivityStream.StreamSource();if(b.queueType==0){b.listService.saveRefreshTime("notifications")}if(b.queueType==1){b.listService.saveRefreshTime("actions")}this.listView.addListener("performAction",function(i,g,h,f,e){var d=new jive.ActionQueue.ActionResult(b.userID,i,g,h);b.actionQueueService.performAction(d).addCallback(function(j){f(j)}).addErrback(function(k,j){console.log("error time")})}).addListener("actionCompleted",function(f,e,d){b.actionQueueService.getMore({userId:b.userId,queueType:b.queueType},f,1).addCallback(function(g){e(g)}).addErrback(function(h,g){console.log("error time")})}).addListener("loadMore",function(d,e){b.actionQueueService.getMore({userId:b.userId,queueType:b.queueType},d,b.numResults).addCallback(function(f){e(f)}).addErrback(function(g,f){console.log("error time")})});this.listView.postRender()};this.autoUpdate=function(b,c,e){var d=this;if(d.savedRefreshTime){d.lastRefreshTime=Number(d.savedRefreshTime);d.savedRefreshTime=0}if(b!=0){d.actionQueueService.list({userId:d.userId,queueType:d.queueType},d.lastRefreshTime,b).addCallback(function(f){d.listView.refresh(f,d.lastRefreshTime);d.lastRefreshTime=f.lastRefreshTime;if(d.queueType==0){jive.ActivityStream.TabCountsController.refresh("notifications")}else{jive.ActivityStream.TabCountsController.refresh("actions")}}).addErrback(function(g,f){console.log("error time")})}}});
;
var JiveTaskList=$Class.extend({init:function(h,d,a,f,g,e,i,b,c){this.containerID=h;this.completeURL=d;this.incompleteURL=a;this.takeURL=f;this.deleteURL=g;this.taskListURL=e;this.deleteConfirmMsg=i;this.unauthMsg=b;this.errorMsg=c;this.start=0},toggleTaskDetails:function(a){$j("#jive-task-body-"+a).toggle();if($j("#jive-task-body-"+a+":visible").size()){$j("#jive-task-"+a+"-less").css({display:""});$j("#jive-task-"+a+"-more").css({display:"none"});$j("#jive-task-"+a).addClass("jive-task-open")}else{$j("#jive-task-"+a+"-more").css({display:""});$j("#jive-task-"+a+"-less").css({display:"none"});$j("#jive-task-"+a).removeClass("jive-task-open")}},markTaskComplete:function(b,c){var a=this;$j("#jive-task-checkbox-"+b).attr({disabled:true});$j("#jive-task-"+b).addClass("jive-task-markcomplete");$j.post(a.completeURL,{task:b},function(d){$j.ajax({type:"GET",url:a.taskListURL,data:{start:a.start,filter:a.filter},cache:false,success:function(e){a._insertHTML(e,c);if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("tasks",1)}}})})},markTaskIncomplete:function(b,c){var a=this;$j("#jive-task-checkbox-"+b).attr({disabled:true});$j("#jive-task-"+b).addClass("jive-task-markincomplete");$j.post(a.incompleteURL,{task:b},function(d){$j.ajax({type:"GET",url:a.taskListURL,data:{start:a.start,filter:a.filter},cache:false,success:function(e){a._insertHTML(e,c);if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("tasks",-1)}}})})},takeTask:function(b){var a=this;$j.ajax({url:this.takeURL,type:"POST",data:{task:b},success:function(){a.reload()},error:function(c){if(c.status==403){alert(a.unauthMsg)}else{if(c.status==500){alert(a.errorMsg)}}}})},deleteTask:function(b){if(confirm(this.deleteConfirmMsg)){var a=this;$j.ajax({url:this.deleteURL,type:"POST",data:{task:b},success:function(){if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("tasks",1)}a.reload()},error:function(c){if(c.status==403){alert(a.unauthMsg)}else{if(c.status==500){alert(a.errorMsg)}}}})}},reloadAndHighlight:function(b,c){var a=this;$j.ajax({url:this.taskListURL,type:"GET",cache:false,data:{start:this.start,filter:this.filter,ownerID:this.ownerID,projectID:this.projectID},success:function(d){a._insertHTML(d,c);$j('[id="'+b+'"]').effect("highlight")},error:function(d){if(d.status==403){alert(a.unauthMsg)}else{if(d.status==500){alert(a.errorMsg)}}}})},reload:function(b){var a=this;$j.ajax({url:this.taskListURL,type:"GET",cache:false,data:{start:this.start,filter:this.filter,mode:this.mode,ownerID:this.ownerID,projectID:this.projectID},success:function(c){a._insertHTML(c,b)},error:function(c){if(c.status==403){alert(a.unauthMsg)}else{if(c.status==500){alert(a.errorMsg)}}}})},setStart:function(a){this.start=a},setFilter:function(a){this.filter=a;this.start=0},setMode:function(a){this.mode=a;this.start=0},setOwnerID:function(a){this.ownerID=a;this.start=0},setProjectID:function(a){this.projectID=a;this.start=0},_scripts:/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_insertHTML:function(b,d){var c=b.replace(this._scripts,"");var a=$j('[id="'+this.containerID+'"]').html(c);console.log(a);jive.rte.renderedContent.emit("renderedContent",a);if(d){d()}}});
;
jive.namespace("Moderation");jive.Moderation.InboxView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(d){var c=this;c.currentRow=null;c.processKey=true;this.$moderationContainer=$j("#jive-inbox-moderation-container");this.$moderationContainer.delegate(".js-pagination a","click",function(f){c.showSpinner();var e=$j(this).attr("href");c.emitP("paginate",e).addCallback(function(g){c.update(g)});f.preventDefault()});this.$moderationContainer.delegate("#filterForm input[type=submit]","click",function(f){var e=$j(this).closest("form");c.emit("filter",e);f.preventDefault()});this.$moderationContainer.delegate("td.j-td-icon, td.j-td-title, td.j-td-date, td.j-td-mod-abuse, td.j-td-mod-action","click",function(f){var g=$j(this).closest("tr").data("message-index");c.setCurrentRow(g);f.preventDefault()});this.$moderationContainer.delegate("a.js-mod-type, a.js-mod-subject","click",function(f){var g=$j(this).closest("tr").data("message-index");c.toggleBody(g);f.preventDefault()});$j(document).keyup(function(e){c.handleEvent(e.keyCode)})};this.update=function(c){this.$moderationContainer.html(c);this.hideSpinner();this.setCurrentRow(1);this.setDDState();this.bindHandlers()};a.bindHandlers=function(){var c=this;c.globalToggle=$j("#js-mod-dd-messages");c.globalToggle.change(function(d){c.toggleAll($j(this).val())});c.globalToggle.focus(function(d){c.processKey=false});c.globalToggle.blur(function(d){c.processKey=true});$j(".js-mod-dd-message").change(function(d){var f=$j(this).closest("tr").data("message-index");c.toggleHighlight(this,f)});$j(".jive-mod-showtext").click(function(d){c.showAll();d.preventDefault()});$j(".jive-mod-hidetext").click(function(d){c.hideAll();d.preventDefault()});$j("input[name='modnote'], #filterForm input[type='text']").focus(function(d){c.processKey=false});$j("input[name='modnote'], #filterForm input[type='text']").blur(function(d){c.processKey=true});$j(".jive-table-mod-editNote").click(function(g){var d=$j(this);var f=d.closest(".js-note-form").find("input[type='text']").val();c.editNote(d.data("workflow-id"),d.data("user-id"),f);g.preventDefault()});$j(".js-save-note").click(function(f){var d=$j(this);c.saveNote(d.data("workflow-id"),d.data("user-id"));f.preventDefault()});$j("#messageForm").submit(function(d){if(!c.confirmForm()){d.preventDefault()}})};a.handleEvent=function(d){if(this.processKey){if(d==40){this.setNextRow(this.currentRow)}else{if(d==38){this.setPreviousRow(this.currentRow)}else{if(d==83){this.toggleBody(this.currentRow.index)}else{if(d==65){var c=$j("#mod-dd-message-"+this.currentRow.index);c.value=1;this.toggleHighlight(c,this.currentRow.index)}else{if(d==82){var c=$j("#mod-dd-message-"+this.currentRow.index);c.value=3;this.toggleHighlight(c,this.currentRow.index)}else{if(d==69){var c=$j("#mod-dd-message-"+this.currentRow.index);c.value=2;this.toggleHighlight(c,this.currentRow.index)}else{if(d==68){var c=$j("#mod-dd-message-"+this.currentRow.index);c.value=0;this.toggleHighlight(c,this.currentRow.index)}}}}}}}}};a.setNextRow=function(d){var c=$j(d).data("message-index");if(c){this.setCurrentRow(parseInt(++c))}};a.setPreviousRow=function(d){var c=$j(d).data("message-index");if(c){this.setCurrentRow(parseInt(--c))}};a.setCurrentRow=function(c){if(this.currentRow!=null&&this.currentRow.index!=c){$j("#mod-row-img-"+this.currentRow.index).hide();$j("#mod-subject-"+this.currentRow.index).blur()}if(this.rowExists(c)){this.currentRow=$j("#mod-message-row-"+c);$j("#mod-row-img-"+c).show();this.currentRow.index=c}else{if(this.rowExists(1)){this.setCurrentRow(1)}}};a.rowExists=function(c){return $j("#mod-message-row-"+c).length>0};a.setDDState=function(d){var c=this;$j("#mod-message-tbody [id^=mod-dd-message-]").each(function(){var f=this;var e=f.id.split("-").last();c.toggleHighlight(f,e)})};a.toggleAll=function(d){var c=this;$j("#mod-message-tbody [id^=mod-dd-message-]").each(function(){var f=this;var e=f.id.split("-").last();f.value=d;c.toggleHighlight(f,e)})};a.toggleHighlight=function(e,c){var f=null;var d=$j(e);if(d.parent().length>0&&d.parent().parent().length>0){f=d.parent().parent()}if(f&&f.length>0){if(e.value==1){$j("#jive-table-mod-view-"+c).removeClass().addClass("jive-table-mod-view-approve");$j(f).removeClass().addClass("jive-mod-msg-row-app");$j(e).val("1")}else{if(e.value==3){$j("#jive-table-mod-view-"+c).removeClass().addClass("jive-table-mod-view-reject");$j(f).removeClass().addClass("jive-mod-msg-row-rej");$j(e).val("3")}else{this.viewBody(c);$j("#jive-table-mod-view-"+c).removeClass().addClass("jive-table-mod-view");$j(f).removeClass().addClass("jive-mod-msg-row");$j(e).val("")}}}};a.viewBody=function(c){$j("#mod-view-message-"+c).show()};a.showBody=function(c){$j("#mod-message-body-"+c).show()};a.hideBody=function(c){$j("#mod-message-body-"+c).hide()};a.toggleBody=function(c){$j("#mod-message-body-"+c).toggle()};a.showAll=function(){$j("#mod-message-tbody [id^=mod-message-body-]").show()};a.hideAll=function(){$j("#mod-message-tbody [id^=mod-message-body-]").hide()};a.decrementCount=function(c,h){var g=$j("#pendingCount"+c+"-"+h);var f=$j("#totalCount");var e=g.text();var d=f.text();if(e&&d){e=parseInt(e,10)-1;d=parseInt(d,10)-1;g.text(e);f.text(d)}};a.editNote=function(h,e,f){var c=this;$j("#modnote01-"+h+"-"+e).val(f);var d=$j("#noteBox-"+h+"-"+e);d.show();var g=$j("#jive-mod-noteform-"+h+"-"+e);$j("#jive-table-mod-notesubmit-"+h).one("click",function(){c.saveNote(h,e)});g.show()};a.saveNote=function(j,e){var g=$j("#jive-table-mod-note-"+j);var k=new Date();var h=$j("#modnote01-"+j+"-"+e).val();var f=$j("#noteBox-"+j+"-"+e);f.show();var c=$j("#noteBox-"+j+"-"+e+" .notevalue");c.text(h);var i=$j("#jive-mod-noteform-"+j+"-"+e);i.hide();$j("#mod_note-"+j).val(h);this.emit("note",j,e,h)};a.confirmForm=function(){return confirm(userConfirmText)}});
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (ModerationNote == null) var ModerationNote = {};
ModerationNote._path = '/dwr';
ModerationNote.leaveNote = function(p0, p1, p2, callback) {
  dwr.engine._execute(ModerationNote._path, 'ModerationNote', 'leaveNote', p0, p1, p2, callback);
}

;
jive.namespace("Moderation");jive.Moderation.Main=jive.oo.Class.extend(function(a){a.init=function(c){var b=this;this.inboxView=new jive.Moderation.InboxView(c);this.inboxView.addListener("paginate",function(d,e){$j.get(d,function(f){e.emitSuccess(f)})});this.inboxView.addListener("filter",function(d){d.ajaxSubmit({target:this.$moderationContainer})});this.inboxView.addListener("note",function(f,d,e){ModerationNote.leaveNote(f,d,e)});if(c.initUrl){$j.get(c.initUrl,function(d){b.inboxView.update(d)})}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.guest=="undefined"){jive.guest={}}if(typeof jive.guest.page=="undefined"){jive.guest.page={}}jive.guest.page.whyLoginOrRegister=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-box j-enhanced j-rc5"><div class="j-box-body j-box-body-padding clearfix"><p class="j-intro-login"><strong><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"login.jspa")),'" rel="IDS_login">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.login"),[])),"</a></strong>");if(A.accountCreationEnabled){if(A.validationEnabled){jive.shared.soy.i18nHelper({i18nKey:"guest.join.prompt",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"login.jspa?registerOnly=true"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("guest.join.now"),[]))+"</a>",noAutoEscape:"true"},B)}else{jive.shared.soy.i18nHelper({i18nKey:"guest.join.prompt",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"create-account.jspa"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("guest.join.now"),[]))+"</a>",noAutoEscape:"true"},B)}}B.append("</p>",(A.reasons)?A.reasons:"","</div></div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.inbox=="undefined"){jive.inbox={}}jive.inbox.head=function(A,C){var B=C||new soy.StringBuilder();B.append("<title>",(A.titleCount&&A.titleCount!="0")?(A.titleCount>50)?"(50+) ":"("+soy.$$escapeHtml(A.titleCount)+") ":"",soy.$$escapeHtml(A.title),'</title><meta name="nav.active.link" content="',soy.$$escapeHtml(A.activeLinkID),'" />',(A.subActiveLinkID)?'<meta name="sub.nav.active.link" content="'+soy.$$escapeHtml(A.subActiveLinkID)+'" />':"",'<meta name="description" content="',soy.$$escapeHtml(A.description),'" />');if(!C){return B.toString()}};jive.inbox.header=function(C,G){var E=G||new soy.StringBuilder();E.append('<!-- BEGIN browse inbox tabs --><nav class="j-bigtab-nav j-rc5 j-rc-none-bottom"><ul class="j-tabbar j-rc5 j-rc-none-bottom">');var B=C.actionsTabLinks;var D=B.length;for(var F=0;F<D;F++){var A=B[F];if(A.visible){E.append('<li id="jive-',soy.$$escapeHtml(A.id),'-tab" ',(A.id==C.selectedID)?'class="active j-ui-elem"':"",'data-filter-id="1" data-last-refresh-count=\'0\' data-ibx-update-count="0" data-ibx-actual-count="',(C.activityStreamCount)?(A.id=="jive-actions-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index7"]):(A.id=="jive-notifications-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index8"]):(A.id=="jive-moderation-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index9"]):(A.id=="jive-tasks-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index11"]):"":"0",'">');jive.shared.soy.actionLink(soy.$$augmentData(A,{hideIcon:true,includeCounter:true,activeTab:A.id==C.selectedID,count:(C.activityStreamCount)?(A.id=="jive-actions-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index7"]):(A.id=="jive-notifications-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index8"]):(A.id=="jive-moderation-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index9"]):(A.id=="jive-tasks-tab")?soy.$$escapeHtml(C.activityStreamCount.fullCounts["index11"]):"":"0"}),E);E.append("</li>")}}E.append("</ul>",(C.canCreateDm)?"<script>$j(function() {$j('#j-js-inbox-send-dm').click(function(e) {e.preventDefault(); jive.DirectMessaging.create().showModal();});});<\/script>":"","</nav><!-- END browse inbox tabs -->");if(!G){return E.toString()}};jive.inbox.communications=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.inbox.link"),[]),activeLinkID:"jive-nav-link-inbox",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.description"),[]),titleCount:A.activityStreamCount?A.activityStreamCount.fullCounts["index1"].unreadCount:0},B);jive.shared.soy.resourceInlineJs({code:"$j(function() {var i18n = {eaeStreamRead : '"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.read"),[]))+"', eaeStreamUnread : '"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[]))+"'}; if (!jive.ReadTracking.readController) {jive.ReadTracking.readController = new jive.ReadTracking.Main({i18n:i18n}); jive.ReadTracking.readController.attachReadActions();}});"},B);B.append('</head><body class="j-body-inbox j-body-communications ',(A.mobileUI)?"j-mobile-ui":"",'"><span id="jive-inbox-count-data" data-filter-id="1" data-last-refresh-count=\'0\' data-ibx-update-count="0" style="display:none"></span><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-communication j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.communications"),[])),'<a href="#" id="j-stream-info-icon" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.help"),[])),'" class="j-act-help"><span class="jive-icon-sml jive-icon-help"></span></a></h1></header>',(A.currentStream.canCreateDm)?'<div class="j-inbox-send-dm j-social-button j-ui-elem"><span class="j-ui-elem"><a  id="j-js-inbox-send-dm" href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+'"><span class="jive-icon-direct-message jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+"</a></span></div><script>$j(function() {$j('#j-js-inbox-send-dm').click(function(e) {e.preventDefault(); jive.DirectMessaging.create().showModal();});});<\/script>":"");jive.inbox.commsHelp({commsInfoClosed:A.commsInfoClosed},B);B.append('<!-- BEGIN main body --><div class="j-layout j-layout-ls j-contained j-rc4 clearfix"><div class="j-column-wrap-l" id="comms-column-wrap-l"><div class="j-column j-column-l placeholder" id="comms-column-l"><div id="j-js-inbox" class="j-act j-communications" style="display:block;">');jive.eae.communications.commStream({activityStream:A.currentStream,activityStream4JS:A.currentStream4JS,viewingUser:A.currentStream.viewingUser,streamType:"inbox",activeFilter:A.activeFilter,streamTypeID:"1",tabViewSelector:"#your-activity",savedRefreshTime:A.refreshTimes.inbox,dmEnabled:A.dmEnabled,lastViewedObjectType:A.lastViewedObjectType,lastViewedObjectID:A.lastViewedObjectID,rebuilding:A.rebuilding,preferredMode:A.preferredMode,startMode:A.startMode,mobileUI:A.mobileUI,isEditing:A.isEditing,communityName:A.communityName,activityStreamCount:A.activityStreamCount,hasImagePerms:A.hasImagePerms},B);jive.inbox.streamReadingPanes(null,B);B.append('</div></div></div></div><div id="j-js-end-main"></div><!-- END main body --></body>');if(!C){return B.toString()}};jive.inbox.streamReadingPanes=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-js-inbox-exp" class="j-act-panel" style="display:none;"><span class="shadow"></span><span class="j-entry-active"></span>');jive.inbox.readingPaneDefault(null,B);B.append("</div>");if(!C){return B.toString()}};jive.inbox.readingPaneDefault=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-act-exp-view j-act-ibx-exp-list" style="display:none"><section class="j-panel-instructions font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.panel.message"),[])),"</section></div>");if(!C){return B.toString()}};jive.inbox.commsHelp=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-stream-info" class="j-stream-info j-inbox-info j-rc5" style="',(A.commsInfoClosed)?"display: none;":"display: block;",'"><div class="clearfix"><h3 class="clearfix">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.help.title"),[])),'</h3><section><ul><li class="j-info-directmessages"><h5><span class="jive-icon-med jive-icon-direct-message-label"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.directmessages.label"),[])),"</h5><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.directmessages.text"),[])),'</p></li><li class="j-info-contentactivity"><h5><span class="jive-icon-med jive-icon-comment"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.contentactivity.label"),[])),"</h5><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.contentactivity.text"),[])),'</p></li><li class="j-info-mentions"><h5><span class="jive-icon-med jive-icon-mention-label"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.mentions.label"),[])),"</h5><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.mentions.text"),[])),'</p></li><li class="j-info-shares"><h5><span class="jive-icon-med jive-icon-share-label"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.shares.label"),[])),"</h5><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.shares.text"),[])),'</p></li><li class="j-info-announcements"><h5><span class="jive-icon-med jive-icon-announcement"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.announcements.label"),[])),"</h5><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.announcements.text"),[])),'</p></li></ul></section><section class="j-inbox-quickhelp"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.quickhelp.title"),[])),'</h4><ul><li class="j-info-readtrack"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.readtrack.label"),[])),"</strong><p>");jive.shared.soy.i18nHelper({i18nKey:"eae.communications.readtrack.text",arg0:'<span class="font-color-meta"><span class="jive-icon-med jive-icon-read-marker"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[]))+"</span>",noAutoEscape:true},B);B.append('</p></li><li class="j-info-stoptracking"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.stoptracking.label"),[])),"</strong><p>");jive.shared.soy.i18nHelper({i18nKey:"eae.communications.stoptracking.text",arg0:'<span class="font-color-meta"><span class="jive-icon-med jive-glyph-track"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[]))+"</span>",noAutoEscape:true},B);B.append('</p></li><li class="j-info-filter"><strong>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.communications.filter.label"),[])),"</strong><p>");jive.shared.soy.i18nHelper({i18nKey:"eae.communications.filter.text",arg0:'<strong class="font-color-normal">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.filter"),[]))+'<span class="jive-icon-med jive-icon-down"></span></strong>',noAutoEscape:true},B);B.append('</p></li></ul></section></div><a href="#" class="j-button" id="j-stream-info-dismiss-link" title="Close help">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),"</a></div>");if(!C){return B.toString()}};jive.inbox.actions=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.actions.link"),[]),activeLinkID:"jive-nav-link-actions",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.actions.description"),[])},B);B.append('</head><body class="j-body-inbox j-body-inbox-actions"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-actions j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),"</h1></header>",(A.canCreateDm)?'<div class="j-inbox-send-dm j-social-button j-ui-elem"><span class="j-ui-elem"><a  id="j-js-inbox-send-dm" href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+'"><span class="jive-icon-direct-message jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+"</a></span></div>":"");jive.inbox.header({actionsTabLinks:A.actionsTabLinks,selectedID:"jive-actions-tab",canCreateDm:A.canCreateDm,activityStreamCount:A.activityStreamCount},B);B.append('<!-- BEGIN main body --><div class="j-layout j-layout-l j-contained j-contained-tabs j-rc-none-top j-rc4 clearfix"><div class="j-column-wrap-l"><div class="j-column j-column-l j-action-queue"><div class="j-act-pagepoll" id="j-actions-updates">');jive.eae.activitystream.newUpdates({count:0},B);B.append("</div>");jive.eae.actionqueue.actionQueue({actionQueue:A.actionQueue,queueType:A.queueType},B);B.append('<script type="text/javascript">$j(function() {jive.ActionQueue.ListController = new jive.ActionQueue.Main({queueType:',soy.$$escapeHtml(A.queueType),", streamTypeID:6, numResults:",soy.$$escapeHtml(A.numResults),", savedRefreshTime:",soy.$$escapeHtml(A.refreshTimes.actions),"});});<\/script></div></div></div><!-- END main body --></body>");if(!C){return B.toString()}};jive.inbox.notifications=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("profile.tab.notifications"),[]),activeLinkID:"jive-nav-link-actions",subActiveLinkID:"notifications",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.actions.description"),[])},B);B.append('</head><body class="j-body-inbox j-body-inbox-notifications"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-actions j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),"</h1></header>",(A.canCreateDm)?'<div class="j-inbox-send-dm j-social-button j-ui-elem"><span class="j-ui-elem"><a  id="j-js-inbox-send-dm" href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+'"><span class="jive-icon-direct-message jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+"</a></span></div>":"");jive.inbox.header({actionsTabLinks:A.actionsTabLinks,selectedID:"jive-notifications-tab",canCreateDm:A.canCreateDm,activityStreamCount:A.activityStreamCount},B);B.append('<!-- BEGIN main body --><div class="j-layout j-layout-l j-contained j-contained-tabs j-rc4 clearfix"><div class="j-column-wrap-l"><div class="j-column j-column-l clearfix"><div class="j-act-pagepoll" id="j-notifications-updates">');jive.eae.activitystream.newUpdates({count:0},B);B.append("</div>");jive.eae.actionqueue.actionQueue({actionQueue:A.notificationQueue,queueType:A.queueType},B);B.append('<script type="text/javascript">$j(function() {jive.ActionQueue.NotificationListController = new jive.ActionQueue.Main({queueType:',soy.$$escapeHtml(A.queueType),", streamTypeID:7, numResults:",soy.$$escapeHtml(A.numResults),", savedRefreshTime:",soy.$$escapeHtml(A.refreshTimes.notifications),"});});<\/script></div></div></div><!-- END main body --></body>");if(!C){return B.toString()}};jive.inbox.tasks=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("global.tasks"),[]),activeLinkID:"jive-nav-link-actions",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.actions.description"),[])},B);jive.shared.soy.resourceInlineJs({code:'var editTaskCompleteAction = "'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"edit-task!complete.jspa"))+'"; var editTaskIncompleteAction = "'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"edit-task!incomplete.jspa"))+'"; var editTaskTakeAction = "'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"edit-task!take.jspa"))+'"; var editTaskDeleteAction = "'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"edit-task!delete.jspa"))+'"; var viewTaskListAction = "'+(jive.soy.func.normalizeUrl(window._jive_base_url,"view-task-list.jspa")+"?"+encodeURIComponent("owner")+"="+encodeURIComponent(A.currentUserID)+"&"+encodeURIComponent("task")+"="+encodeURIComponent(A.taskID))+'"; var taskDeleteConfirmation = "'+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("task.delete.confirm.msg"),[]))+'"; var taskListUnauthorizedMessage = "'+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("task.list.unauth"),[]))+'"; var taskListErrorMessage = "'+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("task.list.error"),[]))+'"; $j(document).ready(function() {window.jivetasklist = new JiveTaskList("jive-inbox-task-container", editTaskCompleteAction, editTaskIncompleteAction, editTaskTakeAction, editTaskDeleteAction, viewTaskListAction, taskDeleteConfirmation, taskListUnauthorizedMessage, taskListErrorMessage); $j(\'#jive-inbox-task-container\').load(viewTaskListAction);});'},B);B.append('</head><body class="j-body-inbox j-body-inbox-tasks"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-actions j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),"</h1></header>",(A.canCreateDm)?'<div class="j-inbox-send-dm j-social-button j-ui-elem"><span class="j-ui-elem"><a  id="j-js-inbox-send-dm" href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+'"><span class="jive-icon-direct-message jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+"</a></span></div>":"");jive.inbox.header({actionsTabLinks:A.actionsTabLinks,selectedID:"jive-tasks-tab",canCreateDm:A.canCreateDm,activityStreamCount:A.activityStreamCount},B);B.append('<!-- BEGIN layout --><div class="j-layout j-layout-l j-contained j-contained-tabs j-rc4 clearfix"><!-- BEGIN large column --><div class="j-column-wrap-l"><div class="j-column j-column-l j-inbox-tasks"><div id="jive-inbox-task-container"></div></div></div><!-- END large column --></div><!-- END layout --></body>');if(!C){return B.toString()}};jive.inbox.moderation=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("profile.moderation.link"),[]),activeLinkID:"jive-nav-link-actions",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.actions.description"),[])},B);jive.shared.soy.resourceInlineJs({code:'$j(function(){var moderationApp = new jive.Moderation.Main({initUrl: "'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/moderation.jspa"))+'"});});'},B);B.append('</head><body class="j-body-inbox jive-view-profile jive-view-profile-moderation j-body-inbox-moderation"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-actions j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),"</h1></header>",(A.canCreateDm)?'<div class="j-inbox-send-dm j-social-button j-ui-elem"><span class="j-ui-elem"><a  id="j-js-inbox-send-dm" href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+'"><span class="jive-icon-direct-message jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.send_direct_message"),[]))+"</a></span></div>":"");jive.inbox.header({actionsTabLinks:A.actionsTabLinks,selectedID:"jive-moderation-tab",canCreateDm:A.canCreateDm,activityStreamCount:A.activityStreamCount},B);B.append('<div id="jive-inbox-moderation-container" class="j-layout j-contained j-contained-tabs j-rc4 clearfix"><p class="font-color-meta-light"><img src="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-image-loading.gif")),'" alt=""/>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),"</p></div></body>");if(!C){return B.toString()}};jive.inbox.guestCommunications=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.inbox.link"),[]),activeLinkID:"jive-nav-link-inbox",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.description"),[])},B);B.append('</head><body class="j-body-inbox j-body-inbox-guest"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-communication j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.communications"),[])),'</h1></header><article class="j-login-prompt">');jive.guest.page.whyLoginOrRegister({accountCreationEnabled:A.accountCreationEnabled,validationEnabled:A.validationEnabled,reasons:'<section class="j-rc5"><h3>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.communications"),[]))+'</h3><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/eae/comm-screenshot.png"))+'" class="j-aq-screenshot"/><ul class="j-simple-list"><li>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.guest.tips.messages"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.guest.tips.share"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.guest.tips.mentions"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.guest.tips.track"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.guest.tips.invite"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.guest.tips.everything"),[]))+"</li></ul></section>"},B);B.append("</article></body>");if(!C){return B.toString()}};jive.inbox.guestActions=function(A,C){var B=C||new soy.StringBuilder();B.append("<head>");jive.inbox.head({title:jive.i18n.i18nText(jive.i18n.getMsg("nav.bar.actions.link"),[]),activeLinkID:"jive-nav-link-actions",description:jive.i18n.i18nText(jive.i18n.getMsg("eae.actions.description"),[])},B);B.append('</head><body class="j-body-inbox j-body-inbox-guest"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-actions j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.actions"),[])),'</h1></header><article class="j-login-prompt">');jive.guest.page.whyLoginOrRegister({accountCreationEnabled:A.accountCreationEnabled,validationEnabled:A.validationEnabled,reasons:'<section class="j-rc5"><h3>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.action"),[]))+'</h3><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/apps/app-actions.png"))+'" class="j-aq-screenshot"/><ul class="j-simple-list"><li>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.actions"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.notifications"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.tasks"),[]))+"</li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.action.guest.tips.everything"),[]))+"</li></ul></section>"},B);B.append("</article></body>");if(!C){return B.toString()}}
;
JiveAutoSave=$Class.extend({init:function(h,c,g,a,b,f,j,k,i,l,d,e){this.enabled=h;this.interval=c;this.needSave=false;this.continuing=false;this.draftType=g;this.objectType=a;this.objectID=b;this.subject=j;this.body=f;this.images=k;this.properties=i;this.confirmation=false;this.confirmationMessage=l;this.saveMessage=d;this.savedMessage=e;this.spellcheck=false;if(h){this.autoSaveInit(c)}window.onbeforeunload=this.navigateAway.bind(this);$j(window).unload(this.doDiscard.bind(this));this.listeners=[]},addListener:function(a){this.listeners.push(a)},autoSaveInit:function(a){if(this._intervalId==null){this._intervalId=setInterval(this.saveDraft.bind(this),a*1000)}},stop:function(){if(this._intervalId!=null){clearInterval(this._intervalId);this._intervalId=null}this.confirmation=false},start:function(){this.enabled=true;this.autoSaveInit(this.interval)},saveDraft:function(b){this.spellcheck=window.editor.get(this.body).isSpellChecking();if(this.spellcheck){return}if(this.needSave){var a={};a.ID=$j("#draftid").val();a.draftObjectType=this.draftType;a.draftContainerObjectType=this.objectType;a.draftContainerObjectID=this.objectID;a.subject=$j("#"+this.subject).val();if(this.draftType!=18){a.body=window.editor.get(this.body).getHTML()}else{a.body=$j("#"+this.body).val()}a.properties={};this.properties.forEach(function(c){var e;var d=$j("#"+c);if(d.length>0){if(d.is(":checkbox, :radio")&&d.is(":checked")){e="checked"}else{if(d.is("select")){e=d.val()}else{if(d.is(":text")||d.is("input[type=hidden]")){if(d.val().length>0){e=d.val()}}}}}else{var f=window["get"+c];if(typeof f=="function"){e=f()}}if(e||e===0){a.properties[c]=e}});a.imageIDs=[];if(this.images){this.images.map(function(c){var d=$j("#"+c);if(d.attr("type")=="text"||d.attr("type")=="hidden"){if(d.val().length>0){a.imageIDs.push(d.val())}}})}Draft.saveDraft(a,this.postSave.bind(this))}else{Draft.keepAlive()}},postSave:function(a){this.needSave=false;$j("#draftid").val(a.ID);if(this.spellcheck){window.editor.get(this.body).toggleSpellChecker()}},messageChangeHandler:function(){this.needSave=true;this.confirmation=true},useDraft:function(b){this.enabled=true;this.autoSaveInit(this.interval);var a=this;if(typeof b=="string"){b=window[b]}if(typeof b!="function"){Draft.getDraft(this.draftType,this.objectType,this.objectID,{errorHandler:function(c){},callback:this.displayDraft.bind(this)})}else{Draft.getDraft(this.draftType,this.objectType,this.objectID,{errorHandler:function(c){},callback:function(c){a.displayDraft(c);b(c)}})}},displayDraft:function(b){if(!b){$j("#autosave-prompt").fadeOut();return}var a=b.properties;if(b.draftObjectType==18){for(var d in a){if(d.indexOf("jive-option-table-option-")>-1&&d!="jive-option-table-option-1"&&d!="jive-option-table-option-2"){addOption("jive-option-table","jive-option-table-row")}}}if(b.draftObjectType==18){$j("#"+this.body).val(b.body)}else{window.editor.get(this.body).setHTML(b.body)}$j("#"+this.subject).val(b.subject);this.properties.map(function(e){var f=$j("#"+e);if(f.length>0){if(f.is(":checkbox, :radio")){if(a[e]=="checked"){f.attr("checked",true)}}else{if(f.is("select")){if(a[e]!==undefined&&a[e]!==""){f.find("option").map(function(h,g){if($j(g).val()==a[e]){$j(g).attr("selected",true)}})}}else{if(f.is(":text")){if(a[e]!==undefined&&a[e]!==""){f.val(a[e])}else{f.val("")}}}}}else{f=window["set"+e];if(typeof f=="function"){f(a[e])}}});var c=b.imageIDs;if(c!=undefined&&c!=""&&c.length>0){if(!$j.isArray(c)){c=[c]}$j.each(c,function(f,e){var h="imageFile"+e,i=e,g=$j("#"+h);if(!this.images){this.images=[]}if($j.inArray(this.images,""+h)<0){this.images.push(h)}if(g.length<1){createImageElement("imageFile",h,i)}else{if(g.is(":text, input[type=hidden]")){if(c.indexOf(g.val())>-1){g.val(i)}else{g.val("")}}}})}$j("#autosave-prompt").fadeOut()},deleteDraft:function(){Draft.deleteDraft(this.draftType,this.objectType,this.objectID,false);this.enabled=true;this.autoSaveInit(this.interval);$j("#autosave-prompt").fadeOut()},navigateAway:function(a){if(this.confirmation){return this.confirmationMessage+"\n"}this.listeners.map(function(b){b.navigateAway(a)})},confirmDiscard:function(a){if(confirm(a)){cancelPost=true;window.onbeforeunload=null;return true}else{return false}},doDiscard:function(){cancelPost=true;Draft.deleteDraft(this.draftType,this.objectType,this.objectID,!this.continuing);this.continuing=false;window.onbeforeunload=null;$j(window).unbind("unload");return true},getProperties:function(){return this.properties},addProperty:function(a){this.properties.push(a);this.messageChangeHandler()},deleteProperty:function(a){this.properties=this.properties.filter(function(b){return b!=a});this.messageChangeHandler()},getImages:function(){return this.images},addImage:function(a){this.images.push(a);this.messageChangeHandler()},deleteImage:function(a){this.images=this.images.filter(function(b){return b!=a});this.messageChangeHandler()}});DummyAutoSave=$Class.extend({init:function(b,a){if(a!=null){this.interval=a}else{this.interval=90}if(b){this.autoSaveInit(this.interval)}},autoSaveInit:function(a){if(this._intervalId==null){this._intervalId=setInterval(this.saveDraft.bind(this),a*1000)}},stop:function(){if(this._intervalId!=null){clearInterval(this._intervalId);this._intervalId=null}},start:function(){this.enabled=true;this.autoSaveInit(this.interval)},addListener:function(){},saveDraft:function(a){if($def(Draft)&&$def(Draft.keepAlive)){Draft.keepAlive()}},postSave:function(a){},messageChangeHandler:function(){},useDraft:function(a){},displayDraft:function(a){},deleteDraft:function(){},navigateAway:function(){},confirmDiscard:function(a){return false},getProperties:function(){},addProperty:function(a){},deleteProperty:function(a){},doDiscard:function(){},getImages:function(){},addImage:function(a){},deleteImage:function(a){}});
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (Draft == null) var Draft = {};
Draft._path = '/dwr';
Draft.keepAlive = function(callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'keepAlive', false, callback);
}
Draft.setAuthenticationProvider = function(p0, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'setAuthenticationProvider', p0, callback);
}
Draft.getDraft = function(p0, p1, p2, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'getDraft', p0, p1, p2, false, callback);
}
Draft.deleteDraft = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'deleteDraft', p0, p1, p2, p3, false, callback);
}
Draft.saveDraft = function(p0, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'saveDraft', p0, false, callback);
}

;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (WikiTextConverter == null) var WikiTextConverter = {};
WikiTextConverter._path = '/dwr';
WikiTextConverter.getPreferredEditorMode = function(callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'getPreferredEditorMode', false, callback);
}
WikiTextConverter.cleanUpHtml = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'cleanUpHtml', p0, p1, false, callback);
}
WikiTextConverter.convertFromWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertFromWiki', p0, p1, false, callback);
}
WikiTextConverter.convertToWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToWiki', p0, p1, false, callback);
}
WikiTextConverter.convertToPreviewFromXhtml = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToPreviewFromXhtml', p0, p1, false, callback);
}
WikiTextConverter.convertToPreviewFromWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToPreviewFromWiki', p0, p1, false, callback);
}
WikiTextConverter.setPreferredEditorMode = function(p0, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'setPreferredEditorMode', p0, false, false, callback);
}

;
jive.namespace("ActivityStream");jive.ActivityStream.CommunicationStreamReadingPaneView=jive.AbstractView.extend(function(b){this.init=function(e){var f=this;f._super(e);f.rteOptions=e.rteOptions;f.i18n=e.i18n;f.currentStreamItemView=null;f.resetWindowDims();f.mobileUI=f.rteOptions.mobileUI;f.ie7=$j.browser.msie&&$j.browser.version<8;f.delay=(function(){var g=0;return function(i,h){clearTimeout(g);g=setTimeout(i,h)}})()};this.getSoyTemplate=function(){return jive.inbox.streamReadingPanes()};this.postRender=function(){var e=this,f=e.getContent();f.delegate(".j-js-mention-reply-dismiss","click",function(){$j(this).closest("div.j-js-mention-reply").fadeOut("fast")});if(!e.mobileUI){if(!e.ie7){$j(window).scroll(function(){e.repositionDrawer()})}$j(window).resize(function(){e.resizeReadingPane()})}f.bind("click touchend",function(j){var h=false;if(e.currentStreamItemView){var g=$j(j.target),i=g.add(g.parents());h=e.currentStreamItemView.handleClick(j,i)}if(h){return true}j.preventDefault()})};this.refresh=function(k,l,r,j){var o=this,p=[];if(o.currentStreamItemView){var f=[],B=[],h=o.getContent(),w=h.find("div.j-sub-activity-items"),E=o.currentStreamItemView;var t=h.find("div.j-act-exp-view"),u=k.attr("data-linkedID");if(u!=t.attr("data-linkedID")){t.attr("data-linkedID",u);o.currentStreamItemView.updateID(u)}var x=k.find("div.j-sub-activity-items .j-act-node"),m=x.length;for(var y=0;y<m;y++){var D=$j(x[y]),e=w.find("div[data-objectid="+D.attr("data-objectid")+"][data-objecttype="+D.attr("data-objecttype")+"]");if(!e.length){var C=D.attr("data-objectid"),n=l.activityList.length;for(var i=0;i<n;i++){var g=l.activityList[i];if(C==l.activityList[i].content.id){p.push(g);if(g.content.typeComment||g.content.typeMessage){B.push(C);o.currentStreamItemView.appendOriginalCommentID(C);o.currentStreamItemView.incrementReplyCounts(1,0,0)}break}}o.currentStreamItemView.incrementReplyCounts(0,1,1);f.push(D)}}if(B.length){var A=new jive.ActivityStream.FullRepliesRequest({originalIDs:B}),s=E.getActivityContainer(),z=(s.jiveObject.typeThread?1:s.jiveObject.objectType),q=(s.jiveObject.typeThread?s.jiveObject.threadID:s.jiveObject.id);o.emit("getFullReplies",{objectType:z,objectID:q},A,function(L){var I=L.items.length,H={},M=f.length,F;for(var J=0;J<I;J++){H[L.items[J].content.id+""]=L.items[J]}for(J=0;J<M;J++){F=f[J];var K=H[F.attr("data-objectid")];if(K&&(K.content.typeComment||K.content.typeMessage)){F.find(".j-excerpt-full-html-content").html(jive.eae.activitystream.activityContentText({activity:K,noAutoescape:true}));jive.rte.renderedContent.emit("renderedContent",F);var G=F.find(".j-js-liking-control");if(G.length){G.html(jive.eae.acclaim.activityAcclaimLinkContainer({canLike:$j("[id^=jive-acclaim-like-container-]",G).attr("data-canLike")=="true",uniqueKey:F.attr("data-objecttype")+"-"+F.attr("data-objectid")+"-"+jive.soy.func.randomString(),objectId:F.attr("data-objectid"),objectType:F.attr("data-objecttype"),liked:K.liked,likeCount:K.likeCount}))}F.hide();w.append(F);F.show()}else{F.hide();w.append(F);F.show()}}o.updateListHeightOnPaneSizeChange();j(r,p)});var v=$j("#j-js-inbox-exp").find(".j-act-replycount");if(v.length){v.replaceWith(jive.eae.activitystream.replyCountText({activityContainer:o.currentStreamItemView.getActivityContainer(),showCurrentCount:false}))}}else{if(f.length){D=f.shift();D.hide();w.append(D);D.show();o.updateListHeightOnPaneSizeChange();j(r,p)}}}else{j(r,p)}};this.showReadingPaneData=function(h,j,g,k){var m=this,i=m.getContent();var l=h.find("div.j-sub-activity-items"),f=h.closest("article");if(i.is(":visible")){var n=i.find("div.j-act-exp-view"),e=n.attr("data-linkedID");n.fadeOut("fast",function(){m.resetRTE(i);n.detach();if(e){$j("#"+e+" div.j-js-act-content").append(n)}if(m.mobileUI||m.ie7){m.repositionDrawer(h.attr("data-linkedid"))}i.append(h);var q=!!h.find("article.j-act-mb").length,r=!!h.find("article.j-act-share").length,s=!!h.find("article.j-act-dm").length,o=h.find("div.j-act-exp-content-body-view"),p=h.find("div.j-act-exp-full-content-view");if(!l.children("div.j-act-node").length&&!o.html()&&!q&&!r&&!s){m.emit("getFullContent",j,function(t,u){o.html(t);jive.rte.renderedContent.emit("renderedContent",o);m.initPollView(u,p);p.show();h.find("div.j-act-header-slug").hide();h.find("a.j-js-show-full-content").hide();h.find("a.j-js-hide-full-content").show();m.updateListHeightOnPaneSizeChange()})}if(m.mobileUI||m.ie7){h.show();m.updateListHeightOnPaneSizeChange()}else{h.fadeIn("fast")}m.currentStreamItemView=g;k()})}else{n=i.find("div.j-act-exp-view");if(n.length){n.remove()}if(m.mobileUI||m.ie7){m.repositionDrawer(h.attr("data-linkedid"))}i.append(h);this.expandReadingPane(true,function(){h.show();var q=!!h.find("article.j-act-mb").length,r=!!h.find("article.j-act-share").length,s=!!h.find("article.j-act-dm").length,o=h.find("div.j-act-exp-content-body-view"),p=h.find("div.j-act-exp-full-content-view");if(!l.children("div.j-act-node").length&&!o.html()&&!q&&!r&&!s){m.emit("getFullContent",j,function(t,u){o.html(t);jive.rte.renderedContent.emit("renderedContent",o);m.initPollView(u,p);p.show();h.find("div.j-act-header-slug").hide();h.find("a.j-js-show-full-content").hide();h.find("a.j-js-hide-full-content").show();m.updateListHeightOnPaneSizeChange()})}else{m.updateListHeightOnPaneSizeChange()}m.currentStreamItemView=g;k()})}};this.showRTE=function(g,f){var i=this,k=f.closest("div.j-act-exp-view"),j=k.find("section.j-panel-rte");if(!j.length){var h=$j(jive.eae.activitystream.rtePanel({user:window._jive_current_user,hideGuestURLField:(i.currentStreamItemView.getActivityContainer().jiveObject.typeThread?true:false)}));j=h.find("section.j-panel-rte");k.children("article").append(h)}if(j.is(":visible")){k.find("section.j-panel-rte").slideToggle("fast",function(){k.find(".jive-comment-error").hide();if(i.ie7){k.find("div.j-act-node").addClass("dummy").removeClass("dummy")}if(!f.next().hasClass("j-panel-rte-wrap")){var l=k.find("div.j-panel-rte-wrap").detach();f.after(l);i.initRTE(k,g)}})}else{var e=k.find("div.j-panel-rte-wrap").detach();f.after(e);i.initRTE(k,g)}};this.slideOpenRTE=function(e){var f=this,h=f.getContent(),g=h.find("section.j-panel-rte");g.css("position","static");if(f.ie7){g.show();h.find("div.j-act-node").addClass("dummy").removeClass("dummy");f.updateListHeightOnPaneSizeChange();e()}else{g.slideDown("fast",function(){var i=f.getActivityList().offset().top,j=g.offset().top;h.animate({scrollTop:"+="+(j-i-$j("#j-js-inbox-exp").height()+175)+"px"},"fast");e()})}};var c=null;function a(){if(c!=null){c.stop()}}function d(){if(c==null){c=new DummyAutoSave(true)}else{c.start()}return c}this.initRTE=function(A,u){var o=u.idPostfix,w={},s=this,q=null,p=null,y=null,r=null,f=null,B=null,k=null,t=null,l=null,n=null,m=null;s.resetRTE(A);k=(u.parent.jiveObject.typeThread?"discussionReply":"inlineComment");if(u.type=="sub"){q=u.activity.containerObjectType;p=u.activity.containerObjectID;if(k=="discussionReply"){r=jive.util.unescapeHTML(u.activity.content.subject);B=u.parent.jiveObject.threadID;f=u.activity.content.id}else{if(u.parent.jiveObject.typeExternalActivity&&!u.activity.content.typeComment){t=u.objectID;y=u.objectType}else{t=u.parent.jiveObject.id;y=u.parent.jiveObject.objectType;if(u.activity.content.id!=u.parent.jiveObject.id||u.activity.content.objectType!=u.parent.jiveObject.objectType){l=u.activity.content.id}if(u.parent.jiveObject.versionNumber){n=u.parent.jiveObject.versionNumber}}}m=u.activity.activityUser.displayName}else{q=u.parent.container.type;p=u.parent.container.id;if(k=="discussionReply"){r=jive.util.unescapeHTML(u.parent.jiveObject.subject);B=u.parent.jiveObject.threadID;f=u.parent.jiveObject.id}else{if(u.parent.jiveObject.typeExternalActivity){t=u.objectID;y=u.objectType}else{t=u.parent.jiveObject.id;y=u.parent.jiveObject.objectType;if(u.parent.jiveObject.versionNumber){n=u.parent.jiveObject.versionNumber}}}m=u.parent.originalAuthor.displayName}window._jive_video_picker__url="?container="+p+"&containerType="+q;jive.rte.multiRTE=new Array();window.editor=new jive.ext.y.HashTable();var e=new jive.model.Controller(),z="",j=null,v=null,i=null;if(k=="discussionReply"){v="jive.post.message";z=_jive_base_url+"/post!imagePicker.jspa?containerType="+q+"&container="+p+"&message="+f+"&postedFromGUIEditor=true&reply=true";j=_jive_base_url+"/image-picker!clean.jspa"}else{v="jive.post.comment";z=_jive_base_url+"/comment-image-picker.jspa?containerType="+q+"&container="+p+"&postedFromGUIEditor=true&contentObjectType="+y+"&object="+t;j=_jive_base_url+"/comment-image-picker!clean.jspa"}var g=new jive.rte.EntitlementService({objectID:(u.parent.jiveObject.typeThread?u.parent.jiveObject.threadID:u.parent.jiveObject.id),objectType:(u.parent.jiveObject.typeThread?1:u.parent.jiveObject.objectType),entitlement:"VIEW"});if(v){i=new jive.rte.ImageService({contentResourceSessionKey:v,objectId:"",objectType:-1,containerId:p,containerType:q,sessionPrimerUrl:z,sessionCleanUrl:j})}var x=new jive.rte.FormService({$form:A.find("form.j-panel-rte-view"),formSubmitHandler:function(){$j(this).find("input[type=submit]").attr("disabled","disabled");w.body=s.rteView.getHTML();var C=A.find(".jive-comment-error");if(!w.body.length){C.html(s.i18n.empty_comment).show();$j(this).find("input[type=submit]").removeAttr("disabled");return}else{C.hide()}if(k=="discussionReply"){w.subject=r;w.forumThreadID=B;w.ID=f;s.emit("replySubmit",w,function(E){A.find("section.j-panel-rte").slideToggle("fast",function(){if(s.rteView){s.resetRTE(A)}});s.currentStreamItemView.renderReply(o,E,k)},function(F,E){C.html(F).show()})}else{w.ID=t;w.typeID=y;var D=s.currentStreamItemView.getActivityContainer();if(D.activityList.length&&D.activityList[0].content.commentContentResource&&D.activityList[0].content.commentContentResource.objectType==129){w.isBackChannelComment=true}if(l){w.parentCommentID=l}if(n){w.version=n}s.emit("commentSubmit",w,function(E){A.find("section.j-panel-rte").slideToggle("fast",function(){if(s.rteView){s.resetRTE(A)}});s.currentStreamItemView.renderReply(o,E,k)},function(F,E){C.html(F).show()})}a()}});var h={images_enabled:s.rteOptions.hasImagePerms,imagePickerUrl:z,destroyImagePickerUrl:j,$element:A.find(".wysiwygtext"),controller:e,preset:"mini",autoSave:d(),preferredMode:s.rteOptions.preferredMode,startMode:s.rteOptions.startMode,mobileUI:s.rteOptions.mobileUI,isEditing:s.rteOptions.isEditing,toggleText:jive.i18n.getMsg("rte.toggle_display"),alwaysUseTabText:jive.i18n.getMsg("post.alwaysUseThisEditor.tab"),editDisabledText:jive.i18n.getMsg("rte.edit.disabled"),editDisabledSummary:jive.i18n.getMsg("rte.edit.disabled.desc"),communityName:s.rteOptions.communityName,theme_advanced_resizing:false,height:100,onReady:function(){s.slideOpenRTE(function(){s.rteView.focus()})},services:{imageService:i,formService:x,entitlementService:g}};s.rteLocation=A.attr("data-linkedID");s.rteView=new jive.rte.RTEWrap(h);A.find(".j-panel-hide-rte-link").unbind();A.find(".j-panel-hide-rte-link").click(function(C){A.find("section.j-panel-rte").slideToggle("fast",function(){A.find(".jive-comment-error").hide();s.updateListHeightOnPaneSizeChange()});s.resetRTE(A);a();C.preventDefault()})};this.resetRTE=function(f){var e=this;f.find("section.j-panel-rte").hide();if(this.rteView){this.rteView.destroy();this.rteView=null}if($j(".wysiwygtext",f).length){$j(".wysiwygtext",f).remove()}f.find("form[name=jive-comment-post-form] input[type=submit]").removeAttr("disabled");f.find("form[name=jive-comment-post-form]").prepend(jive.eae.activitystream.rteTextArea());if(e.ie7){f.find("div.j-act-node").addClass("dummy").removeClass("dummy")}};this.expandReadingPane=function(e,h){var f=this,g=f.getContent();g.width(0);f.repositionDrawer();if(e){g.show();f.updateListHeightOnPaneSizeChange()}h()};this.repositionDrawer=function(f){var h=this,i=h.getContent(),g=$j(window).scrollTop();if(h.mobileUI||h.ie7){if(f){var e=$j("#"+f).offset().top-h.filterBarOffset.top;i.css({position:"absolute",top:e+"px",left:h.colLWidth+"px"})}else{i.css({position:"absolute",left:h.colLWidth+"px"})}}else{if(g<h.filterBarOffset.top){i.css({position:"absolute",top:"0",left:h.colLWidth+"px"});if(g+h.windowHeight>h.endMainOffset.top){i.height(h.colWrapLHeight)}else{i.height(h.windowHeight-(h.filterBarOffset.top-g))}}else{i.css({position:"fixed",top:"0",left:h.colLOffset.left+h.colLWidth-$j(window).scrollLeft()+"px"});if(g+h.windowHeight>h.endMainOffset.top){i.height(h.windowHeight-(g+h.windowHeight-h.endMainOffset.top)-2)}else{i.height(h.windowHeight)}}}this.colLWidth=$j("#comms-column-l").width();this.colWrapLWidth=$j("#comms-column-wrap-l").width();i.width(this.colWrapLWidth-this.colLWidth);h.updateListHeightOnPaneSizeChange()};this.resizeReadingPane=function(){var e=this;e.resetWindowDims();e.repositionDrawer()};this.collapseReadingPane=function(){var f=this,g=f.getContent(),h=new jive.conc.Promise();if(g.is(":visible")){var e=g.find("div.j-act-exp-view");e.fadeOut("fast",function(){$j("#j-inbox-list").children("article").removeClass("j-act-active");e.remove();var i=$j(jive.inbox.readingPaneDefault());i.hide();g.append(i);if(f.mobileUI||f.ie7){i.show();f.updateListHeightOnPaneSizeChange()}else{i.fadeIn("fast")}f.resizeReadingPane();f.currentStreamItemView=null;h.emitSuccess()})}return h};this.getActivityList=function(){return this.getContent().find(".j-act-ibx-exp-list")};this.initPollView=function(h,f){if(h){if($j.browser.msie){var g={containerType:h.containerType,containerID:h.containerID,widgetID:h.widgetID,moreUrl:h.moreUrl,createUrl:h.createUrl,canCreatePoll:h.canCreatePoll,pollID:h.poll.id,pollIndex:h.poll.index};new jive.PollWidget.Main(g)}if(h.poll.votesCount){var e=f.find(".j-act-poll-votect");e.html(jive.eae.poll.voteCount({numOfVotes:h.poll.votesCount}))}}};this.resetWindowDims=function(){this.windowHeight=$j(window).height();this.windowWidth=$j(window).width();this.colWrapLHeight=$j("#comms-column-wrap-l").height();this.colWrapLWidth=$j("#comms-column-wrap-l").width();this.colLWidth=$j("#comms-column-l").width();this.colLOffset=$j("#comms-column-l").offset();this.filterBarOffset=$j("#j-inbox-filter-bar").offset();this.endMainOffset=$j("#j-js-end-main").offset()};this.defaultView=function(){this.resizeReadingPane();var e=this.getContent();e.find("div.j-act-exp-view").show();e.show();this.updateListHeightOnPaneSizeChange()};this.updateListHeightOnPaneSizeChange=function(){var e=this;if(e.mobileUI||e.ie7){e.delay(function(){var g=e.getContent(),f=g.offset().top-e.filterBarOffset.top+g.height();if(f>e.colWrapLHeight){$j("#comms-column-wrap-l").height(f);e.resetWindowDims()}else{if(f<e.colWrapLHeight){$j("#comms-column-wrap-l").css("height","");e.resetWindowDims()}}},100)}}});
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2010 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/**
 *
 * @depends i18nKeys=rte.toggle_display
 * @depends i18nKeys=rte.edit.disabled
 * @depends i18nKeys=rte.edit.disabled.desc
 * @depends i18nKeys=post.alwaysUseThisEditor.tab
 */
jive.namespace('ActivityStream');

jive.ActivityStream.StreamListCommonView = jive.AbstractView.extend(function(protect) {
    this.init = function (options) {
        var streamList = this;
        streamList._super(options);
        streamList.streamListItems = new Array();
        streamList.data = options.data;
        streamList.itemsByDomID = {};
        streamList.i18n = options.i18n;
        streamList.streamType = options.streamType;
        streamList.filterType = options.filterType;
        streamList.lastRefreshTime = options.lastRefreshTime;
        streamList.prevRefreshTime = options.prevRefreshTime;
        streamList.lastViewedObjectType = options.lastViewedObjectType;
        streamList.lastViewedObjectID = options.lastViewedObjectID;
        streamList.keyNavLocked = false;

        streamList.loadMoreInProgress = false;
        streamList.autoLoadMoreTimesLeft = 4;
        streamList.autoLoadPxHeight = 1000;
        streamList.maxLoadMoreTimes = (($j.browser.msie && $j.browser.version < 8) ? 9 : 0); // max pages for IE7
        streamList.numTimesLoadedMore = 0;

        if (streamList.streamType != 'context' &&
            !($j.browser.msie && $j.browser.version < 8)) {
            $j(window).bind('scroll.autoLoad', function () {
                var $loadMoreLink = $j('#j-load-more-'+streamList.streamType);
                if (streamList.autoLoadMoreTimesLeft &&
                    streamList.getContent().is(":visible") &&
                    !streamList.loadMoreInProgress &&
                    $j(window).scrollTop() >= ($j(document).height() - $j(window).height() - streamList.autoLoadPxHeight) &&
                    $loadMoreLink.length) {
                    streamList.autoLoadMoreTimesLeft--;
                    $loadMoreLink.click();
                }
            });
        }
    };

    protect.getSoyTemplate = jive.oo.abstract;

    protect.postRender = jive.oo.abstract;

    protect.initStreamItem = jive.oo.abstract;

    protect.refresh = jive.oo.abstract;

    this.hide = function(){
        this.getContent().hide();
    };

    this.show = function(){
        this.getContent().show();
    };

    this.tearDown = function() {
        $j(window).unbind('scroll.autoLoad');
    };
});

;
jive.namespace("MicroBlogging");jive.MicroBlogging.MicroBloggingCommentView=jive.MicroBlogging.CommonView.extend(function(a){this.init=function(b){b.allowTagCreation=false;this._super(b);this.options=b;this.supportAttachements=false;this.viewingUserData=b.viewingUserData};this.postRender=function(){this._super();this.$formElem.closest("article").find("div.eae-reply-avatar").html(jive.shared.displayutil.avatar($j.extend(this.viewingUserData,{size:32,useLinks:true,showHover:true})))};a.getSoyTemplate=function(b){return jive.statusinput.containers.microbloggingCommentStatusInput(b)};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this.createFormElem=function(){this.$formElem=this.getContent().find("form")};this.renderResponse=function(b){this._super(b);this.resetStatusInput()};this.getDataFromDom=function(){var b=this.normalizeData();return{body:"<body>"+b+"</body>",ID:this.$formElem.find("input:[name=contentID]").val(),typeID:this.$formElem.find("input:[name=typeID]").val()}};this.handleAtMentionResult=function(g,d){var e=this;if(g&&g.split("-").length==2){var c=g.split("-")[0],f=g.split("-")[1];var b=new jive.rte.EntitlementService({objectID:this.options.entitlementObjectID||0,objectType:this.options.entitlementObjectType||0,entitlement:"VIEW"});if(b&&c){b.checkEntitlement(c,f).addCallback(function(h){if(!h){var i="";if(c==3){i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.no_notification"})}else{if(c==700){i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}}$j("<p>"+d+" "+i+"</p>").message({style:"warn"})}})}}}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.CommentController=jive.MicroBlogging.CommonController.extend(function(a){this.init=function(b){this._super(b);this.$guestUserName=b.viewOptions.$guestUserName;this.$guestUserEmail=b.viewOptions.$guestUserEmail;this.$guestUserURL=b.viewOptions.$guestUserURL;this.commentServiceOptions={listAction:"",location:"jive-comments",commentMode:"comments",isPrintPreview:false}};a.initMBView=function(){this.microbloggingView=new jive.MicroBlogging.MicroBloggingCommentView(this.viewOptions)};a.submitHandler=function(c,f){c.name="";c.email="";var e=this.$guestUserName,h=this.$guestUserEmail,d=this.$guestUserURL;if(e.length&&!e.val()){f.emitError(jive.statusinput.mention_warnings.jsI18nHelper({key:"cmnt.name_required.text"}),500);return}else{if(h.length&&!h.val()){f.emitError(jive.statusinput.mention_warnings.jsI18nHelper({key:"cmnt.email_required.text"}),500);return}}if(e.length){c.name=e.val();c.email=h.val();c.url=d.val()}this.commentServiceOptions.resourceID=c.ID;this.commentServiceOptions.resourceType=c.typeID;this.commentServiceOptions.contentObject={document:c.ID,version:c.version};this.commentService=new jive.CommentApp.CommentSource(this.commentServiceOptions);var g=new jive.CommentApp.Comment({body:c.body,commentMode:"comments",name:c.name,email:c.email,url:c.url}),b=this;this.commentService.save(g).addCallback(function(i){f.emitSuccess(i);b.emitP("submitSuccess",i)}).addErrback(function(j,i){f.emitError(j,i);b.emitP("submitError",j,i)})}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.RepostView=jive.MicroBlogging.CommonView.extend(function(a){this.init=function(b){this.options=b;this._super(b);this.myId=0};a.getSoyTemplate=function(b){return jive.statusinput.containers.repostStatusInput(b)};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this.createFormElem=function(){var b=this.getContent();this.$formElem=b.find("form");this.$imageFormElem=b.find("div.j-meta-image-container form")};this.getDataFromDom=function(){var b=this.normalizeData();return{wallentry:{message:b},wallEntryID:this.$formElem.find("input:[name=contentID]").val()}};this.renderResponse=function(b){this._super(b);this.renderResponseCommon(b)};this.getDraftData=function(){return this.getDataFromDom()};this.handleAtMentionResult=function(g,d){var e=this;if(g&&g.split("-").length==2){var c=g.split("-")[0],f=g.split("-")[1];if(c!=3){var b=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});if(b){b.checkEntitlement(c,f).addCallback(function(h){if(!h){var i="";if(c==700){i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{i=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}$j("<p>"+d+" "+i+"</p>").message({style:"warn"})}})}}}}});
;
jive.namespace("MicroBlogging");jive.MicroBlogging.RepostController=jive.MicroBlogging.CommonController.extend(function(a){this.init=function(b){this._super(b);this.submitURLParams={objectType:2020,objectID:1001}};a.initMBView=function(){this.microbloggingView=new jive.MicroBlogging.RepostView(this.viewOptions)};a.submitServiceCall=function(c,d){var b=this;if(this.draftWallEntry==null){this.microbloggingService.repost({wallEntryID:c.wallEntryID},c.wallentry.message).addCallback(function(e){b.submitSuccessCallback(e,d)}).addErrback(function(f,e){b.submitErrCallback(f,e,d)})}else{this._super(c,d)}};a.createDraft=function(d,c){var b=this;this.microbloggingService.createRepostDraft({wallEntryID:this.draftData.wallEntryID},this.draftData.wallentry.message).addCallback(function(e){b.draftWallEntry=e;d()}).addErrback(function(f,e){c.emitError(f,e)})}});
;
function lightBoxPreviewableBinary(b,a){b.find("#jive-modal-title").text(a);b.lightbox_me({closeSelector:".close",destroyOnClose:true})}function showPreviewableBinary(a,d){var b=$j("<div style='display: none;' class='jive-attachmentViewer jive-modal'></div>");var c=new jive.Util.AjaxErrorHandler();$j("#previewable-binary-viewer").append(b);b.load(a,function(f,e,g){if(e=="error"){c.handleError(g)}else{c.checkForLoginRedirect(g);lightBoxPreviewableBinary(b,d)}})};
;
/*
 * $Revision$
 * $Date$
 *
 * Copyright (C) 1999-2011 Jive Software. All rights reserved.
 *
 * This software is the proprietary information of Jive Software. Use is subject to license terms.
 */

/**
 * Represent an item in the activity stream list
 *
 * @depends path=/resources/scripts/apps/microblogging/status_input_comment_controller.js
 * @depends path=/resources/scripts/apps/microblogging/status_input_repost_controller.js
 * @depends path=/resources/scripts/apps/microblogging/views/microblogging_comment_view.js
 * @depends path=/resources/scripts/apps/microblogging/views/repost_view.js
 * @depends path=/resources/scripts/apps/shared/views/form_waiting_view.js
 * @depends path=/resources/scripts/conversion/previewable-binary-lightbox.js
 * @depends template=jive.eae.activitystream.repostModal
 *
 */


jive.namespace('ActivityStream');

jive.ActivityStream.StreamItemCommonView = jive.AbstractView.extend(function(protect) {
    this.init = function (options) {
        this._super(options);
        this.replyViews = {};
        this.mbCommentControllers = {};
        this.articleID = options.id;
        this.hideDataArr = options.id.split("_");
        this.unhideData = {itemHidden: false, contextHidden: false, contextTypeHidden: false};
        this.repostController = null;
        this.isLikeDataPopulated = false;
        this.data = options.data;
        this.i18n = options.i18n;
        this.viewingUserData = options.viewingUserData;
        this.streamType = options.streamType;
        this.filterType = options.filterType;
        this.rteOptions = options.rteOptions;
        this.gapTimestamp = 0;
        this.canCreateMbImage = options.canCreateMbImage;
        this.canCreateMbVideo = options.canCreateMbVideo;
        this.mobileUI = jive.rte.mobileUI;
    };

    protect.getSoyTemplate = jive.oo.abstract;

    protect.postRender = jive.oo.abstract;

    protect.expandClickHandler = jive.oo.abstract;

    protect.handleClick = jive.oo.abstract;

    this.expandCollapseTargetCheck = function (e){
        // we only want handle click events from certain targets
        // returns true if we don't want to expand/collapse
        // avoid anchors, inputs, contentEditable elements, avatar images, inline status inputs, and status input elements.
        return $j(e.target).is('a:not(.j-js-show-all), span.j-user-link-txt');
    };

    this.handleClickCommon = function ($target, e, $targetParents, $content) {
        var streamItemView = this,
            defaultAction = false;

        if (!$content) {
            $content = streamItemView.getContent();
        }

        if ($target.hasClass('j-js-show-grouped-users')) {
            var $otherUsersLink = $target,
                $otherUsersMenu = $j('div.j-js-grouped-users[data-linkedID=' + $otherUsersLink.attr('data-linkedID') + ']');

            $otherUsersMenu.popover({context: $otherUsersLink, destroyOnClose: false});
        }
        else if ($target.hasClass('j-repost')) {
            var object = streamItemView.data.jiveObject;
            var $modal = $j(jive.eae.activitystream.repostModal({
                object: object,
                author: object.user,
                canCreateMbImage: streamItemView.canCreateMbImage,
                canCreateMbVideo: streamItemView.canCreateMbVideo,
                canAtMention: !jive.rte.mobileUI
            }));
            // Creating a jquery object from the output of this soy template surprisingly creates an
            // array of 3 objects: the modal div, as expected, and 2 script objects from the script tags
            // in the output.  Using this array as-is actually creates a lightbox init for each of the objects,
            // which triplicates the js work and leads to weird js issues.  Filtering out to only use the actual
            // html div as the modal object.
            $modal = $modal.filter('.j-repost-modal');
            var $formElem = $j('.j-act-reply-form > form', $modal),
                idPostfix = $formElem.attr('id').split('-')[$formElem.attr('id').split('-').length-1];

            $modal.lightbox_me({destroyOnClose: true, centered: true,
                onLoad:function(){
                    streamItemView.repostController = new jive.MicroBlogging.RepostController({viewOptions:{
                        selector: '#jive-js-repost-modal .j-eae-repost-form',
                        idPostfix: idPostfix,
                        atMentionBtn: $modal.find('a.jive-js-mention-button'),
                        imgAttachmentBtn: $modal.find('a.jive-js-imgattach-button'),
                        submitBtn: $modal.find('a.j-status-input-submit')},
                        manuallyRenderView: true
                    });

                    streamItemView.repostController.renderView();
                    streamItemView.repostController.getMicrobloggingView().focus();
                    streamItemView.repostController.getMicrobloggingView().addListener('submit', function() {
                        $modal.trigger('close');
                        $j('<p>'+streamItemView.i18n.repost_success+'</p>').message({style: 'success'});
                    });
                    jive.bindLightboxMedia();
                }
            });
        }
        else if ($target.is('[id^=showMicroRTE_]')) {
            streamItemView.showMicroInput($target);
        }
        else if ($targetParents.filter('.j-attach-anchor').length && $targetParents.filter('.j-attached-document').length) {
            // show lightbox viewer for attached documents (doc uploads only, for now)
            // parse docID from the actual doc url on the anchor
            var $target = $targetParents.filter('.j-attach-anchor').first(),
                docID = $target.attr('href').split('-')[$target.attr('href').split('-').length-1],
                url = _jive_base_url + '/conversion-viewer-overlay.jspa?objectID='+docID+'&objectType=102';
            showPreviewableBinary(url,'');
        }
        else {
            defaultAction = true;
        }
        return defaultAction;
    };

    protect.initMicroRTEView = function(idPostfix, $statusInputContainer){
        var streamItemView = this;
        if (!streamItemView.replyViews[idPostfix]){
            var $formElem = $statusInputContainer.find('.j-act-reply-form > form'),
                type = 'mbComment',
                parentSel = ' #microRTEContainer_'+idPostfix,
                selector = parentSel + ' .j-js-mb-comment',
                entitlementObjectID = $formElem.find('input[name=contentID]').val(),
                entitlementObjectType = $formElem.find('input[name=typeID]').val();

            if (!streamItemView.mbCommentControllers[idPostfix]) {
                streamItemView.mbCommentControllers[idPostfix] = new jive.MicroBlogging.CommentController({viewOptions:{
                        selector:selector,
                        idPostfix:idPostfix,
                        atMentionBtn: $formElem.find('a.jive-js-mention-button'),
                        submitBtn: $formElem.find('a.j-status-input-submit'),
                        cancelBtn: $formElem.find('a.j-status-input-cancel'),
                        $guestUserName:$statusInputContainer.find('.jive-reply-post-anonymous .replyGuestName'),
                        $guestUserEmail:$statusInputContainer.find('.jive-reply-post-anonymous .replyGuestEmail'),
                        $guestUserURL:$statusInputContainer.find('.jive-reply-post-anonymous .replyGuestUrl'),
                        viewingUserData: streamItemView.viewingUserData,
                        entitlementObjectID: entitlementObjectID,
                        entitlementObjectType: entitlementObjectType
                    }});
                streamItemView.mbCommentControllers[idPostfix].addListener('submitSuccess', function(data, promise){
                    streamItemView.renderReply(idPostfix, data, type)
                }).addListener('cancel', function() {
                    streamItemView.hideMicroRTEInput(idPostfix);
                });
                streamItemView.replyViews[idPostfix] = streamItemView.mbCommentControllers[idPostfix].getMicrobloggingView();
            }
        }
        return streamItemView.replyViews[idPostfix];
    };

    this.hideMicroRTEInput = function(idPostfix, callback){
        var streamItem = this;
        var $statusInputContainer = $j('#microRTEContainer_'+idPostfix),
            view = this.initMicroRTEView(idPostfix, $statusInputContainer);

        if (view) {
            $statusInputContainer.hide();
            view.resetStatusInput();
            streamItem.emit('updateListHeightOnPaneSizeChange');
            if (callback) {callback();}
        }
        else if (callback){
            callback();
        }
    };

    /**
     * converts posted comment data to activity obj
     * @param data - posted comment data
     */
    protect.convertDataToActivity = function(data, options) {
        var streamItem = this;
        if(!options){
            options = {};
        }

        if(!options.content){
            options.content = {};
        }
        var commentDiv = $j(data.body)[1];
        var commentText = '';
        var commentHTML = '';

        commentHTML = $j(commentDiv).html();
        commentText = $j(commentDiv).text();
        var newDate = new Date();
        var activityUser = $j.extend(true, {}, this.viewingUserData);
        if (data.name && activityUser.anonymous) {
            // set the guest-supplied name in the activity user object
            activityUser.username = data.name;
            activityUser.displayName = data.name;
        }
        var activityData = {"activityUser":activityUser,
                            "type":"created",
                            "content":$j.extend({
                                "commentContentResource": {
                                    "id":this.data.jiveObject.id,
                                    "jiveObjectURL":"",
                                    "objectType":this.data.jiveObject.objectType,
                                    "jiveObjectCSS":this.data.jiveObject.jiveObjectCSS,
                                    "activityTemplate":null,
                                    "groupedActivityTemplate":null,
                                    "domIDPostfix":""
                                },
                                "id":data.id,
                                "parentAuthor":null,
                                "subject":data.body,
                                "text":commentText,
                                // special html param for rendering html correctly in reply, client side only
                                "html":commentHTML,
                                "contentTypeFeatureName":this.i18n.comments,
                                "activityTemplate":null,
                                "groupedActivityTemplate":null},
                                options.content),
                            "read":false,
                            "creationDate":newDate.getTime(),
                            "creationTime":this.i18n.lessthanaminago,
                            "targetObjectID":data.id,
                            "targetObjectType":105,
                            "containerObjectID":this.data.container.id,
                            "containerObjectType":this.data.container.type,
                            "current":true,
                            "domIDPostfix":"",
                            "likable":true,
                            "liked":false,
                            "likeCount":0,
                            "groupedModifiers":[],
                            "moderated": data.moderated};
        return $j.extend(activityData, options.activityData);
    };

    /**
     * renders an inline reply, complicated because the post-reply behavior is different for different stream types
     */
    protect.renderReply = jive.oo.abstract;

    this.determineHidden = function(type, data, hide) {
        if (data.interactedObjectID == this.hideData.objectID && data.interactedObjectType == this.hideData.objectType) {
            this.hideMe(type, hide);
        }
    };

    /**
     * Gets the liking data from the server about sub-activities of this stream item.  Normally, this data is
     * retrieved when getFullReplies is called, but just for StreamChannels, since getFullReplies isn't called, this
     * method is still used to get the liking data.
     */
    this.getLikeData = function(callback) {
        var streamItemView = this,
            excerptDataArr = [];
        // get all ids/types for all excerpts and add to array
        streamItemView.getContent().find('div.j-act-exp-view div[id^=node-collapsed-]').each(function () {
            var objID = $j(this).attr('data-objectID'),
                objType =  $j(this).attr('data-objectType');
            excerptDataArr.push({id:objID, type:objType});
        });
        // send data array to controller for data gathering
        streamItemView.emit('getLikeData', excerptDataArr, function(type, id, data) {
            $j('div[id^=node-][data-objectID=' + id + '][data-objectType=' + type + ']').each(function() {
                var $likingControl = $j('.j-js-liking-control', $j(this));
                    //domIDPostfix = $j('[id^=acclaim-container-]', $likingControl).attr('id').split('-')[$j('[id^=acclaim-container-]', $likingControl).attr('id').split('-').length-1];

                $likingControl.html(jive.eae.acclaim.activityAcclaimLinkContainer(
                    {canLike: $j('[id^=jive-acclaim-like-container-]', $likingControl).attr('data-canLike') == 'true',
                     uniqueKey: type + "-" + id + "-" + jive.soy.func.randomString(),
                     objectId: id,
                     objectType: type,
                     liked: (data.acclaim.vote) ? true : false,
                     likeCount: data.acclaim.scoreDisplay}
                ));
            });
        });

        if (callback) {
            callback();
        }
    };

    this.initPollView = function (pollOptions, $fullContentContainer) {
        // pollOptions param only used for polls, make sure the vote count is up-to-date
        if (pollOptions) {
            if ($j.browser.msie) {
                // ie won't run this js inline when creating the poll markup
                var opts = {
                    containerType : pollOptions.containerType,
                    containerID : pollOptions.containerID,
                    widgetID : pollOptions.widgetID,
                    moreUrl : pollOptions.moreUrl,
                    createUrl : pollOptions.createUrl,
                    canCreatePoll : pollOptions.canCreatePoll,
                    pollID : pollOptions.poll.id,
                    pollIndex : pollOptions.poll.index
                };
                new jive.PollWidget.Main(opts);
            }
            if (pollOptions.poll.votesCount) {
                var $voteCount = $fullContentContainer.find('.j-act-poll-votect');
                $voteCount.html(jive.eae.poll.voteCount({numOfVotes: pollOptions.poll.votesCount}));
            }
        }
    };

    this.getID = function () {
        return this.articleID;
    };

    this.getParentTimestamp = function () {
        return this.data.parentTimestamp;
    }
});



;
jive.namespace("UserCollaboration");jive.UserCollaboration.Model=jive.RestService.extend(function(a){a.resourceType="directmessage";a.pluralizedResourceType=a.resourceType;this.init=function b(c){this._super(c)};this.addCollaborators=function(c,e){var d=this.RESOURCE_ENDPOINT+"/addcollaborators/";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:JSON.stringify({directMessageID:c,collaborators:e})})};this.addShareCollaborators=function(d,e){var c=jive.rest.url("/objects")+"/addcollaborators/";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c,data:JSON.stringify({shareID:d,collaborators:e})})}});
;
jive.namespace("UserCollaboration");jive.UserCollaboration.Main=jive.oo.Class.extend(function(a){var b=jive.UserCollaboration;this.init=function(e){var c=this;this.model=new b.Model(e);c.participants=e.participants;c.objectuser=e.objectuser;c.currentUser=e.currentUser;c.item=e.item;c.participantsInput=e.participantsInput;c.form=e.form;c.finishedCallback=e.finishedCallback;var d=(function(){var j={};j.userlists=[];j.users=[];for(var g=0,k=c.participants.length;g<k;g++){var h=c.participants[g];j.users.push({id:h.id,anonymous:h.anonymous,enabled:h.enabled,objectType:h.objectType,username:h.username,email:h.email,entitled:h.entitled,prop:{directMessageActionLinkShown:true},avatarID:h.avatarID,displayName:h.displayName,disabled:true})}j.users.push({id:c.objectuser.id,anonymous:c.objectuser.anonymous,enabled:c.objectuser.enabled,objectType:c.objectuser.objectType,username:c.objectuser.username,email:c.objectuser.email,entitled:c.objectuser.entitled,prop:{directMessageActionLinkShown:true},avatarID:c.objectuser.avatarID,displayName:c.objectuser.displayName,disabled:true});return j})();var f=new jive.UserPicker.Main({multiple:true,listAllowed:true,startingUsers:d,disabled:false,$input:c.participantsInput,relatedMessage:$j(jive.soy.direct_messaging.notRelated())});c.form.find("input.j-btn-callout").click(function(k){var h=c.form.find('input[name="participants"]').val(),j=h.split(",");for(var g=0;g<j.length;g++){if(j[g]==c.objectuser.id){j.splice(g,1);break}}h=j.join(",");if(c.item.typeShare){c.model.addShareCollaborators(c.item.id,h).addCallback(function(i){c.finishedCallback(i);c.form.closest(".jive-modal").trigger("close")}).addErrback(function(i){$j("<div>"+i+"</div>").message({style:"error"})})}else{c.model.addCollaborators(c.item.id,h).addCallback(function(i){c.finishedCallback(i);c.form.closest(".jive-modal").trigger("close")}).addErrback(function(i){$j("<div>"+i+"</div>").message({style:"error"})})}k.preventDefault()})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.poll=="undefined"){jive.eae.poll={}}jive.eae.poll.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry ',(A.activityContainer.read)?"j-act-read":"j-act-unread",' clearfix" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtml(A.activityContainer.numUnread),'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-commentHTMLLoaded="false" data-containerID="',soy.$$escapeHtml(A.activityContainer.container.id),'" data-containerType="',soy.$$escapeHtml(A.activityContainer.container.type),'" ><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.communications.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.poll.expandedCommItemView=function(F,D){var A=D||new soy.StringBuilder();A.append('<div class="j-act-exp-view expanded clearfix ',(F.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(F.streamType),"_",soy.$$escapeHtml(F.filterType),"_",F.activityContainer.jiveObject.objectType,"_",F.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(F.activityContainer.container.type),"_",soy.$$escapeHtml(F.activityContainer.container.id),'" style="display:none;"><article class="j-act-poll"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(F.streamType),"-exp-header-",soy.$$escapeHtml(F.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(F.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(F.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,F.activityContainer.jiveObject.jiveObjectURL),'">',F.activityContainer.jiveObject.subject,"</a> ");if(F.activityContainer.container.type&&F.activityContainer.container.type!=-2){A.append(' <span class="j-act-container font-color-meta">');if(F.activityContainer.container.type==2020){var I=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(F.activityContainer.originalAuthor,I);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:I.toString(),arg1:(F.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},A)}else{var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:F.activityContainer.container},B);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:B.toString(),noAutoEscape:true},A)}A.append("</span>")}A.append('</div><div class="j-act-header-slug"><div class="j-author-act font-color-meta">');if(!F.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(F.activityContainer.originalAuthor,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:F.activityContainer.jiveObject},A)}A.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:F.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:F.streamType,hideDetailedReplyTo:true,user:F.user,againstObject:false},A);A.append(' <span class="j-act-time">',soy.$$escapeHtml(F.activityContainer.creationTime),'</span></div></div><div class="j-act-exp-full-content-view j-rc5 ',(F.activityContainer.jiveObject.typeTask)?"j-task":"",'" style="display:none;"><div class="j-author-act font-color-meta">');if(!F.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(F.activityContainer.originalAuthor,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:F.activityContainer.jiveObject},A)}A.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:F.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:F.streamType,hideDetailedReplyTo:true,user:F.user,againstObject:false},A);A.append(' <span class="j-act-time">',soy.$$escapeHtml(F.activityContainer.creationTime),'</span></div><div class="j-act-exp-content-body-view" style=""></div><div class="j-act-poll-votect">');jive.eae.poll.voteCount({numOfVotes:F.activityContainer.jiveObject.voteCount},A);A.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:F.activityContainer.jiveObject,domIDPostfix:F.activityContainer.jiveObject.domIDPostfix},A);A.append('<div class="j-act-meta clearfix"><nav id="',soy.$$escapeHtml(F.streamType),"-exp-body-actions-",soy.$$escapeHtml(F.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(F.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.activitystream.activityNavActions({object:F.activityContainer.jiveObject,activityContainer:F.activityContainer,amAnAuthor:F.activityContainer.amAnAuthor,objectType:F.activityContainer.jiveObject.objectType,objectId:F.activityContainer.jiveObject.id,liked:F.activityContainer.liked,likeCount:F.activityContainer.likeCount,likable:F.activityContainer.likable,author:F.activityContainer.originalAuthor,user:F.user,location:"parentPreview",streamType:F.streamType,filterType:F.filterType,canCreateMbImage:F.canCreateMbImage,canCreateMbVideo:F.canCreateMbVideo},A);A.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'" data-containerID="',soy.$$escapeHtml(F.activityContainer.container.id),'" data-containerType="',soy.$$escapeHtml(F.activityContainer.container.type),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(F.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!F.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:F.activityContainer,showCurrentCount:false},A);A.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var G=F.activityContainer.activityList;var H=G.length;for(var E=0;E<H;E++){var C=G[E];if(!C.parentActivity&&(C.current||E==H-1)){jive.eae.activitystream.activityContentExcerpt({activity:C,activityContainer:F.activityContainer,isHidden:false,user:F.user,streamType:F.streamType,canCreateMbImage:F.canCreateMbImage,canCreateMbVideo:F.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:E==H-1},A)}}A.append("</div>");if(F.activityContainer.canReply){A.append('<nav id="',soy.$$escapeHtml(F.streamType),"-parent-reply-",soy.$$escapeHtml(F.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.comment.on.originalX",arg0:(F.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((F.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},A);A.append("</a></div></div></nav>")}A.append("</div></article></div>");if(!D){return A.toString()}};jive.eae.poll.groupedActivityStreamTemplate=function(A,E){var B=E||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable j-act-poll clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-containerID="',soy.$$escapeHtml(A.activityContainer.container.id),'" data-containerType="',soy.$$escapeHtml(A.activityContainer.container.type),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title"><span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'">',A.activityContainer.jiveObject.subject,'</a><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},B);B.append("</li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append('</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},B);B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.activitystream.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-meta font-color-meta-light"> ');if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){if(A.activityContainer.container.type==2020){var C=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,C);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:C.toString(),arg1:(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},B)}else{var D=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},D);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:D.toString(),noAutoEscape:true},B)}B.append((!A.activityContainer.jiveObject.typeTask)?' <span class="j-bullet">&#8226;</span> ':"")}jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},B);B.append("</div></div></article>");if(!E){return B.toString()}};jive.eae.poll.activityStreamFullContentView=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="jive-content j-rc5"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"46"}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(' <span class="j-act-time font-color-meta">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span></div><div class="j-act-exp-content-body-view" style=""></div><div class="j-act-poll-votect">');jive.eae.poll.voteCount({numOfVotes:A.activityContainer.jiveObject.voteCount},B);B.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('<div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-body-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section>");if(!C){return B.toString()}};jive.eae.poll.voteCount=function(A,C){var B=C||new soy.StringBuilder();B.append((A.numOfVotes==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.poll.Xtotalvote"),[A.numOfVotes])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.poll.Xtotalvotes"),[A.numOfVotes])));if(!C){return B.toString()}}
;
jive.namespace("ActivityStream");jive.ActivityStream.CommunicationStreamItemView=jive.ActivityStream.StreamItemCommonView.extend(function(a){this.init=function(b){this._super(b);if(this.data.numCurrent==0){this.data.numCurrent=1}this.hideData={objectType:parseInt(this.hideDataArr[2],10),objectID:parseInt(this.hideDataArr[3],10),containerType:parseInt(this.hideDataArr[4],10),containerID:parseInt(this.hideDataArr[5],10)};this.subActivitiesByDomID={};this.originalCommentIDs=[];this.activityListLength=this.data.activityList.length;for(i=this.activityListLength-1;i>=0;i--){this.subActivitiesByDomID[this.data.activityList[i].content.domIDPostfix]=this.data.activityList[i];if(this.data.activityList[i].content.typeMessage||this.data.activityList[i].content.typeComment){this.originalCommentIDs.push(this.data.activityList[i].content.id)}}this.fullRepliesLoaded=false;this.expandInProgress=false;this.expandedDataInitialized=false;this.ie7=b.ie7;this.mobileUI=b.mobileUI};this.getSoyTemplate=function(b){return jive.eae.communications.groupedCommStreamItem(b)};this.handleClick=function(C,l,u){var z=this,d=$j(C.target),q=false;if(l.filter("div.j-js-show-all").length){q=z.expandClickHandler(true,C,u)}else{if(d.hasClass("j-act-addrecipients")){var B=d.closest("article"),w=$j(jive.eae.communications.collaboratorParticipantsModal()),D={};for(var A=0,c=z.data.participants.length;A<c;A++){D[z.data.participants[A].id]=""}z.userCollaborationController=new jive.UserCollaboration.Main({participants:z.data.participants,objectuser:z.data.jiveObject.user,currentUser:z.viewingUserData,item:z.data.jiveObject,participantsInput:w.find("#participants"),form:w.find("form"),finishedCallback:function(F){for(var e=0;e<F.length;e++){if(!(F[e].id in D)){z.data.participants.push(F[e])}}B.find(".j-author-act").html(jive.eae.communications.collaboratorParticipantsI18NHelper({activityContainer:z.data,user:z.viewingUserData}))}});w.lightbox_me({closeSelector:".jive-modal-close-top, .close"})}else{if(d.hasClass("j-reply-rte")){var h=d.closest(".j-act-rte-replyable"),E={},t=h.closest("div.j-act-exp-view"),v=h.attr("id"),k=v.split("-")[v.split("-").length-1];E.streamItemIdentifier=t.attr("data-linkedID");E.idPostfix=k;E.viewingUser=z.viewingUserData;E.parent={};if(h.hasClass("j-js-mention-rte")){E.objectID=z.data.activityList[0].content.context.id;E.objectType=z.data.activityList[0].content.context.objectType;if(z.data.activityList[0].content.context.id!=z.data.activityList[0].content.context.parentObjectID||z.data.activityList[0].content.context.objectType!=z.data.activityList[0].content.context.parentObjectType){E.type="sub";E.activity={};E.activity.activityUser=z.data.activityList[0].activityUser;E.activity.containerObjectType=z.data.activityList[0].content.context.parentContainerID;E.activity.containerObjectID=z.data.activityList[0].content.context.parentContainerType;E.activity.content={};E.activity.content.subject=z.data.activityList[0].content.context.name;E.activity.content.id=z.data.activityList[0].content.context.id}else{E.type="parent"}E.parent.container={};E.parent.container.id=z.data.activityList[0].content.context.parentContainerID;E.parent.container.type=z.data.activityList[0].content.context.parentContainerType;E.parent.jiveObject={};E.parent.jiveObject.subject=z.data.activityList[0].content.context.name;E.parent.jiveObject.id=z.data.activityList[0].content.context.parentObjectID;E.parent.jiveObject.objectType=z.data.activityList[0].content.context.parentObjectType;E.parent.jiveObject.threadID=z.data.activityList[0].content.context.threadID;E.parent.jiveObject.typeThread=z.data.activityList[0].content.context.parentTypeDiscussion;E.parent.jiveObject.versionNumber=z.data.activityList[0].content.context.versionNumber;E.parent.jiveObject.url=z.data.activityList[0].content.context.jiveObjectURL;E.parent.originalAuthor=z.data.activityList[0].activityUser}else{if(!h.is("nav")&&!h.is("section")){E.type="sub";E.activity=z.subActivitiesByDomID[k]}else{E.type="parent";h=h.closest("article").find("nav.j-act-rte-replyable").last()}if(E.activity&&E.activity.content.jsAppActivityRepliedToData&&E.activity.content.jsAppActivityRepliedToData.id){E.parent.jiveObject={};E.parent.jiveObject.id=E.activity.content.jsAppActivityRepliedToData.id;E.parent.jiveObject.objectType=E.activity.content.jsAppActivityRepliedToData.objectType}else{E.parent.jiveObject=z.data.jiveObject}E.parent.container=z.data.container;E.parent.originalAuthor=z.data.originalAuthor;E.objectID=h.attr("data-objectid");E.objectType=h.attr("data-objecttype")}z.emit("showRTE",E,h)}else{if(l.filter("a.j-js-show-full-content").length){var d=l.filter("a.j-js-show-full-content").first(),s=d.attr("data-objectType"),x=d.attr("data-objectID"),o=d.attr("data-containerType"),n=d.attr("data-containerID"),t=d.closest("div.j-act-exp-view"),r=t.find("div.j-act-exp-content-body-view"),f=t.find("div.j-act-exp-full-content-view");d.append(jive.eae.activitystream.loadingSpinner());if(!r.html()){z.emit("getFullContent",{objectType:s,objectID:x,containerType:o,containerID:n},function(e,F){r.html(e);z.initPollView(F,f);f.fadeIn("fast");t.find("div.j-act-header-slug").hide();d.find(".j-loading-spinner").remove();d.hide();d.next("a.j-js-hide-full-content").show();jive.rte.renderedContent.emit("renderedContent",r);z.emit("updateListHeightOnPaneSizeChange")})}else{f.fadeIn("fast");t.find("div.j-act-header-slug").hide();d.find(".j-loading-spinner").remove();d.hide();d.next("a.j-js-hide-full-content").show();z.emit("updateListHeightOnPaneSizeChange")}}else{if(l.filter("a.j-js-hide-full-content").length){d=l.filter("a.j-js-hide-full-content").first(),t=d.closest("div.j-act-exp-view"),f=t.find("div.j-act-exp-full-content-view");f.hide();t.find("div.j-act-header-slug").show();d.hide();d.prev("a.j-js-show-full-content").show();z.emit("updateListHeightOnPaneSizeChange")}else{if(l.filter("a.j-js-show-older").length){var p=l.filter("a.j-js-show-older").first();if(!p.hasClass("j-js-loading")){p.addClass("j-js-loading");p.append(jive.eae.activitystream.loadingSpinner());if(z.data.jiveObject.objectType==1500){var t=d.closest("div.j-act-exp-view"),b=t.find("div.j-sub-activity-items"),m=b.find("[id^=node-collapsed-]"),j=m.length;for(var A=0;A<j;A++){var g=$j(m[A]);g.show()}p.hide();p.removeClass("j-js-loading");p.find(".j-loading-spinner").remove();z.emit("updateListHeightOnPaneSizeChange")}else{z.getEarlierSubActivities(function(){p.removeClass("j-js-loading");p.find(".j-loading-spinner").remove()})}}}else{if(l.filter("a.j-act-track-comms").length){var p=l.filter("a.j-act-track-comms").first();z.emit("track",z.hideData,z.articleID,function(){p.hide();p.parent().find("a.j-act-untrack").show()})}else{if(l.filter("a.j-act-untrack").length){var p=l.filter("a.j-act-untrack").first();z.emit("untrack",z.hideData,z.articleID,function(){p.hide();p.parent().find("a.j-act-track-comms").show()})}else{var y="";if(d.closest("#j-js-inbox-exp").length){y=$j("#j-js-inbox-exp")}q=z.handleClickCommon(d,C,l,y);if(u){u.emitSuccess()}}}}}}}}}return q};this.expandClickHandler=function(d,h,n){var c=this,b=c.getContent(),j=$j("#j-js-inbox-exp"),k=j.data("refreshing");if(h&&c.expandCollapseTargetCheck(h)){n.emitSuccess();return true}if(!c.expandInProgress&&!k&&!b.hasClass("j-act-active")){c.expandInProgress=true;var g=b.find("div.j-act-exp-view");if(!g.length){g=$j(jive.eae.communications.expandedCommItemView({activityContainer:c.data,user:c.viewingUserData,streamType:"inbox",filterType:c.filterType,canCreateMBImage:c.canCreateMBImage,canCreateMBVideo:c.canCreateMBVideo,mobileUI:c.mobileUI}))}else{g.detach()}if(g.length){c.spinner=new jive.loader.LoaderView({size:"small"});c.spinner.prependTo(b);var l=c.spinner;c.getFullReplies(g,function(){var o=b.attr("data-objectType"),p=b.attr("data-objectID"),u=b.attr("data-containerType"),w=b.attr("data-containerID");if(!c.expandedDataInitialized){var v=g.find("div.j-sub-activity-items"),e=v.find("div.j-act-node"),x=c.data.activityList.filter(function(y){return(y.content.typeComment||y.content.typeMessage)}).length,r=e.length,q=false;for(var t=0;t<r;t++){var s=$j(e[t]);if(!s.attr("data-current")){s.hide();q=true}else{s.show()}}if(q||(x<c.data.replyCount&&c.data.jiveObject.objectType!=1500)){g.find("a.j-js-show-older").show()}}c.emit("showReadingPaneData",g,{objectType:o,objectID:p,containerType:u,containerID:w},function(){$j("#j-inbox-list").children("article").removeClass("j-act-active");b.addClass("j-act-active");if(c.data.jiveObject.typeWallEntry){var y="collapsed-attachmentContainer-"+c.data.jiveObject.domIDPostfix;if(y in jive.MicroBlogging.AttachmentView.views){jive.MicroBlogging.AttachmentView.views[y].resize()}}c.expandedDataInitialized=true;l.getContent().remove();l.destroy();if(d){jive.ReadTracking.readController.markRead(b.find(".j-js-read-trigger"))}c.expandInProgress=false;n.emitSuccess()})});var m=b.attr("id").split("_")[2],f=b.attr("id").split("_")[3];c.emit("saveLastViewedItem",m,f)}else{c.expandInProgress=false;n.emitSuccess()}}else{if(!c.expandInProgress&&!k&&b.hasClass("j-act-active")&&d){jive.ReadTracking.readController.markRead(b.find(".j-js-read-trigger"));n.emitSuccess()}else{if(n){n.emitSuccess()}}}if(h){h.preventDefault()}};this.getEarlierSubActivities=function(g){var c=this,d=new jive.ActivityStream.FillInTheGapRequest({originalIDs:c.originalCommentIDs,timestamp:c.gapTimestamp,fullContent:true,pageSize:10}),b,f=(c.data.jiveObject.typeThread?c.data.jiveObject.threadID:c.data.jiveObject.id),e=$j("#j-js-inbox-exp .j-act-ibx-exp-list");if(c.data.jiveObject.typeThread){b=1}else{if(c.data.activityList[0].content.commentContentResource&&c.data.activityList[0].content.commentContentResource.objectType==129){b=129}else{b=c.data.jiveObject.objectType}}c.emit("fillInTheGaps",{objectType:b,objectID:f},d,function(o){if(!o.hasMore){e.find("a.j-js-show-older").hide();var s=e.find("div.j-sub-activity-items [id^=node-collapsed-]");$j(s).each(function(){$j(this).show()})}else{e.find("a.j-js-show-older").show();c.gapTimestamp=o.items[o.items.length-1].creationDate}var k=o.items.length,r=e.find("div.j-sub-activity-items").clone();for(var p=0;p<k;p++){var l=o.items[p],n=false,t=c.data.activityList.length;for(var h=0;h<t;h++){var m=c.data.activityList[h];if(parseInt(m.creationDate)>parseInt(l.creationDate)){n=true;c.subActivitiesByDomID[l.content.domIDPostfix]=l;var j=$j(jive.eae.activitystream.activityContentExcerpt({activity:l,activityContainer:c.data,isHidden:false,user:c.viewingUserData,streamType:c.streamType,hideStub:true,addedInline:false,forceCurrent:false,canCreateMbImage:false,canCreateMbVideo:false}));if(h==0){r.prepend(j);var q=r.find("#node-collapsed-"+m.content.domIDPostfix);if(q.css("display")=="none"){q.css("display","block")}}else{r.find("#node-collapsed-"+c.data.activityList[h].content.domIDPostfix).before(j)}c.data.activityList.splice(h,0,l);break}}if(!n){c.data.activityList.push(l);c.subActivitiesByDomID[l.content.domIDPostfix]=l;j=$j(jive.eae.activitystream.activityContentExcerpt({activity:l,activityContainer:c.data,isHidden:false,user:c.viewingUserData,streamType:c.streamType,hideStub:true,addedInline:false,forceCurrent:false,canCreateMbImage:false,canCreateMbVideo:false}));r.append(j)}}jive.rte.renderedContent.emit("renderedContent",j);c.replaceAroundRTE(e.find("div.j-sub-activity-items"),r);if(g){g()}})};this.replaceAroundRTE=function(b,e){var c=b.find("div.j-panel-rte-wrap"),d=e.find("div.j-panel-rte-wrap").index();if(c.length&&d>=0){c.prevAll().remove();c.before(e.children().slice(0,d));c.nextAll().remove();c.after(e.children().slice(1))}else{b.replaceWith(e)}this.emit("updateListHeightOnPaneSizeChange")};this.getFullReplies=function(g,f){var c=this;if(!c.fullRepliesLoaded&&!c.data.jiveObject.typeMention&&!c.data.jiveObject.typeInboxEntry&&!c.data.jiveObject.typeAnnouncement&&!c.data.jiveObject.typeTask&&c.data.jiveObject.objectType!=1500&&c.originalCommentIDs.length){var d=new jive.ActivityStream.FullRepliesRequest({originalIDs:c.originalCommentIDs}),b,e=(c.data.jiveObject.typeThread?c.data.jiveObject.threadID:c.data.jiveObject.id);if(c.data.jiveObject.typeThread){b=1}else{if(c.data.activityList[0].content.commentContentResource&&c.data.activityList[0].content.commentContentResource.objectType==129){b=129}else{b=c.data.jiveObject.objectType}}c.emit("getFullReplies",{objectType:b,objectID:e},d,function(l){var q=l.items.length;for(var m=0;m<q;m++){var j=l.items[m],p=g.find("div.j-sub-activity-items"),o=(c.data.jiveObject.typeThread?j.content.objectType:j.targetObjectType),n=(c.data.jiveObject.typeThread?j.content.id:j.targetObjectID),k=p.find('div.j-act-node[data-objectID="'+n+'"][data-objectType="'+o+'"]');if(k.length){k.find(".j-excerpt-full-html-content").html(jive.eae.activitystream.activityContentText({activity:j,noAutoescape:true}));jive.rte.renderedContent.emit("renderedContent",k);c.emit("updateListHeightOnPaneSizeChange");var h=k.find(".j-js-liking-control");if(h.length){h.html(jive.eae.acclaim.activityAcclaimLinkContainer({canLike:$j("[id^=jive-acclaim-like-container-]",h).attr("data-canLike")=="true",uniqueKey:o+"-"+n+"-"+jive.soy.func.randomString(),objectId:n,objectType:o,liked:j.liked,likeCount:j.likeCount}))}}}c.fullRepliesLoaded=true;f()})}else{if(c.data.jiveObject.objectType==1500){c.getLikeData(function(){c.fullRepliesLoaded=true;f()})}else{c.fullRepliesLoaded=true;f()}}};this.renderReply=function(d,k,m){var g=this,n;if(m=="mbComment"){b=g.data.originalAuthor;n=g.convertDataToActivity(k,{content:{typeWallEntryComment:(g.data.jiveObject.typeWallEntry)?true:false,typeShareComment:(g.data.jiveObject.typeShare)?true:false,typeDMComment:(g.data.jiveObject.typeDirectMessage)?true:false,typeComment:true,parentAuthor:b,domIDPostfix:jive.soy.func.randomString(),objectType:105},activityData:{domIDPostfix:jive.soy.func.randomString()}});g.hideMicroRTEInput(d)}else{if(m=="discussionReply"){n=k;n.likable=true;n.current=true}else{var b,f={},q=g.subActivitiesByDomID[d];if(q){b=q.activityUser;if(q.content.objectType==1501){f.id=q.content.id;f.objectType=q.content.objectType}}else{b=g.data.originalAuthor}n=g.convertDataToActivity(k,{content:{domIDPostfix:jive.soy.func.randomString(),parentAuthor:b,jsAppActivityRepliedToData:f,typeComment:true},activityData:{domIDPostfix:jive.soy.func.randomString()}})}}n.content.html=g.shiv("<div class='jive-rendered-content'>"+n.content.html+"</div>");n.content.html=$j("<div>").append($j(n.content.html).clone()).remove().html();g.data.replyCount=g.data.replyCount+1;g.data.numCurrent=1;g.data.numCurrentSubActivities=1;g.data.read=true;var l=g.data;l.activityList.push(n);g.originalCommentIDs.push(n.content.id);g.subActivitiesByDomID[n.content.domIDPostfix]=n;if(g.data.jiveObject.typeMention){var j=$j("#j-js-inbox-exp .j-act-ibx-exp-list");j.append(jive.eae.mention.atMentionReply({data:n,containerData:g.data}))}else{var p=$j("#j-js-inbox-exp div.j-sub-activity-items");var e=$j(jive.eae.activitystream.activityContentExcerpt({activity:n,activityContainer:l,isHidden:true,user:g.viewingUserData,streamType:g.streamType,hideStub:true,addedInline:true,forceCurrent:false,canCreateMbImage:false,canCreateMbVideo:false}));p.append(e);g.getContent().addClass("j-replied-to");var o=$j(jive.eae.communications.commListItemView({activityContainer:l,activity:n,streamType:g.streamType,hidden:false,user:g.viewingUserData,time:n.creationTime}));var c=g.getContent().find("div.j-act-coll-view");c.fadeOut("fast",function(){c.html(o);c.show()});if(!$j("#j-js-inbox-exp h4.j-act-new-activity-title").is(":visible")){$j("#j-js-inbox-exp h4.j-act-new-activity-title").fadeIn("fast")}e.fadeIn("fast");g.emit("updateListHeightOnPaneSizeChange");jive.rte.renderedContent.emit("renderedContent",e)}var h=$j("#j-js-inbox-exp").find(".j-act-replycount");if(h.length){h.replaceWith(jive.eae.activitystream.replyCountText({activityContainer:g.data,showCurrentCount:false}))}};this.showMicroInput=function(c){var d=this,g=c.attr("id"),h=g.split("_")[g.split("_").length-1],f=c.closest("div.j-js-microrte-replyable"),e=$j("#microRTEContainer_"+h);if(!e.length){e=$j(jive.eae.activitystream.microRTEContainer({object:d.data.jiveObject,activityContainer:d.data,user:window._jive_current_user,canAtMention:!d.mobileUI}));f.after(e)}var b=d.initMicroRTEView(h,e);if(e.is(":visible")){d.hideMicroRTEInput(h);if(!f.next().hasClass("j-act-micro-rte")){e.detach();f.after(e);e.fadeIn("fast",function(){var m=$j("#j-js-inbox-exp"),k=m.find(".j-act-ibx-exp-list"),j=k.offset().top,l=e.offset().top;d.emit("updateListHeightOnPaneSizeChange");m.animate({scrollTop:"+="+(l-j-$j("#j-js-inbox-exp").height()+375)+"px"},"fast")});b.focus()}}else{e.detach();f.after(e);e.fadeIn("fast",function(){var m=$j("#j-js-inbox-exp"),k=m.find(".j-act-ibx-exp-list"),j=k.offset().top,l=e.offset().top;d.emit("updateListHeightOnPaneSizeChange");m.animate({scrollTop:"+="+(l-j-$j("#j-js-inbox-exp").height()+375)+"px"},"fast")});b.focus()}};this.getActivityContainer=function(){return this.data};this.appendSubActivity=function(b){this.data.activityList.push(b);this.subActivitiesByDomID[b.content.domIDPostfix]=b};this.appendOriginalCommentID=function(b){this.originalCommentIDs.push(b)};this.getIDWithoutContainer=function(){return this.getID().split("_").slice(0,4).join("_")};this.updateID=function(b){this.articleID=b;this.hideDataArr=b.split("_");this.hideData={objectType:parseInt(this.hideDataArr[2],10),objectID:parseInt(this.hideDataArr[3],10),containerType:parseInt(this.hideDataArr[4],10),containerID:parseInt(this.hideDataArr[5],10)}};this.incrementReplyCounts=function(c,b,d){this.data.replyCount+=c;this.data.numCurrent+=b;this.data.numCurrentSubActivities+=d}});
;
jive.namespace("ActivityStream");jive.ActivityStream.CommunicationStreamListView=jive.ActivityStream.StreamListCommonView.extend(function(a){this.init=function(b){this._super(b);this.savedItemLoaded=b.savedItemLoaded;this.earliestItemParentTime=0;this.mobileUI=jive.rte.mobileUI;this.ie7=$j.browser.msie&&$j.browser.version<8;this.itemClicked=false};this.getSoyTemplate=function(b){return jive.eae.communications.commStreamList(b)};this.setSavedItemLoaded=function(b){this.savedItemLoaded=b};this.selectSavedItem=function(c,g,f){var e=this,b=c.attr("id").split("_").slice(0,4).join("_"),d=e.itemsByDomID[b];if(d){d.expandClickHandler(g,null,f)}else{if(f){f.emitSuccess()}}};this.postRender=function(){var e=this,d=e.getContent();var f=d.children("article"),c=f.length;for(var b=0;b<c;b++){e.initStreamItem($j(f[b]),b,true)}d.unbind();d.bind("click touchend",function(k){var g=$j(k.target),j=g.add(g.parents()),i=g.closest("article"),h=false;if(i.length&&!e.itemClicked&&e.savedItemLoaded){e.itemClicked=true;var l=new jive.conc.Promise();l.addCallback(function(){e.itemClicked=false});h=e.itemsByDomID[i.attr("id").split("_").slice(0,4).join("_")].handleClick(k,j,l)}else{if(j.filter("#j-load-more-"+e.streamType).length){e.loadMoreInProgress=true;var m=g.closest("#j-load-more-"+e.streamType);this.spinner=new jive.loader.LoaderView({size:"small",showLabel:false});this.spinner.appendTo(m);m.find(".j-more-label").hide();m.addClass("j-append-active");e.emit("loadMore",""+e.earliestItemParentTime,function(q){if(q.activityStream4JS.activityContainerList.length){q.streamType=e.streamType;e.data=q.activityStream4JS;var r=$j(jive.eae.communications.commStreamListItems(q));e.append(r);if(!e.mobileUI&&!e.ie7){r.hide();r.fadeIn(2000)}else{r.show();$j("#comms-column-wrap-l").css("height","");e.emit("updateListHeightOnPaneSizeChange")}m.removeClass("j-append-active");var o=r.filter("article.j-comm-entry"),n=o.length;for(var p=0;p<n;p++){e.initStreamItem($j(o[p]),p,true)}}m.remove();if(!e.mobileUI&&!e.ie7){e.emit("resizeReadingPane")}e.loadMoreInProgress=false})}}if(h){return true}k.preventDefault()});if(!e.mobileUI&&!e.ie7){$j(document).click(function(g){if(d.is(":visible")){if($j(g.target).closest("#j-js-inbox-exp").length){d.removeClass("j-js-focused")}else{d.removeClass("j-js-focused").addClass("j-js-focused")}}});$j(document).keydown(function(j){if(d.is(":visible")&&$j(j.target).is("body, html, #j-js-inbox-exp")){var i,g=e.getDrawer();switch(j.keyCode?j.keyCode:j.which){case 38:if(e.isKeyNavUnlocked()){if(d.hasClass("j-js-focused")){i=d.find("article.j-act-active");var h;if(i.length&&i.prev().length){h=i.prev()}else{h=d.find("article.j-comm-entry:first")}if(h.length){var k=new jive.conc.Promise();k.addCallback(function(){e.unlockKeyNav()});e.selectSavedItem(h,true,k)}j.preventDefault()}}break;case 40:if(e.isKeyNavUnlocked()){if(d.hasClass("j-js-focused")){i=d.find("article.j-comm-entry.j-act-active");var l;if(i.length&&i.next().length){l=i.next()}else{l=d.find("article.j-comm-entry:first")}if(l.length){k=new jive.conc.Promise();k.addCallback(function(){e.unlockKeyNav()});e.selectSavedItem(l,true,k)}j.preventDefault()}}break;case 39:if(e.isKeyNavUnlocked()){if(g.length){g.attr("tabindex",-1).focus();d.removeClass("j-js-focused")}e.unlockKeyNav()}break;case 37:if(e.isKeyNavUnlocked()){d.removeClass("j-js-focused").addClass("j-js-focused");e.unlockKeyNav()}break}}return true})}};this.isKeyNavUnlocked=function(){var b=this;if(!b.keyNavLocked){b.keyNavLocked=true;return true}else{return false}};this.unlockKeyNav=function(){var b=this;b.keyNavLocked=false};this.initStreamItem=function(m,c,h){var l=this,f=l.data.activityContainerList[c],d=m.attr("id").split("_").slice(0,4).join("_"),e=new jive.ActivityStream.CommunicationStreamItemView({selector:this.selector+"  #"+m.attr("id"),id:m.attr("id"),data:f,i18n:l.i18n,viewingUserData:l.data.viewingUser,streamType:l.streamType,filterType:l.filterType,canCreateMbImage:l.data.canCreateMbImage,canCreateMbVideo:l.data.canCreateMbVideo,ie7:l.ie7,mobileUI:l.mobileUI});l.itemsByDomID[d]=e;var i=parseInt(f.parentTimestamp,10);if(i<l.earliestItemParentTime||l.earliestItemParentTime==0){l.earliestItemParentTime=i}e.addListener("replySubmit",function(o,n,j){l.emit("replySubmit",o,n,j)}).addListener("commentSubmit",function(o,n,j){l.emit("commentSubmit",o,n,j)}).addListener("mbCommentSubmit",function(o,n,j){l.emit("mbCommentSubmit",o,n,j)}).addListener("repostSubmit",function(o,n,j){l.emit("repostSubmit",o,n,j)}).addListener("linkURLMatch",function(j,n){l.emit("linkURLMatch",j,n)}).addListener("getLikeData",function(j,o){for(var n=0;n<j.length;n++){l.emit("getLikeData",j[n].type,j[n].id,o)}}).addListener("showReadingPaneData",function(n,j,o){l.emit("showReadingPaneData",n,j,e,o)}).addListener("getFullContent",function(j,n){l.emit("getFullContent",j,n)}).addListener("getFullReplies",function(j,n,o){l.emit("getFullReplies",j,n,o)}).addListener("showRTE",function(j,n){l.emit("showRTE",j,n)}).addListener("track",function(j,n,o){l.emit("track",j,function(p){o()})}).addListener("untrack",function(j,n,o){l.emit("untrack",j,function(p){o()})}).addListener("saveLastViewedItem",function(j,n){l.emit("saveLastViewedItem",j,n)}).addListener("fillInTheGaps",function(j,n,o){l.emit("fillInTheGaps",j,n,o)}).addListener("updateListHeightOnPaneSizeChange",function(){l.emit("updateListHeightOnPaneSizeChange")});var b=this.streamListItems.length;for(var g=0;g<b;g++){if(this.streamListItems[g].getID()==d){var k=this.streamListItems.splice(g,1);delete (k);break}}if(h){l.streamListItems.push(e)}else{return e}};this.refresh=function(F){var n=this;F.streamType=n.streamType;F.filterType=n.filterType;var q=$j(jive.eae.communications.commStreamListItems(F)),z=true,w="",A=null,E=q.filter("article.j-comm-entry"),u=E.length,l=n.getContent();n.data=F.activityStream4JS;if(!l.children("article").length){z=false}for(var C=0;C<u;C++){var b=$j(E[C]),k=n.data.activityContainerList[C],m=b.attr("id"),s=m.split("_").slice(0,4).join("_"),t=false,o=n.getDrawer(),c=o.find("div.j-act-exp-view").attr("data-linkedID"),g="none";if(c){g=c.split("_").slice(0,4).join("_")}if(g&&g==s){o.data("refreshing",true);var v=$j(jive.eae.communications.expandedCommItemView({activityContainer:k,user:window._jive_current_user,streamType:"inbox",filterType:n.filterType,canCreateMBImage:n.data.canCreateMbImage,canCreateMBVideo:n.data.canCreateMBVideo,mobileUI:n.mobileUI}));n.emit("refreshReadingPane",v,k,s,function(H,G){if(G.length){for(var j=0;j<G.length;j++){n.itemsByDomID[H].appendSubActivity(G[j])}}o.data("refreshing",false)});w=s;t=true}l.find("article[id^="+s+"]").remove();var h=n.streamListItems.length;for(var y=0;y<h;y++){if(n.streamListItems[y].getIDWithoutContainer()==s){var D=n.streamListItems.splice(y,1)[0];if(!t){delete (D)}else{A=D}break}}}if($j(q[q.length-1]).is("#j-load-more-"+n.streamType)){l.find("article, #j-load-more-"+n.streamType).remove();h=n.streamListItems.length;for(y=0;y<h;y++){D=n.streamListItems.splice(0,1);delete (D)}n.autoLoadMoreTimesLeft=4;n.earliestItemParentTime=0}l.find(".j-act-pagepoll").after(q);$j("#j-js-inbox").show();if(E.length&&l.find(".j-act-empty-list").length){l.find(".j-act-empty-list").remove()}var e=[],r=q.filter("article.j-comm-entry"),d=r.length;for(var B=0;B<d;B++){var p=$j(r[B]),x;if(p.attr("id").split("_").slice(0,4).join("_")==w){x=A;var f=l.find("article[id^="+w+"]");if(f.length){f.addClass("j-act-active")}}else{x=n.initStreamItem(p,B,false)}e.push(x)}n.streamListItems=e.concat(n.streamListItems)};this.getDrawer=function(){return $j("#j-js-inbox-exp")};this.updateUnreadMarkers=function(p){var n=this,g=n.getContent().find("article[id^=inbox]"),l=g.length,h=n.getDrawer().find("div.j-act-exp-view"),s=h.attr("data-linkedID"),c=0,r=0;if(h.length&&s){var d=s.split("_");c=d[2],r=d[3]}for(var u=0;u<l;u++){var b=$j(g[u]),q=b.hasClass("j-act-unread"),o=b.attr("id").split("_"),m=o[2],e=o[3],v=false;for(var t=0,f=p.length;t<f;t++){var k=p[t];if(k.id==e&&k.objectType==m){v=true;p.splice(t,1);break}}if(!q&&v){b.removeClass("j-act-read").addClass("j-act-unread");if(r&&r==e&&c==m){h.removeClass("j-act-read").addClass("j-act-unread");r=0}}else{if(q&&!v){b.removeClass("j-act-unread").addClass("j-act-read");if(r&&r==e&&c==m){h.removeClass("j-act-unread").addClass("j-act-read");r=0}}}}}});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionRestSource=jive.RestService.extend(function(a){a.resourceType="discussionsJackson";a.pluralizedResourceType=a.resourceType;this.createMessage=function(f){var d=this.RESOURCE_ENDPOINT+"/"+f.forumThreadID+"/"+f.ID,c=f.name,b=f.email;delete f.name;delete f.email;var e=JSON.stringify(f);if(c){d+="/guest";e={messageBean:f,guestUserName:c,guestUserEmail:b};e=JSON.stringify(e)}return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:e})}});
;
jive.namespace("Liking");jive.Liking.LikeSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="acclaim";a.pluralizedResourceType=a.resourceType;this.getLikes=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e+"/scoredisplay";var b="like";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:{ratingType:b}})};this.getLikeData=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e;var b="like";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:{ratingType:b}})};this.setLiked=function(e,c,i){var d,g,b="like",f=1,h=new jive.conc.Promise();if(e){d="/"+this.resourceType+"/"+c+"/"+i+"/addvote";g={ratingType:b,voteValue:f}}else{d="/"+this.resourceType+"/"+c+"/"+i+"/removevote";g={ratingType:b}}$j.post(jive.rest.url(d),g);h.emitSuccess();return h}});
;
jive.namespace("CommentApp");jive.CommentApp.Comment=$Class.extend({init:function(b){var a=this;Object.keys(b).forEach(function(c){a[c]=b[c]})}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentCount=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="comments";a.pluralizedResourceType=a.resourceType;this.getCommentCount=function(b,d){var c=this.RESOURCE_ENDPOINT+"/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c})}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentSource=jive.NestedRestService.extend(function(a){a.resourceType="comment";a.init=function(c){this.parentType=c.resourceType;this.parentID=c.resourceID;this.listAction=c.listAction;this.location=c.location;this.commentMode=c.commentMode;this.isPrintPreview=Boolean(c.isPrintPreview);this.contentObject=c.contentObject;this._super({parentType:this.parentType,parentID:this.parentID})};var b=1;this.getAllAsHTML=function(d){var c=new jive.conc.Promise();$j.ajax({type:"GET",url:this.listAction,dataType:"html",data:$j.extend({location:this.location,mode:this.commentMode,isPrintPreview:this.isPrintPreview},this.contentObject,d),success:function(e){c.emitSuccess(e)},error:function(e){c.emitError(e)}});return c};this.getPreview=function(d){var c=new jive.conc.Promise();$j.ajax({type:"POST",url:this.POST_COMMENT_ENDPOINT+"/preview",dataType:"html",data:{commentBody:d.body},success:function(e){c.emitSuccess(e)},error:function(e){c.emitError(e)}});return c}});
;
jive.namespace("PollWidget");jive.PollWidget.WidgetSource=function(k){var j=k.containerID,i=k.containerType,a=jive.rest.url("/polls"),h=a+"/",g=a+"/"+i+"/"+j+"/",e;function f(l){if(typeof l=="function"){l={success:l}}return l}function d(m,l){l=f(l);$j.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:g+m,dataType:"json",success:function(n){if(typeof l.success=="function"){e=n;l.success.call(m,e)}},error:function(n){if(typeof l.error=="function"){l.error.call(e,n)}}})}function b(m,l){l=f(l);$j.ajax({type:"GET",contentType:"application/json; charset=utf-8",url:h+m+"/getBean",dataType:"json",success:function(n){if(typeof l.success=="function"){e=n;l.success.call(m,e)}},error:function(n){if(typeof l.error=="function"){l.error.call(e,n)}}})}function c(n,m,l){l=f(l);$j.ajax({type:"POST",url:h+n+"/votes",dataType:"json",data:{optionID:m},success:function(o){if(typeof l.success=="function"){e=o;l.success.call(n,e)}},error:function(o){if(typeof l.error=="function"){l.error.call(e,o)}}})}this.getPoll=d;this.getPollByID=b;this.vote=c};
;
jive.MenuView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(e,f,d){var c=this;this.template=typeof e=="function"?e:function(){return e};this.$control=b(f);this.$control.click(function(i){var h,g=b(this);if(g.data("menu")){g.data("menu").trigger("close")}else{h=c.template();h.popover(b.extend({context:g,onClose:function(){g.removeData("menu");c.emit("close")}},d||{}));g.data("menu",h);c.emit("open")}i.preventDefault()})};this.close=function(){this.$control.each(function(){var c=b(this);if(c.data("menu")){c.data("menu").trigger("close")}})}});
;
jive.namespace("PollWidget");jive.PollWidget.WidgetView=function(p,c){jive.conc.observable(this);var m,k=c.pollID,o=0,j,h,r=c.moreUrl,l=c.widgetID,q=c.createUrl,f=this;function n(){$j(p).find("#load-indicator").hide();return this}function b(){$j(p).find("#load-indicator").hide();return this}function e(u){var t=$j(p);t.find("input#vote").removeAttr("disabled");if(t.closest("div.j-act-exp-full-content-view").length&&u.votesCount){var s=t.closest("div.j-act-exp-full-content-view").find(".j-act-poll-votect");s.html(jive.eae.poll.voteCount({numOfVotes:u.votesCount}))}return this}function i(s){m=s;k=m.id;o=m.index;a()}function g(u,s){var t;if(s){t=jive.polls.widget.soy.errorWithLink({createUrl:q})}else{t=jive.polls.widget.soy.error({message:u})}$j(p).html(t)}function d(){return $j(p)}function a(){var s=jive.polls.widget.soy.poll({poll:m,moreUrl:r,widgetID:l});$j(p).html(s)}this.next=n;this.previous=b;this.vote=e;this.setContent=i;this.displayError=g;$j(document).ready(function(){$j(p).find(".j-pgnav-next").live("click",function(){j=($j(this).attr("id")||"").split("-").last();$j(p).find("#load-indicator").fadeIn("fast");f.emit("next",j);return false}).end().find(".j-pgnav-prev").live("click",function(){h=($j(this).attr("id")||"").split("-").last();$j(p).find("#load-indicator").fadeIn("fast");f.emit("previous",h);return false}).end().find(".jive-poll-votebtn").live("click",function(){var v=$j(p).find("input[type=radio]:checked");if(v.is("*")){$j(p).find("input#vote").val(jive.polls.widget.soy.voteProcessing()).attr("disabled","disabled");f.emit("vote",k,v.val(),o)}else{$j(p).find(".jive-warn-box").fadeIn("fast")}return false});$j(p).find(".j-poll-stream ol li input:radio").each(function(){var x=$j(this);var w=$j('<a href="#" class="j-vote-box j-ui-elem j-empty-check" />');var v=$j(this).closest("li").find("label");x.css("opacity","0").after(w);if(x.is(":disabled")){w.removeClass("j-empty-check").addClass("j-disabled")}if(!x.is(":disabled")){w.add(v).hover(function(){u(v,w,x)},function(){s(v,w,x)});w.click(function(y){x.trigger("click");y.preventDefault()})}x.focusin(function(){u(v,w,x)}).focusout(function(){s(v,w,x)});x.click(function(){t(v,w,x)})});function u(v,w,x){v.addClass("font-color-link");w.addClass("hover")}function s(v,w,x){v.removeClass("font-color-link");w.removeClass("hover")}function t(v,x,z){var y=$j('<span class="j-vote-box j-ui-elem j-check popped" />');var w=x.closest("ol");w.find(".j-check").remove();w.find(".j-choice").removeClass("j-choice");w.find(".font-color-okay").removeClass("font-color-okay");x.after(y);x.closest("li").addClass("j-choice").find("label").addClass("font-color-okay")}})};
;
jive.namespace("PollWidget");jive.PollWidget.Main=function(k){var g=k.containerType,i=k.containerID,h=k.widgetID,a=k.moreUrl,e=k.createUrl,j=k.canCreatePoll,f=k.pollID,c=k.pollIndex,d,b;d=new jive.PollWidget.WidgetSource({containerType:g,containerID:i});b=new jive.PollWidget.WidgetView("#poll-container-"+h,{moreUrl:a,widgetID:h,createUrl:e,pollID:f,pollIndex:c});b.addListener("next",function(l){d.getPoll(l,{success:function(m){b.setContent(m);b.next()},error:function(){var m=jive.json.parse(data.responseText);b.displayError(m.message)}})}).addListener("previous",function(l){d.getPoll(l,{success:function(m){b.setContent(m);b.previous()},error:function(){var m=jive.json.parse(data.responseText);b.displayError(m.message)}})}).addListener("vote",function(n,m,l){d.vote(n,m,{success:function(o){b.setContent($j.extend({index:l},o));b.vote(o)},error:function(){var o=jive.json.parse(data.responseText);b.displayError(o.message)}})})};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.polls=="undefined"){jive.polls={}}if(typeof jive.polls.widget=="undefined"){jive.polls.widget={}}if(typeof jive.polls.widget.soy=="undefined"){jive.polls.widget.soy={}}jive.polls.widget.soy.main=function(A,C){var B=C||new soy.StringBuilder();if(A.poll){jive.shared.soy.resourceInlineJs({code:"var opts = {containerType : "+soy.$$escapeJs(A.containerType)+", containerID : "+soy.$$escapeJs(A.containerID)+', widgetID : "'+soy.$$escapeJs(A.widgetID)+'", moreUrl : "'+soy.$$escapeJs(A.moreUrl)+'", createUrl : "'+soy.$$escapeJs(A.createUrl)+'", canCreatePoll : '+soy.$$escapeJs(A.canCreatePoll)+", pollID : "+soy.$$escapeJs(A.poll.id)+", pollIndex : "+soy.$$escapeJs(A.poll.index)+"}; new jive.PollWidget.Main(opts);"},B)}B.append('<!-- MAIN poll container --><div id="poll-container-',soy.$$escapeHtml(A.widgetID),'" class="jive-poll-container">');if(A.poll){jive.polls.widget.soy.poll(A,B)}else{if(A.canCreatePoll){jive.polls.widget.soy.errorWithLink(A,B)}else{jive.polls.widget.soy.error({message:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.latestpoll.nopolls.text"),[]))},B)}}B.append("</div>");if(!C){return B.toString()}};jive.polls.widget.soy.poll=function(A,C){var B=C||new soy.StringBuilder();jive.polls.widget.soy.nav(A,B);jive.polls.widget.soy.body(A,B);if(!C){return B.toString()}};jive.polls.widget.soy.nav=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-box-controls j-poll-nav"><span class="j-pgnav-all"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.moreUrl),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.more_polls.link"),[])),"</a></span>",(!A.poll.first)?'<span class="j-pgnav j-pgnav-prev j-pgnav-active" id="j-pgnav-prev-'+soy.$$escapeHtml(A.widgetID)+"-"+soy.$$escapeHtml(A.poll.index-1)+'"><a href="javascript:void(0);" class="onpage">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[]))+"</a></span>":'<span class="j-pgnav j-pgnav-prev-d font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[]))+"</span>",(!A.poll.last)?'<span class="j-pgnav j-pgnav-next j-pgnav-active" id="j-pgnav-next-'+soy.$$escapeHtml(A.widgetID)+"-"+soy.$$escapeHtml(A.poll.index+1)+'"><a href="javascript:void(0);" class="onpage">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[]))+"</a></span>":'<span class="j-pgnav j-pgnav-next-d font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[]))+"</span>",'</div><div id="load-indicator" class="j-loading-msg msg-top msg-left" style="display:none"><div class="j-load-bg"></div><div class="j-content-loading"><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("customize.loading"),[])),"</span></div></div>");if(!C){return B.toString()}};jive.polls.widget.soy.body=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-widget-body-polls"><h5 class="clearfix"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.poll.url),'">',soy.$$escapeHtml(A.poll.subject),'</a></h5><p class="j-poll-desc">',soy.$$escapeHtml(A.poll.preview),(A.poll.previewShortened)?'  <a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.poll.url)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.readmore"),[]))+"</a>.":"","</p>");if(A.poll.voteable){jive.polls.widget.soy.form(A,B)}else{jive.polls.widget.soy.results(A,B)}jive.polls.widget.soy.meta(A,B);B.append("</div>");if(!C){return B.toString()}};jive.polls.widget.soy.results=function(A,G){var C=G||new soy.StringBuilder();C.append((A.poll.voted)?'<div class="j-poll-votecount" style="display:none;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.voteadded.text"),[]))+"</div>":"",'<div class="j-poll j-poll-submitted"><ol>');var D=A.poll.options;var B=D.length;for(var E=0;E<B;E++){var F=D[E];C.append('<li class="clearfix',(A.poll.userOptionID==F.id)?" j-yourvote":"",'"><h4>',soy.$$escapeHtml(F.text)," (",soy.$$escapeHtml(F.votePercent),"%)</h4>");if(F.contentMeta.length>0){jive.polls.widget.soy.renderAttachments(soy.$$augmentData(A,{attachments:F.contentMeta}),C)}C.append('<em class="font-color-notify">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.votes.text"),[])),": ",soy.$$escapeHtml(F.voteCount),"/",soy.$$escapeHtml(A.poll.votesCount),'</em><div class="j-poll-resultbar clearfix">',(F.votesCount==0)?'<img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/jive-browseby-bar.png"))+'" class="no-votes" width="100%" height="8" border="0" alt="">':'<span class="j-val-poll-bar" style="width:'+soy.$$escapeHtml(F.votePercent)+'%"></span>',"</div>",(A.poll.userOptionID==F.id)?"<span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("poll.including_your_vote.text"),[]))+'  </span><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.poll.commentsUrl)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.leaveCommentShort.text"),[]))+"</a>":"","</li>")}C.append("</ol></div>");if(!G){return C.toString()}};jive.polls.widget.soy.form=function(B,G){var C=G||new soy.StringBuilder();C.append('<div class="j-poll ',(B.location&&B.location=="activity-stream")?"j-poll-stream":"",'"><form name="jivepollvote" id="jive-poll-vote" method="post"><ol class="jive-poll-vote-list">');var D=B.poll.options;var A=D.length;for(var E=0;E<A;E++){var F=D[E];C.append('<li class="clearfix" id="vote-option-',soy.$$escapeHtml(F.id),'"><input type="radio" name="option" value="',soy.$$escapeHtml(F.id),'" id="jive-poll-item-',soy.$$escapeHtml(F.id),'" /><label for="jive-poll-item-',soy.$$escapeHtml(F.id),'">',soy.$$escapeHtml(F.text),"</label>");if(F.contentMeta.length>0){jive.polls.widget.soy.renderAttachments(soy.$$augmentData(B,{attachments:F.contentMeta}),C)}C.append("</li>")}C.append('</ol><div id="jive-warn-box" class="jive-warn-box" style="display:none"><div>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.please_select.text"),[])),'</div></div><div class="j-poll-buttons"><input type="submit" id="vote" name="vote" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.vote.button"),[])),'" class="jive-poll-votebtn" /></div></form></div>');if(!G){return C.toString()}};jive.polls.widget.soy.renderAttachments=function(B,G){var C=G||new soy.StringBuilder();C.append('<ul class="j-attached-items clearfix">');var D=B.attachments;var A=D.length;for(var E=0;E<A;E++){var F=D[E];jive.polls.widget.soy.renderAttachment(soy.$$augmentData(B,{attachment:F}),C)}C.append("</ul>");if(!G){return C.toString()}};jive.polls.widget.soy.renderAttachment=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-attached-image"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.fullImageUrl),'" style="display: block;width: ',soy.$$escapeHtml(A.attachment.thumbnailWidth),"px; height: ",soy.$$escapeHtml(A.attachment.thumbnailHeight),"px; margin-top: ",soy.$$escapeHtml((70-A.attachment.thumbnailHeight)/2),'px"><img src="',jive.soy.func.normalizeUrl(window._jive_base_url,A.attachment.imageThumbnailUrl),'" width="',soy.$$escapeHtml(A.attachment.thumbnailWidth),'" height="',soy.$$escapeHtml(A.attachment.thumbnailHeight),'" alt="" /></a></li>');if(!C){return B.toString()}};jive.polls.widget.soy.meta=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-poll-meta clearfix font-color-meta">');jive.shared.displayutil.avatar(soy.$$augmentData(A.poll.author,{size:24}),B);B.append("<span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.created_by.text"),[])),"  ");jive.shared.displayutil.userDisplayNameLink(A.poll.author,B);B.append("  ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.on"),[]))," ",soy.$$escapeHtml(A.poll.creationDate),"  ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.in.title"),[])),'  <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.poll.containerUrl),'">',soy.$$escapeHtml(A.poll.containerName),'</a></span></div><div class="j-poll-activity clearfix font-color-meta"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.poll.url),'"><strong>',soy.$$escapeHtml(A.poll.votesCount),"</strong> ",(A.poll.votesCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.vote.text"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("polls.votes.text"),[])),'</a> - <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.poll.commentsUrl),'"><strong>',soy.$$escapeHtml(A.poll.commentsCount),"</strong> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.comments"),[])),"</a></div>");if(!C){return B.toString()}};jive.polls.widget.soy.error=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-widget-rssfeed-none"  class="jive-widget-body-empty jive-widget-body-empty-info"><div class="jive-widget-empty"><span class="jive-icon-med jive-icon-poll"></span><p>',soy.$$escapeHtml(A.message),"</p></div></div>");if(!C){return B.toString()}};jive.polls.widget.soy.errorWithLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-widget-rssfeed-none"  class="jive-widget-body-empty jive-widget-body-empty-info"><div class="jive-widget-empty"><span class="jive-icon-med jive-icon-poll"></span><p>');jive.shared.soy.i18nHelper({i18nKey:"widget.latestpoll.nopolls.create",arg0:'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.createUrl)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("widget.latestpoll.nopolls.link"),[]))+"</a>",noAutoEscape:"true"},B);B.append("</p></div></div>");if(!C){return B.toString()}};jive.polls.widget.soy.voteProcessing=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("login.processing.text"),[])));if(!C){return B.toString()}}
;
jive.namespace("ActivityStream");jive.ActivityStream.CommunicationStreamControllerMain=jive.oo.Class.extend(function(a){this.init=function(b){var c=this;c.ie7=$j.browser.msie&&$j.browser.version<8;if(c.ie7){$j.fx.off=true}c.userId=window._jive_effective_user_id;c.rteOptions=b.rteOptions;c.contextObjectType=b.contextObjectType;c.contextObjectID=b.contextObjectID;c.streamType=b.streamType;c.streamTypeID=b.streamTypeID;c.tabViewSelector=b.tabViewSelector;c.i18n=b.i18n;c.savedRefreshTime=b.savedRefreshTime;c.lastViewedObjectType=b.lastViewedObjectType;c.lastViewedObjectID=b.lastViewedObjectID;c.savedItemLoaded=false;c.filterType=b.filterType?b.filterType:"all";c.dmEnabled=b.dmEnabled;if(c.rteOptions.hasImagePerms!=undefined){window._jive_images_enabled=c.rteOptions.hasImagePerms}c.commentServiceOptions={listAction:"",location:"jive-comments",commentMode:"comments",isPrintPreview:false};c.readingPaneView=new jive.ActivityStream.CommunicationStreamReadingPaneView({selector:"#j-js-inbox-exp",rteOptions:c.rteOptions,i18n:c.i18n});c.listService=new jive.ActivityStream.StreamSource();c.trackingService=new jive.TrackingApp.TrackingSource();c.inboxList=new jive.ActivityStream.CommunicationStreamListView({selector:"#j-inbox-list",data:b.data,i18n:c.i18n,streamType:"inbox",filterType:c.filterType,savedItemLoaded:c.savedItemLoaded});c.attachListHandlers(c.inboxList);c.parseFilterID(c.filterType);c.disscusionService=new jive.DiscussionApp.DiscussionRestSource();c.disscusionService.suppressGenericErrorMessages();c.microbloggingService=new jive.MicroBlogging.MicroBloggingSource();c.liking=new jive.Liking.LikeSource({});c.metaService=new jive.MetaSource();c.draftWallEntry=null;c.readingPaneView.addListener("replySubmit",function(h,g,e){var f=$j(h.body).text();c.disscusionService.createMessage(h).addCallback(function(i){i.content.text=f;g(i)}).addErrback(function(j,i){e(j,i)})}).addListener("commentSubmit",function(i,h,e){c.commentServiceOptions.resourceID=i.ID;c.commentServiceOptions.resourceType=i.typeID;c.commentServiceOptions.contentObject={document:i.ID,version:i.version};var f="comments";if(i.isBackChannelComment){f="backchannel"}c.commentServiceOptions.commentMode=f;c.commentService=new jive.CommentApp.CommentSource(c.commentServiceOptions);c.commentService.suppressGenericErrorMessages();var g=new jive.CommentApp.Comment({body:i.body,commentMode:f,parentCommentID:i.parentCommentID});c.commentService.save(g).addCallback(function(j){h(j)}).addErrback(function(k,j){e(k,j)})}).addListener("getFullContent",function(e,g){if(e.containerType&&e.containerID){var f=new jive.PollWidget.WidgetSource({containerType:e.containerType,containerID:e.containerID});f.getPollByID(e.objectID,{success:function(i){if(i){var h={containerType:e.containerType,containerID:e.containerID,widgetID:jive.soy.func.randomString(),moreUrl:"#",createUrl:"#",canCreatePoll:false,poll:i,location:"activity-stream"};g(jive.polls.widget.soy.main(h),h)}}})}else{c.listService.getFullContent(e.objectType,e.objectID).addCallback(function(h){g(h)}).addErrback(function(i,h){console.log("error time")})}}).addListener("getFullReplies",function(e,f,g){c.listService.getFullReplies(e.objectType,e.objectID,f).addCallback(function(h){g(h)})});c.$filterLinks=$j("#inbox-filterlinks");c.$filterMenuButton=$j("#inbox-filter-trigger");c.menuView=new jive.MenuView(c.buildFilterMenu.bind(c),"#inbox-filter-trigger",{darkPopover:true});$j("#filters-applied a.js-remove-filter").click(function(f){c.toggleFilterSelectedBar();c.currentFilterApplied="all";c.filter();f.preventDefault()});$j("#j-inbox-filter-bar input:checkbox").unbind("click").click(function(){var f=$j(this);f.attr("disabled","disabled");if(f.is(":checked")){c.unreadApplied=true;var e="unread"}else{c.unreadApplied=false;var e="all"}c.filter().addCallback(function(){f.removeAttr("disabled")});c.listService.saveActiveStreamFilter("inbox",e)});c.inboxList.postRender();c.readingPaneView.postRender();c.streamLoaded=true;if(c.lastViewedObjectType&&c.lastViewedObjectID){var d=$j("#j-inbox-list article[id^=inbox_"+c.filterType+"_"+c.lastViewedObjectType+"_"+c.lastViewedObjectID+"_]");if(d.length){c.inboxList.selectSavedItem(d,false,new jive.conc.Promise())}else{c.readingPaneView.defaultView()}}else{c.readingPaneView.defaultView()}c.savedItemLoaded=true;c.inboxList.setSavedItemLoaded(true);$j("#j-stream-info-dismiss-link").click(function(f){c.dismissInfoBox();f.preventDefault()});$j("#j-stream-info-icon").click(function(f){c.toggleInfoBox();f.preventDefault()})};this.dismissInfoBox=function(){var b=this;$j("#j-stream-info").slideUp("fast",function(){b.readingPaneView.resetWindowDims()});var c=new jive.Browse.User.ItemSource();c.setUserProperty({userID:"current",propName:"jive.commsInfo.closed",propValue:"true"})};this.toggleInfoBox=function(){var b=this;if($j("#j-stream-info").is(":visible")){b.dismissInfoBox()}else{$j("#j-stream-info").slideDown("fast",function(){b.readingPaneView.resetWindowDims()})}};this.toggleFilterSelectedBar=function(c){var b=$j("#filters-applied");if(c){var d=jive.i18n.getMsg("eae.menu.filter.showing."+c);if(b.is(":visible")){b.slideUp("fast",function(){b.find(".j-act-filter-display-name").text(d);b.slideDown("fast")})}else{b.find(".j-act-filter-display-name").text(d);b.slideDown("fast")}}else{b.slideUp("fast")}};this.filter=function(){var b=this,f=$j("#j-inbox-list"),c=b.getNewFilterID(),e=new jive.conc.Promise();if(c!=b.filterType){this.spinner=new jive.loader.LoaderView({size:"small"});this.spinner.prependTo($j("#j-js-inbox"));var d=this.spinner;if(c!="all"&&c!="unread"){$j(".j-not-all-read-controls").addClass("j-js-hide-mark-all-read-controls");$j(".j-all-read-controls").addClass("j-js-hide-mark-all-read-controls")}else{$j(".j-not-all-read-controls").removeClass("j-js-hide-mark-all-read-controls");$j(".j-all-read-controls").removeClass("j-js-hide-mark-all-read-controls")}b.listService.getMore({objectType:b.contextObjectType,objectID:b.contextObjectID,streamType:"inbox",filterType:c},"0").addCallback(function(h){var g=$j(jive.eae.communications.commStreamList({activityStream:h.activityStream,streamType:"inbox",filterType:c}));f.remove();$j("#j-inbox-rebuilding").after(g);b.inboxList.tearDown();b.inboxList=new jive.ActivityStream.CommunicationStreamListView({selector:"#j-inbox-list",i18n:b.i18n,data:h.activityStream4JS,streamType:"inbox",filterType:c,rteOptions:b.rteOptions,savedItemLoaded:b.savedItemLoaded});b.inboxList.postRender();b.attachListHandlers(b.inboxList);d.getContent().remove();d.destroy();b.filterType=c;b.readingPaneView.resizeReadingPane();b.hideExpandedView().addCallback(function(){e.emitSuccess()})})}else{e.emitSuccess()}return e};this.attachListHandlers=function(c){var b=this;c.addListener("replySubmit",function(g,f,d){var e=$j(g.body).text();b.disscusionService.createMessage(g).addCallback(function(h){h.content.text=e;f(h)}).addErrback(function(i,h){d(i,h)})}).addListener("commentSubmit",function(g,f,d){b.commentServiceOptions.resourceID=g.ID;b.commentServiceOptions.resourceType=g.typeID;b.commentServiceOptions.contentObject={document:g.ID,version:g.version};b.commentService=new jive.CommentApp.CommentSource(b.commentServiceOptions);b.commentService.suppressGenericErrorMessages();var e=new jive.CommentApp.Comment({body:g.body,commentMode:"comments",parentCommentID:g.parentCommentID});b.commentService.save(e).addCallback(function(h){f(h)}).addErrback(function(i,h){d(i,h)})}).addListener("linkURLMatch",function(d,e){b.metaService.createLink(d).addCallback(function(f){e.emitSuccess(f)}).addErrback(function(g,f){e.emitError(g,f)})}).addListener("getLikeData",function(d,f,e){b.liking.getLikeData(d,f).addCallback(function(g){e(d,f,g)})}).addListener("loadMore",function(d,e){b.listService.getMore({objectType:b.contextObjectType,objectID:b.contextObjectID,streamType:b.streamType,filterType:b.filterType},d).addCallback(function(f){e(f)})}).addListener("track",function(d,e){b.trackingService.save({objectType:d.objectType,objectID:d.objectID}).addCallback(function(){e(d)})}).addListener("untrack",function(d,e){b.trackingService.destroy({objectType:d.objectType,objectID:d.objectID}).addCallback(function(){e(d)})}).addListener("getFullContent",function(d,f){if(d.containerType&&d.containerID){var e=new jive.PollWidget.WidgetSource({containerType:d.containerType,containerID:d.containerID});e.getPollByID(d.objectID,{success:function(h){if(h){var g={containerType:d.containerType,containerID:d.containerID,widgetID:jive.soy.func.randomString(),moreUrl:"#",createUrl:"#",canCreatePoll:false,poll:h,location:"activity-stream"};f(jive.polls.widget.soy.main(g),g)}}})}else{b.listService.getFullContent(d.objectType,d.objectID).addCallback(function(g){f(g)}).addErrback(function(h,g){console.log("error time")})}}).addListener("getFullReplies",function(d,e,f){b.listService.getFullReplies(d.objectType,d.objectID,e).addCallback(function(g){f(g)})}).addListener("saveLastViewedItem",function(d,e){b.listService.saveActiveInboxItem(d,e).addCallback(function(){}).addErrback(function(g,f){console.log("error time")})}).addListener("updatePrevRefreshTime",function(d,e){b.listService.updatePrevRefreshTime(d,e).addCallback(function(){}).addErrback(function(g,f){console.log("error time")})}).addListener("fillInTheGaps",function(d,e,f){b.listService.fillInTheGaps(d.objectType,d.objectID,e).addCallback(function(g){f(g)})}).addListener("refreshReadingPane",function(e,d,f,g){b.readingPaneView.refresh(e,d,f,g)}).addListener("showReadingPaneData",function(f,e,d,g){b.loadingStreamItem=true;b.readingPaneView.showReadingPaneData(f,e,d,function(){b.loadingStreamItem=false;g()})}).addListener("showRTE",function(d,e){b.readingPaneView.showRTE(d,e)}).addListener("resizeReadingPane",function(){b.readingPaneView.resizeReadingPane()}).addListener("updateListHeightOnPaneSizeChange",function(){b.readingPaneView.updateListHeightOnPaneSizeChange()})};this.autoUpdate=function(b){var c=this;if(!c.loadingStreamItem){if(c.savedRefreshTime){c.lastRefreshTime=Number(c.savedRefreshTime);c.savedRefreshTime=0}if(b!=0){this.spinner=new jive.loader.LoaderView({size:"small"});this.spinner.prependTo($j("#j-js-inbox"));var d=this.spinner;c.listService.list({userId:c.userId,streamType:"inbox",filterType:c.filterType},c.lastRefreshTime+"").addCallback(function(e){c.lastRefreshTime=e.lastRefreshTime;if(e.activityStream.activityContainerList.length){c.inboxList.refresh(e)}d.getContent().remove();d.destroy();c.readingPaneView.resetWindowDims()})}}};this.hideStream=function(){var b=this;$j("#j-js-inbox").hide()};this.hideExpandedView=function(){return this.readingPaneView.collapseReadingPane()};this.setStreamLoaded=function(b){this.streamLoaded=b};a.buildFilterMenu=function(){var b=this;var c=$j(jive.eae.communications.include.filtermenu({streamType:this.streamType,dmEnabled:this.dmEnabled}));$j("a",c).click(function(f){var d=$j(this).attr("data-filterName");if(d!=b.currentFilterApplied){b.toggleFilterSelectedBar();b.currentFilterApplied=d;b.filter();if(d!="all"){b.toggleFilterSelectedBar(d)}}c.trigger("close");f.preventDefault()});return c};this.getNewFilterID=function(){if(this.currentFilterApplied=="all"&&!this.unreadApplied){return"all"}else{if(this.currentFilterApplied=="all"&&this.unreadApplied){return"unread"}else{if(this.unreadApplied){return"unread"+this.currentFilterApplied}else{return this.currentFilterApplied}}}};this.parseFilterID=function(b){if(b=="all"){this.currentFilterApplied="all";this.unreadApplied=false}else{if(b=="unread"){this.currentFilterApplied="all";this.unreadApplied=true}else{if(b.substr(0,6)=="unread"){this.unreadApplied=true;this.currentFilterApplied=b.substr(6)}else{this.unreadApplied=false;this.currentFilterApplied=b}}}};this.updateUnreadMarkers=function(c){var b=this;if(c.length<51){b.inboxList.updateUnreadMarkers(c)}}});
;
jive.namespace("ReadTracking");jive.ReadTracking.ReadTrackingSource=jive.RestService.extend(function(a){a.resourceType="readtracking";a.pluralizedResourceType=a.resourceType;a.init=function(b){this._super(b)};this.save=function(c,g,d,f){var e=new jive.conc.Promise(),b="read";if(!f){b="unread"}$j.ajax({type:"POST",dataType:"json",data:{streamType:d},url:this.RESOURCE_ENDPOINT+"/"+c+"/"+g+"/"+b,success:function(h){e.emitSuccess()}});return e};this.markAllRead=function(){var b=this.RESOURCE_ENDPOINT+"/markallread";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:b})}});
;
jive.namespace("ReadTracking");jive.ReadTracking.ReadTrackingView=jive.AbstractView.extend(function(a){jive.conc.observable(this);this.init=function(b){this.i18n=b.i18n;this.options=b;this.userInboxType=1;this.readTrackLock=false};this.postRender=function(){var b=this;$j("#j-js-inbox").delegate("a.j-js-read-trigger","click",function(c){b.markRead($j(this),c)}).delegate("a.j-js-unread-trigger","click",function(c){b.markUnread($j(this),c)});$j("#inbox-mark-all-read").click(function(c){b.markAllRead($j(this),c)})};this.markRead=function(j,i){var m=this;if(i){i.stopPropagation()}if(m.isReadTrackUnlocked()){var c=m.userInboxType,b,d,g,k;if(j.closest("div.j-act-exp-view").length){var h=j.closest("div.j-act-exp-view");b=h.attr("data-linkedid");d=b.split("_")[2];g=b.split("_")[3];k=h.hasClass("j-act-read")}else{var f=j.closest("article");b=f.attr("id");d=b.split("_")[2];g=b.split("_")[3];k=f.hasClass("j-act-read")}if(!k){var l=this;m.emitP("markRead",d,g,c,true).addCallback(function(){var e=1;$j("#"+b).removeClass("j-act-unread").addClass("j-act-read");$j("[data-linkedid="+b+"]").removeClass("j-act-unread").addClass("j-act-read");if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("inbox",e)}}).addErrback(function(){console.log("promise got an errback")})}}if(i){i.preventDefault()}};this.markUnread=function(j,i){var m=this;if(i){i.stopPropagation()}if(m.isReadTrackUnlocked()){var c=m.userInboxType,b,d,g,k;if(j.closest("div.j-act-exp-view").length){var h=j.closest("div.j-act-exp-view");b=h.attr("data-linkedid");d=b.split("_")[2];g=b.split("_")[3];k=h.hasClass("j-act-read")}else{var f=j.closest("article");b=f.attr("id");d=b.split("_")[2];g=b.split("_")[3];k=f.hasClass("j-act-read")}if(k){var l=this;m.emitP("markRead",d,g,c,false).addCallback(function(){var e=-1;$j("#"+b).removeClass("j-act-read").addClass("j-act-unread");$j("[data-linkedid="+b+"]").removeClass("j-act-read").addClass("j-act-unread");if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("inbox",e)}}).addErrback(function(){console.log("promise got an errback")})}}if(i){i.preventDefault()}};this.markAllRead=function(c,d){var b=this;if(d){d.stopPropagation()}b.emitP("markAllRead").addCallback(function(){c.addClass("j-all-read");$j("#j-comm-activity-list").find("article").removeClass("j-act-unread").addClass("j-act-read");$j("#j-js-inbox-exp").find("div.j-act-exp-view").removeClass("j-act-unread").addClass("j-act-read");if(jive.ActivityStream.TabCountsController){jive.ActivityStream.TabCountsController.decrementNewCount("inbox",10000)}}).addErrback(function(){console.log("promise got an errback")});if(d){d.preventDefault()}};this.isReadTrackUnlocked=function(){var b=this;if(!b.readTrackLock){b.readTrackLock=true;setTimeout(function(){b.readTrackLock=false},400);return true}else{return false}}});
;
jive.namespace("ReadTracking");jive.ReadTracking.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.i18n=c.i18n;this.readTrackingSource=new jive.ReadTracking.ReadTrackingSource(c);this.readTrackingView=new jive.ReadTracking.ReadTrackingView(c);this.readTrackingView.addListener("markRead",function(d,h,e,g,f){b.readTrackingSource.save(d,h,e,g).addCallback(function(){f.emitSuccess()}).addErrback(function(j,i){console.log("got a err in main.js");f.emitError(j,i)})}).addListener("markAllRead",function(d){b.readTrackingSource.markAllRead().addCallback(function(){d.emitSuccess()}).addErrback(function(f,e){console.log("got a err in main.js");d.emitError(f,e)})})};this.attachReadActions=function(){this.readTrackingView.postRender()};this.markRead=function(b){this.readTrackingView.markRead(b)};this.markUnread=function(b){this.readTrackingView.markUnread(b)};this.markAllRead=function(b){this.readTrackingView.markAllRead(b)}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.communications=="undefined"){jive.eae.communications={}}jive.eae.communications.commStream=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"$j(function() {var streamI18n = {likes: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.likes"),[]))+"', comments: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.comments"),[]))+"', tracked: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.tracked"),[]))+"', untracked: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[]))+"', lessthanaminago: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[]))+"', repost_success: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.success"),[]))+"', empty_comment: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.cannot_be_empty.text"),[]))+"'}; jive.ActivityStream.CommunicationStreamController = new jive.ActivityStream.CommunicationStreamControllerMain({contextObjectType: "+soy.$$escapeHtml(A.viewingUser.objectType)+", contextObjectID: "+soy.$$escapeHtml(A.viewingUser.id)+", data:"+JSON.stringify(A.activityStream4JS).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", streamType:'"+soy.$$escapeHtml(A.streamType)+"', streamTypeID:'"+soy.$$escapeHtml(A.streamTypeID)+"', streamLoaded: "+((A.activityStream&&A.activityStream.activityContainerList)?"true":"false")+", filterType: "+((A.activeFilter)?"'"+soy.$$escapeHtml(A.activeFilter)+"'":"'all'")+", tabViewSelector: '"+soy.$$escapeHtml(A.tabViewSelector)+"', i18n:streamI18n, rteOptions: {preferredMode:'"+soy.$$escapeHtml(A.preferredMode)+"', startMode:'"+soy.$$escapeHtml(A.startMode)+"', mobileUI:"+soy.$$escapeHtml(A.mobileUI)+", isEditing:"+soy.$$escapeHtml(A.isEditing)+", communityName:'"+soy.$$escapeHtml(A.communityName)+"', hasImagePerms:"+soy.$$escapeHtml(A.hasImagePerms)+"}, lastViewedObjectType: '"+soy.$$escapeHtml(A.lastViewedObjectType)+"', lastViewedObjectID: '"+soy.$$escapeHtml(A.lastViewedObjectID)+"', savedRefreshTime: "+soy.$$escapeHtml(A.savedRefreshTime)+", dmEnabled: "+((A.dmEnabled)?"true":"false")+"});});"},B);B.append('<div id="j-comm-activity-list" class="j-act-container"><div id="previewable-binary-viewer"></div><div id="j-',soy.$$escapeHtml(A.streamType),'-filter-bar" class="j-filter-bar clearfix"><div class="j-comm-filter ',(!A.activityStreamCount||!A.activityStreamCount.fullCounts["index1"].unreadCount)?"j-all-read":"j-not-all-read",' clearfix"><div class="j-filter-select"><a href="#" id="inbox-filter-trigger"><span class="j-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.filter"),[])),'</span><span class="jive-icon-med jive-icon-down"></span></a></div><div class="j-inbox-listfilters"><div class="j-inbox-disable-overlay" style="display: none"></div><label ',(A.activeFilter=="unread")?'class="active"':"",'><input type="checkbox" ',(A.activeFilter=="unread")?'checked="checked"':"",' data-filterName=\'unread\' id="unread-toggle" class="j-all-toggle"><span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.unread"),[])),'</span></label></div><div class="j-read-controls"><span class="j-not-all-read-controls"><a href="#" id="inbox-mark-all-read" class="j-act-markread inbox-mark-all-read">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.all.read"),[])),'</a></span><span class="j-all-read-controls">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.all.read"),[])),'</span></div></div><div id="filters-applied" class="j-act-viewfilters clearfix" style="display:none;"><strong class="j-act-filterview j-act-filter-display-name font-color-meta-light"></strong><a href="#" class="js-remove-filter j-filter-btn j-ui-elem"><span class="j-filter-btn-inner j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.clear"),[])),"</span></a></div></div><div id='j-",soy.$$escapeHtml(A.streamType),'-rebuilding\' class="j-act-rebuilding" ',(!A.rebuilding)?'style="display:none;"':"",'><span class="j-act-rebuilding-spinner"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.rebuilding"),[])),"</div>");jive.eae.communications.commStreamList({activityStream:A.activityStream,streamType:A.streamType,filterType:A.activeFilter?A.activeFilter:"all",mobileUI:A.mobileUI},B);B.append("</div>");if(!C){return B.toString()}};jive.eae.communications.commStreamList=function(A,C){var B=C||new soy.StringBuilder();B.append("<div id='j-",soy.$$escapeHtml(A.streamType),'-list\' class="j-comm-stream j-js-focused"><div class="j-act-pagepoll clearfix" id="j-',soy.$$escapeHtml(A.streamType),'-updates" style="display:none;">');jive.eae.activitystream.newUpdates({count:0},B);B.append("</div>");jive.eae.communications.commStreamListItems({activityStream:A.activityStream,streamType:A.streamType,filterType:A.filterType,mobileUI:A.mobileUI},B);B.append("</div>");if(!C){return B.toString()}};jive.eae.communications.commStreamListItems=function(B,G){var D=G||new soy.StringBuilder();if(B.activityStream.activityContainerList&&B.activityStream.activityContainerList.length){var C=B.activityStream.activityContainerList;var E=C.length;for(var A=0;A<E;A++){var F=C[A];if(F.activityList.length>0){jive.eae.communications.groupedCommStreamItem({activityContainer:F,user:B.activityStream.viewingUser,streamType:B.streamType,filterType:B.filterType?B.filterType:"all",canCreateMbImage:B.activityStream.canCreateMbImage,canCreateMbVideo:B.activityStream.canCreateMbVideo,mobileUI:B.mobileUI},D)}}D.append((B.activityStream.hasMore)?"<a id='j-load-more-"+soy.$$escapeHtml(B.streamType)+"' class='j-js-load-more j-act-append j-rc6' href='#'><span class=\"j-more-label j-rc6\">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.load_more"),[]))+"</span></a>":"")}else{D.append('<div class="j-act-empty-list font-color-meta">',(B.filterType=="unread")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unread"),[])):(B.filterType=="mentions")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.mentions"),[])):(B.filterType=="directmessages")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.directmessages"),[])):(B.filterType=="shares")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.shares"),[])):(B.filterType=="unreadmentions")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreadmentions"),[])):(B.filterType=="unreaddirectmessages")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreaddirectmessages"),[])):(B.filterType=="unreadshares")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.unreadshares"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.empty.list.all"),[])),"</div>")}if(!G){return D.toString()}};jive.eae.communications.groupedCommStreamItem=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject.groupedCommActivityTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.groupedCommActivityTemplate,data:(function(){var F={};var E=[["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["filterType",A.filterType],["mobileUI",A.mobileUI]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry ',(A.activityContainer.read)?"j-act-read":"j-act-unread",' clearfix" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtml(A.activityContainer.numUnread),'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-commentHTMLLoaded="false"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.communications.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>")}if(!C){return B.toString()}};jive.eae.communications.commListItemView=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject.commListItemViewTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.commListItemViewTemplate,data:(function(){var F={};var E=[["activityContainer",A.activityContainer],["activity",A.activity],["streamType",A.streamType],["user",A.user],["hidden",A.hidden],["time",A.time]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>')}if(!C){return B.toString()}};jive.eae.communications.expandedCommItemView=function(C,B){var A=B||new soy.StringBuilder();if(C.activityContainer.jiveObject.expandedCommItemViewTemplate){jive.shared.soy.render({templateName:C.activityContainer.jiveObject.expandedCommItemViewTemplate,data:(function(){var M={};var L=[["activityContainer",C.activityContainer],["user",C.user],["streamType",C.streamType],["canCreateMbImage",C.canCreateMbImage],["canCreateMbVideo",C.canCreateMbVideo],["filterType",C.filterType],["mobileUI",C.mobileUI]];for(var K=0;K<L.length;K+=1){M[L[K][0]]=L[K][1]}return M})(),failGracefully:true},A)}else{A.append('<div class="j-act-exp-view expanded clearfix ',(C.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(C.streamType),"_",soy.$$escapeHtml(C.filterType),"_",C.activityContainer.jiveObject.objectType,"_",C.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(C.activityContainer.container.type),"_",soy.$$escapeHtml(C.activityContainer.container.id),'" style="display:none;"><article class="');jive.eae.activitystream.contentTypeClassName({activityContainer:C.activityContainer},A);A.append('"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(C.streamType),"-exp-header-",soy.$$escapeHtml(C.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(C.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(C.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(C.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(C.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,C.activityContainer.jiveObject.jiveObjectURL),'">',C.activityContainer.jiveObject.subject,"</a> ");if(C.activityContainer.container.type&&C.activityContainer.container.type!=-2){A.append(' <span class="j-act-container font-color-meta">');if(C.activityContainer.container.type==2020){var J=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(C.activityContainer.originalAuthor,J);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:J.toString(),arg1:(C.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},A)}else{var G=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:C.activityContainer.container},G);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:G.toString(),noAutoEscape:true},A)}A.append("</span>")}A.append('</div><div class="j-act-header-slug j-excerpt">',(C.activityContainer.jiveObject.text)?C.activityContainer.jiveObject.text+((C.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view j-rc5" style="display:none;"><div class="j-author-act font-color-meta">');if(!C.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(C.activityContainer.originalAuthor,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:C.activityContainer.jiveObject},A)}A.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:C.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:C.streamType,hideDetailedReplyTo:true,user:C.user,againstObject:false},A);A.append(' <span class="j-act-time">',soy.$$escapeHtml(C.activityContainer.creationTime),'</span></div><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:C.activityContainer.jiveObject,domIDPostfix:C.activityContainer.jiveObject.domIDPostfix},A);A.append('<div class="j-act-meta clearfix"><nav id="',soy.$$escapeHtml(C.streamType),"-exp-body-actions-",soy.$$escapeHtml(C.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(C.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(C.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(C.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.activitystream.activityNavActions({object:C.activityContainer.jiveObject,activityContainer:C.activityContainer,amAnAuthor:C.activityContainer.amAnAuthor,objectType:C.activityContainer.jiveObject.objectType,objectId:C.activityContainer.jiveObject.id,liked:C.activityContainer.liked,likeCount:C.activityContainer.likeCount,likable:C.activityContainer.likable,author:C.activityContainer.originalAuthor,user:C.user,location:"parentPreview",streamType:C.streamType,filterType:C.filterType,canCreateMbImage:C.canCreateMbImage,canCreateMbVideo:C.canCreateMbVideo},A);A.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(C.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(C.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(C.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!C.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:C.activityContainer,showCurrentCount:false},A);A.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var F=C.activityContainer.activityList;var H=F.length;for(var E=0;E<H;E++){var D=F[E];if(!D.parentActivity&&(D.current||E==H-1)){jive.eae.activitystream.activityContentExcerpt({activity:D,activityContainer:C.activityContainer,isHidden:false,user:C.user,streamType:C.streamType,canCreateMbImage:C.canCreateMbImage,canCreateMbVideo:C.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:E==H-1},A)}}A.append("</div>");if(C.activityContainer.canReply){A.append('<nav id="',soy.$$escapeHtml(C.streamType),"-parent-reply-",soy.$$escapeHtml(C.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(C.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(C.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');var I=new soy.StringBuilder();jive.eae.communications.readingPaneBottomReplyLinkKey({activityContainer:C.activityContainer},I);jive.shared.soy.i18nHelper({i18nKey:I.toString(),arg0:(C.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((C.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},A);A.append("</a></div></div></nav>")}A.append("</div></article></div>")}if(!B){return A.toString()}};jive.eae.communications.collaboratorParticipantsModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal" id="jive-modal-participants"><header><h2 class="jive-modal-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients"),[])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon close j-ui-elem"></span></a><section class="jive-modal-content clearfix" id="jive-modal-content-container"><div id="jive-modal-scrollto-container"><div id="jive-modal-content-participants" class="clearfix"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients.desc"),[])),'</p><form method="POST" action="#" id="jive-modal-content-participants-form"><div><input type="text" name="participants" id="participants"/></div><div class="jive-form-buttons clearfix"><input type="submit" class="j-btn-callout" name="Finished" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.finished"),[])),'" style="float: left; margin-left: 10px; margin-bottom: 15px;" /></div></form></div><div id="jive-modal-content-browse-participants" class="clearfix"></div></div></section></div>');if(!C){return B.toString()}};jive.eae.communications.collaboratorParticipantsI18NHelper=function(B,G){var D=G||new soy.StringBuilder();if(B.activityContainer.jiveObject.typeDirectMessage){var F=new soy.StringBuilder();if(!B.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activityContainer.originalAuthor,F)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activityContainer.jiveObject},F)}var C=new soy.StringBuilder();if(B.activityContainer.participants.length){jive.eae.activitystream.groupedUsers({groupedUserList:B.activityContainer.participants,user:B.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},C)}else{C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.yourself"),[])))}jive.shared.soy.i18nHelper({i18nKey:"activity.directmessage.XsentY",arg0:F.toString(),arg1:C.toString(),noAutoEscape:true},D)}else{var A=new soy.StringBuilder();if(!B.activityContainer.jiveObject.user.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activityContainer.jiveObject.user,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activityContainer.jiveObject},A)}var E=new soy.StringBuilder();if(B.activityContainer.participants){jive.eae.activitystream.groupedUsers({groupedUserList:B.activityContainer.participants,user:B.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},E)}else{E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.yourself"),[])))}jive.shared.soy.i18nHelper({i18nKey:"activity.type.XsharedaYwithZ",arg0:A.toString(),arg1:(B.activityContainer.jiveObject.contentTypeName).toLowerCase(),arg2:E.toString(),noAutoEscape:true},D)}D.append(" ");if(!G){return D.toString()}};jive.eae.communications.readingPaneBottomReplyLinkKey=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeDocument||A.activityContainer.jiveObject.typeBlogPost||A.activityContainer.jiveObject.typeExternalURL||A.activityContainer.jiveObject.typePoll)?"eae.inbox.comment.on.originalX":"eae.inbox.reply.to.originalX");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.external=="undefined"){jive.eae.external={}}jive.eae.external.groupedCommActivityUpdateTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append("<article ",(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="'+soy.$$escapeHtml(A.streamType)+"_"+soy.$$escapeHtml(A.filterType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(A.activityContainer.jiveObject.extraData.appID)+'"':'id="'+soy.$$escapeHtml(A.streamType)+"_"+soy.$$escapeHtml(A.filterType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(A.activityContainer.container.type)+"_"+soy.$$escapeHtml(A.activityContainer.container.id)+'"',' class="j-comm-entry ',(A.activityContainer.read)?"j-act-read":"j-act-unread",' j-act-app clearfix" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtml(A.activityContainer.numUnread),'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-commentHTMLLoaded="false"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.external.commListItemView({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.external.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.external.expandedCommItemUpdateView=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-act-exp-view expanded clearfix ',(B.activityContainer.read)?"j-act-read":"j-act-unread",'" ',(B.activityContainer.jiveObject.extraData&&B.activityContainer.jiveObject.extraData.appID)?'data-linkedID="'+soy.$$escapeHtml(B.streamType)+"_"+soy.$$escapeHtml(B.filterType)+"_"+B.activityContainer.jiveObject.objectType+"_"+B.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(B.activityContainer.jiveObject.extraData.appID)+'"':'data-linkedID="'+soy.$$escapeHtml(B.streamType)+"_"+soy.$$escapeHtml(B.filterType)+"_"+B.activityContainer.jiveObject.objectType+"_"+B.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(B.activityContainer.container.type)+"_"+soy.$$escapeHtml(B.activityContainer.container.id)+'"',' style="display:none;"><article class="j-act-app"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(B.streamType),"-exp-header-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(B.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(B.activityContainer.originalAuthor,{size:46}),D);D.append('</div><div class="j-act-init"><div class="j-author-act font-color-meta">');if(!B.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(B.activityContainer.originalAuthor,{renderInvisible:true}),D)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activityContainer.jiveObject},D)}D.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:B.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:B.streamType,hideDetailedReplyTo:true,user:B.user,againstObject:false},D);D.append('</div><div class="j-act-app-activity-content-view j-rc5">');if(B.activityContainer.jiveObject.verb=="uri:jiveName:app_install"){D.append('<div class="jive-content j-appinstall j-rc5"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.description.label.generic"),[])),'</h4><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');jive.eae.activitystream.collapsedExcerptText({text:B.activityContainer.jiveObject.summary,hasMoreText:B.activityContainer.jiveObject.hasMoreText,moderated:false},D);D.append("</div></div>",(B.activityContainer.jiveObject.activityObjectURL)?'<div><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.activityObjectURL))+'" class="j-btn-global">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.get.label"),[]))+"</a></div>":"","</div>")}else{D.append('<div class="j-act-app-body clearfix"><div class="j-act-app-content"><h5 class="j-act-apptitle">',(B.activityContainer.jiveObject.subjectIsHtml)?((B.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.jiveObjectURL)+'">':"")+B.activityContainer.jiveObject.htmlSubject+((B.activityContainer.jiveObject.jiveObjectURL)?"</a>":""):((B.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.jiveObjectURL)+'">':"")+B.activityContainer.jiveObject.subject+((B.activityContainer.jiveObject.jiveObjectURL)?"</a>":""),'</h5><div class="j-excerpt-full-html-content">');jive.eae.activitystream.collapsedExcerptText({text:B.activityContainer.jiveObject.summary,hasMoreText:B.activityContainer.jiveObject.hasMoreText,moderated:false},D);D.append("</div></div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:B.activityContainer.jiveObject,domIDPostfix:B.activityContainer.jiveObject.domIDPostfix},D);D.append("</div>")}D.append('</div></div><div class="j-act-meta clearfix"><div class="j-act-app-meta"><span class="j-act-time">',(B.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(B.activityContainer.creationTime),(B.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");if(B.activityContainer.jiveObject.generatorDeepURL){D.append(' <span class="font-color-meta">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.via"),[])),arg0:'<a href="'+soy.$$escapeHtml(B.activityContainer.jiveObject.generatorDeepURL)+'">'+soy.$$escapeHtml(B.activityContainer.jiveObject.contentTypeName)+"</a>",noAutoEscape:true},D);D.append("</span>")}jive.eae.external.appInstallCount({extraData:B.activityContainer.jiveObject.extraData},D);D.append('</div><nav id="',soy.$$escapeHtml(B.streamType),"-exp-body-actions-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(B.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.activitystream.activityNavActions({object:B.activityContainer.jiveObject,activityContainer:B.activityContainer,amAnAuthor:B.activityContainer.amAnAuthor,objectType:B.activityContainer.jiveObject.objectType,objectId:B.activityContainer.jiveObject.id,liked:B.activityContainer.liked,likeCount:B.activityContainer.likeCount,likable:B.activityContainer.likable,author:B.activityContainer.originalAuthor,user:B.user,location:"parentPreview",streamType:B.streamType,filterType:B.filterType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo},D);D.append('</ul></nav></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),"</strong></a>",(!B.activityContainer.activityList[0]||B.activityContainer.activityList[0].content.verb!="uri:jiveName:app_install")?'<a href="#" class="j-act-untrack font-color-meta-light" '+((B.activityContainer.untracked)?'style="display: none;"':"")+'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[]))+'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" '+((!B.activityContainer.untracked)?'style="display: none;"':"")+'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[]))+"</strong></a>":"",'</div></section></div><div class="j-sub-activity-header clearfix">');if(!B.activityContainer.activityList[0]||B.activityContainer.activityList[0].content.verb!="uri:jiveName:app_install"){D.append('<strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:B.activityContainer,showCurrentCount:false},D);D.append("</strong>")}D.append("<h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var F=B.activityContainer.activityList;var E=F.length;for(var C=0;C<E;C++){var A=F[C];if(!A.parentActivity&&(A.current||C==E-1)){jive.eae.external.activityContentExcerpt({activity:A,activityContainer:B.activityContainer,isHidden:false,user:B.user,streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:C==E-1},D)}}D.append("</div>",(B.activityContainer.canReply)?'<nav id="'+soy.$$escapeHtml(B.streamType)+"-parent-reply-"+soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix)+'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="'+soy.$$escapeHtml(B.activityContainer.jiveObject.id)+'" data-objectType="'+soy.$$escapeHtml(B.activityContainer.jiveObject.objectType)+'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.add.comment.original"),[]))+"</a></div></div></nav>":"","</div></article></div>");if(!G){return D.toString()}};jive.eae.external.groupedActivityStreamUpdateTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append("<article ",(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="'+soy.$$escapeHtml(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(A.activityContainer.jiveObject.extraData.appID)+"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'"':'id="'+soy.$$escapeHtml(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(A.activityContainer.container.type)+"_"+soy.$$escapeHtml(A.activityContainer.container.id)+"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'"',' class="j-act-entry j-act-not-markable j-act-app clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content">');if(A.activityContainer.jiveObject.verb=="uri:jiveName:app_install"){B.append('<section id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title j-act-app-init j-act-app-install"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul>');if(A.user&&!A.user.anonymous&&A.activityContainer.sharable){B.append("<li>");jive.soy.share.control({objectId:A.activityContainer.jiveObject.id,objectType:A.activityContainer.jiveObject.objectType,type:"text"},B);B.append("</li>")}B.append((A.streamType=="user"&&A.filterType=="all")?'<li><a href="#" class="j-act-hidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide"),[]))+"</a></li>":"",(A.filterType=="antimatter")?'<li><a href="#" class="j-act-unhidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide"),[]))+"</a></li>":"",'</ul></nav><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"46"}),B);jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B);B.append('</div><div class="j-author-act j-act-install-title">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append('</div><div class="jive-comment-actions clearfix"><nav id="',soy.$$escapeHtml(A.streamType),"-app-update-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="clearfix ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta">',(A.activityContainer.canReply)?'<li><span class="jive-icon-sml jive-glyph-comment"></span><a class="j-reply-rte" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[]))+"</a></li>":"");if(A.activityContainer.likable){B.append('<li class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer({canLike:A.user&&!A.user.anonymous&&!A.activityContainer.amAnAuthor,uniqueKey:soy.$$escapeHtml(A.activityContainer.jiveObject.objectType)+"-"+soy.$$escapeHtml(A.activityContainer.jiveObject.id)+"-"+soy.$$escapeHtml(jive.soy.func.randomString()),objectId:A.activityContainer.jiveObject.id,objectType:A.activityContainer.jiveObject.objectType,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount},B);B.append("</li>")}B.append("</ul></nav></div></section>")}else{B.append('<section class="j-act-title j-act-app-init j-act-app-content"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul>');if(A.user&&!A.user.anonymous&&A.activityContainer.sharable){B.append("<li>");jive.soy.share.control({objectId:A.activityContainer.jiveObject.id,objectType:A.activityContainer.jiveObject.objectType,type:"text"},B);B.append("</li>")}B.append((A.streamType=="user"&&A.filterType=="all")?'<li><a href="#" class="j-act-hidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide"),[]))+"</a></li>":"",(A.filterType=="antimatter")?'<li><a href="#" class="j-act-unhidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide"),[]))+"</a></li>":"",'</ul></nav><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"46"}),B);jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B);B.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append('</div><div class="j-act-app-body clearfix"><div class="j-act-app-content">',(A.activityContainer.jiveObject.subjectIsHtml)?((A.activityContainer.jiveObject.jiveObjectURL)?'<h5 class="j-act-apptitle"><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"")+A.activityContainer.jiveObject.htmlSubject+((A.activityContainer.jiveObject.jiveObjectURL)?"</a></h5>":""):((A.activityContainer.jiveObject.jiveObjectURL)?'<h5 class="j-act-apptitle"><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"")+A.activityContainer.jiveObject.subject+((A.activityContainer.jiveObject.jiveObjectURL)?"</a></h5>":""));if(A.activityContainer&&A.activityContainer.jiveObject&&A.activityContainer.jiveObject.summary){B.append('<div class="j-excerpt-full-html-content">');jive.eae.activitystream.collapsedExcerptText({text:A.activityContainer.jiveObject.summary,hasMoreText:A.activityContainer.jiveObject.hasMoreText,moderated:false},B);B.append("</div>")}else{}B.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('</div><div class="jive-comment-actions clearfix"><nav id="',soy.$$escapeHtml(A.streamType),"-app-update-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="clearfix ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta">',(A.activityContainer.canReply)?'<li><span class="jive-icon-sml jive-glyph-comment"></span><a class="j-reply-rte" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[]))+"</a></li>":"");if(A.activityContainer.likable){B.append('<li class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer({canLike:A.user&&!A.user.anonymous&&!A.activityContainer.amAnAuthor,uniqueKey:soy.$$escapeHtml(A.activityContainer.jiveObject.objectType)+"-"+soy.$$escapeHtml(A.activityContainer.jiveObject.id)+"-"+soy.$$escapeHtml(jive.soy.func.randomString()),objectId:A.activityContainer.jiveObject.id,objectType:A.activityContainer.jiveObject.objectType,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount},B);B.append("</li>")}B.append("</ul></nav></div></section>")}B.append('<div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},B);B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.external.collapsedActivityStreamUpdateExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-meta font-color-meta-light">');if(A.activityContainer.jiveObject.generatorDeepURL){B.append('<span class="j-act-container font-color-meta">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.via"),[])),arg0:'<a href="'+soy.$$escapeHtml(A.activityContainer.jiveObject.generatorDeepURL)+'">'+soy.$$escapeHtml(A.activityContainer.jiveObject.contentTypeName)+"</a>",noAutoEscape:true},B);B.append("</span>");jive.eae.external.appInstallCount({extraData:A.activityContainer.jiveObject.extraData},B)}B.append(' <span class="j-bullet">&#8226;</span> ');jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.external.activityStreamFullContentUpdateView=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="',(A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install")?"jive-content j-appinstall  j-rc5":"jive-content j-rc5",'">');if(A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install"){B.append("<h4>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.description.label"),[])),arg0:soy.$$escapeHtml(A.activityContainer.activityList[0].content.subject),noAutoEscape:true},B);B.append('</h4><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');jive.eae.activitystream.collapsedExcerptText({text:A.activityContainer.activityList[0].content.summary,hasMoreText:A.activityContainer.activityList[0].hasMoreText,deleted:A.activityContainer.activityList[0].content.deleted,moderated:false},B);B.append("</div></div>",(A.user&&!A.user.anonymous&&A.activityContainer.activityList[0].content.activityObjectURL)?'<p><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.activityObjectURL))+'" class="j-btn-global">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.get.label"),[]))+"</a></p>":"")}else{B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"32"}),B);B.append('</div><div class="font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(' <span class="j-act-time font-color-meta">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span></div><div class="j-act-app-body"><div class="j-act-app-content">',(A.activityContainer.jiveObject.subjectIsHtml)?((A.activityContainer.jiveObject.jiveObjectURL)?'<h5 class="j-act-apptitle"><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"")+A.activityContainer.jiveObject.htmlSubject+((A.activityContainer.jiveObject.jiveObjectURL)?"</a></h5>":""):((A.activityContainer.jiveObject.jiveObjectURL)?'<h5 class="j-act-apptitle"><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"")+A.activityContainer.jiveObject.subject+((A.activityContainer.jiveObject.jiveObjectURL)?"</a></h5>":""),'<div class="j-act-exp-content-body-view" style=""></div></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('</div><div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-body-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div>")}B.append("</section>");if(!C){return B.toString()}};jive.eae.external.expandedActivityStreamItemUpdateView=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-act-exp-view expanded clearfix" ',(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'data-linkedID="'+soy.$$escapeHtml(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(A.activityContainer.jiveObject.extraData.appID)+"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'"':'data-linkedID="'+soy.$$escapeHtml(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(A.activityContainer.container.type)+"_"+soy.$$escapeHtml(A.activityContainer.container.id)+"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'"',' style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');if(A.streamType=="profile"){var F=A.activityContainer.activityList;var E=F.length;for(var C=0;C<E;C++){var B=F[C];if(!B.parentActivity){jive.eae.external.activityContentExcerpt({activity:B,activityContainer:A.activityContainer,isHidden:true,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:false},D)}}}D.append("</div></div>");if(!G){return D.toString()}};jive.eae.external.collapsedActivityStreamUpdateExcerpt=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.parentActivity){}else{B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-we-comment"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({user:A.user,object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,againstObject:false,hideDetailedReplyTo:false},B);B.append('</div><div class="j-excerpt" ',(A.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,hasMoreText:A.activity.hasMoreText,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="j-act-sub-preview clearfix" ',(!A.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(A.activity.content.html){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append('</div></div></div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta"><li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section></div>")}if(!C){return B.toString()}};jive.eae.external.activityContentExcerpt=function(A,D){var C=D||new soy.StringBuilder();C.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.addedInline)?"j-js-addedInline":""," ",(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current||A.forceCurrent)?"true":"",'" style="',(A.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="',(A.activity.content.typeComment)?"reply ":(A.activity.content.typeExternalActivity&&A.activity.content.verb=="uri:jiveName:app_install")?"j-app-install j-mod font-color-meta-light ":"j-app-activity ",'j-sub">');if(A.activity.content.typeExternalActivity&&A.activity.content.verb=="uri:jiveName:app_install"){C.append('<span class="jive-icon-sml jive-glyph-gear"></span>');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,againstObject:false,hideDetailedReplyTo:false},C);C.append('<nav class="clearfix"><span class="j-act-time font-color-meta-light"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL),'" class="j-act-permalink font-color-meta-light"  title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.permalink.title"),[])),'">',(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),'</a></span><ul class="font-color-meta">');jive.eae.activitystream.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append("</ul></nav>")}else{if(A.activity.content.typeComment){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:"32"}),C);C.append('<div class="j-excerpt j-non-excerpt clearfix" ',(A.hideStub)?'style="display:none;"':"",">");if(!A.hideStub){var B=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B);jive.eae.activitystream.activityContentCommon({contentTxt:B.toString(),hasMoreText:A.activity.hasMoreText},C)}C.append('</div><div class="j-act-sub-preview" ',(!A.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,user:A.user,againstObject:false,hideDetailedReplyTo:false},C);C.append(" ",(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},C)}C.append('</div><div class="jive-comment-actions"><nav class="clearfix"><ul>',(!A.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append("</ul></nav></div></div></div>")}else{C.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32}),C);C.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,user:A.user,againstObject:false,hideDetailedReplyTo:false},C);C.append(' </div><div class="j-act-app-body clearfix"><div class="j-act-app-content"><div class="j-excerpt-full-html-content j-act-notitle">');jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},C);C.append("</div></div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activity.content,domIDPostfix:A.activity.domIDPostfix},C);C.append('</div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.content.jiveObjectURL)?"</a>":"","</span><ul>");jive.eae.activitystream.activityNavActions({object:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append("</ul></nav></div>")}}C.append("</section></div>");if(!D){return C.toString()}};jive.eae.external.groupedCommActivityGroupedTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append("<article ",(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="'+soy.$$escapeHtml(A.streamType)+"_"+soy.$$escapeHtml(A.filterType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(A.activityContainer.jiveObject.extraData.appID)+'"':'id="'+soy.$$escapeHtml(A.streamType)+"_"+soy.$$escapeHtml(A.filterType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(A.activityContainer.container.type)+"_"+soy.$$escapeHtml(A.activityContainer.container.id)+'"',' class="j-comm-entry ',(A.activityContainer.read)?"j-act-read":"j-act-unread",' j-act-app clearfix" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtml(A.activityContainer.numUnread),'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-commentHTMLLoaded="false"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.external.commListItemView({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.external.expandedCommItemGroupedView=function(B,G){var E=G||new soy.StringBuilder();E.append('<div class="j-act-exp-view expanded clearfix ',(B.activityContainer.read)?"j-act-read":"j-act-unread",'" ',(B.activityContainer.jiveObject.extraData&&B.activityContainer.jiveObject.extraData.appID)?'data-linkedID="'+soy.$$escapeHtml(B.streamType)+"_"+soy.$$escapeHtml(B.filterType)+"_"+B.activityContainer.jiveObject.objectType+"_"+B.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(B.activityContainer.jiveObject.extraData.appID)+'"':'data-linkedID="'+soy.$$escapeHtml(B.streamType)+"_"+soy.$$escapeHtml(B.filterType)+"_"+B.activityContainer.jiveObject.objectType+"_"+B.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(B.activityContainer.container.type)+"_"+soy.$$escapeHtml(B.activityContainer.container.id)+'"',' style="display:none;"><article class="j-act-app j-act-grouped-app"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(B.streamType),"-exp-header-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-init" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'"><div class="j-act-init">');if(B.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:B.activityContainer.jiveObject.activityIcon},E);E.append(" ")}else{E.append('<span class="jive-icon-med  ',soy.$$escapeHtml(B.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}E.append('<span class="j-act-apptitle">',(B.activityContainer.jiveObject.subjectIsHtml)?B.activityContainer.jiveObject.htmlSubject:B.activityContainer.jiveObject.subject,'</span><div class="j-act-app-activity-content-view j-rc5">');if(B.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install"){E.append('<div class="jive-content j-appinstall j-rc5"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.description.label.generic"),[])),'</h4><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');jive.eae.activitystream.collapsedExcerptText({text:B.activityContainer.activityList[0].content.summary,hasMoreText:B.activityContainer.activityList[0].hasMoreText,deleted:B.activityContainer.activityList[0].content.deleted,moderated:false},E);E.append("</div></div>",(B.user&&!B.user.anonymous&&B.activityContainer.activityList[0].content.activityObjectURL)?'<div><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.activityList[0].content.activityObjectURL))+'" class="j-btn-global">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.get.label"),[]))+"</a></div>":"","</div>")}E.append('</div><div class="j-act-meta font-color-meta-light">');if(B.activityContainer.activityList[0].content.generatorDeepURL){E.append(" ");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.via"),[])),arg0:'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.activityList[0].content.generatorDeepURL)+'" class="font-color-meta">'+soy.$$escapeHtml(B.activityContainer.activityList[0].content.contentTypeFeatureName)+"</a>",noAutoEscape:true},E);jive.eae.external.appInstallCount({extraData:B.activityContainer.activityList[0].content.extraData},E)}E.append('</div></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(B.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!B.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var C=B.activityContainer.activityList;var D=C.length;for(var A=0;A<D;A++){var F=C[A];if(!F.parentActivity){jive.eae.external.activityContentExcerpt({activity:F,activityContainer:B.activityContainer,isHidden:false,user:B.user,streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:A==D-1},E)}}E.append("</div></div></article></div>");if(!G){return E.toString()}};jive.eae.external.groupedActivityStreamGroupedTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append("<article ",(A.activityContainer.jiveObject.extraData&&A.activityContainer.jiveObject.extraData.appID)?'id="'+soy.$$escapeHtml(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(A.activityContainer.jiveObject.extraData.appID)+"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'"':'id="'+soy.$$escapeHtml(A.streamType)+"_"+A.activityContainer.jiveObject.objectType+"_"+A.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(A.activityContainer.container.type)+"_"+soy.$$escapeHtml(A.activityContainer.container.id)+"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'"',' class="j-act-entry j-act-not-markable j-act-app clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content">');if(A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install"){B.append('<div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,'<nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},B);B.append("</li>",(A.user&&!A.user.anonymous&&A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install"&&A.activityContainer.activityList[0].content.activityObjectURL)?'<li><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.activityObjectURL))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.get.label"),[]))+"</a></li>":"");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div>")}else{B.append('<div class="j-act-title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B)}else{B.append('<span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append(A.activityContainer.jiveObject.subject,'<nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul>',(A.user&&!A.user.anonymous&&A.activityContainer.activityList[0].content.activityObjectURL)?'<li><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.activityObjectURL))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.get.label"),[]))+"</a></li>":"");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div>")}B.append('<div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},B);B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.external.collapsedActivityStreamGroupedExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-meta font-color-meta-light">');if(A.activityContainer.activityList[0].content.generatorDeepURL){B.append(" ");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.via"),[])),arg0:'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.generatorDeepURL)+'" class="font-color-meta">'+soy.$$escapeHtml(A.activityContainer.activityList[0].content.contentTypeFeatureName)+"</a>",noAutoEscape:true},B);jive.eae.external.appInstallCount({extraData:A.activityContainer.activityList[0].content.extraData},B)}B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.external.activityStreamFullContentGroupedView=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="',(A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install")?"jive-content j-appinstall  j-rc5":"jive-content j-rc5",'">');if(A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install"){B.append("<h4>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.description.label"),[])),arg0:soy.$$escapeHtml(A.activityContainer.activityList[0].content.subject),noAutoEscape:true},B);B.append('</h4><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');jive.eae.activitystream.collapsedExcerptText({text:A.activityContainer.activityList[0].content.summary,hasMoreText:A.activityContainer.activityList[0].hasMoreText,deleted:A.activityContainer.activityList[0].content.deleted,moderated:false},B);B.append("</div></div>",(A.user&&!A.user.anonymous&&A.activityContainer.activityList[0].content.activityObjectURL)?'<p><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.activityObjectURL))+'" class="j-btn-global">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.app.get.label"),[]))+"</a></p>":"")}else{B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"32"}),B);B.append('</div><div class="font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(' <span class="j-act-time font-color-meta">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span></div><div class="j-act-app-body clearfix"><div class="j-act-app-content"><div class="j-act-exp-content-body-view" style=""></div></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('</div><div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-body-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div>")}B.append("</section>");if(!C){return B.toString()}};jive.eae.external.expandedActivityStreamItemGroupedView=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-act-exp-view expanded clearfix" ',(B.activityContainer.jiveObject.extraData&&B.activityContainer.jiveObject.extraData.appID)?'data-linkedID="'+soy.$$escapeHtml(B.streamType)+"_"+B.activityContainer.jiveObject.objectType+"_"+B.activityContainer.jiveObject.id+"_1400_"+soy.$$escapeHtml(B.activityContainer.jiveObject.extraData.appID)+"_"+soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix)+'"':'data-linkedID="'+soy.$$escapeHtml(B.streamType)+"_"+B.activityContainer.jiveObject.objectType+"_"+B.activityContainer.jiveObject.id+"_"+soy.$$escapeHtml(B.activityContainer.container.type)+"_"+soy.$$escapeHtml(B.activityContainer.container.id)+"_"+soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix)+'"',' style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items j-grouped-apps">');var A=B.activityContainer.activityList;var C=A.length;for(var F=0;F<C;F++){var E=A[F];if(!E.parentActivity&&E.content.typeExternalActivity){jive.eae.external.activityContentExcerpt({activity:E,activityContainer:B.activityContainer,isHidden:true,user:B.user,streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo,hideStub:false,addedInline:false,forceCurrent:false},D)}}D.append("</div></div>");if(!G){return D.toString()}};jive.eae.external.collapsedActivityStreamGroupedExcerpt=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="',(A.activity.content.typeExternalActivity&&A.activity.content.verb=="uri:jiveName:app_install")?"j-sub j-mod font-color-meta-light":(!A.activity.content.typeComment)?" j-app-activity":" j-we-comment",'">');if(A.activity.content.typeExternalActivity&&A.activity.content.verb=="uri:jiveName:app_install"){B.append('<span class="jive-icon-sml jive-glyph-gear"></span>');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append('<nav class="clearfix"><span class="j-act-time font-color-meta-light"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL),'" class="j-act-permalink font-color-meta-light"  title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.permalink.title"),[])),'">',(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),'</a></span><ul class="font-color-meta">');jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav>")}else{B.append('<div class="j-act-avatar">');if(A.activity.content.typeComment){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32}),B)}else{jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B)}B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({user:A.user,object:A.activity.content,type:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,againstObject:false,hideDetailedReplyTo:false},B);B.append("</div>");if(A.activity.content.typeExternalActivity){B.append('<div class="j-act-app-body clearfix"><div class="j-act-app-content"><div class="j-act-notitle">');jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B);B.append("</div></div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append("</div>")}else{B.append('<div class="j-excerpt" ',(A.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,hasMoreText:A.activity.hasMoreText,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="j-act-sub-preview clearfix" ',(!A.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(A.activity.content.html){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append("</div></div></div>")}B.append('<div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta">',(A.activity.content.typeComment)?'<li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div>")}B.append("</section></div>");if(!C){return B.toString()}};jive.eae.external.groupedExternalDigest=function(A,G){var C=G||new soy.StringBuilder();C.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),(A.streamType=="context")?"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix):"",'" class="j-act-entry j-act-not-markable j-act-grouped clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter")?'<div class="j-act-hidden" style="display:none;"></div>':(A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div class="j-act-title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},C)}else{C.append('<span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}C.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:A.activityContainer.jiveObject.subject,'</div><div class="',(A.activityContainer.activityList.length>5)?"j-act-coll-view":"",' collapsed clearfix"><section><ul>');var E=A.activityContainer.activityList;var F=E.length;for(var D=0;D<F;D++){var B=E[D];if(D<5){C.append("<li>");jive.eae.external.groupedExternalDigestItem({activity:B},C);C.append("</li>")}}C.append("</ul></section>",(A.activityContainer.activityList.length>5)?'<div class="j-preview-trigger j-view-more-trigger"><a href="#" class="j-show-more j-js-show-all"><span class="jive-icon-med jive-icon-arrow-down"></span><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.more"),[]))+'</strong></span></a><a href="#" class="j-collapse j-show-less j-js-show-all" style="display:none"><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.less"),[]))+"</strong></span></a></div>":"",'</div><div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,(A.streamType=="context")?"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix):"",'" style="display:none;"></div><div class="j-act-meta font-color-meta-light">');if(A.activityContainer.jiveObject.generatorDeepURL){C.append('<span class="j-act-container font-color-meta">');jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.via"),[])),arg0:'<a href="'+soy.$$escapeHtml(A.activityContainer.jiveObject.generatorDeepURL)+'">'+soy.$$escapeHtml(A.activityContainer.jiveObject.contentTypeName)+"</a>",noAutoEscape:true},C);C.append("</span>");jive.eae.external.appInstallCount({extraData:A.activityContainer.jiveObject.extraData},C)}C.append("</div></div></article>");if(!G){return C.toString()}};jive.eae.external.groupedExternalDigestItem=function(B,G){var C=G||new soy.StringBuilder();if(B.activity.content.summary){if(B.activity.content.meta){var D=B.activity.content.meta;var E=D.length;for(var F=0;F<E;F++){var A=D[F];C.append((A.objectType==111)?'<img src="'+soy.$$escapeHtml(A.imageThumbnailUrl)+'" class="jive-icon-med jive-ext-icon-16"/>':"")}}C.append(B.activity.content.summary)}if(!G){return C.toString()}};jive.eae.external.groupedExternalDigestList=function(A,G){var C=G||new soy.StringBuilder();C.append("<section><ul>");var E=A.activityContainer.activityList;var F=E.length;for(var D=0;D<F;D++){var B=E[D];if(D>=5){C.append("<li>");jive.eae.external.groupedExternalDigestItem({activity:B,activityContainer:A.activityContainer,isHidden:true,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,addedInline:false,forceCurrent:false},C);C.append("</li>")}}C.append("</ul></section>");if(!G){return C.toString()}};jive.eae.external.appInstallCount=function(A,C){var B=C||new soy.StringBuilder();if(A.extraData&&A.extraData.installed&&A.extraData.installed.system){B.append(' <span class="j-bullet">&#8226;</span> <strong class="font-color-meta-light">');jive.shared.soy.i18nHelper({i18nKey:(A.extraData.installed.system==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.app.install.count"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.app.install.count.plural"),[])),arg0:soy.$$escapeHtml(A.extraData.installed.system),noAutoEscape:true},B);B.append("</strong>")}if(!C){return B.toString()}}
;
jive.namespace("shared");jive.shared.NotificationView=$Class.extend({init:function(a,c,b){this.container=a;this.selectors=$j.extend({info:".jive-info-box",warn:".jive-warn-box",error:".jive-error-box"},c||{});b=$j.extend({includeIcon:true},b);this.includeIcon=b.includeIcon},info:function(a){this._message(this.selectors.info,a,"jive-icon-info")},warn:function(a){this._message(this.selectors.warn,a,"jive-icon-warn")},error:function(a){this._message(this.selectors.error,a,"jive-icon-redalert")},_message:function(a,d,b){var c=$j(this.container).find(a);if(this.includeIcon){c.html('<div><span class="jive-icon-med '+b+'"></span>'+$j("<div/>").html(d).text().replace(/\s+/gm," ")+"</div>")}else{c.text(d)}c.slideDown().delay(3000).slideUp()},_notices:function(){var a=$j();for(var b in this.selectors){a.add(this.selectors[b])}return a}});
;
jive.namespace("Wall");if(!jive.Wall.Main){jive.Wall.Main=$Class.extend({init:function(a){var b=this;this._meta=a.meta||[];this.statusInputID="message-"+a.statusInputIdPostfix;this._statusInputIdPostfix=a.statusInputIdPostfix;this._submitBtnID=a.submitBtnID||".j-submit-mb";this._initEditorView(a);this._initStatusInput(a);this._initWallSource(a);this._wallStatusInputs.addListener("ready",function(){b._setupStatusInputObservableHandlers();b._setupEditorViewObservableHandlers();b._setupMetaBtns(a);b._wireUpAtMentionBtn(a);b._wallEntry=null;var c=[];b._meta.forEach(function(d){b.initMeta(d,c,a,b._wallEditorView.getContainer(),function(e){b._getEntry(e)})});b._wallStatusInputs.getStatusInput(b.statusInputID).triggerOnFocusAnimation()})},displayInfo:function(a){this._wallEditorView.entryPublishedInfo(a)},displayWarn:function(a){this._wallEditorView.entryPublishedWarn(a)},displayError:function(a){this._wallEditorView.entryPublishedError(a)},_initEditorView:function(a){this._wallEditorView=new jive.Wall.EditorView(a.editorContainer,$j.extend({notificationContainer:$j(a.editorContainer).parent()},a))},_setupEditorViewObservableHandlers:function(){var a=this;var c=function(d){a._wallEditorView.enableForm();if(d.status=="AWAITING_MODERATION"){a.displayWarn(jive.i18n.getMsg("we.form.posted.moderation"))}else{a._wallEditorView.entryPublished(d)}a._wallStatusInputs.resetText(a.statusInputID);a.emit("reset");a._wallEntry=null};var b=function(d){a._wallEditorView.enableForm();a.displayError(d)};this._wallEditorView.addListener("submit",function(){var d={message:a._wallStatusInputs.getSubmitVals(a.statusInputID)};if(a._wallEntry){$j.extend(true,a._wallEntry,d)}else{a._wallEntry=d}a._wallSource.publish(a._wallEntry,c,b)})},_initStatusInput:function(a){this._wallStatusInputs=new jive.MicroBlogging.StatusInputs("#statusInputs-"+a.statusInputIdPostfix,{idPostfix:a.statusInputIdPostfix,focusOnRdy:a.focusOnRdy,mobileUI:a.mobileUI,maxCharCount:a.maxCharCount})},_setupStatusInputObservableHandlers:function(){var c=this;this._wallStatusInputs.getStatusInput(this.statusInputID).addListener("imageURLMatch",function(d){c.emit("imageURLMatch",d)}).addListener("youtubeURLMatch",function(d){c.emit("youtubeURLMatch",d)}).addListener("linkURLMatch",function(d){c.emit("linkURLMatch",d,function(e){c._wallStatusInputs.getStatusInput(c.statusInputID).swapLinkFor(d,e)})}).addListener("characterLenMsg",function(d,e){c._wallEditorView.handleCharacterLenMsg(d,e)}).addListener("dataError",function(d){c.displayError()});var b=this._wallEditorView.getContainer().find(".j-attach-action-container");var a=this._wallEditorView.getContainer().find(this._submitBtnID);this._wallStatusInputs.getStatusInput(this.statusInputID).addListener("focus",function(){if(b.is(":hidden")){a.css({opacity:0}).show().animate({opacity:1});if(($j.browser.msie&&$j.browser.version<7)){b.show()}else{b.css({opacity:0,height:1}).show().animate({height:"24px"},200,"linear",function(){$j(this).animate({opacity:1},300,"linear");$j(this).css("height","auto")})}b.parent(".j-wall-form").next(".j-mb-last-update").addClass(".j-mb-last-update-active")}})},_setupMetaBtns:function(a){var b=$j("#"+a.domContainerId)},_initWallSource:function(a){this._wallSource=new jive.Wall.WallSource(a)},_wireUpAtMentionBtn:function(a){var b=this;$j("#"+a.domContainerId).find("a.jive-js-mention-button").click(function(c){b._wallStatusInputs.getStatusInput(b.statusInputID).handleAtMentionButtonClick();c.stopPropagation()})},_getEntry:function(c){if(this._wallEntry!=null&&this._wallEntry.objectType&&this._wallEntry.objectId){c(this._wallEntry)}else{var a=this;var b=function(d){a._wallEntry=d;c(a._wallEntry)};this._wallSource.createDraft(b)}}});jive.Wall.Main.prototype.initMeta=function initMeta(h,b,k,g,d){var c=new h.view(h.id,h.container,g,k,h.viewType);var e=new h.service(k);b.push(c);var i=e instanceof jive.Wall.VideoLinkMetaSource;var a=c instanceof jive.Wall.ImageMetaView&&!i;var j=e instanceof jive.Wall.LinkMetaSource;var f=this;if(typeof this.notificationView=="undefined"){this.notificationView=new jive.shared.NotificationView(g,{info:".jive-info-box:first",warn:".jive-warn-box:first",error:".jive-error-box:first"})}if(j){this.addListener("linkURLMatch",function(m,l){e.create(h,m,l)})}else{if(a){this.addListener("imageURLMatch",function(n){var o=c.getDataForURLImage(n);var p=function(q,s,r){c.error(q,s,r)};var m=function(q){c.add(q,n)};var l=function(q){e.create(q,o,m,p,true)};c.add([]);c.formSubmitted();d(l)}).addListener("reset",function(){c.reset()})}else{if(i){this.addListener("youtubeURLMatch",function(n){var o={videoURL:n};var p=function(q,s,r){c.error(q,s,r)};var m=function(q){c.add(q,n)};var l=function(q){e.create(q,o,m,p,true)};c.formSubmitted();d(l)})}}}c.addListener("removeImage",function(l){e.remove(l);c.remove(l)});c.addListener("activated",function(){for(var l=0;l<b.length;l++){if(b[l]!==c){b[l].hide()}}c.show()}).addListener("deactivated",function(){c.hide()});c.addListener("error",function(l){f.notificationView.error(l)}).addListener("warn",function(l){f.notificationView.warn(l)}).addListener("info",function(l){f.notificationView.info(l)});if(!i){c.addListener("completed",function(o){var m=function(p,r,q){c.error(p,r,q)};var n=function(p){c.add(p)};var l=function(p){e.create(p,o,n,m)};c.formSubmitted();d(l)})}};jive.conc.observable(jive.Wall.Main.prototype);jive.Wall.Main.ATTACHMENT_TYPE_IMAGE="111";jive.Wall.Main.ATTACHMENT_TYPE_VIDEO="801";jive.Wall.Main.COMMENT_TYPE="105";jive.Wall.Main.DOCUMENT_TYPE="102";jive.Wall.Main.bindComments=function(b,a){var c=b+a.canComment+a.canCreateImage;if(!arguments.callee[c]){$j(".j-view-comments:not(.j-disabled)").live("click",function(){var d=$j(this).closest("td").find(".j-inline-comment-wrapper");var e=d.find(".jive-comment-container").attr("data-statusid");if(d.find(".comment-form").length<1){d.find("ul").append(jive.wall.commentForm({statusID:e,user:_jive_current_user,canComment:a.canComment,canCreateImage:a.canCreateImage,canAtMention:!jive.rte.mobileUI}));jive.Wall.CommentHelper.initComment(e,{wallEntryTypeID:b})}if(($j.browser.msie&&$j.browser.version<7)){d.show()}else{d.slideToggle(300)}return false});arguments.callee[c]=true}};jive.Wall.Main.bindRepostAndComments=function(b,a){if(!arguments.callee[b+a]){$j(".js-mb-comment-form").live("submit",function(c){jive.Wall.CommentHelper.submitComment(this,b,a);c.preventDefault()});$j(".j-comment-delete").live("click",function(c){jive.Wall.CommentHelper.destroyComment($j(this).attr("commentid"));c.preventDefault()});$j(".j-repost-submit, .js-mb-repost-form").live("click submit",function(c){jive.Wall.RepostHelper.submitRepost($j(this).data("status-id")||$j(this).attr("data-statusid"));c.preventDefault()});arguments.callee[b+a]=true}};jive.Wall.Main.bindRowHover=function(){if(!arguments.callee.alreadyCalled){$j(".jive-table-activity tr").live("mouseenter",function(){$j(this).find(".jive-activity-action a").removeClass("font-color-meta-light");$j(this).find(".jive-activity-action .jive-icon-comment-grey").removeClass("jive-icon-comment-grey").addClass("jive-icon-comment");$j(this).find(".jive-icon-like-grey").removeClass("jive-icon-like-grey").addClass("jive-icon-like");$j(this).find(".jive-icon-permalink").removeClass("jive-icon-permalink").addClass("jive-icon-permalink-active")}).live("mouseleave",function(){$j(this).find(".jive-activity-action a").addClass("font-color-meta-light");$j(this).find(".jive-activity-action .jive-icon-comment").removeClass("jive-icon-comment").addClass("jive-icon-comment-grey");$j(this).find(".jive-icon-like").removeClass("jive-icon-like").addClass("jive-icon-like-grey");$j(this).find(".jive-icon-permalink-active").removeClass("jive-icon-permalink-active").addClass("jive-icon-permalink")});$j(".jive-icon-permalink, .jive-icon-permalink-active").live("mouseenter",function(){$j(this).addClass("jive-icon-permalink-hover")}).live("mouseleave",function(){$j(this).removeClass("jive-icon-permalink-hover")});arguments.callee.alreadyCalled=true}}};
;
jive.namespace("Wall");jive.Wall.CommentHelper=function(l){var h=new jive.MicroBlogging.StatusInputs("#statusInputs-"+l.statusInputIdPostfix,{idPostfix:l.statusInputIdPostfix,allowTagCreation:false});var f=l.mobileUI||jive.rte.mobileUI;var i="message-"+l.statusInputIdPostfix;var d=new jive.shared.NotificationView($j("#"+i).parents(".jive-comment-content:first"),{info:".jive-info-box:first",warn:".jive-warn-box:first",error:".jive-error-box:first"});var k=new jive.shared.FormWaitingView($j("#statusInputs-"+l.statusInputIdPostfix).parents(".jive-comment-content"));this.getStatusInputVals=function(){return h.getSubmitVals(i)};this.resetStatusInput=function(){h.resetText(i);for(var m in h.statusInputs){h.statusInputs[m].getContainer().css("minHeight",0)}};var g=this;h.addListener("ready",function(){if(h&&h.getStatusInput(i)){if(f&&l.container.find("a.jive-js-wall-mention-button, a.jive-js-mention-button").length){l.container.find("a.jive-js-wall-mention-button, a.jive-js-mention-button").remove()}h.getStatusInput(i).addListener("characterLenMsg",function(m,n){jive.Wall.EditorView.handleCharacterLenMsg(m,n,l.container)}).addListener("atMentionFinished",function(q,o){if(q&&q.split("-").length==2){var n=q.split("-")[0],p=q.split("-")[1];var m=new jive.rte.EntitlementService({objectID:l.entitlementObjectID||0,objectType:l.entitlementObjectType||0,entitlement:"VIEW"});if(m&&n){m.checkEntitlement(n,p).addCallback(function(r){if(!r){var s="";if(n==3){s=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.no_notification"})}else{if(n==700){s=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{s=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}}$j("<p>"+o+" "+s+"</p>").message({style:"warn"})}})}}});l.container.find("a.jive-js-wall-mention-button, a.jive-js-mention-button").click(function(m){h.getStatusInput(i).handleAtMentionButtonClick(m);m.stopPropagation()})}});var a={type:"POST",contentType:"application/json; charset=utf-8",dataType:"json"};this.enableForm=function(){k.enableForm()};this.disableForm=function(){k.disableForm()};this.displayModeration=function(){d.warn(jive.i18n.getMsg("we.form.posted.moderation"))};this.displayError=function(m){d.error(m)};var e=null;function c(n){if(e!=null){n(e)}else{var m=function(o){e=o;n(e)};jive.Wall.CommentHelper.submitCommentDraft(m,l.wallEntryTypeID,l.statusInputIdPostfix)}}this.initMeta=jive.Wall.Main.prototype.initMeta;var b=[],j=l.meta||[];j.forEach(function(m){g.initMeta(m,b,l,l.container,c)})};jive.Wall.CommentHelper.renderCommentFormTemplate=function(d,c){var a=$j.find(".j-inline-comment-wrapper");var b=$j(a).find(".jive-comment-container").attr("data-statusid");if($j(a).find(".comment-form").length<1){$j(a).find("ul").append(jive.wall.commentForm({statusID:b,user:_jive_current_user,canComment:c.canComment,canCreateImage:c.canCreateImage,canAtMention:!jive.rte.mobileUI}));jive.Wall.CommentHelper.initComment(b,{wallEntryTypeID:d,entitlementObjectID:c.entitlementObjectID,entitlementObjectType:c.entitlementObjectType})}return false};jive.Wall.CommentHelper.displayModeration=function(a){jive.Wall.CommentHelper.helpers[a].displayModeration()};jive.Wall.CommentHelper.submitComment=function(d,e,b){var f=$j(d).data("status-id")||$j(d).attr("id");jive.Wall.CommentHelper.helpers[f].disableForm();var c=jive.rest.url("/comments");var a=c+"/"+e+"/"+f;$j(function(){$j.ajax({type:"POST",url:a,dataType:"json",data:JSON.stringify(jive.Wall.CommentHelper.getDataParams(f)),contentType:"application/json; charset=utf-8",success:function(g){jive.Wall.CommentHelper.helpers[f].enableForm();jive.Wall.CommentHelper.helpers[f].resetStatusInput();if(!g.moderated){jive.Wall.CommentHelper.reloadComments(f,e,b)}else{jive.Wall.CommentHelper.displayModeration(f)}},error:function(g){jive.Wall.CommentHelper.helpers[f].enableForm();jive.Wall.CommentHelper.helpers[f].displayError(JSON.parse(g.responseText).error.message)}})});return false};jive.Wall.CommentHelper.submitCommentDraft=function(d,b,c){var a={url:jive.rest.url("/comments")+"/"+b+"/"+c+"/draft",data:JSON.stringify(jive.Wall.CommentHelper.getDataParams(c)),success:function(e){e.comment.objectType=jive.Wall.Main.COMMENT_TYPE;e.comment.objectId=e.comment.commentID;d(e.comment)},error:function(f){var e=JSON.parse(f.responseText)},type:"POST",contentType:"application/json; charset=utf-8",dataType:"json"};$j.ajax(a)};jive.Wall.CommentHelper.reloadComments=function(c,b,a){$j.ajax({type:"GET",url:a,dataType:"html",data:{id:c,type:b},success:function(e){var d=$j("#wall-comments-"+c).find("li.comment-form");$j("#wall-comments-"+c).replaceWith(e);$j(d).find(".jive-form-element-textarea").val("");d.appendTo($j("#wall-comments-"+c));jive.Wall.CommentHelper.initComment(c,{wallEntryTypeID:b})},error:function(d){console.log("Failed to reload comments.")}})};jive.Wall.CommentHelper.destroyComment=function(a){$j(jive.wall.deleteCommentConfirmation()).lightbox_me({closeSelector:".jive-modal-close, .close",onLoad:function(){$j("#we-comment-delete-submit-button").click(function(c){var b=jive.rest.url("/comments")+"/"+a;$j.ajax({type:"DELETE",url:b,success:function(d){$j("li#comment-"+a).hide()},error:function(d){jive.Wall.CommentHelper.helpers[formID].displayError(JSON.parse(d.responseText).error.message)}});c.preventDefault()})}});return false};jive.Wall.CommentHelper.getDataParams=function(a){return{comment:{parentCommentID:-1,body:jive.Wall.CommentHelper.helpers[a].getStatusInputVals(),name:$j("#comment-author").val(),email:$j("#comment-email").val(),URL:$j("#comment-url").val(),commentMode:$j("#comment-mode").val()}}};jive.Wall.CommentHelper.helpers={};jive.Wall.CommentHelper.initComment=function(d,b){var c=[{id:"j-wall-meta-image",view:jive.Wall.ImageMetaView,container:"jive-comment-content",service:jive.Wall.ImageMetaSource,viewType:jive.Wall.MetaView.TYPE_STATUS_COMMENT},{id:"j-wall-meta-video-link",view:jive.Wall.ImageMetaView,container:"jive-comment-content",service:jive.Wall.VideoLinkMetaSource,viewType:jive.Wall.MetaView.TYPE_STATUS_COMMENT}];b.meta=c;var a=$j("#wall-comments-"+d).find("li.comment-form");jive.Wall.CommentHelper.helpers[d]=new jive.Wall.CommentHelper($j.extend({statusInputIdPostfix:d,container:a},b))};jive.conc.observable(jive.Wall.CommentHelper.prototype);
;
jive.namespace("Wall");if(!jive.Wall.MetaSource){jive.Wall.MetaSource=$Class.extend({create:function(a,b,c){},remove:function(b){var a={type:"GET",url:this.META_ENDPOINT+"/remove/"+b,dataType:"json",contentType:"application/json; charset=utf-8",success:function(c){},error:function(c,e,d){console.log("Error jive.Wall.MetaSource fetch"+b+", "+d)}};$j.ajax(a)}})};
;
jive.namespace("Wall");if(!jive.Wall.LinkMetaSource){jive.Wall.LinkMetaSource=jive.Wall.MetaSource.extend({init:function(){this.META_ENDPOINT=jive.rest.url("/meta")},create:function(c,b,d){var a={url:jive.action.url("link-meta",{url:encodeURIComponent(b)}),dataType:"html",success:function(e){console.log("SUCCESS");d(e)},error:function(e){console.log("ERROR")}};$j.ajax(a)},fetch:function(c,b){var a={type:"GET",url:this.META_ENDPOINT+"/"+c,dataType:"json",contentType:"application/json; charset=utf-8",success:function(d){if(d.meta.length>0){var e=d.meta[0];e.title=_jive_base_url+e.title;e.body=_jive_base_url+e.body;b(d.meta)}else{console.log("Error jive.Wall.LinkMetaSource fetch no meta data:"+d)}}};$j.ajax(a)}})};
;
jive.namespace("Wall");if(!jive.Wall.ImageMetaSource){jive.Wall.ImageMetaSource=jive.Wall.MetaSource.extend({init:function(){this.META_ENDPOINT=jive.rest.url("/meta")},create:function(e,g,c,h,a){var i=this;var b=jive.rest.url("/meta/imageJackson/"+e.objectType+"/"+e.objectId+"/attachment");var f="";if(a){console.log("Got image url");f=encodeURIComponent(g.find("input[name=imageURL]").val());b=jive.rest.url("/meta/imageJackson/"+e.objectType+"/"+e.objectId)}var j={url:b,dataType:"xml",data:{imageURL:f},contentType:"text/xml; charset=utf-8",complete:function(l,k){if($j(l.responseXML).find("meta id").length>0){i.fetch($j(l.responseXML).find("meta id").text(),c,h)}else{var n=$j(l.responseXML).find("code").text();var m=$j(l.responseXML).find("message").text();h(l,m,n)}},error:function(m,o,n){console.log("Error jive.Wall.ImageMetaSource create"+m+", "+o+", "+n);var l=$j(m.responseXML).find("code").text();var k=$j(m.responseXML).find("message").text();h(m,k,l)}};if(a){var d=g.find("input[name=image]");if(d.length>0){d.val("")}}else{g.find("input[name=imageURL]").val("")}g.ajaxSubmit(j)},fetch:function(d,a,b){var c={type:"GET",url:this.META_ENDPOINT+"/"+d,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){if(e.meta.length>0){var f=e.meta[0];a(e.meta)}else{console.log("Error jive.Wall.ImageMetaSource fetch no meta data:"+e);b(e,null,null)}},error:function(e,g,f){console.log("Error jive.Wall.ImageMetaSource fetch"+e+", "+g+", "+f);b(e,g,f)}};$j.ajax(c)}})};
;
jive.namespace("Wall");if(!jive.Wall.VideoLinkMetaSource){jive.Wall.VideoLinkMetaSource=jive.Wall.MetaSource.extend({init:function(){this.META_ENDPOINT=jive.rest.url("/meta")},create:function(b,d,f){var e={contentObjectType:b.objectType,object:b.objectId,videoURL:d.videoURL};var c=this;var a={url:jive.action.url("video-link-meta",e),dataType:"json",success:function(g){c.fetch(g.id,f)}};$j.ajax(a)},fetch:function(c,b){var a={type:"GET",url:this.META_ENDPOINT+"/"+c,dataType:"json",contentType:"application/json; charset=utf-8",success:function(d){if(d.meta.length>0){d=jive.Wall.VideoLinkMetaSource.normalizeData(d);b(d.meta)}else{console.log("Error jive.Wall.VideoLinkMetaSource fetch no meta data:"+d)}}};$j.ajax(a)}});jive.Wall.VideoLinkMetaSource.normalizeData=function(a){if(a.meta&&a.meta.length>0){a.meta.forEach(function(c){var b=c.properties;if(b!=undefined){var f={};if(b.entry!=undefined&&b.entry.length!=0){var e=b.entry;for(var d=0;d<e.length;d++){f[e[d].key]=e[d].value}}c.properties=f}})}else{a.meta=[]}return a}};
;
jive.namespace("Wall");if(!jive.Wall.MetaView){jive.Wall.MetaView=$Class.extend({init:function(f,a,e,b,c){this._type=c||jive.Wall.MetaView.TYPE_STATUS;this._$anchor=e.find("."+f);this._$container=e.find("."+a);var d=this;this._$anchor.click(function(){var g=d.isVisible()?"deactivated":"activated";d.emit(g);return false})},show:function(){this._$container.show();this._$anchor.removeClass("j-deselected").addClass("j-selected").siblings(".j-button").removeClass("j-selected").addClass("j-deselected");if(this._$anchor.is(":first-child")){this._$container.css({"-moz-border-radius-topleft":"0","-webkit-border-top-left-radius":"0"})}else{this._$container.css({"-moz-border-radius-topleft":"4px","-webkit-border-top-left-radius":"4px"})}},hide:function(){this._$container.hide();if(this._$anchor.hasClass("j-selected")){this._$anchor.add(this._$anchor.siblings(".j-button")).removeClass("j-deselected").removeClass("j-selected")}},isVisible:function(){return this._$container.is(":visible")},error:function(){console.log("META_VIEW error")}});jive.conc.observable(jive.Wall.MetaView.prototype);jive.Wall.MetaView.TYPE_STATUS=1;jive.Wall.MetaView.TYPE_STATUS_COMMENT=2;jive.Wall.MetaView.TYPE_STATUS_REPOST=3};
;
jive.namespace("Wall");if(!jive.Wall.ImageMetaView){jive.Wall.ImageMetaView=jive.Wall.MetaView.extend({init:function(f,a,e,b,c){this._super(f,a,e,b,c);var d=this;this._$container.find("form").submit(function(){if(d._$container.find("input[type=file]").val()==""){return false}if(d._$imageContainer.find("UL").length==0){d.add([])}d.emit("completed",$j(this));return false});this._$imageContainer=e.find(".jive-js-image-container");this._i18n=b.i18n},error:function(a,c,b){this.emit("error",c);if($j(this._$imageContainer).find("ul li").size()==1){this.reset()}this.hide();$j(this._$imageContainer).find("li.j-attached-loading").hide()},add:function(e,c){c=c||"";var d=this;var a=this._$imageContainer.find("ul.j-attached-items");if(e.length>0){var f=e[0];$j.extend(f,{originalURL:c});a=this._$imageContainer.find("ul.j-attached-items");if(a.length>0){jive.StatusInput.renderAttachmentWrapper({attachment:f},a,true)}else{jive.StatusInput.renderAttachmentsWrapper({attachments:e},this._$imageContainer,true)}if(this._type==jive.Wall.MetaView.TYPE_STATUS){this._$container.hide();this._$anchor.removeClass("j-selected").siblings(".j-button").removeClass("j-deselected")}}else{if(d._$imageContainer.find("UL").length==0){jive.StatusInput.renderAttachmentsWrapper({attachments:e},this._$imageContainer,true)}}this._$container.hide();this._$anchor.removeClass("j-selected").siblings(".j-button").removeClass("j-deselected");this._$imageContainer.find("li:not(.j-attached-loading):last > .j-remove-attachment").click(function(){d.emit("removeImage",f.id)});if(e.length>0){var b=this._$imageContainer.find("li.j-attached-loading").remove();b=$j(b.hide().get(0));this._$imageContainer.find("ul.j-attached-items").append(b);jive.StatusInput.bindAttachment(a,true)}},reset:function(){this._$imageContainer.html("");this._$imageContainer.hide();this._$imageContainer.find("li.j-attached-loading").hide()},show:function(){var c=this._$container.find("input[type=file]");var b=$j("<input type='file'>");b.attr("name",c.attr("name"));this._$container.find("input[type=file]").before(b).remove();var a=this;this._fileInputInterval=setInterval(function(){if(b.val()){clearInterval(a._fileInputInterval);a._$container.find("form").submit()}},100);this._super()},hide:function(){clearInterval(this._fileInputInterval);this._super()},getDataForURLImage:function(a){var b=this._$container.find("form");b.find("input[name=imageURL]").val(a);return b},remove:function(a){if($j("#"+a).size()>0&&$j("#"+a).siblings().size()<=1){this.reset()}$j("#"+a).remove()},formSubmitted:function(){var a=this._$imageContainer.find("ul.j-attached-items");a.width(a.width()+90+"px");this._$imageContainer.find("li.j-attached-loading").show();var b=a.width()-this._$imageContainer.width();if(b>0){a.animate({left:(b*-1-40)},300)}}})};
;
jive.namespace("Wall");if(!jive.Wall.EditorView){jive.Wall.EditorView=function(a,b){var e=this;var g=$j(a);var d=new jive.shared.NotificationView(b.notificationContainer,{info:".jive-info-box:first",warn:".jive-warn-box:first",error:".jive-error-box:first"});var f=new jive.shared.FormWaitingView(g,{containerPadding:0});this.getContainer=function(){return g};this.entryPublished=function(h){this.dismissStatusSuccess();var j=g.parent();var i=g.closest("div.jive-userbar-slidedown-status");if(i.length>0){i.find("div.j-wall-form").children().fadeOut().hide();i.find("div#jive-choose-form-links").fadeOut().hide();j=i.find("div.j-wall-form-container")}j.append(jive.wall.renderStatusSuccess({i18n:b.i18n,entry:h}));j.find(".j-success-post-dismiss").click(function(){e.dismissStatusSuccess()});j.find(".j-mb-last-update").hide();j.find(".j-successful-post").css("opacity","0").slideDown(500,function(){$j(this).animate({opacity:1},200);if(h.meta.length>0){$j(this).find(".jive-js-image-container").show().animate({opacity:1},500)}})};this.dismissStatusSuccess=function(){var h=g.parent().find(".j-successful-post");if(h.length>0){h.slideUp(null,function(){$j(this).remove()});var i=g.closest("div.jive-userbar-slidedown-status");if(i.length>0){i.slideUp()}}};this.entryPublishedRepost=function(j,i,k){this.dismissStatusSuccess();var h=j.find(".jive-modal-content");if(h.length>0){h.empty();h.append(jive.wall.renderStatusSuccess({i18n:b.i18n,entry:i}));h.find(".j-success-post-dismiss").click(function(){e.dismissStatusSuccessRepost(k)});h.find(".j-successful-post").css("opacity","0").slideDown(500,function(){$j(this).animate({opacity:1},200);if(i.meta.length>0){$j(this).find(".jive-js-image-container").show().animate({opacity:1},500)}})}};this.dismissStatusSuccessRepost=function(i){var h=g.find(".j-successful-post");if(h.length>0){h.slideUp(null,function(){$j(this).remove()})}i()};this.entryPublishedInfo=function(h){d.info(h)};this.entryPublishedWarn=function(h){d.warn(h)};this.entryPublishedError=function(h){d.error(h||b.i18n.formPostedError)};g.find("form.wall-form").find(":button").not(".close").click(function(){e.emit("submit");e.disableForm()});function c(h,i){jive.Wall.EditorView.handleCharacterLenMsg(h,i,g)}this.handleCharacterLenMsg=c;this.disableForm=function(){f.disableForm()};this.enableForm=function(){f.enableForm()}};jive.conc.observable(jive.Wall.EditorView.prototype);jive.Wall.EditorView.handleCharacterLenMsg=function(b,e,d){if(b=="error"){d.find(".j-wall-warn").hide();var c=null;if(e.charOver==1){d.find(".j-wall-error-over-many").hide();c=d.find(".j-wall-error-over-one")}else{d.find(".j-wall-error-over-one").hide();c=d.find(".j-wall-error-over-many")}c.find(".j-number-over").html(e.charOver);c.show()}else{if(b=="warning"){d.find(".j-wall-error-over-one").hide();d.find(".j-wall-error-over-many").hide();var a=d.find(".j-wall-warn");a.find(".j-number-left").html(e.charLeft);a.show()}else{if(b=="ok"){d.find(".j-wall-error-over-one").hide();d.find(".j-wall-error-over-many").hide();d.find(".j-wall-warn").hide()}}}}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.action=="undefined"){jive.eae.action={}}jive.eae.action.directMessage=function(H,G){var C=G||new soy.StringBuilder();C.append('<head><meta name="nav.active.link" content="jive-nav-link-inbox" /><title>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.participants"),[]))," ");jive.shared.displayutil.userDisplayName(soy.$$augmentData(H.directMessage.user,{displayNameOverride:(H.currentUser.id==H.directMessage.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),C);C.append(", ");var I=H.directMessage.participants;var K=I.length;for(var N=0;N<K;N++){var F=I[N];jive.shared.displayutil.userDisplayName(soy.$$augmentData(F,{displayNameOverride:(H.currentUser.id==F.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),C);C.append((!(N==K-1))?", ":"")}C.append("</title>");jive.shared.soy.resourceInlineJs({code:"$j(function() {var templateOptions = {canComment: true, canCreateImage: true, entitlementObjectID: "+soy.$$escapeHtml(H.directMessage.id)+", entitlementObjectType: "+soy.$$escapeHtml(H.directMessage.objectType)+"}; jive.Wall.CommentHelper.renderCommentFormTemplate("+soy.$$escapeHtml(H.directMessageObjectType)+", templateOptions); $j('.j-comment-submit').live(\"click\", function () {jive.Wall.CommentHelper.submitComment(this, "+soy.$$escapeHtml(H.directMessageObjectType)+", '"+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"status-list-comments.jspa"))+"');}); $j('.j-comment-delete').live(\"click\", function() {jive.Wall.CommentHelper.destroyComment($j(this).attr('commentid'));});}); $j(function() {var participants = "+JSON.stringify(H.directMessage.participants).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'; $j("#jive-link-manage-collab > a").click(function(e) {var $collabModal = $j(jive.eae.communications.collaboratorParticipantsModal()); var userCollabController = new jive.UserCollaboration.Main({participants: participants, objectuser: '+JSON.stringify(H.directMessage.user).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", currentUser: "+JSON.stringify(H.currentUser).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", item: "+JSON.stringify(H.directMessage).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", participantsInput: $collabModal.find('#participants'), form: $collabModal.find('form'), finishedCallback: function(users) {for(var i = 0; i < users.length; i++){users[i].id = users[i].ID; var userAlreadyAdded = $j('.j-act-participants a[data-username=\"'+users[i].username+'\"]').length; if (!userAlreadyAdded) {var userLink = jive.shared.displayutil.userDisplayNameLink(users[i]); $j('.j-act-participants').append(\", \"+userLink); document.title = document.title + \", \" + users[i].displayName; participants.push(users[i]);}}}}); $collabModal.lightbox_me({closeSelector: \".jive-modal-close-top, .close\"}); e.preventDefault();});}); $j(function() {new jive.Modalizer.Main({triggers:['#jive-link-delete a']}); var jiveReportAbuse = new jive.Modalizer.Main({triggers:['#jive-link-abuse a'],liveTriggers:['.js-link-abuse'], width: 'medium'});});"},C);C.append('</head><body class="jive-body-content jive-view-profile jive-view-profile-single-wall jive-view-profile-single-dm j-body-stream-content"><header id="jive-body-intro"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/communications")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.up.to"),[])),'</a></header><!-- BEGIN main body --><div id="jive-body-main" class="j-layout j-layout-ls clearfix"><!-- BEGIN main body column --><div class="j-column-wrap-l"><div class="j-column j-column-l lg-margin"><div class="jive-content j-direct-message"><div class="jive-info-box" style="display:none"><div><span class="jive-icon-med jive-icon-info"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.success"),[])),'</div></div><div class="jive-error-box" style="display:none"><div><span class="jive-icon-med jive-icon-info"></span></div></div><div class="j-act-participants"><span class="jive-icon-sml jive-icon-content-private"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.participants"),[]))," ");jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(H.directMessage.user,{displayNameOverride:(H.currentUser.id==H.directMessage.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),C);C.append(", ");var M=H.directMessage.participants;var O=M.length;for(var A=0;A<O;A++){var J=M[A];jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(J,{displayNameOverride:(H.currentUser.id==J.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),C);C.append((!(A==O-1))?", ":"")}C.append('</div><article class="j-act-dm"><section class="jive-content-body"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(H.directMessage.user,{size:46}),C);C.append('</div><div class="j-author-act font-color-meta">');jive.shared.displayutil.userDisplayNameLink(H.directMessage.user,C);C.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.posted"),[]))," ",soy.$$escapeHtml(H.directMessage.creationTime),'</div><div id="j-status-post-',soy.$$escapeHtml(H.statusPostIdPostfix),'" class="j-status-post j-act-mb-content clearfix"><div class="jive-activity-status">',H.directMessage.text,"</div>");if(H.hasMeta){jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:H.directMessage,domIDPostfix:H.directMessage.domIDPostfix},C)}C.append('</div></section></article><span class="j-doc-shadow j-left-doc-shadow j-ui-elem"></span><span class="j-doc-shadow j-right-doc-shadow j-ui-elem"></span></div><div class="j-inline-comment-wrapper clearfix" style="',(!H.commentsVisible)?"display: none;":"",'"><div class="jive-comment-container clearfix j-rc5 j-rc-none-top comments-',H.directMessage.id,'" data-statusid="',H.directMessage.id,'"><div id="jive-warn-box-',H.directMessage.id,'" class="jive-warn-box" style="display:none"><div><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.comments.moderated"),[])),'</div></div><h6 class="font-color-meta"><span class="jive-icon-sml jive-icon-comment"></span>',soy.$$escapeHtml(H.commentCount)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.comment.plural"),[])),'</h6><ul class="jive-comment" id="wall-comments-',H.directMessage.id,'">');var D=H.comments;var L=D.length;for(var E=0;E<L;E++){var B=D[E];C.append('<li id="comment-',B.id,'" class="clearfix">');jive.shared.displayutil.avatar(soy.$$augmentData(B.user,{size:30}),C);C.append('<div class="jive-comment-arrow"></div><div class="jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.shared.displayutil.userDisplayNameLink(B.user,C);C.append(" ",soy.$$escapeHtml(B.creationTime),"</p><div>",B.text,'</div><div id="comment-action-div-',B.id,'" class="jive-comment-actions font-color-meta-light clearfix">',(B.canEditComment)?'<a href="javascript:void(0)" class="font-color-meta j-comment-delete" commentid="'+B.id+'"><span class="jive-icon-sml jive-glyph-delete commentDelete"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.delete"),[]))+"</a>":"",(B.canReportAbuse)?(B.hasReportedAbuse)?'<span class="j-action-item"><span class="jive-icon-sml jive-glyph-warn commentWarn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.abuse_reported.link"),[]))+"</span>":'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/message-abuse!input.jspa"))+"?objectID="+B.id+"&amp;objectType="+soy.$$escapeHtml(B.objectType)+'" class="font-color-meta js-link-abuse" commentid="'+B.id+'"><span class="jive-icon-sml jive-glyph-warn commentWarn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.abuse.link"),[]))+"</a>":"","</div></div></li>")}C.append('</ul></div></div></div></div><!-- END main body column --><!-- BEGIN sidebar column --><div class="j-column j-column-s j-content-extras">',(H.canAddParticipants||H.canDelete)?'<div class="j-box j-box-actions"><header><h4 id="jive-action-sidebar-tab-header_directmessage-actions-tab">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[]))+'</h4></header><div id="jive-action-sidebar" class="j-box-body"><div id="jive-action-sidebar-tab-_microblog-actions-tab" class="jive-action-sidebar-tab-first"><ul id="jive-action-sidebar-tab-list_microblog-actions-tab" class="j-icon-list">'+((H.canAddParticipants||H.canDelete)?'<li id="jive-link-manage-collab"><a href="#" rel="nofollow"><span class="jive-icon-med jive-icon-document-collaboration"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients"),[]))+"</a></li>":"")+((H.canDelete)?'<li id="jive-link-delete"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/direct-message-delete!input.jspa?directMessage="+H.directMessage.id))+'" rel="nofollow"><span class="jive-icon-med jive-icon-delete"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.delete"),[]))+"</a></li>":"")+"</ul></div></div></div>":"","</div><!-- END sidebar column --></div><!-- END main body --></body>");if(!G){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.discussion=="undefined"){jive.eae.discussion={}}jive.eae.discussion.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID=',(A.activity.content.typeThread)?'"'+soy.$$escapeHtml(A.activity.content.id)+'"':'"'+soy.$$escapeHtml(A.activity.targetObjectID)+'"'," data-objectType=",(A.activity.content.typeThread)?'"'+soy.$$escapeHtml(A.activity.content.objectType)+'"':'"'+soy.$$escapeHtml(A.activity.targetObjectType)+'"',' data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.discussion.expandedCommItemView=function(D,C){var A=C||new soy.StringBuilder();A.append('<div class="j-act-exp-view expanded clearfix ',(D.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(D.streamType),"_",soy.$$escapeHtml(D.filterType),"_",D.activityContainer.jiveObject.objectType,"_",D.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(D.activityContainer.container.type),"_",soy.$$escapeHtml(D.activityContainer.container.id),'" style="display:none;"><article class="j-act-discussion j-thread-post"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(D.streamType),"-exp-header-",soy.$$escapeHtml(D.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(D.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(D.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(D.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(D.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,D.activityContainer.jiveObject.jiveObjectURL),'">',D.activityContainer.jiveObject.subject,"</a> ");if(D.activityContainer.container.type&&D.activityContainer.container.type!=-2){A.append(' <span class="j-act-container font-color-meta">');if(D.activityContainer.container.type==2020){var F=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(D.activityContainer.originalAuthor,F);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:F.toString(),arg1:(D.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},A)}else{var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:D.activityContainer.container},B);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:B.toString(),noAutoEscape:true},A)}A.append("</span>")}A.append('</div><div class="j-act-header-slug j-excerpt"><div class="j-author-act font-color-meta">');if(!D.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(D.activityContainer.originalAuthor,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:D.activityContainer.jiveObject},A)}A.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:D.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:D.streamType,hideDetailedReplyTo:true,user:D.user,againstObject:false},A);A.append(' <span class="j-act-time">',soy.$$escapeHtml(D.activityContainer.creationTime),"</span></div>",(D.activityContainer.jiveObject.text)?D.activityContainer.jiveObject.text+((D.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view j-rc5" style="display:none;"><div class="j-author-act font-color-meta">');if(!D.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(D.activityContainer.originalAuthor,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:D.activityContainer.jiveObject},A)}A.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:D.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:D.streamType,hideDetailedReplyTo:true,user:D.user,againstObject:false},A);A.append(' <span class="j-act-time">',soy.$$escapeHtml(D.activityContainer.creationTime),'</span></div><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:D.activityContainer.jiveObject,domIDPostfix:D.activityContainer.jiveObject.domIDPostfix},A);A.append('<div class="j-act-meta clearfix"><nav id="',soy.$$escapeHtml(D.streamType),"-exp-body-actions-",soy.$$escapeHtml(D.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(D.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(D.activityContainer.jiveObject.threadID),'" data-objectType="1"><ul>');jive.eae.activitystream.activityNavActions({object:D.activityContainer.jiveObject,activityContainer:D.activityContainer,amAnAuthor:D.activityContainer.amAnAuthor,objectType:D.activityContainer.jiveObject.objectType,objectId:D.activityContainer.jiveObject.id,liked:D.activityContainer.liked,likeCount:D.activityContainer.likeCount,likable:D.activityContainer.likable,author:D.activityContainer.originalAuthor,user:D.user,location:"parentPreview",streamType:D.streamType,filterType:D.filterType,canCreateMbImage:D.canCreateMbImage,canCreateMbVideo:D.canCreateMbVideo},A);A.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(D.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(D.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(D.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!D.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:D.activityContainer,showCurrentCount:false},A);A.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var H=D.activityContainer.activityList;var I=H.length;for(var G=0;G<I;G++){var E=H[G];if(!E.parentActivity&&(E.current||G==I-1)){jive.eae.discussion.activityContentExcerpt({activity:E,activityContainer:D.activityContainer,isHidden:false,user:D.user,streamType:D.streamType,canCreateMbImage:D.canCreateMbImage,canCreateMbVideo:D.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:G==I-1},A)}}A.append("</div>");if(D.activityContainer.canReply){A.append('<nav id="',soy.$$escapeHtml(D.streamType),"-parent-reply-",soy.$$escapeHtml(D.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(D.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(D.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.reply.to.originalX",arg0:(D.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((D.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},A);A.append("</a></div></div></nav>")}A.append("</div></article></div>");if(!C){return A.toString()}};jive.eae.discussion.groupedActivityStreamTemplate=function(A,E){var C=E||new soy.StringBuilder();C.append('<article id="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable j-act-discussion j-thread-post clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title" ><span class="jive-icon-med ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'">',A.activityContainer.jiveObject.subject,'</a><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.threadID),'" data-objectType="1"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},C);C.append("</li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append('</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},C);C.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.discussion.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},C);C.append('</div><div class="j-act-meta font-color-meta-light"> ');if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){if(A.activityContainer.container.type==2020){var B=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,B);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:B.toString(),arg1:(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},C)}else{var D=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},D);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:D.toString(),noAutoEscape:true},C)}C.append(' <span class="j-bullet">&#8226;</span> ')}jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},C);C.append("</div></div></article>");if(!E){return C.toString()}};jive.eae.discussion.activityStreamFullContentView=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="');jive.eae.activitystream.contentTypeParentPreviewStylingClassName({activityContainer:A.activityContainer},B);B.append('"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"46"}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(' <span class="j-act-time font-color-meta">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span></div><span class="j-thread-pointer j-ui-elem"></span><div class="jive-content j-rc5"><div class="j-act-exp-content-body-view j-rc4" style=""></div></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('<div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-body-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.threadID),'" data-objectType="1"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section>");if(!C){return B.toString()}};jive.eae.discussion.collapsedActivityStreamExcerpt=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID=',(A.activity.content.typeThread)?'"'+soy.$$escapeHtml(A.activity.content.id)+'"':'"'+soy.$$escapeHtml(A.activity.targetObjectID)+'"'," data-objectType=",(A.activity.content.typeThread)?'"'+soy.$$escapeHtml(A.activity.content.objectType)+'"':'"'+soy.$$escapeHtml(A.activity.targetObjectType)+'"',' data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append('</div><div class="j-excerpt" ',(A.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,hasMoreText:A.activity.hasMoreText,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="j-act-sub-preview clearfix" ',(!A.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(A.activity.content.html){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append('</div></div></div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta"><li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section></div>");if(!C){return B.toString()}};jive.eae.discussion.expandedActivityStreamItemView=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');if(A.streamType=="profile"){var B=A.activityContainer.activityList;var F=B.length;for(var E=0;E<F;E++){var D=B[E];if(!D.parentActivity){jive.eae.discussion.activityContentExcerpt({activity:D,activityContainer:A.activityContainer,isHidden:true,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:false},C)}}}C.append("</div></div>");if(!G){return C.toString()}};jive.eae.discussion.activityContentExcerpt=function(A,D){var C=D||new soy.StringBuilder();C.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.addedInline)?"j-js-addedInline":""," ",(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.content.id),'" data-objectType="',soy.$$escapeHtml(A.activity.content.objectType),'" data-current="',(A.activity.current||A.forceCurrent)?"true":"",'" style="',(A.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="reply j-sub">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:"32"}),C);C.append('<div class="j-excerpt j-non-excerpt clearfix" ',(A.hideStub)?'style="display:none;"':"",">");if(!A.hideStub){var B=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B);jive.eae.activitystream.activityContentCommon({contentTxt:B.toString(),hasMoreText:A.activity.hasMoreText},C)}C.append('</div><div class="j-act-sub-preview" ',(!A.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,user:A.user,againstObject:false,hideDetailedReplyTo:false},C);C.append(" ",(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},C)}C.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activity.content,domIDPostfix:A.activity.domIDPostfix},C);C.append('<div class="jive-comment-actions"><nav class="clearfix"><ul>',(!A.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append("</ul></nav></div></div></div></section></div>");if(!D){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.document=="undefined"){jive.eae.document={}}jive.eae.document.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?"129":A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry ',(A.activityContainer.read)?"j-act-read":"j-act-unread",' clearfix" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtml(A.activityContainer.numUnread),'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-commentHTMLLoaded="false"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.document.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.document.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="',(A.activity.groupedModifiers.length>0)?"j-sub j-mod font-color-meta-light":"",'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.document.expandedCommItemView=function(F,E){var C=E||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix ',(F.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(F.streamType),"_",soy.$$escapeHtml(F.filterType),"_",(F.activityContainer.activityList[0]&&F.activityContainer.activityList[0].content.commentContentResource&&F.activityContainer.activityList[0].content.commentContentResource.objectType==129)?"129":F.activityContainer.jiveObject.objectType,"_",F.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(F.activityContainer.container.type),"_",soy.$$escapeHtml(F.activityContainer.container.id),'" style="display:none;"><article class="j-act-document"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(F.streamType),"-exp-header-",soy.$$escapeHtml(F.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(F.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(F.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,F.activityContainer.jiveObject.jiveObjectURL),'">',F.activityContainer.jiveObject.subject,"</a> ");if(F.activityContainer.container.type&&F.activityContainer.container.type!=-2){C.append(' <span class="j-act-container font-color-meta">');if(F.activityContainer.container.type==2020){var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(F.activityContainer.originalAuthor,D);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:D.toString(),arg1:(F.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},C)}else{var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:F.activityContainer.container},B);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:B.toString(),noAutoEscape:true},C)}C.append("</span>")}C.append('</div><div class="j-act-header-slug j-excerpt"><div class="j-author-act j-byline font-color-meta">');var L=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(F.activityContainer.originalAuthor,L);var J=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(F.activityContainer.latestAuthor,J);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.created_by.modified_by"),[])),arg0:L.toString(),arg1:soy.$$escapeHtml((F.activityContainer.creationDate?dateFormat(parseFloat(F.activityContainer.creationDate),"mmm d, yyyy h:MM TT"):"")),arg2:J.toString(),arg3:soy.$$escapeHtml((F.activityContainer.modificationDate?dateFormat(parseFloat(F.activityContainer.modificationDate),"mmm d, yyyy h:MM TT"):"")),noAutoEscape:true},C);C.append("</div>",(F.activityContainer.jiveObject.text)?F.activityContainer.jiveObject.text+((F.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view j-rc5" style="display:none;"><div class="j-author-act j-byline font-color-meta">');var A=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(F.activityContainer.originalAuthor,A);var M=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(F.activityContainer.latestAuthor,M);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.created_by.modified_by"),[])),arg0:A.toString(),arg1:soy.$$escapeHtml((F.activityContainer.creationDate?dateFormat(parseFloat(F.activityContainer.creationDate),"mmm d, yyyy h:MM TT"):"")),arg2:M.toString(),arg3:soy.$$escapeHtml((F.activityContainer.modificationDate?dateFormat(parseFloat(F.activityContainer.modificationDate),"mmm d, yyyy h:MM TT"):"")),noAutoEscape:true},C);C.append('</div><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:F.activityContainer.jiveObject,domIDPostfix:F.activityContainer.jiveObject.domIDPostfix},C);C.append('<div class="j-act-meta clearfix"><nav id="',soy.$$escapeHtml(F.streamType),"-exp-body-actions-",soy.$$escapeHtml(F.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(F.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.activitystream.activityNavActions({object:F.activityContainer.jiveObject,activityContainer:F.activityContainer,amAnAuthor:F.activityContainer.amAnAuthor,objectType:F.activityContainer.jiveObject.objectType,objectId:F.activityContainer.jiveObject.id,liked:F.activityContainer.liked,likeCount:F.activityContainer.likeCount,likable:F.activityContainer.likable,author:F.activityContainer.originalAuthor,user:F.user,location:"parentPreview",streamType:F.streamType,filterType:F.filterType,canCreateMbImage:F.canCreateMbImage,canCreateMbVideo:F.canCreateMbVideo},C);C.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(F.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!F.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:F.activityContainer,showCurrentCount:false},C);C.append('</strong><h4 class="font-color-meta">',(F.activityContainer.activityList[0]&&F.activityContainer.activityList[0].content.commentContentResource&&F.activityContainer.activityList[0].content.commentContentResource.objectType==129)?'<span class="jive-icon-med jive-icon-document-collaboration"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.authorcomments"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var I=F.activityContainer.activityList;var K=I.length;for(var H=0;H<K;H++){var G=I[H];if(!G.parentActivity&&(G.current||H==K-1)||G.groupedModifiers.length>0){jive.eae.document.activityContentExcerpt({activity:G,activityContainer:F.activityContainer,isHidden:false,user:F.user,streamType:F.streamType,canCreateMbImage:F.canCreateMbImage,canCreateMbVideo:F.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:H==K-1},C)}}C.append("</div>");if(F.activityContainer.canReply){C.append('<nav id="',soy.$$escapeHtml(F.streamType),"-parent-reply-",soy.$$escapeHtml(F.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(F.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(F.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');if(F.activityContainer.activityList[0]&&F.activityContainer.activityList[0].content.commentContentResource&&F.activityContainer.activityList[0].content.commentContentResource.objectType==129){C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.addauthorcomment"),[])))}else{jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.comment.on.originalX",arg0:(F.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((F.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},C)}C.append("</a></div></div></nav>")}C.append("</div></article></div>");if(!E){return C.toString()}};jive.eae.document.groupedActivityStreamTemplate=function(A,E){var C=E||new soy.StringBuilder();C.append('<article id="',soy.$$escapeHtml(A.streamType),"_",(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?"129":A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable j-act-document clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title"><span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'">',A.activityContainer.jiveObject.subject,'</a><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},C);C.append("</li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append('</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},C);C.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.document.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},C);C.append('</div><div class="j-act-meta font-color-meta-light"> ');if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){if(A.activityContainer.container.type==2020){var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,D);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:D.toString(),arg1:(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},C)}else{var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},B);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:B.toString(),noAutoEscape:true},C)}C.append(' <span class="j-bullet">&#8226;</span> ')}jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},C);C.append("</div></div></article>");if(!E){return C.toString()}};jive.eae.document.activityStreamFullContentView=function(A,E){var B=E||new soy.StringBuilder();B.append('<section class="j-doc jive-content"><h3><span class="jive-icon-big jive-icon-document"></span>',A.activityContainer.jiveObject.subject,'</h3><div class="j-byline font-color-meta">');var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,D);var C=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.latestAuthor,C);jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.created_by.modified_by"),[])),arg0:D.toString(),arg1:soy.$$escapeHtml((A.activityContainer.creationDate?dateFormat(parseFloat(A.activityContainer.creationDate),"mmm d, yyyy h:MM TT"):"")),arg2:C.toString(),arg3:soy.$$escapeHtml((A.activityContainer.modificationDate?dateFormat(parseFloat(A.activityContainer.modificationDate),"mmm d, yyyy h:MM TT"):"")),noAutoEscape:true},B);B.append('</div><span class="j-page-crease j-ui-elem"></span><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('<div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-body-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section>");if(!E){return B.toString()}};jive.eae.document.collapsedActivityStreamExcerpt=function(B,G){var C=G||new soy.StringBuilder();C.append('<div id="node-collapsed-',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="j-act-node ',(B.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(B.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(B.activity.targetObjectType),'" data-current="',(B.activity.current)?soy.$$escapeHtml(B.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="',(B.activity.groupedModifiers.length>0)?"j-sub j-mod font-color-meta-light":"",'">');if(B.activity.groupedModifiers.length>0){C.append('<span class="jive-icon-sml jive-glyph-edit"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.modified.by"),[]))," ");var A=B.activity.groupedModifiers;var F=A.length;for(var E=0;E<F;E++){var D=A[E];jive.shared.displayutil.userDisplayNameLink(D,C);C.append((B.activity.groupedModifiers.length-2==E)?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.and"),[])):(!(E==F-1))?",":""," ")}C.append(' <span class="j-bullet">&#8226;</span> <span class="font-color-meta-light">',(B.activity.creationTime)?soy.$$escapeHtml(B.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),'</span><div class="j-excerpt" ',(B.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:B.activity.content.text,hasMoreText:B.activity.hasMoreText,deleted:B.activity.content.deleted,moderated:B.activity.moderated},C);jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:B.activity.content,domIDPostfix:B.activity.domIDPostfix},C);C.append("</div>")}else{C.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(B.activity.activityUser,{size:46}),C);C.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:B.activity.content,type:B.activity.content.deleted?B.activityContainer.jiveObject.objectType:B.activity.type,activityUser:B.activity.activityUser,displayAuthorLink:true,streamType:B.streamType,user:B.user,againstObject:false,hideDetailedReplyTo:false},C);C.append('</div><div class="j-excerpt" ',(B.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:B.activity.content.text,hasMoreText:B.activity.hasMoreText,deleted:B.activity.content.deleted,moderated:B.activity.moderated},C);jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:B.activity.content,domIDPostfix:B.activity.domIDPostfix},C);C.append('</div><div class="j-act-sub-preview clearfix" ',(!B.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(B.activity.content.html){jive.eae.activitystream.activityContentText({activity:B.activity,noAutoescape:true},C)}C.append('</div></div></div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(B.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(B.time),(B.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta"><li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:B.activityContainer.activityList[B.activityContainer.activityList.length-1].content,activityContainer:B.activityContainer,amAnAuthor:B.user.id==B.activityContainer.activityList[B.activityContainer.activityList.length-1].activityUser.id,objectType:B.activityContainer.activityList[B.activityContainer.activityList.length-1].content.objectType,objectId:B.activityContainer.activityList[B.activityContainer.activityList.length-1].content.id,liked:B.activityContainer.activityList[B.activityContainer.activityList.length-1].liked,likeCount:B.activityContainer.activityList[B.activityContainer.activityList.length-1].likeCount,likable:B.activityContainer.activityList[B.activityContainer.activityList.length-1].likable,hasMoreText:B.activityContainer.activityList[B.activityContainer.activityList.length-1].hasMoreText,author:B.activityContainer.activityList[B.activityContainer.activityList.length-1].activityUser,user:B.user,location:"subActivity",streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo},C);C.append("</ul></nav></div>")}C.append("</section></div>");if(!G){return C.toString()}};jive.eae.document.expandedActivityStreamItemView=function(B,G){var C=G||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(B.streamType),"_",B.activityContainer.jiveObject.objectType,"_",B.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(B.activityContainer.container.type),"_",soy.$$escapeHtml(B.activityContainer.container.id),"_",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',(B.activityContainer.activityList[0]&&B.activityContainer.activityList[0].content.commentContentResource&&B.activityContainer.activityList[0].content.commentContentResource.objectType==129)?'<span class="jive-icon-med jive-icon-document-collaboration"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.authorcomments"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var A=B.activityContainer.activityList;var F=A.length;for(var E=0;E<F;E++){var D=A[E];if(D.groupedModifiers.length>0||!D.parentActivity&&B.streamType=="profile"){jive.eae.document.activityContentExcerpt({activity:D,activityContainer:B.activityContainer,isHidden:true,user:B.user,streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:false},C)}}C.append("</div></div>");if(!G){return C.toString()}};jive.eae.document.activityContentExcerpt=function(B,H){var C=H||new soy.StringBuilder();C.append('<div id="node-collapsed-',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="j-act-node  ',(B.addedInline)?"j-js-addedInline":""," ",(B.activity.groupedModifiers.length>0)?"origin":""," ",(B.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(B.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(B.activity.targetObjectType),'" data-current="',(B.activity.current||B.forceCurrent)?"true":"",'" style="',(B.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="reply j-sub  ',(B.activity.groupedModifiers.length>0)?"j-mod font-color-meta-light":"",'" >');if(B.activity.groupedModifiers.length>0){C.append('<span class="jive-icon-sml jive-glyph-edit"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.modified.by"),[]))," ");var G=B.activity.groupedModifiers;var F=G.length;for(var E=0;E<F;E++){var A=G[E];jive.shared.displayutil.userDisplayNameLink(A,C);C.append((B.activity.groupedModifiers.length-2==E)?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.and"),[])):(!(E==F-1))?",":""," ")}C.append(' <span class="j-bullet">&#8226;</span> <span class="j-act-meta font-color-meta">',(B.activity.creationTime)?soy.$$escapeHtml(B.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),"</span>")}else{jive.shared.displayutil.avatar(soy.$$augmentData(B.activity.activityUser,{size:"32"}),C);C.append('<div class="j-excerpt j-non-excerpt clearfix" ',(B.hideStub)?'style="display:none;"':"",">");if(!B.hideStub){var D=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:B.activity,noAutoescape:true},D);jive.eae.activitystream.activityContentCommon({contentTxt:D.toString(),hasMoreText:B.activity.hasMoreText},C)}C.append('</div><div class="j-act-sub-preview" ',(!B.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:B.activity.content,type:B.activity.content.deleted?B.activityContainer.jiveObject.objectType:B.activity.type,activityUser:B.activity.activityUser,displayAuthorLink:true,user:B.user,againstObject:false,hideDetailedReplyTo:false},C);C.append(" ",(B.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(B.activity.creationTime)?soy.$$escapeHtml(B.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(B.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(B.hideStub){jive.eae.activitystream.activityContentText({activity:B.activity,noAutoescape:true},C)}C.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:B.activity.content,domIDPostfix:B.activity.domIDPostfix},C);C.append('<div class="jive-comment-actions"><nav class="clearfix"><ul>',(!B.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:B.activity.parentActivity?B.activityContainer.jiveObject:B.activity.content,activityContainer:B.activityContainer,amAnAuthor:B.user.id==B.activity.activityUser.id,objectType:B.activity.content.objectType,objectId:B.activity.content.id,liked:B.activity.liked,likeCount:B.activity.likeCount,likable:B.activity.likable,hasMoreText:B.activity.hasMoreText,author:B.activity.activityUser,user:B.user,location:"subActivity",streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo},C);C.append("</ul></nav></div></div></div>")}C.append("</section></div>");if(!H){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.mention=="undefined"){jive.eae.mention={}}jive.eae.mention.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry j-act-mentions ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all">');jive.eae.mention.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[0],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.mention.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'"><section>');if(A.activity.content.mentionedObject.objectType==3){B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act"><span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.you.in"),[])),' </div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activity.content.context.jiveObjectCSS),'"></span>',soy.$$escapeHtml(A.activity.content.context.name),"</div>")}else{B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act"><span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(" ");jive.shared.soy.i18nHelper({i18nKey:"eae.mention.item.in",arg0:soy.$$escapeHtml(A.activity.content.mentionedObject.name),noAutoEscape:true},B);B.append(' </div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activity.content.context.jiveObjectCSS),'"></span>',soy.$$escapeHtml(A.activity.content.context.name),"</div>")}B.append('<div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activity.content.context.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.context.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activity.creationTime),(A.activity.content.context.jiveObjectURL)?"</a>":"",'</span></div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.mention.expandedCommItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" style="display:none;"><article class="j-act-mention"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(A.streamType),"-exp-header-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-init" data-objectID="',A.activityContainer.activityList[0].content.context.id,'" data-objectType="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.objectType),'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.activityList[0].activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-new">');jive.shared.displayutil.userDisplayNameLink(A.activityContainer.activityList[0].activityUser,B);B.append(" @");if(A.activityContainer.activityList[0].content.typePlaceMention){jive.shared.soy.i18nHelper({i18nKey:"eae.mention.item.in",arg0:soy.$$escapeHtml(A.activityContainer.activityList[0].content.mentionedObject.name),noAutoEscape:true},B);B.append(" ")}else{B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.you.in"),[]))," ")}B.append('</div><div class="j-act-title"><span class="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.jiveObjectCSS),' jive-icon-big"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.context.jiveObjectURL),'">',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.name),'</a></div><span class="j-act-time"><strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.context.jiveObjectURL),'" class="font-color-meta-light">',soy.$$escapeHtml(A.activityContainer.activityList[0].creationTime),'</a></strong></span><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a></div></section><div class="j-act-exp-full-content-view" style="display:none;"><div class="j-act-exp-content-body-view" style=""></div></div></div>');if(A.activityContainer.activityList[0].content.context.replyable&&(A.activityContainer.activityList[0].content.context.parentTypeWallEntry||A.activityContainer.activityList[0].content.context.parentTypeShare||A.activityContainer.activityList[0].content.context.parentTypeDM)){B.append('<div class="j-act-add-comment"><div class="j-act-replyto j-js-microrte-replyable"><span class="jive-icon-med jive-icon-comment"></span><a id="showMicroRTE_',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.reply_to"),[]))," ",soy.$$escapeHtml(A.activityContainer.activityList[0].activityUser.displayName),'</a> in <span class="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.jiveObjectCSS),'"></span><strong>',A.activityContainer.activityList[0].content.context.name,'</strong></div><div id="microRTEContainer_',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'" class="j-act-reply j-act-micro-rte" style="display:none;"><div class="j-act-reply-form r-active"><div class="j-mb j-js-mb-comment j-act-reply-form">');jive.wall.statusInputNotificationBoxes(null,B);B.append('<form id="form-eae-mb-comment-editor-',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'" name="eae-mb-comment-editor-',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'">');jive.wall.statusInput({statusInputIdPostfix:"eae-mb-comment-editor-"+A.activityContainer.activityList[0].content.domIDPostfix,messageCSSClasses:"j-eae-txt-area",defaultTxt:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.comment.default.text"),[]))},B);B.append('<input type="hidden" name="ID" value="eae-mb-comment-editor-',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'"/><input type="hidden" name="contentID" value="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.parentObjectID),'"/><input type="hidden" name="typeID" value="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.parentObjectType),'"/>');jive.statusinput.containers.statusInputType({type:"mbComment"},B);jive.statusinput.containers.statusInputActions({statusID:"eae-mb-comment-editor-"+A.activityContainer.activityList[0].content.domIDPostfix,i18nSubmitKey:"eae.mb.submit.text",displayImageBtn:false,displayAtMentionBtn:!A.mobileUI,i18nCancelKey:"eae.mb.comment.cancel.text"},B);jive.wall.statusInputErrorWarnBox(null,B);B.append("</form>");jive.statusinput.containers.statusInputActionContainer({canCreateImage:false,canCreateVideo:false},B);B.append("</div></div></section></div>")}else{if(A.activityContainer.activityList[0].content.context.replyable){B.append('<div id="',soy.$$escapeHtml(A.streamType),"-mention-reply-rte-link-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-js-mention-rte j-act-rte-replyable j-act-add-comment"><div class="j-act-replyto"><a class="j-reply-rte" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.reply_to"),[]))," ",soy.$$escapeHtml(A.activityContainer.activityList[0].activityUser.displayName),'</a> in <span class="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.jiveObjectCSS),'"></span><strong>',A.activityContainer.activityList[0].content.context.name,'</strong></div></div><div class="j-panel-rte-wrap"><section class="j-panel-rte j-act-reply" style=\'display:none\'><div class="j-act-reply-form"><p class="jive-error-text jive-comment-error" style="display:none"></p><form method="post" action="javascript:void(0);" name="jive-comment-post-form" class="j-panel-rte-view sammy-app-1288289329294-553-">');jive.eae.activitystream.rteTextArea(null,B);B.append('<div class="jive-form-buttons"><input type="submit" name="post" class="j-btn-global j-btn-callout" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.add_reply"),[])),"\"/><a href='#' class='j-panel-hide-rte-link j-btn-global'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</a></div></form></div></section></div>")}}B.append("</div></article></div>");if(!C){return B.toString()}};jive.eae.mention.groupedActivityStreamTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-act-entry j-act-mentions j-act-not-markable" data-objectID="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-title"><span class="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.jiveObjectCSS),' jive-icon-med"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.context.jiveObjectURL),'">',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.name),'</a><nav class="j-act-actions j-act-actions-init font-color-meta clearfix"><ul><li><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.context.objectType),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'</a></li></ul></nav></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.mention.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-exp-full-content-view" style="display:none;"></div></div></article>');if(!C){return B.toString()}};jive.eae.mention.activityStreamFullContentView=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-mention-context"><span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.soy.i18nHelper({i18nKey:"eae.mention.context",arg0:'<strong class="font-color-okay">'+soy.$$escapeHtml(A.activityContainer.activityList[0].content.mentionedObject.name)+"</strong>",noAutoEscape:true},B);B.append('</p><div class="jive-comment jive-comment-flat jive-comment-indent-0 clearfix"><section class="reply j-sub">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.activityList[0].activityUser,{size:32}),B);B.append('<div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');if(!A.activityContainer.activityList[0].activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activityContainer.activityList[0].activityUser,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityContainer.jiveObject},B)}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.activityContainer.activityList[0].content.context.actionKey),[]))," ",(A.activityContainer.activityList[0].content.context.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.context.jiveObjectURL)+'">':"",soy.$$escapeHtml(A.activityContainer.activityList[0].creationTime),(A.activityContainer.activityList[0].content.context.jiveObjectURL)?"</a>":"",'</p><div class="j-act-exp-content-body-view" style=""></div></div></section></div>');if(!C){return B.toString()}};jive.eae.mention.collapsedActivityStreamExcerpt=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node"><section><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32}),B);B.append('</div><div class="j-author-act font-color-meta"><span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(" ");jive.shared.soy.i18nHelper({i18nKey:"eae.mention.created",arg0:'<strong class="font-color-okay">'+soy.$$escapeHtml(A.activity.content.mentionedObject.name)+"</strong>",arg1:soy.$$escapeHtml(A.activity.content.mentionedObject.objectType),noAutoEscape:true},B);B.append('</div><div class="j-excerpt">');jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,showAsExcerpt:true,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time">',(A.activity.content.context.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.context.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activity.creationTime),(A.activity.content.context.jiveObjectURL)?"</a>":"","</span></nav></div></section></div>");if(!C){return B.toString()}};jive.eae.mention.atMentionReply=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-js-mention-reply j-mention-reply j-rc6"><header class="font-color-new">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.mention.reply.posted"),[A.containerData.activityList[0].activityUser.displayName])),' <span class="',soy.$$escapeHtml(A.containerData.activityList[0].content.context.jiveObjectCSS),'"></span><a href="',soy.$$escapeHtml(A.containerData.activityList[0].content.context.jiveObjectURL),'">',soy.$$escapeHtml(A.containerData.activityList[0].content.context.name),'</a><a href=\'#\' class="j-js-mention-reply-dismiss j-mention-reply-dismiss"><span class="jive-icon-sml jive-icon-follow-stop"></span></a></header><section>',A.data.content.text,"</section></div>");if(!C){return B.toString()}}
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamItemView=jive.ActivityStream.StreamItemCommonView.extend(function(b){this.init=function(e){this._super(e);this.hideData={objectType:parseInt(this.hideDataArr[1]),objectID:parseInt(this.hideDataArr[2]),containerType:parseInt(this.hideDataArr[3]),containerID:parseInt(this.hideDataArr[4])};this.subActivitiesByDomID={};this.originalCommentIDs=[];this.activityListLength=this.data.activityList.length;for(i=this.activityListLength-1;i>=0;i--){this.subActivitiesByDomID[this.data.activityList[i].content.domIDPostfix]=this.data.activityList[i];if(this.streamType=="profile"&&(this.data.activityList[i].content.typeMessage||this.data.activityList[i].content.typeComment)){this.originalCommentIDs.push(this.data.activityList[i].content.id)}}this.fullRepliesLoaded=false;this.autoFilledOnExpand=false;this.fullContentContainerInitialized=false;this.replacedCollapsedActivity=null};this.getSoyTemplate=function(e){return jive.eae.activitystream.groupedActivityStreamItem(e)};this.handleClick=function(P,J){var w=this,k=$j(P.target),t=false,j=w.getContent();if(J.filter("div.j-preview-trigger").length){w.expandClickHandler(J.filter("div.j-preview-trigger").first(),P)}else{if(k.hasClass("j-reply-rte")){var N=k.closest(".j-act-rte-replyable"),Q={},C=N.attr("id"),K=C.split("-")[C.split("-").length-1],v=w.subActivitiesByDomID[K];Q.parent={};if(v&&(v.content.typeComment||v.content.typeMessage)){Q.type="sub";Q.activity=v}else{Q.type="parent";Q.parent.originalAuthor=w.data.originalAuthor}Q.idPostfix=K;Q.viewingUser=w.viewingUserData;if(Q.activity&&Q.activity.content.jsAppActivityRepliedToData&&Q.activity.content.jsAppActivityRepliedToData.id){Q.parent.jiveObject={};Q.parent.jiveObject.id=Q.activity.content.jsAppActivityRepliedToData.id;Q.parent.jiveObject.objectType=Q.activity.content.jsAppActivityRepliedToData.objectType}else{Q.parent.jiveObject=w.data.jiveObject}Q.parent.container=w.data.container;Q.objectID=N.attr("data-objectid");Q.objectType=N.attr("data-objecttype");w.showRTE(Q,N)}else{if(J.filter("a.j-js-show-full-act").length){var o=J.filter("a.j-js-show-full-act").first(),F=o.closest(".j-act-node"),l=F.attr("id"),q=l.split("-")[l.split("-").length-1],v=w.subActivitiesByDomID[q],B=F.attr("data-objectid"),x=F.attr("data-objecttype"),m=F.find(".j-excerpt-full-html-content"),z=F.find(".j-act-sub-preview"),D=F.find(".j-excerpt"),H=$j(jive.eae.activitystream.loadingSpinner());o.before(H);if(v&&v.parentActivity){H.remove();j.find("a.j-js-show-full-content").click()}else{if(m.html()){o.hide();z.show();D.hide();o.closest(".j-act-preview-control").addClass("hide");o.next(".j-js-hide-full-act").show();H.remove();jive.rte.renderedContent.emit("renderedContent",w.getContent())}else{o.hide();w.emit("getFullContent",{objectType:x,objectID:B,containerType:"",containerID:""},function(R,e){o.closest(".j-act-preview-control").addClass("hide");m.html(R);jive.rte.renderedContent.emit("renderedContent",m);o.next(".j-js-hide-full-act").show();H.remove();z.show();D.hide()})}}}else{if(J.filter("a.j-js-hide-full-act").length){var o=J.filter("a.j-js-hide-full-act").first(),F=o.closest(".j-act-node"),z=F.find(".j-act-sub-preview"),D=F.find(".j-excerpt");z.hide();D.show();o.closest(".j-act-preview-control").removeClass("hide");o.hide();o.prev("a.j-js-show-full-act").show()}else{if(J.filter("a.j-js-show-full-content").length){var o=J.filter("a.j-js-show-full-content").first(),x=o.attr("data-objectType"),B=o.attr("data-objectID"),O=o.attr("data-containerType"),s=o.attr("data-containerID"),I=j.find("div.j-act-exp-full-content-view");if(!w.fullContentContainerInitialized){I.html(jive.eae.activitystream.activityStreamFullContentView({activityContainer:w.data,user:w.viewingUserData,streamType:w.streamType,filterType:w.filterType,canCreateMbImage:w.canCreateMbImage,canCreateMbVideo:w.canCreateMbVideo}));w.fullContentContainerInitialized=true}var A=j.find("div.j-act-exp-content-body-view"),H=$j(jive.eae.activitystream.loadingSpinner());o.before(H);if(!A.html()){o.hide();w.emit("getFullContent",{objectType:x,objectID:B,containerType:O,containerID:s},function(X,T){var W=j.find("div.j-act-coll-view");if(W.length){var U=W.children("div.j-act-node"),R=U.length;for(var V=0;V<R;V++){var Y=$j(U[V]),S=Y.attr("id"),e=w.subActivitiesByDomID[S.split("-")[S.split("-").length-1]];if(Y.is(":visible")&&e&&e.parentActivity&&!Y.children("section").hasClass("j-mod")){Y.hide()}}}A.html(X);w.initPollView(T,I);I.slideDown(200,"easeInOutExpo");H.remove();o.next("a.j-js-hide-full-content").show();j.addClass("j-act-tl-preview");jive.rte.renderedContent.emit("renderedContent",A)})}else{g=j.find("div.j-act-coll-view");if(g.length){y=g.children("div.j-act-node");G=y.length;for(var M=0;M<G;M++){var r=$j(y[M]),E=r.attr("id"),f=w.subActivitiesByDomID[E.split("-")[E.split("-").length-1]];if(r.is(":visible")&&f&&f.parentActivity&&!r.children("section").hasClass("j-mod")){r.hide()}}}I.slideDown({duration:200,easing:"easeInOutExpo"});o.hide();o.next("a.j-js-hide-full-content").show();H.remove();j.addClass("j-act-tl-preview")}}else{if(J.filter("a.j-js-hide-full-content").length){var o=J.filter("a.j-js-hide-full-content").first();I=j.find("div.j-act-exp-full-content-view");I.slideUp({duration:500,easing:"easeInOutExpo"});j.find("a.j-js-hide-full-content").each(function(){if($j(this).prev("a.j-js-show-full-content").length){$j(this).hide()}});j.removeClass("j-act-tl-preview");var g=j.find("div.j-act-coll-view");if(g.length){var y=g.children("div.j-act-node"),G=y.length;for(var M=0;M<G;M++){var r=$j(y[M]),E=r.attr("id"),f=w.subActivitiesByDomID[E.split("-")[E.split("-").length-1]];if(!r.is(":visible")&&!j.find("div.j-act-exp-view").is(":visible")&&f&&f.parentActivity&&!r.children("section").hasClass("j-mod")){r.show()}}}j.find("a.j-js-show-full-content").show()}else{if(k.hasClass("j-act-hidemenu")){var n=k,u=$j(jive.eae.activitystream.hideUnhideMenu({activityContainer:w.data,streamType:w.streamType,filterType:w.filterType}));u.find(".j-js-hidden").hide();u.find(".j-js-hide-container").hide();j.addClass("j-js-hide-popover-showing j-hide-popover-showing");u.popover({context:n,darkPopover:true,onClose:function(){j.removeClass("j-js-hide-popover-showing j-hide-popover-showing")}});w.emit("unhidemenu",w.hideData,function(e){if(e.exclusionRules.item||e.exclusionRules.context||e.exclusionRules["type-context"]){u.find(".j-js-hidden").show()}else{$j("a.j-act-hidelink",u).click(function(R){w.emit("hide","item",w.hideData,true);u.trigger("close");R.preventDefault()});$j("a.j-js-hide",u).click(function(S){var R=$j(this);if(R.hasClass("j-js-context")){w.emit("hide","context",w.hideData,true)}else{if(R.hasClass("j-js-type-from-context")){w.emit("hide","type-context",w.hideData,true)}}u.trigger("close");S.preventDefault()});u.find(".j-js-hide-container").show()}})}else{if(k.hasClass("j-act-unhidemenu")){var h=$j(jive.eae.activitystream.hideUnhideMenu({activityContainer:w.data,streamType:w.streamType,filterType:w.filterType}));h.find(".j-js-unhidden").hide();h.find(".j-js-unhide-container").hide();j.addClass("j-js-hide-popover-showing j-hide-popover-showing");h.popover({context:k,darkPopover:true,onClose:function(){j.removeClass("j-js-hide-popover-showing j-hide-popover-showing")}});$j("a.j-js-ok",h).click(function(R){w.emit("unhide",w.hideData,w.unhideData);h.trigger("close");R.preventDefault()});$j("a.j-js-cancel",h).click(function(R){if(h.is(":visible")){h.trigger("close")}R.preventDefault()});w.emit("unhidemenu",w.hideData,function(e){if(e.exclusionRules.item||e.exclusionRules.context||e.exclusionRules["type-context"]){h.find(".j-act-unhiderules").html("");$j.each(e.exclusionRules,function(R,S){if(R=="item"){w.unhideData.itemHidden=true}else{if(R=="context"){w.unhideData.contextHidden=true}else{if(R=="type-context"){w.unhideData.contextTypeHidden=true}}}h.find(".j-act-unhiderules").append("<li>"+S+"</li>")});h.find(".j-js-unhide-container").show()}else{h.find(".j-js-unhidden").show()}})}else{if(J.filter("a.j-js-show-older").length){o=J.filter("a.j-js-show-older").first();var p=j.find("div.j-act-exp-view"),L=p.clone(true);if(!o.hasClass("j-js-loading")){o.addClass("j-js-loading");o.append(jive.eae.activitystream.loadingSpinner());w.fillInMyGaps(L,function(){L.hide();p.after(L);p.remove();L.show();var e=L.find(".j-js-slide-in");if(e.length){e.slideDown(200,"easeInOutExpo",function(){var R=L.find(".j-js-sub-act-to-show");R.unwrap();R.removeClass("j-js-sub-act-to-show")})}o.removeClass("j-js-loading");o.find(".j-loading-spinner").remove()})}}else{t=w.handleClickCommon(k,P,J,j)}}}}}}}}}if(t&&jive.rte.mobileUI&&P.type=="touchend"&&!j.hasClass("j-act-active")&&j.find(".j-preview-trigger").length){w.expandClickHandler(w.getContent().find(".j-preview-trigger").first(),P)}j.addClass("j-act-active");return t};this.postRender=function(){var f=this,e=this.getContent();if(f.data.jiveObject.typeWallEntry){var g="collapsed-attachmentContainer-"+f.data.jiveObject.domIDPostfix;if(g in jive.MicroBlogging.AttachmentView.views){jive.MicroBlogging.AttachmentView.views[g].resize()}}e.delegate("div.j-preview-trigger","mousedown",function(){e.find("span.jive-icon-arrow-down").removeClass("jive-icon-arrow-down").addClass("jive-icon-arrow-down-focus")});e.delegate("div.j-preview-trigger","mouseup",function(){e.find("span.jive-icon-arrow-down-focus").removeClass("jive-icon-arrow-down-focus").addClass("jive-icon-arrow-down")})};this.expandClickHandler=function(g,m){var h=this,l=g;if(!l.hasClass("j-js-loading")){l.addClass("j-js-loading");var k=l.closest("article.j-act-entry"),f=$j(jive.eae.activitystream.loadingSpinner()),n=k.find("div.j-act-exp-view"),j;l.find(".jive-icon-med").hide().after(f);if(n.length&&!n.html()){j=h.buildExpandedView()}else{j=n.clone(true)}h.getFullReplies(j,function(){var e=k.attr("data-objectType"),o=k.attr("data-objectID"),r=k.attr("data-containerType"),u=k.attr("data-containerID");if(j.length){var q=k.hasClass("j-act-grouped"),p=k.find("a.j-show-more"),s=j.find("div.j-sub-activity-items");if(j.css("display")=="none"){var t=s.children("div.j-act-node");if(!q){if(h.streamType!="profile"&&h.data.jiveObject.objectType!=1500&&!h.data.jiveObject.typeTask&&!h.autoFilledOnExpand){h.fillInMyGaps(j,function(){h.autoFilledOnExpand=true;h.switchExpandedCollapsedViews("expanded",j);l.removeClass("j-js-loading");f.remove();l.find(".jive-icon-med").show()})}else{if(h.streamType=="profile"||h.data.jiveObject.objectType==1500||h.data.jiveObject.typeTask){$j(t).each(function(){$j(this).show()})}else{var v=h.data.activityList.filter(function(w){return(w.content.typeComment||w.content.typeMessage)}).length;if(v<h.data.replyCount){j.find("a.j-js-show-older").show()}}h.switchExpandedCollapsedViews("expanded",j);l.removeClass("j-js-loading");f.remove();l.find(".jive-icon-med").show()}}else{p.parent(".j-preview-trigger").hide();n.replaceWith(j);j.slideDown(200,"easeInOutExpo");k.addClass("j-js-expanded j-act-expanded");l.removeClass("j-js-loading");f.remove();l.find(".jive-icon-med").show()}}else{if(!q){h.switchExpandedCollapsedViews("collapsed")}else{p.show();n.slideUp({duration:500,easing:"easeInOutExpo"})}l.removeClass("j-js-loading");f.remove();l.find(".jive-icon-med").show()}}else{l.removeClass("j-js-loading");f.remove();l.find(".jive-icon-med").show()}})}m.preventDefault()};this.switchExpandedCollapsedViews=function(k,j){var h=this,g=h.getContent(),f=g.find("div.j-act-coll-view"),l=g.find("div.j-act-exp-view"),e=g.find("#exp-parent-reply-"+h.data.jiveObject.domIDPostfix);if(k=="expanded"){g.find("span.j-act-expand").text(h.i18n.collapse);f.hide();l.replaceWith(j);j.slideDown(200,"easeInOutExpo",function(){if(!e.length){e=$j(jive.eae.activitystream.expViewParentReplyLink({activityContainer:h.data}));f.after(e)}e.show()});g.addClass("j-js-expanded j-act-expanded")}else{if(k=="collapsed"){g.find("span.j-act-expand").text(h.i18n.expand);if(e.length){e.hide()}l.slideUp({duration:500,easing:"easeInOutExpo"});f.show();g.removeClass("j-js-expanded j-act-expanded")}}};this.fillInMyGaps=function(g,l){var f=this,j=new jive.ActivityStream.FillInTheGapRequest({originalIDs:f.originalCommentIDs,timestamp:f.gapTimestamp,fullContent:true,pageSize:5}),h=f.getContent(),e,k=(f.data.jiveObject.typeThread?f.data.jiveObject.threadID:f.data.jiveObject.id);if(f.data.jiveObject.typeThread){e=1}else{if(f.data.activityList[0].content.commentContentResource&&f.data.activityList[0].content.commentContentResource.objectType==129){e=129}else{e=f.data.jiveObject.objectType}}f.emit("fillInTheGaps",{objectType:e,objectID:k},j,function(t){var w;if(!t.hasMore){g.find("a.j-js-show-older").hide();w=g.find(".j-act-node");$j(w).each(function(){var z=$j(this);if(z.css("display")=="none"){if(g.css("display")!="none"){z.addClass("j-js-sub-act-to-show")}else{z.show()}}})}else{g.find("a.j-js-show-older").show();f.gapTimestamp=t.items[t.items.length-1].creationDate}var p=t.items.length;w=g.find("div.j-sub-activity-items").clone();for(var u=0;u<p;u++){var q=t.items[u],s=false,y=f.data.activityList.length;for(var m=0;m<y;m++){var r=f.data.activityList[m];if(parseInt(r.creationDate,10)>parseInt(q.creationDate,10)){s=true;f.subActivitiesByDomID[q.content.domIDPostfix]=q;var o=$j(jive.eae.activitystream.activityContentExcerpt({activity:q,activityContainer:f.data,isHidden:false,user:f.viewingUserData,streamType:f.streamType,hideStub:true,addedInline:false,forceCurrent:false,canCreateMbImage:false,canCreateMbVideo:false}));o.find(".j-act-preview-control").hide();o.addClass("j-js-sub-act-to-show");if(m==0){w.prepend(o);var v=w.find("#node-collapsed-"+r.content.domIDPostfix);if(v.css("display")=="none"){v.addClass("j-js-sub-act-to-show")}}else{var x=w.find("#node-collapsed-"+f.data.activityList[m-1].content.domIDPostfix);if(x.length){x.after(o)}else{w.prepend(o)}}f.data.activityList.splice(m,0,q);break}}if(!s){f.data.activityList.push(q);f.subActivitiesByDomID[q.content.domIDPostfix]=q;o=$j(jive.eae.activitystream.activityContentExcerpt({activity:q,activityContainer:f.data,isHidden:false,user:f.viewingUserData,streamType:f.streamType,hideStub:true,addedInline:false,forceCurrent:false,canCreateMbImage:false,canCreateMbVideo:false}));o.find(".j-act-preview-control").hide();o.addClass("j-js-sub-act-to-show");w.append(o)}}var n=w.find(".j-js-sub-act-to-show");if($j.browser.msie&&$j.browser.version<=7){f.replaceAroundRTE(g.find("div.j-sub-activity-items"),w)}else{if(g.css("display")!="none"){n.wrapAll('<div class="j-js-slide-in" style="display:none"/>')}f.replaceAroundRTE(g.find("div.j-sub-activity-items"),w)}n.removeClass("j-js-sub-act-to-show");jive.rte.renderedContent.emit("renderedContent",h);f.postRender();if(l){l()}})};this.replaceAroundRTE=function(e,h){var f=e.find("div.j-panel-rte-wrap"),g=h.find("div.j-panel-rte-wrap").index();if(f.length&&g>=0){f.prevAll().remove();f.before(h.children().slice(0,g));f.nextAll().remove();f.after(h.children().slice(1))}else{e.replaceWith(h)}};this.getFullReplies=function(h,l){var f=this,j=f.getContent();if(f.streamType=="profile"&&!f.fullRepliesLoaded&&!f.data.jiveObject.typeMention&&!f.data.jiveObject.typeTask&&f.data.jiveObject.objectType!=1500&&!j.hasClass("j-act-grouped")){var g=new jive.ActivityStream.FullRepliesRequest({originalIDs:f.originalCommentIDs}),e=f.data.jiveObject.objectType,k=(f.data.jiveObject.typeThread?f.data.jiveObject.threadID:f.data.jiveObject.id);if(f.data.jiveObject.typeThread){e=1}else{if(f.data.activityList[0].content.commentContentResource&&f.data.activityList[0].content.commentContentResource.objectType==129){e=129}}f.emit("getFullReplies",{objectType:e,objectID:k},g,function(q){var n=q.items.length;for(var p=0;p<n;p++){var t=q.items[p],r=(f.data.jiveObject.typeThread?t.content.objectType:t.targetObjectType),m=(f.data.jiveObject.typeThread?t.content.id:t.targetObjectID),s=h.find('div.j-act-node[data-objectID="'+m+'"][data-objectType="'+r+'"]');if(s.length){s.find(".j-excerpt-full-html-content").html(jive.eae.activitystream.activityContentText({activity:t,noAutoescape:true}));jive.rte.renderedContent.emit("renderedContent",s);var o=s.find(".j-js-liking-control");if(o.length){o.html(jive.eae.acclaim.activityAcclaimLinkContainer({canLike:$j("[id^=jive-acclaim-like-container-]",o).attr("data-canLike")=="true",uniqueKey:r+"-"+m+"-"+jive.soy.func.randomString(),objectId:m,objectType:r,liked:t.liked,likeCount:t.likeCount}))}}}f.fullRepliesLoaded=true;l()})}else{if(f.streamType=="profile"&&f.data.jiveObject.objectType==1500){f.getLikeData(function(){f.fullRepliesLoaded=true;l()})}else{f.fullRepliesLoaded=true;l()}}};this.showRTE=function(g,f){var j=this,k=f.closest("article.j-act-entry"),l=k.find("section.j-panel-rte");if(!l.length){var h=$j(jive.eae.activitystream.rtePanel({user:j.viewingUserData,hideGuestURLField:(j.data.jiveObject.typeThread?true:false)}));l=h.find("section.j-panel-rte");k.find("div.j-act-coll-view").after(h)}if(l.is(":visible")){l.slideToggle("fast",function(){k.find(".jive-comment-error").hide();if(!f.next().hasClass("j-panel-rte-wrap")){var m=k.find("div.j-panel-rte-wrap").detach();f.after(m);j.initRTE(k,g)}})}else{var e=k.find("div.j-panel-rte-wrap").detach();f.after(e);j.initRTE(k,g)}};this.slideOpenRTE=function(e){var g=this,h=$j("#"+g.rteLocation),f=h.find("section.j-panel-rte");f.css("position","static");f.slideDown("fast",e)};var c=null;function a(){if(c!=null){c.stop()}}function d(){if(c==null){c=new DummyAutoSave(true)}else{c.start()}return c}this.initRTE=function(y,u){var p=u.idPostfix,w={},x=this,r=null,q=null,A=null,s=null,f=null,C=null,l=null,t=null,m=null,o=null,n=null;y.css({zIndex:"5"});x.resetRTE(y);l=(u.parent.jiveObject.typeThread?"discussionReply":"inlineComment");if(u.type=="sub"){r=u.activity.containerObjectType;q=u.activity.containerObjectID;if(l=="discussionReply"){s=jive.util.unescapeHTML(u.activity.content.subject);C=u.parent.jiveObject.threadID;f=u.activity.content.id}else{if(u.parent.jiveObject.typeExternalActivity&&!u.activity.content.typeComment){t=u.objectID;A=u.objectType}else{t=u.parent.jiveObject.id;A=u.parent.jiveObject.objectType;if(u.activity.content.id!=u.parent.jiveObject.id||u.activity.content.objectType!=u.parent.jiveObject.objectType){m=u.activity.content.id}if(u.parent.jiveObject.versionNumber){o=u.parent.jiveObject.versionNumber}}}n=u.activity.activityUser.displayName}else{r=u.parent.container.type;q=u.parent.container.id;if(l=="discussionReply"){s=jive.util.unescapeHTML(u.parent.jiveObject.subject);C=u.parent.jiveObject.threadID;f=u.parent.jiveObject.id}else{if(u.parent.jiveObject.typeExternalActivity){t=u.objectID;A=u.objectType}else{t=u.parent.jiveObject.id;A=u.parent.jiveObject.objectType;if(u.parent.jiveObject.versionNumber){o=u.parent.jiveObject.versionNumber}}}n=u.parent.originalAuthor.displayName}window._jive_video_picker__url="?container="+q+"&containerType="+r;jive.rte.multiRTE=new Array();window.editor=new jive.ext.y.HashTable();var e=new jive.model.Controller(),B="",k=null,v=null,j=null;if(l=="discussionReply"){v="jive.post.message";B=_jive_base_url+"/post!imagePicker.jspa?containerType="+r+"&container="+q+"&message="+f+"&postedFromGUIEditor=true&reply=true";k=_jive_base_url+"/image-picker!clean.jspa"}else{v="jive.post.comment";B=_jive_base_url+"/comment-image-picker.jspa?containerType="+r+"&container="+q+"&postedFromGUIEditor=true&contentObjectType="+A+"&object="+t;k=_jive_base_url+"/comment-image-picker!clean.jspa"}var g=new jive.rte.EntitlementService({objectID:(x.data.jiveObject.typeThread?x.data.jiveObject.threadID:x.data.jiveObject.id),objectType:(x.data.jiveObject.typeThread?1:x.data.jiveObject.objectType),entitlement:"VIEW"});if(v){j=new jive.rte.ImageService({contentResourceSessionKey:v,objectId:"",objectType:-1,containerId:q,containerType:r,sessionPrimerUrl:B,sessionCleanUrl:k})}var z=new jive.rte.FormService({$form:y.find("form.j-panel-rte-view"),formSubmitHandler:function(){$j(this).find("input[type=submit]").attr("disabled","disabled");w.body=x.rteView.getHTML();w.name="";w.email="";var F=y.find(".replyGuestName"),G=y.find(".replyGuestEmail"),E=y.find(".replyGuestUrl"),D=y.find(".jive-comment-error");if(!w.body.length){D.html(x.i18n.empty_comment).show();$j(this).find("input[type=submit]").removeAttr("disabled");return}else{if(F.length&&!F.val()){if(l=="discussionReply"){D.html(x.i18n.reply_empty_name).show()}else{D.html(x.i18n.comment_empty_name).show()}$j(this).find("input[type=submit]").removeAttr("disabled");return}else{if(G.length&&!G.val()){if(l=="discussionReply"){D.html(x.i18n.reply_empty_email).show()}else{D.html(x.i18n.comment_empty_email).show()}$j(this).find("input[type=submit]").removeAttr("disabled");return}else{D.hide()}}}if(F.length){w.name=F.val();w.email=G.val()}if(l=="discussionReply"){w.subject=s;w.forumThreadID=C;w.ID=f;x.emit("replySubmit",w,function(H){y.css("z-index",0);y.find("section.j-panel-rte").slideToggle("fast",function(){if(x.rteView){x.resetRTE(y)}});x.renderReply(p,H,l)},function(I,H){D.html(I).show()})}else{w.ID=t;w.typeID=A;if(F.length){w.url=E.val()}if(x.data.activityList[0].content.commentContentResource&&x.data.activityList[0].content.commentContentResource.objectType==129){w.isBackChannelComment=true}if(m){w.parentCommentID=m}if(o){w.version=o}x.emit("commentSubmit",w,function(H){y.css("z-index",0);y.find("section.j-panel-rte").slideToggle("fast",function(){if(x.rteView){x.resetRTE(y)}});x.renderReply(p,H,l)},function(I,H){D.html(I).show()})}a()}});var h={images_enabled:x.rteOptions.hasImagePerms,imagePickerUrl:B,destroyImagePickerUrl:k,$element:y.find(".wysiwygtext"),controller:e,preset:"mini-w-quote",autoSave:d(),preferredMode:x.rteOptions.preferredMode,startMode:x.rteOptions.startMode,mobileUI:x.rteOptions.mobileUI,isEditing:x.rteOptions.isEditing,toggleText:jive.i18n.getMsg("rte.toggle_display"),alwaysUseTabText:jive.i18n.getMsg("post.alwaysUseThisEditor.tab"),editDisabledText:jive.i18n.getMsg("rte.edit.disabled"),editDisabledSummary:jive.i18n.getMsg("rte.edit.disabled.desc"),communityName:x.rteOptions.communityName,theme_advanced_resizing:false,destinationPosition:y.find("div.j-panel-rte-loading").offset(),height:100,onReady:function(){x.slideOpenRTE(function(){x.rteView.focus()})},services:{imageService:j,formService:z,entitlementService:g}};x.rteLocation=y.attr("id");x.rteView=new jive.rte.RTEWrap(h);y.find(".j-panel-hide-rte-link").unbind();y.find(".j-panel-hide-rte-link").click(function(D){y.find("section.j-panel-rte").slideToggle("fast",function(){y.find(".jive-comment-error").hide()});y.css("z-index",0);x.resetRTE(y);a();D.preventDefault()})};this.showMicroInput=function(f){var g=this,k=f.attr("id"),l=k.split("_")[k.split("_").length-1],j=f.closest("div.j-js-microrte-replyable"),h=$j("#microRTEContainer_"+l);if(!h.length){h=$j(jive.eae.activitystream.microRTEContainer({object:g.data.jiveObject,activityContainer:g.data,user:window._jive_current_user,canAtMention:!g.mobileUI}));j.after(h)}var e=g.initMicroRTEView(l,h);if(h.is(":visible")){g.hideMicroRTEInput(l);if(!j.next().hasClass("j-act-micro-rte")){h.detach();j.after(h);h.fadeIn("fast");e.focus()}}else{h.detach();j.after(h);h.fadeIn("fast");e.focus()}};this.resetRTE=function(e){e.find("section.j-panel-rte").hide();if(this.rteView){this.rteView.destroy();this.rteView=null}if($j(".wysiwygtext",e).length){$j(".wysiwygtext",e).remove()}if(e.find(".replyGuestName").length){e.find(".replyGuestName").val("");e.find(".replyGuestEmail").val("");e.find(".replyGuestUrl").val("")}e.find("form[name=jive-comment-post-form] input[type=submit]").removeAttr("disabled");e.find("form[name=jive-comment-post-form]").prepend(jive.eae.activitystream.rteTextArea())};this.renderReply=function(p,E,l){var y=this,o=y.getContent(),q;if(l=="mbComment"){D=y.data.originalAuthor;q=y.convertDataToActivity(E,{content:{typeWallEntryComment:(y.data.jiveObject.typeWallEntry)?true:false,typeComment:true,parentAuthor:D,domIDPostfix:jive.soy.func.randomString()},activityData:{domIDPostfix:jive.soy.func.randomString()}});y.hideMicroRTEInput(p)}else{if(l=="discussionReply"){q=E;q.likable=true;q.current=true}else{var D,A={},x=y.subActivitiesByDomID[p];if(x){D=x.activityUser;if(x.content.objectType==1501){A.id=x.content.id;A.objectType=x.content.objectType}}else{D=y.data.author}q=y.convertDataToActivity(E,{content:{domIDPostfix:jive.soy.func.randomString(),parentAuthor:D,jsAppActivityRepliedToData:A,typeComment:true},activityData:{domIDPostfix:jive.soy.func.randomString()}})}}q.content.html=y.shiv("<div class='jive-rendered-content'>"+q.content.html+"</div>");q.content.html=$j("<div>").append($j(q.content.html).clone()).remove().html();var n=y.data;n.replyCount=y.data.replyCount+1;n.numCurrent=y.data.numCurrent+1;n.numCurrentSubActivities=y.data.numCurrentSubActivities+1;n.activityList.push(q);var r=o.find("div.j-sub-activity-items"),t=o.find("div.j-act-exp-view"),j=o.find(".j-preview-trigger"),e=$j(jive.eae.activitystream.activityContentExcerpt({activity:q,activityContainer:n,isHidden:false,user:y.viewingUserData,streamType:y.streamType,addedInline:true,hideStub:true,forceCurrent:false,canCreateMbImage:false,canCreateMbVideo:false}));if(t.length&&!r.length){var h=y.buildExpandedView();t.replaceWith(h);t=h;r=h.find("div.j-sub-activity-items")}r.append(e);if(j.length){var k=n.activityList.length,s=$j(jive.eae.carousel.eaeAvatarCarouselItem({content:n.activityList[k-2].content,user:n.activityList[k-2].activityUser})),g=j.find(".j-js-carousel-item:not(.j-ellipsis)"),m=j.find(".j-act-carousel-list");m.prepend(s);if(g.length==3){var u=j.find(".j-js-carousel-item:not(.j-ellipsis)").last();u.remove();var f=j.find(".j-ellipsis").length;if(!f){m.append(jive.eae.carousel.carouselEllipsis())}}}else{var z=$j(jive.eae.activitystream.activityStreamExpandContent({activityContainer:n,streamType:y.streamType,filterType:y.filterType}));t.before(z)}y.originalCommentIDs.push(q.content.id);y.subActivitiesByDomID[q.content.domIDPostfix]=q;var C=$j(jive.eae.activitystream.collapsedActivityStreamExcerpt({activityContainer:n,activity:q,streamType:y.streamType,filterType:y.filterType,hidden:false,user:y.viewingUserData,hideStub:false,canCreateMbImage:false,canCreateMbVideo:false,time:q.creationTime}));C.hide();var w=o.find("div.j-act-coll-view"),B=w.children("div.j-act-node");w.append(C);if(B.length){B.remove()}C.show();var v=y.getContent().find(".j-act-replycount");o.find(".j-new-count").remove();v.each(function(){$j(this).replaceWith(jive.eae.activitystream.replyCountText({activityContainer:y.data,showCurrentCount:(y.streamType=="user"||y.streamType=="all")&&y.filterType=="all"}))});o.addClass("j-replied-to");y.postRender();jive.rte.renderedContent.emit("renderedContent",o)};this.hideMe=function(h,g){var f=this,e=f.getContent();if(g){e.fadeOut("fast",function(){e.find("div.j-js-act-content").hide();var j=e.find("div.j-act-hidden");j.attr("data-hidBy",h);j.html(jive.eae.activitystream.hiddenActivityView({activityContainer:f.data,hidden:f.filterType=="antimatter",type:h}));j.find("a.j-js-unhide").unbind().click(function(l){var k=$j(this).closest(".j-act-hidden").attr("data-hidBy");f.emit("hide",k,f.hideData,false);l.preventDefault()});j.find("a.j-js-dismiss").unbind().click(function(k){j.fadeOut("fast");k.preventDefault()});j.find("a.j-js-rehide").unbind().click(function(k){if(f.unhideData.itemHidden){f.emit("hide","item",f.hideData,true,true)}if(f.unhideData.contextHidden){f.emit("hide","context",f.hideData,true,true)}if(f.unhideData.contextTypeHidden){f.emit("hide","type-context",f.hideData,true,true)}k.preventDefault()});j.show();e.animate({height:"toggle"},{duration:300})})}else{e.fadeOut("fast",function(){var j=e.find("div.j-act-hidden");j.attr("data-hidBy","");j.hide();e.find("div.j-js-act-content").show();e.fadeIn("fast")})}};this.buildExpandedView=function(){var e=this;return $j(jive.eae.activitystream.expandedActivityStreamItemView({activityContainer:e.data,user:e.viewingUserData,streamType:e.streamType,canCreateMbImage:e.canCreateMbImage,canCreateMbVideo:e.canCreateMbVideo}))}});
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamListView=jive.ActivityStream.StreamListCommonView.extend(function(a){this.init=function(b){this._super(b);this.rteOptions=b.rteOptions;this.earliestItemParentTime=0;this.touchmoving=false};this.getSoyTemplate=function(b){return jive.eae.activitystream.activityStreamList(b)};this.postRender=function(){var e=this,d=e.getContent(),f=d.children("article.j-act-entry"),c=f.length;for(var b=0;b<c;b++){e.initStreamItem($j(f[b]),b,true)}e.setUpdatedMarker(d);d.bind("click touchend touchmove",function(k){if(k.type=="touchmove"){e.touchmoving=true}else{if(k.type=="touchend"&&e.touchmoving){e.touchmoving=false}else{var g=$j(k.target),j=g.add(g.parents()),i=g.closest("article.j-act-entry"),h=false;if(i.length){d.find("article.j-act-entry").removeClass("j-act-active");h=e.itemsByDomID[i.attr("id")].handleClick(k,j)}else{if(j.filter("#j-load-more-"+e.streamType).length&&!e.loadMoreInProgress&&(!e.maxLoadMoreTimes||(e.numTimesLoadedMore<e.maxLoadMoreTimes))){e.loadMoreInProgress=true;var m=j.filter("#j-load-more-"+e.streamType);this.spinner=new jive.loader.LoaderView({size:"small",showLabel:false});this.spinner.appendTo(m);var l=this.spinner;m.find(".j-more-label").hide();e.emit("loadMore",""+e.earliestItemParentTime,function(p){if(p.activityStream4JS.activityContainerList.length){p.streamType=e.streamType;p.filterType=e.filterType;e.data=p.activityStream4JS;e.prevRefreshTime=p.activityStream4JS.prevRefreshTime;var r=$j(e.getSoyTemplate(p));if(r.filter(".j-act-streaminfo").length){r.splice(0,1)}e.numTimesLoadedMore++;if(r.filter("a.j-js-load-more").length&&e.numTimesLoadedMore==e.maxLoadMoreTimes){r.splice(r.length-1,1);r=r.add(jive.eae.activitystream.maxPagesReached())}e.append(r);r.hide();r.fadeIn(2000);if(l){l.getContent().fadeOut(200,function(){l.getContent().remove();l.destroy()})}m.find(".j-more-label").show();var q=r.filter("article.j-act-entry"),o=q.length;for(var n=0;n<o;n++){e.initStreamItem($j(q[n]),n,true)}if(e.streamType!="context"&&e.streamType!="profile"&&(!e.maxLoadMoreTimes||e.numTimesLoadedMore<3)){e.setUpdatedMarker(d)}}m.remove();e.loadMoreInProgress=false})}}if(h){return true}k.preventDefault()}}})};this.initStreamItem=function(e,i,h){var g=this,b=g.data.activityContainerList[i],d=e.attr("id"),f=new jive.ActivityStream.ActivityStreamItemView({selector:g.selector+"  #"+d,id:d,data:b,i18n:g.i18n,viewingUserData:g.data.viewingUser,streamType:g.streamType,filterType:g.filterType,rteOptions:g.rteOptions,canCreateMbImage:g.data.canCreateMbImage,canCreateMbVideo:g.data.canCreateMbVideo});g.itemsByDomID[d]=f;var c=parseInt(b.parentTimestamp,10);if(c<g.earliestItemParentTime||g.earliestItemParentTime==0){g.earliestItemParentTime=c}f.addListener("replySubmit",function(l,k,j){g.emit("replySubmit",l,k,j)}).addListener("commentSubmit",function(l,k,j){g.emit("commentSubmit",l,k,j)}).addListener("mbCommentSubmit",function(l,k,j){g.emit("mbCommentSubmit",l,k,j)}).addListener("repostSubmit",function(l,k,j){g.emit("repostSubmit",l,k,j)}).addListener("linkURLMatch",function(j,k){g.emit("linkURLMatch",j,k)}).addListener("getLikeData",function(j,l){for(var k=0;k<j.length;k++){g.emit("getLikeData",j[k].type,j[k].id,l)}}).addListener("getFullContent",function(j,k){g.emit("getFullContent",j,k)}).addListener("getFullReplies",function(j,k,l){g.emit("getFullReplies",j,k,l)}).addListener("hide",function(l,m,k,j){g.emit("hide",l,m,k,j,function(r,s,q,o){var n=q;if(o){n=false}for(var p=0;p<g.streamListItems.length;p++){g.streamListItems[p].determineHidden(r,s,n)}})}).addListener("unhidemenu",function(j,k){g.emit("unhidemenu",j,k)}).addListener("unhide",function(j,k){g.emit("unhide",j,k,function(m,n){for(var l=0;l<g.streamListItems.length;l++){if(n.itemHidden){g.streamListItems[l].determineHidden("item",m,true)}if(n.contextTypeHidden){g.streamListItems[l].determineHidden("type-context",m,true)}if(n.contextHidden){g.streamListItems[l].determineHidden("context",m,true)}}})}).addListener("track",function(j,k,l){g.emit("track",j,function(m){l()})}).addListener("fillInTheGaps",function(j,k,l){g.emit("fillInTheGaps",j,k,l)});f.postRender();if(h){g.streamListItems.push(f)}else{return f}};this.refresh=function(f){var l=this,b=l.getContent();f.streamType=l.streamType;var j=$j(l.getSoyTemplate(f));l.data=f.activityStream4JS;l.prevRefreshTime=f.activityStream4JS.prevRefreshTime;var e=j.filter("article.j-act-entry");b.find("article.j-act-entry, #j-load-more-"+l.streamType+", .j-max-pages-reached").remove();l.streamListItems=[];l.autoLoadMoreTimesLeft=4;l.numTimesLoadedMore=0;l.earliestItemParentTime=0;var k=b.find("div.j-act-empty-list");if(e.length&&k.length){k.remove()}b.find("div.j-act-pagepoll").after(j);j.hide();$j("#j-js-"+l.streamType).show();j.show();var g=[];e=j.filter("article.j-act-entry");var h=e.length;for(var d=0;d<h;d++){var c=l.initStreamItem($j(e[d]),d,false);g.push(c)}l.streamListItems=g.concat(l.streamListItems);l.setUpdatedMarker(b)};this.removeUpdatedMarkers=function(){var c=this,b=c.getContent();$j("#j-js-updated-marker-"+c.streamType).remove();b.find("article.j-last-updated").removeClass("j-last-updated")};this.setUpdatedMarker=function(j){var h=[],g=this,c=j.find("article.j-act-entry");for(var f=0,e=c.length;f<e;f++){var d=$j(c[f]);var b=parseInt(g.itemsByDomID[d.attr("id")].getParentTimestamp(),10);if(g.filterType=="all"&&b&&b>g.prevRefreshTime){h.unshift(d)}}if(h.length){g.removeUpdatedMarkers();if(!(h[0].next().length&&$j(h[0].next()[0]).is("#j-load-more-"+g.streamType))){h[0].append(jive.eae.activitystream.updatedMarker({streamType:g.streamType}));h[0].addClass("j-last-updated")}h=[]}}});
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamExclusion=$Class.extend({init:function(a){this.action=a.excludeAction;this.userID=a.userID;this.interactedObjectType=a.interactedObjectType;this.interactedObjectID=a.interactedObjectID},setObjectType:function(a){this.objectType=a},setObjectID:function(a){this.objectID=a},setContentType:function(a){this.contentType=a}});
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamExclusionInfo=$Class.extend({init:function(a){this.userID=a.userID;this.objectType=a.objectType;this.objectID=a.objectID;this.containerType=a.containerType;this.containerID=a.containerID;this.interactedObjectType=a.interactedObjectType;this.interactedObjectID=a.interactedObjectID}});
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamExclusionRules=$Class.extend({init:function(a){this.exclusionRules=a.exclusionRules}});
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityStreamControllerMain=jive.oo.Class.extend(function(a){this.init=function(b){var c=this;c.ie7=$j.browser.msie&&$j.browser.version<8;if(c.ie7){$j.fx.off=true}c.userId=window._jive_effective_user_id;c.rteOptions=b.rteOptions;c.mobileUI=b.rteOptions.mobileUI;c.contextObjectType=b.contextObjectType;c.contextObjectID=b.contextObjectID;c.streamType=b.streamType;c.streamTypeID=b.streamTypeID;c.tabViewSelector=b.tabViewSelector;c.i18n=b.i18n;c.getMoreStreamType=b.getMoreStreamType;c.widgetID=b.widgetID;c.filterType=b.filterType?b.filterType:"all";if(c.rteOptions.hasImagePerms!=undefined){window._jive_images_enabled=c.rteOptions.hasImagePerms}c.commentServiceOptions={listAction:"",location:"jive-comments",commentMode:"comments",isPrintPreview:false};c.listService=new jive.ActivityStream.StreamSource();c.trackingService=new jive.TrackingApp.TrackingSource();c.streamList=new jive.ActivityStream.ActivityStreamListView({selector:"#j-"+c.streamType+"-all-list"+(c.widgetID?"-"+c.widgetID:""),i18n:c.i18n,data:(c.filterType=="all"?b.data:{}),streamType:c.streamType,filterType:"all",lastRefreshTime:b.savedRefreshTime,prevRefreshTime:b.prevRefreshTime,rteOptions:c.rteOptions,widgetID:c.widgetID});if(c.filterType!="all"){c.filteredList=new jive.ActivityStream.ActivityStreamListView({selector:"#j-"+c.streamType+"-"+c.filterType+"-list",i18n:c.i18n,data:b.data,streamType:c.streamType,filterType:c.filterType,rteOptions:c.rteOptions});c.attachListHandlers(c.filteredList);c.filteredList.postRender()}else{c.filteredList=null}c.streamList.postRender();c.currentFilterApplied=c.filterType;c.disscusionService=new jive.DiscussionApp.DiscussionRestSource();c.disscusionService.suppressGenericErrorMessages();c.microbloggingService=new jive.MicroBlogging.MicroBloggingSource();c.liking=new jive.Liking.LikeSource({});c.metaService=new jive.MetaSource();c.draftWallEntry=null;c.attachListHandlers(c.streamList);c.$filterLinks=$j("#"+c.streamType+"-filterlinks");$j("a",c.$filterLinks).unbind();$j("a",c.$filterLinks).click(function(g){var f=$j(this),d=f.attr("data-filterName");if(d!=c.currentFilterApplied){c.filter(d);c.$filterLinks.find("a").removeClass("j-sub-selected");f.addClass("j-sub-selected")}g.preventDefault()});c.streamLoaded=false;if(c.filterType=="all"&&b.data){c.streamLoaded=true}};this.tabClicked=function(b,c,f){var d=this;this.spinner=new jive.loader.LoaderView({size:"small"});this.spinner.prependTo($j("#j-activity-streams-wrapper"));var e=this.spinner;if(d.currentFilterApplied!="all"){$j("#j-"+d.streamType+"-"+d.currentFilterApplied+"-list").remove();$j("#j-"+d.streamType+"-all-list").css("display","block");d.resetFilter();d.currentFilterApplied="all"}if(b>0&&this.streamLoaded){d.listService.list({userId:d.userId,streamType:d.streamType,filterType:d.currentFilterApplied},"0").addCallback(function(g){g.streamType=d.streamType;d.streamList.refresh(g);e.getContent().remove();e.destroy();if(d.streamType!="user"){if(jive.ActivityStream.StreamController){jive.ActivityStream.StreamController.hideStream()}}else{if(jive.ActivityStream.AllStreamController){jive.ActivityStream.AllStreamController.hideStream()}}jive.ActivityStream.TabCountsController.select(d.streamType);f()})}else{if(!this.streamLoaded){d.listService.getMore({objectType:d.contextObjectType,objectID:d.contextObjectID,streamType:d.streamType,filterType:d.currentFilterApplied},"0").addCallback(function(g){if(g.activityStream.activityContainerList.length){g.streamType=d.streamType;d.streamList.refresh(g)}else{$j("#j-js-"+d.streamType).show()}e.getContent().remove();e.destroy();if(d.streamType!="user"){if(jive.ActivityStream.StreamController){jive.ActivityStream.StreamController.hideStream()}}else{if(jive.ActivityStream.AllStreamController){jive.ActivityStream.AllStreamController.hideStream()}}$j("#j-"+d.streamType+"-all-list").show();jive.ActivityStream.TabCountsController.select(d.streamType);f()})}else{e.getContent().remove();e.destroy();if(d.streamType!="user"){if(jive.ActivityStream.StreamController){jive.ActivityStream.StreamController.hideStream()}}else{if(jive.ActivityStream.AllStreamController){jive.ActivityStream.AllStreamController.hideStream()}}$j("#j-js-"+d.streamType).show();jive.ActivityStream.TabCountsController.select(d.streamType);f()}}this.streamLoaded=true};this.filter=function(c){var e=this;if(c!="all"){this.spinner=new jive.loader.LoaderView({size:"small"});this.spinner.prependTo($j("#j-activity-streams-wrapper"));var f=this.spinner;var b=e.streamType;var d=c;if(c=="antimatter"){b="antimatter";d="all"}e.listService.getMore({objectType:e.contextObjectType,objectID:e.contextObjectID,streamType:b,filterType:d},"0").addCallback(function(i){var g=$j(jive.eae.activitystream.activityStreamFilteredList({activityStream:i.activityStream,streamType:e.streamType,filterType:c,mobileUI:e.mobileUI})),h=$j("#j-"+e.streamType+"-"+e.currentFilterApplied+"-list");$j("#j-"+e.streamType+"-all-list").after(g);e.filteredList=new jive.ActivityStream.ActivityStreamListView({selector:"#j-"+e.streamType+"-"+c+"-list",i18n:e.i18n,data:i.activityStream4JS,streamType:e.streamType,filterType:c,rteOptions:e.rteOptions});h.hide();if(e.currentFilterApplied!="all"){h.remove()}e.filteredList.postRender();e.attachListHandlers(e.filteredList);f.getContent().remove();f.destroy();e.currentFilterApplied=c})}else{this.spinner=new jive.loader.LoaderView({size:"small"});this.spinner.prependTo($j("#j-activity-streams-wrapper"));f=this.spinner;e.listService.getMore({objectType:e.contextObjectType,objectID:e.contextObjectID,streamType:e.streamType,filterType:c},"0").addCallback(function(g){g.streamType=e.streamType;e.streamList.refresh(g);$j("#j-"+e.streamType+"-"+e.currentFilterApplied+"-list").remove();$j("#j-"+e.streamType+"-all-list").show();f.getContent().remove();f.destroy();e.currentFilterApplied="all";if(jive.ActivityStream.TabCountsController.hasTabView(e.streamType)){jive.ActivityStream.TabCountsController.resetCounts(e.streamType)}})}};this.resetFilter=function(){var b=this;b.$filterLinks.find("a").removeClass("j-sub-selected");b.$filterLinks.find("a[data-filtername=all]").addClass("j-sub-selected")};this.attachListHandlers=function(c){var b=this;c.addListener("replySubmit",function(g,f,d){var e=$j(g.body).text();b.disscusionService.createMessage(g).addCallback(function(h){h.content.text=e;f(h)}).addErrback(function(i,h){d(i,h)})}).addListener("commentSubmit",function(h,g,d){b.commentServiceOptions.resourceID=h.ID;b.commentServiceOptions.resourceType=h.typeID;b.commentServiceOptions.contentObject={document:h.ID,version:h.version};var e="comments";if(h.isBackChannelComment){e="backchannel"}b.commentServiceOptions.commentMode=e;b.commentService=new jive.CommentApp.CommentSource(b.commentServiceOptions);b.commentService.suppressGenericErrorMessages();var f=new jive.CommentApp.Comment({body:h.body,commentMode:e,parentCommentID:h.parentCommentID,name:h.name,email:h.email,url:h.url});b.commentService.save(f).addCallback(function(i){g(i)}).addErrback(function(j,i){d(j,i);return false})}).addListener("getLikeData",function(d,f,e){b.liking.getLikeData(d,f).addCallback(function(g){e(d,f,g)})}).addListener("hide",function(g,h,e,d,j){var f="exclude";if(!e){f="include"}var i=new jive.ActivityStream.ActivityStreamExclusion({userID:b.userId,excludeAction:f,interactedObjectType:h.objectType,interactedObjectID:h.objectID});if(g=="item"){i.setObjectType(h.objectType);i.setObjectID(h.objectID)}else{if(g=="context"){i.setObjectType(h.containerType);i.setObjectID(h.containerID)}else{if(g=="type-context"){i.setObjectType(h.containerType);i.setObjectID(h.containerID);i.setContentType(h.objectType)}}}b.listService.exclude(g,i).addCallback(function(k){j(g,k,e,d)})}).addListener("loadMore",function(e,h){var f=b.streamType,g=b.currentFilterApplied,d=b.getMoreStreamType;if(d){f=d;g="all"}else{if(b.currentFilterApplied=="antimatter"){f="antimatter";g="all"}}b.listService.getMore({objectType:b.contextObjectType,objectID:b.contextObjectID,streamType:f,filterType:g},e).addCallback(function(i){h(i)})}).addListener("unhidemenu",function(e,f){var d=new jive.ActivityStream.ActivityStreamExclusionInfo({userID:b.userId,objectType:e.objectType,objectID:e.objectID,containerType:e.containerType,containerID:e.containerID,interactedObjectType:e.objectType,interactedObjectID:e.objectID});b.listService.exclusionRules(d).addCallback(function(g){f(g)})}).addListener("unhide",function(e,f,g){var d=new jive.ActivityStream.ActivityStreamExclusionInfo({userID:b.userId,objectType:e.objectType,objectID:e.objectID,containerType:e.containerType,containerID:e.containerID,interactedObjectType:e.objectType,interactedObjectID:e.objectID});e.interactedObjectType=e.objectType;e.interactedObjectID=e.objectID;b.listService.removeExclusions(d).addCallback(function(){g(e,f)});b.streamLoaded=false}).addListener("track",function(d,e){b.trackingService.save({objectType:d.objectType,objectID:d.objectID}).addCallback(function(){$j(jive.eae.activitystream.itemSuccessfullyTrackedMessage()).message();e(d)})}).addListener("getFullContent",function(d,f){if(d.containerType&&d.containerID){var e=new jive.PollWidget.WidgetSource({containerType:d.containerType,containerID:d.containerID});e.getPollByID(d.objectID,{success:function(h){if(h){var g={containerType:d.containerType,containerID:d.containerID,widgetID:jive.soy.func.randomString(),moreUrl:"#",createUrl:"#",canCreatePoll:false,poll:h,location:"activity-stream"};f(jive.polls.widget.soy.main(g),g)}}})}else{b.listService.getFullContent(d.objectType,d.objectID).addCallback(function(g){f(g)})}}).addListener("getFullReplies",function(d,e,f){b.listService.getFullReplies(d.objectType,d.objectID,e).addCallback(function(g){f(g)})}).addListener("updatePrevRefreshTime",function(d,e){b.listService.updatePrevRefreshTime(d,e).addCallback(function(){})}).addListener("fillInTheGaps",function(d,e,f){b.listService.fillInTheGaps(d.objectType,d.objectID,e).addCallback(function(g){f(g)})})};this.hideStream=function(){var b=this;$j("#j-js-"+b.streamType).hide();jive.ActivityStream.TabCountsController.deselect(b.streamType)};this.setStreamLoaded=function(b){this.streamLoaded=b}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.profilestream=="undefined"){jive.eae.profilestream={}}jive.eae.profilestream.profileStream=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"$j(document).ready(function() {var streamI18n = {likes: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.likes"),[]))+"', comments: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.comments"),[]))+"', tracked: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.tracked"),[]))+"', untracked: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[]))+"', lessthanaminago: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[]))+"', expand: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.expand"),[]))+"', collapse: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.collapse"),[]))+"', repost_success: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.success"),[]))+"', empty_comment: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.cannot_be_empty.text"),[]))+"', comment_empty_name: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.name_required.text"),[]))+"', comment_empty_email: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.email_required.text"),[]))+"', reply_empty_name: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.name_required.text"),[]))+"', reply_empty_email: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.email_required.text"),[]))+"'}; jive.ActivityStream.ProfileStreamController = new jive.ActivityStream.ActivityStreamControllerMain({contextObjectType: "+soy.$$escapeHtml(A.targetUser.objectType)+", contextObjectID: "+soy.$$escapeHtml(A.targetUser.id)+", streamType: '"+soy.$$escapeHtml(A.streamType)+"', filterType: "+((!A.filterStatus||!A.canViewStatusUpdates)?"'all'":"'statusupdates'")+", streamTypeID: '5', streamLoaded: "+((!A.filterStatus)?"true":"false")+", i18n:streamI18n, rteOptions: {preferredMode:'"+soy.$$escapeHtml(A.preferredMode)+"', startMode:'"+soy.$$escapeHtml(A.startMode)+"', mobileUI:"+soy.$$escapeHtml(A.mobileUI)+", isEditing:"+soy.$$escapeHtml(A.isEditing)+", communityName:'"+soy.$$escapeHtml(A.communityName)+"', hasImagePerms:"+soy.$$escapeHtml(A.hasImagePerms)+"}, data:"+JSON.stringify(A.activityStream).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+"});});"},B);B.append((A.canViewStatusUpdates)?'<div class="j-act-listfilters clearfix"><ul id="profile-filterlinks"><li><a data-filterName=\'all\' href="#" class="'+((!A.filterStatus)?"j-sub-selected":"")+' j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.all"),[]))+"</a></li>"+((A.statusUpdatesEnabled)?'<li><a data-filterName=\'statusupdates\' href="#" class="'+((A.filterStatus)?"j-sub-selected":"")+' j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.statusupdates"),[]))+"</a></li>":"")+"</ul></div>":"",'<div id="j-activity-streams-wrapper" class="j-stream"><div id="previewable-binary-viewer"></div><div id="j-js-',soy.$$escapeHtml(A.streamType),'" class="j-act j-activity-stream ',(!A.mobileUI)?"j-not-mobile":""," j-profile-stream j-stream-list\"><div id='j-",soy.$$escapeHtml(A.streamType),'-all-list\'><div class="j-act-pagepoll clearfix" id="j-',soy.$$escapeHtml(A.streamType),'-updates" style="display:none;"></div>');if(!A.filterStatus||!A.canViewStatusUpdates){jive.eae.activitystream.activityStreamList({activityStream:A.activityStream,streamType:A.streamType,mobileUI:A.mobileUI},B)}B.append("</div>");if(A.filterStatus&&A.canViewStatusUpdates){B.append("<div id='j-",soy.$$escapeHtml(A.streamType),'-statusupdates-list\' class="j-act">');jive.eae.activitystream.activityStreamList({activityStream:A.activityStream,streamType:A.streamType,filterType:"statusupdates",mobileUI:A.mobileUI},B);B.append("</div>")}B.append("</div></div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.recommendation=="undefined"){jive.eae.recommendation={}}jive.eae.recommendation.recommendedForYou=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-recommendation-group j-recommendation-group-single">');if(A.recommendations.length>0){B.append('<ul class="j-recommendations clearfix">');var E=A.recommendations;var F=E.length;for(var C=0;C<F;C++){var D=E[C];B.append('<li class="j-recommendation j-js-recommendation" data-recommendationid="',soy.$$escapeHtml(D.id),'">');jive.eae.recommendation.recommendation({recommendation:D},B);B.append("</li>")}B.append("</ul>")}else{jive.eae.recommendation.noRecommendations(null,B)}B.append("</div>");if(!G){return B.toString()}};jive.eae.recommendation.activityTrendyContent=function(B,G){var C=G||new soy.StringBuilder();if(B.recommendations.length>0){C.append('<ul class="j-activity-trendy j-js-activity-trendy">');var E=B.recommendations;var F=E.length;for(var A=0;A<F;A++){var D=E[A];C.append('<li class="j-recommendation',(A==0)?" j-trendy-first j-trendy-active":(A==F-1)?" j-trendy-last":"",'"><span class="j-item-number font-color-meta" style="display:none;">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trendy.itemNumber"),[A+1])),'</span><a class="j-title" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,D.link)),'"><span class="jive-icon-med ',soy.$$escapeHtml(D.iconCss),' j-recommendation-title-icon"></span>',D.subject,"</a>");if(D.prop.activityInfo){C.append('<div class="j-activity-info font-color-meta clearfix">');jive.eae.recommendation.activityInfoItem({recommendation:D,icon:"like",count:D.prop.activityInfo.likeCount,type:"like",showLink:true},C);jive.eae.recommendation.activityInfoItem({recommendation:D,icon:"comment",count:D.prop.activityInfo.replyCount,type:"reply",showLink:false},C);C.append("</div>")}C.append("</li>")}C.append("</ul>",(B.canLoadMore)?'<div class="j-preview-trigger j-view-more-trigger"><a class="j-show-more j-rc6" href="#" data-event="loadMore"><span class="jive-icon-med jive-icon-arrow-down"></span><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trendy.loadMore"),[]))+"</strong></span></a></div>":"")}else{jive.eae.recommendation.noRecommendations(null,C)}if(!G){return C.toString()}};jive.eae.recommendation.leaderboard=function(A,G){var C=G||new soy.StringBuilder();if(A.recommendations.length>0){C.append('<ul class="j-activity-leaderboard j-js-activity-leaderboard">');var E=A.recommendations;var F=E.length;for(var B=0;B<F;B++){var D=E[B];C.append('<li class="j-trending-user',(B==0)?" j-trendy-first":(B==F-1)?" j-trendy-last":"",'">');jive.shared.displayutil.avatar(soy.$$augmentData(D,{size:46}),C);C.append("</li>")}C.append("</ul>")}else{jive.eae.recommendation.noRecommendations(null,C)}if(!G){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.token=="undefined"){jive.shared.token={}}jive.shared.token.jiveToken=function(A,C){var B=C||new soy.StringBuilder();B.append((A.isForm)?'<input type="hidden" name="jive.token.name" value="'+soy.$$escapeHtml(A.name)+'"/><input type="hidden" name="'+soy.$$escapeHtml(A.name)+'" value="'+soy.$$escapeHtml(A.tokenGUID)+'"/>':soy.$$escapeHtml(A.tokenGUID));if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.form=="undefined"){jive.shared.form={}}jive.shared.form.datepicker=function(A,C){var B=C||new soy.StringBuilder();jive.shared.form.datepickerHelper(soy.$$augmentData(A,{id:(A.id)?soy.$$escapeHtml(A.id):"js-datepicker-"+soy.$$escapeHtml(jive.soy.func.randomString())}),B);if(!C){return B.toString()}};jive.shared.form.datetimepicker=function(A,C){var B=C||new soy.StringBuilder();jive.shared.form.datepickerHelper(soy.$$augmentData(A,{id:(A.id)?soy.$$escapeHtml(A.id):"js-datepicker-"+soy.$$escapeHtml(jive.soy.func.randomString()),showstime:true}),B);if(!C){return B.toString()}};jive.shared.form.datepickerHelper=function(A,C){var B=C||new soy.StringBuilder();B.append('<input type="text" class="jive-form-textinput-variable j-form-datepicker j-form-picker',(A["class"])?" "+A["class"]:"",'" id="',A.id,'"',(A.name)?'name="'+A.name+'"':"",'data-date="',A.value,'" /><a href="#" id="',A.id,'_button" class="j-form-datepicker-btn"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/calendar/calendar.gif")),'" width="34" height="21" border="0" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.datepicker.tooltip"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.datepicker.tooltip"),[])),'" /></a>');if(typeof (A.initialize)=="undefined"||A.initialize){jive.shared.soy.resourceInlineJs({code:"jQuery(document).ready(function() {Zapatec.Calendar.bootstrap({inputField: '"+soy.$$escapeJs(A.id)+"' , button: '"+soy.$$escapeJs(A.id)+"_button'"+((A.value)?", date: new Date("+soy.$$escapeHtml(A.value)+")":"")+((A.format)?", ifFormat: '"+soy.$$escapeJs(A.format)+"'":"")+((A.showstime)?", showsTime: true":"")+", step: 1});});"},B)}if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.breadcrumb=="undefined"){jive.shared.breadcrumb={}}jive.shared.breadcrumb.contextMenu=function(H,F){var C=F||new soy.StringBuilder();if(H.place){C.append('<a href="#" id="j-place-parents-link" class="j-context-more j-ui-elem" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.breadcrumb.button.label"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.breadcrumb.button.label"),[])),'</a><div id="j-place-parents-container" class="j-action-popover j-breadcrumb-popover" style="display: none"><ul><li><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/places")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.breadcrumb.place.link"),[])),"</a>");if(H.parents.length>0){var G=H.parents;var A=G.length;for(var J=0;J<A;J++){var D=G[J];C.append("<ul><li>",(D.viewableByUser)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,D.objectURL))+'"><span class="jive-icon-med '+soy.$$escapeHtml(D.iconCssClass)+'"></span> '+soy.$$escapeHtml(D.name)+"</a>":'<span><span class="jive-icon-med '+soy.$$escapeHtml(D.iconCssClass)+'"></span> '+soy.$$escapeHtml(D.name)+"</span>",'<span class="jive-icon-sml jive-icon-arrow-breadcrumb"></span>')}}C.append('<ul><li><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,H.place.objectURL)),'" class="last-child"><span class="jive-icon-med ',soy.$$escapeHtml(H.place.iconCssClass),'"></span> ',soy.$$escapeHtml(H.place.name),"</a></li></ul>");if(H.parents.length>0){var I=H.parents;var B=I.length;for(var K=0;K<B;K++){var E=I[K];C.append("</li></ul>")}}C.append("</li></ul></div>")}if(!F){return C.toString()}};jive.shared.breadcrumb.legacyBreadcrumbs=function(C,G){var D=G||new soy.StringBuilder();if(C.place){D.append((C.showHomeURL)?(C.fullHomeURL)?'<a href="'+soy.$$escapeHtml(C.homeURL)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.home"),[]))+"</a>":'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/"))+soy.$$escapeHtml(C.homeURL)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.home"),[]))+"</a>":"",(!C.userContainer)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/places"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.breadcrumb.place.link"),[]))+"</a>":'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.breadcrumb.people.link"),[]))+"</a>");if(C.parents.length>0){var B=C.parents;var F=B.length;for(var E=0;E<F;E++){var A=B[E];D.append((A.viewableByUser)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.objectURL))+'">'+soy.$$escapeHtml(A.name)+"</a>":"<span class='jive-breadcrumb-unauthorized' title='"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("community.list.spaces.unauthorized.tooltip"),[]))+"'>"+soy.$$escapeHtml(A.name)+"</span>")}}D.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,C.place.objectURL)),'">',soy.$$escapeHtml(C.place.name),"</a>")}if(!G){return D.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}jive.eae.acclaim.acclaimActivity=function(A,D){var B=D||new soy.StringBuilder();if(A.activity.groupedUsers){jive.eae.activitystream.groupedUsers({groupedUserList:A.activity.groupedUsers,user:A.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B)}else{if(!A.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activity.activityUser,{displayNameOverride:(A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),B)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activity.content},B)}}if(A.activity.content.displayContentOwner){B.append(" ");if(A.activity.content.yourAcclaim){B.append((A.activity.groupedUsers&&A.activity.groupedUsers.length>1||A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.XlikeYour"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.XlikesYour"),[])))}else{var C=new soy.StringBuilder();if(!A.activity.content.likedContentOwner.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activity.content.likedContentOwner,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activity.content},C)}jive.shared.soy.i18nHelper({i18nKey:A.activity.groupedUsers&&A.activity.groupedUsers.length>1||A.user.id==A.activity.activityUser.id?"eae.liking.XlikeY":"eae.liking.XlikesY",arg0:C.toString(),noAutoEscape:true},B)}B.append(" ")}else{B.append(" ",(A.activity.groupedUsers&&A.activity.groupedUsers.length>1||A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.Xlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.Xlikes"),[]))," ")}B.append((A.activity.content.likedContent.hasi18nTextKey&&A.activity.content.likedContent.objectType!=801)?" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.activity.content.likedContent.i18nTextKey),[]))+" ":"",' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.likedContent.jiveObjectURL),'">',(A.activity.content.likedContent.jiveObjectIconLink)?A.activity.content.likedContent.jiveObjectIconLink:'<span class="'+soy.$$escapeHtml(A.activity.content.likedContent.jiveObjectCSS)+'"></span>','<span class="j-item">',A.activity.content.likedContent.subject,"</span></a>");if(!D){return B.toString()}};jive.eae.acclaim.activityAcclaimLinkContainer=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-icon-sml jive-',(A.showGlyph)?"glyph":"icon",'-like"></span><span id="acclaim-container-',soy.$$escapeHtml(A.objectType),"-",soy.$$escapeHtml(A.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtml(A.objectType),"-",soy.$$escapeHtml(A.objectId),'" data-uniqueKey="',soy.$$escapeHtml(A.objectType),"-",soy.$$escapeHtml(A.objectId),'" data-ratingType="like" data-hasVoted="',soy.$$escapeHtml(A.liked),'" data-likes="',soy.$$escapeHtml(A.likeCount),'" data-canLike="',soy.$$escapeHtml(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtml(A.type):"mini",'" class="js-acclaim-container acclaim-like-container font-color-meta-light"><span class="j-social-action">');jive.eae.acclaim.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unlike":"like",classes:"jive-acclaim-likelink"}),B);B.append(" ");jive.eae.acclaim.count(soy.$$augmentData(A,{command:"showLikes",count:A.likeCount,classes:"jive-acclaim-likedlink",text:"("+soy.$$escapeHtml(A.likeCount)+")"}),B);B.append("</span></span></span>");if(!C){return B.toString()}};jive.eae.acclaim.acclaimLikingControl=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer(A,B);B.append("</span>");if(!C){return B.toString()}};jive.eae.acclaim.acclaimContainerMedium=function(A,C){var B=C||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unlike":"like",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><span class="jive-icon-med jive-icon-like"></span>',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])),"</span>")}jive.eae.acclaim.count(soy.$$augmentData(A,{command:"showLikes",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink"}),B);B.append("</span>");if(!C){return B.toString()}};jive.eae.acclaim.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?"<a "+((A.id)?'id="'+soy.$$escapeHtml(A.id)+'"':"")+((A.classes)?'class="'+soy.$$escapeHtml(A.classes)+'"':"")+'data-command="'+soy.$$escapeHtml(A.type)+'" data-object-id="'+soy.$$escapeHtml(A.objectId)+'" data-object-type="'+soy.$$escapeHtml(A.objectType)+'" title="'+((A.type=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])))+"</a>":((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])));if(!C){return B.toString()}};jive.eae.acclaim.count=function(A,C){var B=C||new soy.StringBuilder();B.append("<a ",(A.id)?'id="'+soy.$$escapeHtml(A.id)+'"':"",(A.classes)?'class="'+soy.$$escapeHtml(A.classes)+'"':"",'data-command="',soy.$$escapeHtml(A.command),'" data-object-id="',soy.$$escapeHtml(A.objectId),'" data-object-type="',soy.$$escapeHtml(A.objectType),'" data-count="',soy.$$escapeHtml(A.count),'" href="#">',(A.text)?A.text:soy.$$escapeHtml(A.count),"</a>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}jive.eae.acclaim.groupedActivityStreamTemplate=function(A,G){var B=G||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),(A.streamType=="context")?"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix):"",'" class="j-act-entry j-act-grouped j-act-acclaim clearfix j-act-not-markable"><div class="j-js-act-content j-act-content"><div class="j-act-title"><span class="jive-icon-med jive-icon-acclaim"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.group.header"),[])),"</div><div class='j-latest-acclaim-subhead'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.acclaim.group.subhead"),[])),'</div><div class="',(A.activityContainer.activityList.length>5)?"j-act-coll-view":"",' collapsed clearfix"><section><ul>');var E=A.activityContainer.activityList;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(D<5){B.append("<li>");jive.eae.activitystream.activityView({activity:C,showAvatar:false,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,fromTemplate:"latest_acclaim"},B);B.append("</li>")}}B.append("</ul></section>",(A.activityContainer.activityList.length>5)?'<div class="j-preview-trigger j-view-more-trigger"><a href="#" class="j-show-more j-js-show-all"><span class="jive-icon-med jive-icon-arrow-down"></span><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.more"),[]))+'</strong></span></a><a href="#" class="j-collapse j-show-less j-js-show-all" style="display:none"><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.less"),[]))+"</strong></span></a></div>":"",'</div><div class="j-act-exp-view expanded clearfix" style="display:none;"></div></div></article>');if(!G){return B.toString()}};jive.eae.acclaim.expandedActivityStreamItemView=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"><section><ul>');var E=A.activityContainer.activityList;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(D>=5){B.append("<li>");jive.eae.activitystream.activityView({activity:C,showAvatar:false,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,fromTemplate:"latest_acclaim"},B);B.append("</li>")}}B.append("</ul></section></div>");if(!G){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.recommendation=="undefined"){jive.eae.recommendation={}}jive.eae.recommendation.recommendation=function(A,C){var B=C||new soy.StringBuilder();B.append("<header>");jive.eae.recommendation.titleLink(A,B);B.append("</header>");jive.eae.recommendation.body(A,B);if(!C){return B.toString()}};jive.eae.recommendation.numberedTitle=function(A,C){var B=C||new soy.StringBuilder();B.append('<header><span class="j-item-number">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trendy.itemNumber"),[A.number])),'</span><a class="j-title" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.recommendation.link)),'"><span class="jive-icon-med ',soy.$$escapeHtml(A.recommendation.iconCss),' j-recommendation-title-icon"></span>',A.recommendation.subject,'</a><span class="j-details-link"><a href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trendy.showDetails"),[])),"</a></span>");if(A.recommendation.prop.activityInfo){B.append('<div class="j-activityInfo j-thumb clearfix"><ul class="j-stats"><li>');jive.eae.recommendation.activityInfoItem({recommendation:A.recommendation,icon:"like",count:A.recommendation.prop.activityInfo.likeCount,type:"like",showLink:true},B);B.append("</li><li>");jive.eae.recommendation.activityInfoItem({recommendation:A.recommendation,icon:"comment",count:A.recommendation.prop.activityInfo.replyCount,type:"reply",showLink:false},B);B.append("</li></ul></div>")}B.append("</header>");if(!C){return B.toString()}};jive.eae.recommendation.activityInfoItem=function(A,C){var B=C||new soy.StringBuilder();B.append("<span>");if(A.showLink){jive.eae.acclaim.count({command:"showLikes",count:(A.count)?soy.$$escapeHtml(A.count):"0",objectId:A.recommendation.id,objectType:A.recommendation.type},B)}else{B.append(" ",(A.count)?soy.$$escapeHtml(A.count):"0")}B.append(" ");switch(A.type){case"reply":B.append((A.count==1)?(A.recommendation.type==1||A.recommendation.type==2)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.message"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.comment"),[])):(A.recommendation.type==1||A.recommendation.type==2)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.replycount"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.commentcount"),[])));break;case"like":B.append((A.count==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.Xlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.Xlikes"),[])));break}B.append("</span>");if(!C){return B.toString()}};jive.eae.recommendation.body=function(A,E){var B=E||new soy.StringBuilder();B.append('<article><div class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(A.recommendation.prop.author,{size:22}),B);B.append('</span><div class="j-author-info"><span class="font-color-meta">',(A.recommendation.objectTypeName&&A.recommendation.objectTypeName=="document"&&A.recommendation.modificationTime)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.last.modified"),[A.recommendation.modificationTime])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.posted"),[A.recommendation.creationTime])),'</span><span class="j-line2 font-color-meta">');var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.recommendation.prop.author,D);jive.shared.soy.escapeHelper({stringToEscape:D.toString()},B);if(A.recommendation.prop.place&&A.recommendation.prop.place.type==37){B.append(" ");jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:'<a href="'+soy.$$escapeHtml(A.recommendation.prop.place.link)+'">'+soy.$$escapeHtml(A.recommendation.prop.place.subject)+"</a>",noAutoEscape:true},B)}else{if(A.recommendation.prop.place&&A.recommendation.prop.place.type&&A.recommendation.prop.place.type!=-2){B.append(" ");var C=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:jQuery.extend({},A.recommendation.prop.place,(function(){var H={};var G=[["jiveObjectURL",A.recommendation.prop.place.link],["name",A.recommendation.prop.place.subject],["typeUserContainer",A.recommendation.prop.place.type==2020],["userDisplayName",A.recommendation.prop.author.displayName],["typeWallEntry",A.recommendation.prop.place.type==1464927464]];for(var F=0;F<G.length;F+=1){H[G[F][0]]=G[F][1]}return H})())},C);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:C.toString(),noAutoEscape:true},B)}}B.append('</span></div></div><p class="j-slug">',A.recommendation.prop.bodysnippet,"</p>");if(A.recommendation.prop.recommendation.ranks){jive.eae.recommendation.insights(A,B)}jive.eae.recommendation.notInterestedButton(A,B);B.append("</article>");if(!E){return B.toString()}};jive.eae.recommendation.titleLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<a class="j-title',(A.additionalClasses)?" "+soy.$$escapeHtml(A.additionalClasses):"",'" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.recommendation.link)),'">');jive.eae.recommendation.contentIcon({recommendation:A.recommendation},B);B.append(A.recommendation.subject,"</a>");if(!C){return B.toString()}};jive.eae.recommendation.contentIcon=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-icon-big ',soy.$$escapeHtml(A.recommendation.iconCss),' j-recommendation-title-icon"></span>');if(!C){return B.toString()}};jive.eae.recommendation.notInterestedButton=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-not-interested-container"><a class="j-dislike-recommendation j-inline-link" href="#" data-event="dislike" data-id="',soy.$$escapeHtml(A.recommendation.id),'" data-object-type="',soy.$$escapeHtml(A.recommendation.type),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.less.title"),[])),'"><span class="jive-icon-sml jive-glyph-min"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.less"),[])),'</a><a class="j-not-interested j-inline-link" href="#" data-event="notInterested" data-id="',soy.$$escapeHtml(A.recommendation.id),'" data-object-type="',soy.$$escapeHtml(A.recommendation.type),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.notInterested.title"),[])),'"><span class="jive-icon-sml jive-glyph-delete"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.notInterested"),[])),"</a>",(A.recommendation.prop.recommendation.ranks)?'<a class="j-why j-inline-link font-color-meta-light" href="#" data-event="why" data-id="'+soy.$$escapeHtml(A.recommendation.id)+'"><span class="jive-icon-sml jive-glyph-help"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.why"),[]))+"</a>":"","</div>");if(!C){return B.toString()}};jive.eae.recommendation.notInterestedNotification=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.notInterested.feedback.thankYou"),[])),"</p>");if(!C){return B.toString()}};jive.eae.recommendation.noRecommendations=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-no-recommendations font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.no_recommendations"),[])),"</p>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.task=="undefined"){jive.eae.task={}}jive.eae.task.expandedCommItemView=function(E,D){var B=D||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix ',(E.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(E.streamType),"_",soy.$$escapeHtml(E.filterType),"_",E.activityContainer.jiveObject.objectType,"_",E.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(E.activityContainer.container.type),"_",soy.$$escapeHtml(E.activityContainer.container.id),'" style="display:none;"><article class="');jive.eae.activitystream.contentTypeClassName({activityContainer:E.activityContainer},B);B.append('"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(E.streamType),"-exp-header-",soy.$$escapeHtml(E.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(E.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(E.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(E.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(E.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,E.activityContainer.jiveObject.jiveObjectURL),'">',E.activityContainer.jiveObject.subject,"</a> ");if(E.activityContainer.container.type&&E.activityContainer.container.type!=-2){B.append(' <span class="j-act-container font-color-meta">');if(E.activityContainer.container.type==2020){var C=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(E.activityContainer.originalAuthor,C);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:C.toString(),arg1:(E.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},B)}else{var A=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:E.activityContainer.container},A);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:A.toString(),noAutoEscape:true},B)}B.append("</span>")}B.append('</div><div class="j-act-header-slug j-excerpt"><div class="j-author-act font-color-meta">');var I=new soy.StringBuilder();if(!E.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(E.activityContainer.originalAuthor,{renderInvisible:E.activityContainer.jiveObject.typeExternalActivity}),I)}else{jive.shared.displayutil.renderGuestDisplayName({message:E.activityContainer.jiveObject},I)}jive.shared.soy.i18nHelper({i18nKey:"activity.createdBy",arg0:I.toString(),noAutoEscape:true},B);B.append(' <span class="j-act-time">',soy.$$escapeHtml(E.activityContainer.creationTime),"</span></div>",(E.activityContainer.jiveObject.text)?E.activityContainer.jiveObject.text+((E.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view j-rc5 j-task" style="display:none;"><div class="j-author-act font-color-meta">');var L=new soy.StringBuilder();if(!E.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(E.activityContainer.originalAuthor,{renderInvisible:E.activityContainer.jiveObject.typeExternalActivity}),L)}else{jive.shared.displayutil.renderGuestDisplayName({message:E.activityContainer.jiveObject},L)}jive.shared.soy.i18nHelper({i18nKey:"activity.createdBy",arg0:L.toString(),noAutoEscape:true},B);B.append(' <span class="j-act-time">',soy.$$escapeHtml(E.activityContainer.creationTime),"</span></div><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.assignedTo"),[])),"</h4><p>");jive.shared.displayutil.userDisplayNameLink(E.activityContainer.jiveObject.assignedUser,B);B.append("</p><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.dueDate"),[])),"</h4><p>",soy.$$escapeHtml(E.activityContainer.jiveObject.dueDate),"</p><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.notes.label"),[])),'</h4><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:E.activityContainer.jiveObject,domIDPostfix:E.activityContainer.jiveObject.domIDPostfix},B);B.append('<div class="j-act-meta clearfix"><nav id="',soy.$$escapeHtml(E.streamType),"-exp-body-actions-",soy.$$escapeHtml(E.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(E.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(E.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(E.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.activitystream.activityNavActions({object:E.activityContainer.jiveObject,activityContainer:E.activityContainer,amAnAuthor:E.activityContainer.amAnAuthor,objectType:E.activityContainer.jiveObject.objectType,objectId:E.activityContainer.jiveObject.id,liked:E.activityContainer.liked,likeCount:E.activityContainer.likeCount,likable:E.activityContainer.likable,author:E.activityContainer.originalAuthor,user:E.user,location:"parentPreview",streamType:E.streamType,filterType:E.filterType,canCreateMbImage:E.canCreateMbImage,canCreateMbVideo:E.canCreateMbVideo},B);B.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(E.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(E.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(E.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!E.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var H=E.activityContainer.activityList;var J=H.length;for(var G=0;G<J;G++){var F=H[G];if(!F.parentActivity&&(F.current||G==J-1)){jive.eae.task.activityContentExcerpt({activity:F,activityContainer:E.activityContainer,isHidden:false,user:E.user,streamType:E.streamType,canCreateMbImage:E.canCreateMbImage,canCreateMbVideo:E.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:G==J-1},B)}}B.append("</div>");if(E.activityContainer.canReply){B.append('<nav id="',soy.$$escapeHtml(E.streamType),"-parent-reply-",soy.$$escapeHtml(E.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(E.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(E.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');var K=new soy.StringBuilder();jive.eae.communications.readingPaneBottomReplyLinkKey({activityContainer:E.activityContainer},K);jive.shared.soy.i18nHelper({i18nKey:K.toString(),arg0:(E.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((E.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},B);B.append("</a></div></div></nav>")}B.append("</div></article></div>");if(!D){return B.toString()}};jive.eae.task.groupedActivityStreamTemplate=function(A,E){var C=E||new soy.StringBuilder();C.append('<article id="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable ');jive.eae.activitystream.contentTypeClassName({activityContainer:A.activityContainer},C);C.append(' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title"><span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'">',A.activityContainer.jiveObject.subject,'</a><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},C);C.append("</li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append('</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},C);C.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.task.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},C);C.append('</div><div class="j-act-meta font-color-meta-light">');if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){if(A.activityContainer.container.type==2020){var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,D);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:D.toString(),arg1:(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},C)}else{var B=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},B);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:B.toString(),noAutoEscape:true},C)}}C.append("</div></div></article>");if(!E){return C.toString()}};jive.eae.task.activityStreamFullContentView=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="');jive.eae.activitystream.contentTypeParentPreviewStylingClassName({activityContainer:A.activityContainer},B);B.append('"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.assignedTo"),[])),"</h4><p>");jive.shared.displayutil.userDisplayNameLink(A.activityContainer.jiveObject.assignedUser,B);B.append("</p><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.dueDate"),[])),"</h4><p>",soy.$$escapeHtml(A.activityContainer.jiveObject.dueDate),"</p><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.notes.label"),[])),'</h4><div class="j-act-exp-content-body-view" style=""></div></section>');if(!C){return B.toString()}};jive.eae.task.expandedActivityStreamItemView=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var D=A.activityContainer.activityList;var C=D.length;for(var F=0;F<C;F++){var E=D[F];if(E.content.typeTask||!E.parentActivity&&A.streamType=="profile"){jive.eae.task.activityContentExcerpt({activity:E,activityContainer:A.activityContainer,isHidden:true,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:false},B)}}B.append("</div></div>");if(!G){return B.toString()}};jive.eae.task.collapsedActivityStreamExcerpt=function(A,D){var B=D||new soy.StringBuilder();B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="',(A.activity.type=="created"||A.activity.type=="completed")?"j-sub j-mod font-color-meta-light":"",'">');if(A.activity.content.typeTask){B.append('<span class="jive-icon-sml ',(A.activity.type=="completed")?"jive-glyph-check":"jive-glyph-edit",'"></span>');var C=new soy.StringBuilder();if(!A.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activity.content},C)}jive.shared.soy.i18nHelper({i18nKey:(A.activity.type=="created")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.created"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.completed"),[])),arg0:C.toString(),noAutoEscape:"true"},B);B.append(' <span class="j-bullet">&#8226;</span> <span class="font-color-meta-light">',(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),"</span>")}else{B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append('</div><div class="j-excerpt" ',(A.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,hasMoreText:A.activity.hasMoreText,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="j-act-sub-preview clearfix" ',(!A.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(A.activity.content.html){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append('</div></div></div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta"><li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div>")}B.append("</section></div>");if(!D){return B.toString()}};jive.eae.task.activityContentExcerpt=function(A,E){var B=E||new soy.StringBuilder();B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.addedInline)?"j-js-addedInline":""," ",(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current||A.forceCurrent)?"true":"",'" style="',(A.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="reply j-sub ',(A.activity.content.typeTask)?"j-mod font-color-meta-light":"",'">');if(A.activity.content.typeTask){B.append('<span class="jive-icon-sml jive-glyph-edit"></span>');var D=new soy.StringBuilder();if(!A.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activity.content},D)}jive.shared.soy.i18nHelper({i18nKey:(A.activity.type=="created")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.created"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.task.completed"),[])),arg0:D.toString(),noAutoEscape:"true"},B);B.append(' <span class="j-bullet">&#8226;</span> <span class="font-color-meta-light">',(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),"</span>")}else{jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:"32"}),B);B.append('<div class="j-excerpt j-non-excerpt clearfix" ',(A.hideStub)?'style="display:none;"':"",">");if(!A.hideStub){var C=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},C);jive.eae.activitystream.activityContentCommon({contentTxt:C.toString(),hasMoreText:A.activity.hasMoreText},B)}B.append('</div><div class="j-act-sub-preview" ',(!A.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(" ",(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activity.content,domIDPostfix:A.activity.domIDPostfix},B);B.append('<div class="jive-comment-actions"><nav class="clearfix"><ul>',(!A.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></div></div>")}B.append("</section></div>");if(!E){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.ext=="undefined"){jive.eae.ext={}}if(typeof jive.eae.ext.bookmark=="undefined"){jive.eae.ext.bookmark={}}jive.eae.ext.bookmark.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID=',(A.activity.content.bookmarkedContent)?'"'+soy.$$escapeHtml(A.activityContainer.jiveObject.id)+'"':'"'+soy.$$escapeHtml(A.activity.targetObjectID)+'"'," data-objectType=",(A.activity.content.bookmarkedContent)?'"'+soy.$$escapeHtml(A.activityContainer.jiveObject.objectType)+'"':'"'+soy.$$escapeHtml(A.activity.targetObjectType)+'"',' data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="',(A.activity.type=="bookmarked")?"j-sub j-mod font-color-meta-light":"",'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.ext.bookmark.expandedCommItemView=function(I,J){var D=J||new soy.StringBuilder();D.append('<div class="j-act-exp-view expanded clearfix ',(I.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(I.streamType),"_",soy.$$escapeHtml(I.filterType),"_",I.activityContainer.jiveObject.objectType,"_",I.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(I.activityContainer.container.type),"_",soy.$$escapeHtml(I.activityContainer.container.id),'" style="display:none;"><article class="j-act-bookmark"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(I.streamType),"-exp-header-",soy.$$escapeHtml(I.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(I.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(I.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(I.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(I.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,I.activityContainer.jiveObject.jiveObjectURL),'">',I.activityContainer.jiveObject.subject,"</a> ");if(I.activityContainer.container.type&&I.activityContainer.container.type!=-2){D.append(' <span class="j-act-container font-color-meta">');if(I.activityContainer.container.type==2020){var B=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(I.activityContainer.originalAuthor,B);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:B.toString(),arg1:(I.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},D)}else{var L=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:I.activityContainer.container},L);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:L.toString(),noAutoEscape:true},D)}D.append("</span>")}D.append('</div><div class="j-act-header-slug j-excerpt"><a rel="nozoom" href="',soy.$$escapeHtml(I.activityContainer.jiveObject.bookmarkedURL),'"><span class="truncate-me" style="white-space: nowrap;">',soy.$$escapeHtml(I.activityContainer.jiveObject.bookmarkedURL),'</span></a></div><div class="j-act-exp-full-content-view jive-bookmark j-rc5" style="display:none;"><header><div class="j-byline">');var Q=new soy.StringBuilder();if(!I.activityContainer.jiveObject.firstNote.user.anonymous){jive.shared.displayutil.userDisplayNameLink(I.activityContainer.jiveObject.firstNote.user,Q)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},Q)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.site.who.when.info"),[])),arg0:Q.toString(),arg1:soy.$$escapeHtml(I.activityContainer.jiveObject.firstNote.creationDate),noAutoEscape:"true"},D);D.append('</div></header><a class="jive-site-url j-rc6" rel="nozoom" href="',soy.$$escapeHtml(I.activityContainer.jiveObject.bookmarkedURL),'"><strong class="truncate-me" style="white-space: nowrap;">',soy.$$escapeHtml(I.activityContainer.jiveObject.bookmarkedURL),'</strong></a><div class="jive-site-recent-notes-tags clearfix"><h5>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.site.recentcontent"),[])),"</h5><ul>");var C=I.activityContainer.jiveObject.recentNotes;var H=C.length;for(var P=0;P<H;P++){var A=C[P];D.append('<li class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:"32"}),D);D.append('</span><div class="j-author-info"><span>');if(!A.user.anonymous){jive.shared.displayutil.userDisplayNameLink(A.user,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},D)}D.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.on"),[])),' <span class="font-color-meta">',soy.$$escapeHtml(A.creationDate),"</span></span><div>",(A.notes)?'<div class="j-act-exp-content-body-view jive-site-note" style="">"'+A.notes+'"</div>':"");if(A.tags.length>0){D.append("<div><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.tags"),[])),': </span><ul class="j-favorite-tag-list">');var N=A.tags;var G=N.length;for(var M=0;M<G;M++){var R=N[M];D.append('<li><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,R.url),'">',R.name,"</a>",(!(M==G-1))?", ":"","</li>")}D.append("</ul></div>")}D.append("</div></div></li>")}D.append('</ul></div><div class="j-act-meta font-color-meta"><nav class="j-act-actions j-act-actions-init clearfix"><ul>');jive.eae.activitystream.activityNavActions({object:I.activityContainer.jiveObject,activityContainer:I.activityContainer,amAnAuthor:I.activityContainer.amAnAuthor,objectType:I.activityContainer.jiveObject.objectType,objectId:I.activityContainer.jiveObject.id,liked:I.activityContainer.liked,likeCount:I.activityContainer.likeCount,likable:I.activityContainer.likable,author:I.activityContainer.originalAuthor,user:I.user,location:"parentPreview",streamType:I.streamType,filterType:I.filterType,canCreateMbImage:I.canCreateMbImage,canCreateMbVideo:I.canCreateMbVideo},D);D.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(I.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(I.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(I.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!I.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:I.activityContainer,showCurrentCount:false},D);D.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var E=I.activityContainer.activityList;var F=E.length;for(var K=0;K<F;K++){var O=E[K];if(!O.parentActivity&&(O.current||K==F-1||O.content.bookmarkedContent)){jive.eae.ext.bookmark.activityContentExcerpt({activity:O,activityContainer:I.activityContainer,isHidden:false,user:I.user,streamType:I.streamType,canCreateMbImage:I.canCreateMbImage,canCreateMbVideo:I.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:K==F-1},D)}}D.append("</div>");if(I.activityContainer.canReply){D.append('<nav id="',soy.$$escapeHtml(I.streamType),"-parent-reply-",soy.$$escapeHtml(I.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(I.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(I.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.comment.on.originalX",arg0:(I.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((I.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},D);D.append("</a></div></div></nav>")}D.append("</div></article></div>");if(!J){return D.toString()}};jive.eae.ext.bookmark.groupedActivityStreamTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable j-act-bookmark j-act-generic clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'">',A.activityContainer.jiveObject.subject,'</a><nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},B);B.append('</li><li><a href="',soy.$$escapeHtml(A.activityContainer.jiveObject.bookmarkedURL),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.activity.visitUrl"),[])),"</a></li>",(A.streamType=="user"&&A.filterType=="all")?'<li><a href="#" class="j-act-hidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide"),[]))+"</a></li>":"",(A.filterType=="antimatter")?'<li><a href="#" class="j-act-unhidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide"),[]))+"</a></li>":"",'</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},B);B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.ext.bookmark.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-meta font-color-meta-light"> ');jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.ext.bookmark.activityStreamFullContentView=function(G,F){var D=F||new soy.StringBuilder();D.append('<section class="jive-content jive-bookmark j-rc5"><header><div class="j-byline">');var K=new soy.StringBuilder();if(!G.activityContainer.jiveObject.firstNote.user.anonymous){jive.shared.displayutil.userDisplayNameLink(G.activityContainer.jiveObject.firstNote.user,K)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},K)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.site.who.when.info"),[])),arg0:K.toString(),arg1:soy.$$escapeHtml(G.activityContainer.jiveObject.firstNote.creationDate),noAutoEscape:"true"},D);D.append('</div></header><a class="jive-site-url j-rc6" rel="nozoom" href="',soy.$$escapeHtml(G.activityContainer.jiveObject.bookmarkedURL),'"><strong class="truncate-me" style="white-space: nowrap;">',soy.$$escapeHtml(G.activityContainer.jiveObject.bookmarkedURL),'</strong></a><div class="jive-site-recent-notes-tags clearfix"><h5>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.site.recentcontent"),[])),"</h5><ul>");var A=G.activityContainer.jiveObject.recentNotes;var L=A.length;for(var B=0;B<L;B++){var E=A[B];D.append('<li class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(E.user,{size:"32"}),D);D.append('</span><div class="j-author-info"><span>');if(!E.user.anonymous){jive.shared.displayutil.userDisplayNameLink(E.user,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:""},D)}D.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.on"),[])),' <span class="font-color-meta">',soy.$$escapeHtml(E.creationDate),"</span></span><div>",(E.notes)?'<div class="j-act-exp-content-body-view jive-site-note" style="">"'+E.notes+'"</div>':"");if(E.tags.length>0){D.append("<div><span>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.tags"),[])),': </span><ul class="j-favorite-tag-list">');var J=E.tags;var C=J.length;for(var H=0;H<C;H++){var I=J[H];D.append('<li><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,I.url),'">',I.name,"</a>",(!(H==C-1))?", ":"","</li>")}D.append("</ul></div>")}D.append("</div></div></li>")}D.append('</ul></div><div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(G.streamType),"-exp-content-actions-",soy.$$escapeHtml(G.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions font-color-meta clearfix ',(G.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(G.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(G.activityContainer.jiveObject.objectType),'"><span class="j-act-time font-color-meta">',(G.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,G.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(G.activityContainer.creationTime),(G.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span><ul>");jive.eae.activitystream.activityNavActions({object:G.activityContainer.jiveObject,activityContainer:G.activityContainer,amAnAuthor:G.activityContainer.amAnAuthor,objectType:G.activityContainer.jiveObject.objectType,objectId:G.activityContainer.jiveObject.id,liked:G.activityContainer.liked,likeCount:G.activityContainer.likeCount,likable:G.activityContainer.likable,author:G.activityContainer.originalAuthor,user:G.user,location:"Title",streamType:G.streamType,filterType:G.filterType,tracked:G.activityContainer.tracked,untracked:G.activityContainer.untracked,canCreateMbImage:G.canCreateMbImage,canCreateMbVideo:G.canCreateMbVideo},D);D.append('</ul></nav></div><div class="jive-comment-actions" style="display:none"><nav id="',soy.$$escapeHtml(G.streamType),"-exp-body-actions-",soy.$$escapeHtml(G.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(G.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(G.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(G.activityContainer.jiveObject.objectType),'"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:G.activityContainer.jiveObject,activityContainer:G.activityContainer,amAnAuthor:G.activityContainer.amAnAuthor,objectType:G.activityContainer.jiveObject.objectType,objectId:G.activityContainer.jiveObject.id,liked:G.activityContainer.liked,likeCount:G.activityContainer.likeCount,likable:G.activityContainer.likable,author:G.activityContainer.originalAuthor,user:G.user,location:"parentPreview",streamType:G.streamType,filterType:G.filterType,tracked:G.activityContainer.tracked,untracked:G.activityContainer.untracked,canCreateMbImage:G.canCreateMbImage,canCreateMbVideo:G.canCreateMbVideo},D);D.append("</ul></nav></div></section>");if(!F){return D.toString()}};jive.eae.ext.bookmark.expandedActivityStreamItemView=function(B,G){var D=G||new soy.StringBuilder();D.append('<div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(B.streamType),"_",B.activityContainer.jiveObject.objectType,"_",B.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(B.activityContainer.container.type),"_",soy.$$escapeHtml(B.activityContainer.container.id),"_",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var F=B.activityContainer.activityList;var E=F.length;for(var C=0;C<E;C++){var A=F[C];if(A.content.bookmarkedContent||!A.parentActivity&&B.streamType=="profile"){jive.eae.ext.bookmark.activityContentExcerpt({activity:A,activityContainer:B.activityContainer,isHidden:true,user:B.user,streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:false},D)}}D.append("</div></div>");if(!G){return D.toString()}};jive.eae.ext.bookmark.collapsedActivityStreamExcerpt=function(B,D){var C=D||new soy.StringBuilder();C.append('<div id="node-collapsed-',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="j-act-node ',(B.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID=',(B.activity.content.bookmarkedContent)?'"'+soy.$$escapeHtml(B.activityContainer.jiveObject.id)+'"':'"'+soy.$$escapeHtml(B.activity.targetObjectID)+'"'," data-objectType=",(B.activity.content.bookmarkedContent)?'"'+soy.$$escapeHtml(B.activityContainer.jiveObject.objectType)+'"':'"'+soy.$$escapeHtml(B.activity.targetObjectType)+'"',' data-current="',(B.activity.current)?soy.$$escapeHtml(B.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="',(B.activity.type=="bookmarked")?"j-sub j-mod font-color-meta-light":"",'">');if(B.activity.content.bookmarkedContent){C.append('<span class="jive-icon-sml jive-icon-bookmark-ribbon-grey"></span>');var A=new soy.StringBuilder();if(!B.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activity.activityUser,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activity.content},A)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.bookmarking.bookmarked.by"),[])),arg0:A.toString(),noAutoEscape:"true"},C);C.append(' <span class="j-bullet">&#8226;</span> <span class="font-color-meta">',(B.activity.creationTime)?soy.$$escapeHtml(B.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),"</span>")}else{C.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(B.activity.activityUser,{size:46}),C);C.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:B.activity.content,type:B.activity.content.deleted?B.activityContainer.jiveObject.objectType:B.activity.type,activityUser:B.activity.activityUser,displayAuthorLink:true,streamType:B.streamType,user:B.user,againstObject:false,hideDetailedReplyTo:false},C);C.append('</div><div class="j-excerpt" ',(B.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:B.activity.content.text,hasMoreText:B.activity.hasMoreText,deleted:B.activity.content.deleted,moderated:B.activity.moderated},C);C.append('</div><div class="j-act-sub-preview clearfix" ',(!B.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(B.activity.content.html){jive.eae.activitystream.activityContentText({activity:B.activity,noAutoescape:true},C)}C.append('</div></div></div><div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(B.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(B.time),(B.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta">',(!B.activity.content.bookmarkedContent)?'<li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:B.activityContainer.activityList[B.activityContainer.activityList.length-1].content,activityContainer:B.activityContainer,amAnAuthor:B.user.id==B.activityContainer.activityList[B.activityContainer.activityList.length-1].activityUser.id,objectType:B.activityContainer.activityList[B.activityContainer.activityList.length-1].content.objectType,objectId:B.activityContainer.activityList[B.activityContainer.activityList.length-1].content.id,liked:B.activityContainer.activityList[B.activityContainer.activityList.length-1].liked,likeCount:B.activityContainer.activityList[B.activityContainer.activityList.length-1].likeCount,likable:B.activityContainer.activityList[B.activityContainer.activityList.length-1].likable,hasMoreText:B.activityContainer.activityList[B.activityContainer.activityList.length-1].hasMoreText,author:B.activityContainer.activityList[B.activityContainer.activityList.length-1].activityUser,user:B.user,location:"subActivity",streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo},C);C.append("</ul></nav></div>")}C.append("</section></div>");if(!D){return C.toString()}};jive.eae.ext.bookmark.activityContentExcerpt=function(B,E){var C=E||new soy.StringBuilder();C.append('<div id="node-collapsed-',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="j-act-node  ',(B.addedInline)?"j-js-addedInline":""," ",(B.activity.content.bookmarkedContent)?"origin":""," ",(B.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',(B.activity.content.bookmarkedContent)?soy.$$escapeHtml(B.activityContainer.jiveObject.id):soy.$$escapeHtml(B.activity.targetObjectID),'" data-objectType="',(B.activity.content.bookmarkedContent)?soy.$$escapeHtml(B.activityContainer.jiveObject.objectType):soy.$$escapeHtml(B.activity.targetObjectType),'" data-current="',(B.activity.current||B.forceCurrent)?"true":"",'" style="',(B.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(B.activity.content.domIDPostfix),'" class="reply j-sub ',(B.activity.type=="bookmarked")?"j-mod font-color-meta-light":"",'">');if(B.activity.type=="bookmarked"){C.append('<span class="jive-icon-sml jive-icon-bookmark-ribbon-grey"></span>');var D=new soy.StringBuilder();if(!B.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activity.activityUser,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activity.content},D)}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.bookmarking.bookmarked.by"),[])),arg0:D.toString(),noAutoEscape:"true"},C);C.append(' <span class="j-bullet">&#8226;</span> <span class="j-act-meta font-color-meta">',(B.activity.creationTime)?soy.$$escapeHtml(B.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),"</span>")}else{jive.shared.displayutil.avatar(soy.$$augmentData(B.activity.activityUser,{size:"32"}),C);C.append('<div class="j-excerpt',(!B.activity.content.summaryIsExcerpt)?" j-non-excerpt":"",' clearfix" ',(B.hideStub)?'style="display:none;"':"",">");if(!B.hideStub){var A=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:B.activity,noAutoescape:true},A);jive.eae.activitystream.activityContentCommon({contentTxt:A.toString(),hasMoreText:B.activity.hasMoreText},C)}C.append('</div><div class="j-act-sub-preview" ',(!B.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:B.activity.content,type:B.activity.content.deleted?B.activityContainer.jiveObject.objectType:B.activity.type,activityUser:B.activity.activityUser,displayAuthorLink:true,user:B.user,againstObject:false,hideDetailedReplyTo:false},C);C.append(" ",(B.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(B.activity.creationTime)?soy.$$escapeHtml(B.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(B.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(B.hideStub){jive.eae.activitystream.activityContentText({activity:B.activity,noAutoescape:true},C)}C.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:B.activity.content,domIDPostfix:B.activity.domIDPostfix},C);C.append('<div class="jive-comment-actions"><nav class="clearfix"><ul>',(!B.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:B.activity.parentActivity?B.activityContainer.jiveObject:B.activity.content,activityContainer:B.activityContainer,amAnAuthor:B.user.id==B.activity.activityUser.id,objectType:B.activity.content.objectType,objectId:B.activity.content.id,liked:B.activity.liked,likeCount:B.activity.likeCount,likable:B.activity.likable,hasMoreText:B.activity.hasMoreText,author:B.activity.activityUser,user:B.user,location:"subActivity",streamType:B.streamType,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo},C);C.append("</ul></nav></div></div></div>")}C.append("</section></div>");if(!E){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.userrelationship=="undefined"){jive.eae.userrelationship={}}jive.eae.userrelationship.userRelationshipActivity=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.groupedUsers){jive.eae.activitystream.groupedUsers({groupedUserList:A.activity.groupedUsers,user:A.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B)}else{jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activity.activityUser,{displayNameOverride:(A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),B)}B.append(" ",(A.activity.groupedUsers&&A.activity.groupedUsers.length>1||A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.connections.created"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.connection.created"),[]))," ");if(A.user.id==A.activity.content.relatedUser.id){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.you"),[])))}else{jive.shared.displayutil.userDisplayNameLink(A.activity.content.relatedUser,B)}if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.favorite=="undefined"){jive.eae.favorite={}}jive.eae.favorite.groupedActivity=function(A,D){var B=D||new soy.StringBuilder();if(A.activity.content.displayFavoritedContent){if(A.activity.activityUser){B.append(" ");var C=new soy.StringBuilder();if(!A.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activity.content},C)}jive.shared.soy.i18nHelper({i18nKey:"eae.bookmarking.XbookmarkedY",arg0:C.toString(),noAutoEscape:true},B);B.append(" ")}else{B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.bookmarking.Xbookmarked"),[]))," ")}B.append(' <span class="',soy.$$escapeHtml(A.activity.content.favoritedContent.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.favoritedContent.jiveObjectURL),'" title="',A.activity.content.subject,'"><span class="j-item">',A.activity.content.subject,"</span></a>")}if(!D){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.directMessage=="undefined"){jive.eae.directMessage={}}jive.eae.directMessage.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry j-act-exp-trigger clearfix j-act-dm ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.directMessage.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.directMessage.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta"><span class="jive-icon-med jive-icon-direct-message-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.label"),[])),'"></span>');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link">',A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.directMessage.expandedCommItemView=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" style="display:none;"><article class="j-act-dm"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(A.streamType),"-exp-header-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(A.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:46}),C);C.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.communications.collaboratorParticipantsI18NHelper({activityContainer:A.activityContainer,user:A.user},C);C.append('</div><div class="j-excerpt">',(A.activityContainer&&A.activityContainer.jiveObject&&A.activityContainer.jiveObject.text)?A.activityContainer.jiveObject.text:"");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},C);C.append('</div><span class="j-act-time"><strong><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'" class="font-color-meta-light">',soy.$$escapeHtml(A.activityContainer.creationTime),'</a></strong><a href="#" class="j-act-addrecipients font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients"),[])),'</a></span><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(A.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!A.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:false},C);C.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var D=A.activityContainer.activityList;var B=D.length;for(var F=0;F<B;F++){var E=D[F];if(!E.parentActivity&&(E.current||!A.activityContainer.numCurrent&&F==B-1)){jive.eae.activitystream.activityContentExcerpt({activity:E,activityContainer:A.activityContainer,isHidden:false,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:!A.activityContainer.numCurrent&&F==B-1},C)}}C.append('</div><div class="j-act-add-comment j-js-microrte-replyable"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a id="showMicroRTE_',soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.reply.dm"),[])),"</a></div></div></div></article></div>");if(!G){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.share=="undefined"){jive.eae.share={}}jive.eae.share.shareActivity=function(A,C){var B=C||new soy.StringBuilder();if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.containerActivity=="undefined"){jive.eae.containerActivity={}}jive.eae.containerActivity.created=function(A,C){var B=C||new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.container.created"),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL),'" class="jivecontainerTT-hover-container" data-objectId="',soy.$$escapeHtml(A.activity.content.id),'" data-objectType="',soy.$$escapeHtml(A.activity.content.objectType),'"><span class="jive-icon-med ',soy.$$escapeHtml(A.activity.content.jiveObjectCSS),'"></span><span class="j-item">',A.activity.content.subject,"</span></a>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.announcement=="undefined"){jive.eae.announcement={}}jive.eae.announcement.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry ',(A.activityContainer.read)?"j-act-read":"j-act-unread",' j-act-announcement clearfix" data-numUnread="',(A.activityContainer.numUnread>10)?"10":soy.$$escapeHtml(A.activityContainer.numUnread),'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" data-commentHTMLLoaded="false"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.announcement.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.announcement.commListItemView=function(A,D){var B=D||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-author-act font-color-meta"><span class="jive-alert-announcement-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("anncmt.announcement.gtitle"),[])),"</span> ");var C=new soy.StringBuilder();if(!A.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityContainer.jiveObject},C)}jive.shared.soy.i18nHelper({i18nKey:"eae.announcements.by",arg0:C.toString(),noAutoEscape:true},B);B.append('</div><div class="j-act-title"><span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><span class="j-act-announcement-title">',A.activityContainer.jiveObject.subject,'</span></div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',soy.$$escapeHtml(A.time),'</span></div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!D){return B.toString()}};jive.eae.announcement.expandedCommItemView=function(A,F){var B=F||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" style="display:none;"><article class="j-act-announcement"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(A.streamType),"-exp-header-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(A.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><div class="jive-alert-announcement-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.announcement"),[])),'</div><h2><span class="jive-icon-big ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,"</h2>");if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){B.append(' <span class="j-act-container font-color-meta">');if(A.activityContainer.container.type==2020){var E=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,E);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:E.toString(),arg1:(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},B)}else{var C=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},C);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:C.toString(),noAutoEscape:true},B)}B.append("</span>")}B.append('</div><div class="j-act-header-slug j-excerpt">',(A.activityContainer.jiveObject.text)?A.activityContainer.jiveObject.text+((A.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view j-rc5" style="display:none;"><div class="j-author-act font-color-meta">');var D=new soy.StringBuilder();if(!A.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activityContainer.originalAuthor,{renderInvisible:A.activityContainer.jiveObject.typeExternalActivity}),D)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityContainer.jiveObject},D)}jive.shared.soy.i18nHelper({i18nKey:"activity.createdBy",arg0:D.toString(),noAutoEscape:true},B);B.append(' <span class="j-act-time">',(A.activityContainer.jiveObject.announcementStartDateString)?soy.$$escapeHtml(A.activityContainer.jiveObject.announcementStartDateString):"",'</span></div><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('</div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),"</strong></a></div></section></div></div></article></div>");if(!F){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.mention=="undefined"){jive.eae.mention={}}jive.eae.mention.mentionActivity=function(A,C){var B=C||new soy.StringBuilder();B.append("<section>");if(A.streamType!="inbox"){B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32}),B);B.append('</div><div class="j-author-act font-color-meta"><span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(" ");jive.shared.soy.i18nHelper({i18nKey:"eae.mention.created",arg0:'<strong class="font-color-okay">'+soy.$$escapeHtml(A.activity.content.mentionedObject.name)+"</strong>",arg1:soy.$$escapeHtml(A.activity.content.mentionedObject.objectType),noAutoEscape:true},B);B.append("</div>");jive.eae.mention.collapsedExcerptText({text:A.activity.content.text,showAsExcerpt:true,deleted:A.activity.content.deleted},B);B.append('<div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time">',(A.activity.content.context.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.context.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activity.creationTime),(A.activity.content.context.jiveObjectURL)?"</a>":"","</span></nav></div>")}else{if(A.activity.content.mentionedObject.objectType==3){B.append('<div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act"><span class="jive-icon-med jive-icon-mention-label" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.label"),[])),'"></span>');jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mention.you.in"),[])),' </div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activity.content.context.jiveObjectCSS),'"></span>',soy.$$escapeHtml(A.activity.content.context.name),"</div>")}else{B.append('<div class="j-author-act font-color-meta">');jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);B.append(' <span class="jive-icon-sml jive-icon-mention"></span>');jive.shared.soy.i18nHelper({i18nKey:"eae.mention.created",arg0:'<span class="'+soy.$$escapeHtml(A.activity.content.mentionedObject.jiveObjectCSS)+'"></span>',noAutoEscape:true},B);B.append('</div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activity.content.context.jiveObjectCSS),'"></span>',soy.$$escapeHtml(A.activity.content.context.name),"</div>")}B.append('<div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activity.content.context.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.context.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activity.creationTime),(A.activity.content.context.jiveObjectURL)?"</a>":"","</span></div>")}B.append("</section>");if(!C){return B.toString()}};jive.eae.mention.collapsedExcerptText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.deleted)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.not_found.description"),[]))+"</em>":(A.text)?'<div class="j-excerpt'+((!A.showAsExcerpt)?" j-non-excerpt":"")+'">'+A.text+"</div>":"");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.socialgroup=="undefined"){jive.eae.socialgroup={}}jive.eae.socialgroup.socialGroupActivity=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activity)?"":"");if(!C){return B.toString()}};jive.eae.socialgroup.socialGroupJoinActivity=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.groupedUsers){jive.eae.activitystream.groupedUsers({groupedUserList:A.activity.groupedUsers,user:A.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B)}else{jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activity.activityUser,{displayNameOverride:(A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),B)}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.sgroup.joined"),[])),' <a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL),'" class="jivecontainerTT-hover-container" data-objectId="',soy.$$escapeHtml(A.activity.content.id),'" data-objectType="',soy.$$escapeHtml(A.activity.content.objectType),'"><span class="jive-icon-med ',soy.$$escapeHtml(A.activity.content.jiveObjectCSS),'"></span><span class="j-item">',A.activity.content.groupName,"</span></a>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.collaborator_notification=="undefined"){jive.eae.collaborator_notification={}}jive.eae.collaborator_notification.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry j-act-collaborator ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-objectID="',A.activityContainer.activityList[0].content.templateData.objectID,'" data-objectType="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed clearfix j-js-show-all"><div id="commList-item-',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'" data-current="',(A.activityContainer.activityList[0].current)?soy.$$escapeHtml(A.activityContainer.activityList[0].current):"",'"><section id="excerpt_',soy.$$escapeHtml(A.activityContainer.activityList[0].content.domIDPostfix),'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.activityList[0].activityUser,{size:46}),B);B.append('</div><div class="j-author-act">');jive.shared.displayutil.userDisplayNameLink(A.activityContainer.activityList[0].activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.collabAdded"),[])),'</div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objData.iconCSS),'"></span>',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objData.displayName),'</div><div class="j-act-meta font-color-meta-light clearfix"><span class="j-act-time">',(A.activityContainer.activityList[0].content.templateData.objData.href)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.templateData.objData.href)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activityContainer.activityList[0].creationTime),(A.activityContainer.activityList[0].content.templateData.objData.href)?"</a>":"",'</span><strong class="j-new-count font-color-new">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.new"),[])),'</strong></div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a></div></div></article>');if(!C){return B.toString()}};jive.eae.collaborator_notification.expandedCommItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-act-exp-view j-doc expanded clearfix ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" style="display:none;"><article class="j-act-collaborator"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section class="j-init"><div class="j-act-title"><span class="',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objData.iconCSS),' jive-icon-big"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.activityList[0].content.templateData.objData.href),'">',soy.$$escapeHtml(A.activityContainer.activityList[0].content.templateData.objData.displayName),'</a><span class="j-act-container font-color-meta"> in ');jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},B);B.append('</span></div><div class="j-act-exp-content j-rc5"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.activityList[0].activityUser,{size:24}),B);B.append('</div><div class="j-author-act">');jive.shared.displayutil.userDisplayNameLink(A.activityContainer.activityList[0].activityUser,B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.collaboration"),[])),' <span class="j-act-time font-color-meta-light">',soy.$$escapeHtml(A.activityContainer.activityList[0].creationTime),'</span></div></div><div class="j-doc"><div class="j-act-exp-full-content-view" style="display:none;"><div class="j-act-exp-content-body-view" style=""></div></div></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),"</strong></a></div></section></div></div></article></div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.recommendation=="undefined"){jive.eae.recommendation={}}jive.eae.recommendation.insights=function(A,C){var B=C||new soy.StringBuilder();B.append('<ul class="j-insights clearfix">');jive.eae.recommendation.insight({title:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.insight.popularity"),[])),exposition:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.insight.popularity.expo"),[])),rank:A.recommendation.prop.recommendation.ranks.popularity,type:"j-insight-type-popularity"},B);jive.eae.recommendation.insight({title:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.insight.people"),[])),exposition:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.insight.people.expo"),[])),rank:A.recommendation.prop.recommendation.ranks.people,type:"j-insight-type-people"},B);jive.eae.recommendation.insight({title:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.insight.topics"),[])),exposition:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.insight.topics.expo"),[])),rank:A.recommendation.prop.recommendation.ranks.topics,type:"j-insight-type-topics"},B);B.append("</ul>");if(!C){return B.toString()}};jive.eae.recommendation.insight=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="clearfix"><strong class="j-insight-label">',soy.$$escapeHtml(A.title),'</strong><span class="font-color-meta-light">',soy.$$escapeHtml(A.exposition),'</span><div class="j-progress-container j-rc4"><span class="j-progress j-rc3 ',soy.$$escapeHtml(A.type),'" style="width: ',soy.$$escapeHtml(A.rank*100),'%;">',soy.$$escapeHtml(A.rank),"%</span></div></li>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.nitro=="undefined"){jive.eae.nitro={}}if(typeof jive.eae.nitro.activity=="undefined"){jive.eae.nitro.activity={}}jive.eae.nitro.activity.nitroActivity=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.groupedUsers&&A.activity.groupedUsers.length){jive.eae.activitystream.groupedUsers({groupedUserList:A.activity.groupedUsers,user:A.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B)}else{jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activity.activityUser,{displayNameOverride:(A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),B)}B.append(' <span class="j-nitro-activity"><span class="j-nitro-activity-type">',soy.$$escapeHtml(A.activity.content.plainSubject),"</span>",(A.activity.content.type&&A.activity.content.type=="challenge")?'<a href="#" class="nitro-challenge-link" data-challenge-name="'+soy.$$escapeUri(A.activity.content.body)+'">':"",(A.activity.content.imagePath)?'<img src="'+soy.$$escapeHtml(A.activity.content.imagePath)+'" class="j-nitro-activity-icon" alt="'+soy.$$escapeHtml(A.activity.content.body)+'" title="'+soy.$$escapeHtml(A.activity.content.body)+'"/>':"",'<span class="j-nitro-activity-name">',soy.$$escapeHtml(A.activity.content.body),"</span>",(A.activity.content.type&&A.activity.content.type=="challenge")?"</a>":"","</span>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.socialnews=="undefined"){jive.eae.socialnews={}}jive.eae.socialnews.socialNews=function(A,C){var B=C||new soy.StringBuilder();if(!C){return B.toString()}};jive.eae.socialnews.projectCompleted=function(A,E){var C=E||new soy.StringBuilder();var D=new soy.StringBuilder();var B=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activity.activityUser,B);jive.shared.soy.escapeHelper({stringToEscape:B.toString()},D);jive.shared.soy.i18nHelper({i18nKey:"eae.socialnews.project.completed",arg0:D.toString(),arg1:'<span class="jive-icon-med  '+soy.$$escapeHtml(A.activity.content.jiveObjectCSS)+'"></span><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'">'+A.activity.content.subject+" </a>",noAutoEscape:true},C);if(!E){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.socialnews=="undefined"){jive.eae.socialnews={}}jive.eae.socialnews.groupedActivityStreamTemplate=function(A,G){var E=G||new soy.StringBuilder();E.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),(A.streamType=="context")?"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix):"",'" class="j-act-entry j-act-grouped j-act-social-news j-act-not-markable clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-title"><span class="jive-icon-med jive-icon-social-news"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.socialnews.group.header"),[])),'</div><div class="',(A.activityContainer.activityList.length>5)?"j-act-coll-view":"",' collapsed clearfix"><section><ul>');var D=A.activityContainer.activityList;var F=D.length;for(var C=0;C<F;C++){var B=D[C];if(B&&!B.content.deleted){if(C<5){E.append("<li>");jive.eae.activitystream.activityView({activityContainer:A.activityContainer,activity:B,user:A.user,showAvatar:false,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,fromTemplate:"grouped_social_news"},E);E.append("</li>")}}}E.append("</ul></section>",(A.activityContainer.activityList.length>5)?'<div class="j-preview-trigger j-view-more-trigger"><a href="#" class="j-show-more j-js-show-all"><span class="jive-icon-med jive-icon-arrow-down"></span><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.more"),[]))+'</strong></span></a><a href="#" class="j-collapse j-show-less j-js-show-all" style="display:none"><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.less"),[]))+"</strong></span></a></div>":"",'</div><div class="j-act-exp-view expanded clearfix" style="display:none;"></div></div></article>');if(!G){return E.toString()}};jive.eae.socialnews.expandedActivityStreamItemView=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"><section><ul>');var F=A.activityContainer.activityList;var C=F.length;for(var E=0;E<C;E++){var D=F[E];if(D&&!D.content.deleted&&E>=5){B.append("<li>");jive.eae.activitystream.activityView({activityContainer:A.activityContainer,activity:D,user:A.user,showAvatar:false,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,fromTemplate:"grouped_social_news"},B);B.append("</li>")}}B.append("</ul></section></div>");if(!G){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.wallentry=="undefined"){jive.eae.wallentry={}}jive.eae.wallentry.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry j-act-mb ',(A.activityContainer.activityList.length==1&&A.activityContainer.activityList[0].parentActivity)?" j-act-mb-new":"",(A.activityContainer.read)?" j-act-read":" j-act-unread",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.communications.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.wallentry.expandedCommItemView=function(A,H){var D=H||new soy.StringBuilder();D.append('<div class="j-act-exp-view expanded clearfix ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" style="display:none;"><article class="j-act-mb"><div class="j-act-ibx-exp-list clearfix"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(A.streamType),"-exp-header-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-init" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:46}),D);D.append('</div><div class="j-act-init"><div class="j-author-act font-color-meta">');if(!A.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,D)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityContainer.jiveObject},D)}D.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status"),[])),' <span class="j-act-time"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL),'">',soy.$$escapeHtml(A.activityContainer.creationTime),"</a></span></div>");if(A.activityContainer.jiveObject.repostedEntry){D.append('<div class="j-wall-repost-content"><div class="j-wall-repost-header font-color-meta">');var C=new soy.StringBuilder();if(!A.activityContainer.jiveObject.repostedUser.anonymous){jive.shared.displayutil.userDisplayNameLink(A.activityContainer.jiveObject.repostedUser,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityContainer.jiveObject},C)}jive.shared.soy.i18nHelper({i18nKey:"we.originally_posted_by",arg0:C.toString(),noAutoEscape:true},D);D.append('<a class="jive-view-original-link jive-icon-link-forward" href="',soy.$$escapeHtml(A.activityContainer.jiveObject.repostedEntry.jiveObjectURL),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.view_original_update"),[])),'</a></div><div class="j-act-reposted-entry">',A.activityContainer.jiveObject.repostedEntry.text);jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject.repostedEntry,domIDPostfix:A.activityContainer.jiveObject.repostedEntry.domIDPostfix},D);D.append("</div></div>")}D.append('<div class="j-excerpt">',(A.activityContainer&&A.activityContainer.jiveObject&&A.activityContainer.jiveObject.text)?A.activityContainer.jiveObject.text:"");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},D);D.append('</div></div><div class="j-act-meta font-color-meta"><nav class="j-act-actions j-act-actions-init clearfix"><ul>');jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},D);D.append('</ul></nav></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(A.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!A.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:false},D);D.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var B=A.activityContainer.activityList;var G=B.length;for(var F=0;F<G;F++){var E=B[F];if(!E.parentActivity&&(E.current||F==G-1)){jive.eae.wallentry.activityContentExcerpt({activity:E,activityContainer:A.activityContainer,isHidden:false,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:F==G-1},D)}}D.append("</div>",(A.activityContainer.jiveObject&&A.activityContainer.jiveObject.canComment)?'<div class="j-act-add-comment j-js-microrte-replyable"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a id="showMicroRTE_'+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'" href="javascript:void(0);">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.comment"),[]))+"</a></div></div>":"","</div></article></div>");if(!H){return D.toString()}};jive.eae.wallentry.groupedActivityStreamTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-mb j-act-entry ',(A.activityContainer.activityList.length==1&&A.activityContainer.activityList[0].parentActivity)?" j-act-mb-new":"",' j-act-not-markable" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div class="j-we-container j-js-microrte-replyable">');jive.eae.wallentry.streamWallEntryTitle({activityContainer:A.activityContainer,parent:A.activityContainer.activityList.length==1&&A.activityContainer.activityList[0].parentActivity?true:false,hidden:false,streamType:A.streamType,filterType:A.filterType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</div>");jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},B);B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.wallentry.collapsedActivityStreamExcerpt({activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],activityContainer:A.activityContainer,user:A.user,streamType:A.streamType,filterType:A.filterType,canCreateMbImage:A.canCreateMbImage,canCreateMbImage:A.canCreateMbVideo,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-meta font-color-meta clearfix">');jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.wallentry.streamWallEntryTitle=function(B,D){var C=D||new soy.StringBuilder();C.append("<section class='j-js-stream-we-title j-act-title j-act-mb-init' ",(B.hidden)?'style="display:none"':"",'><nav id="',soy.$$escapeHtml(B.streamType),"-exp-title-actions-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'"><ul>');if(B.user&&!B.user.anonymous&&B.activityContainer.sharable){C.append("<li>");jive.soy.share.control({objectId:B.activityContainer.jiveObject.id,objectType:B.activityContainer.jiveObject.objectType,type:"text"},C);C.append("</li>")}C.append((B.activityContainer.jiveObject.canRepost)?'<li class="j-repost-item" id="j-repost-item-'+soy.$$escapeHtml(jive.soy.func.randomString())+"-"+soy.$$escapeHtml(B.activityContainer.jiveObject.id)+'"><a href="#" class="j-repost" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.repost.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.repost"),[]))+"</a></li>":"",(B.streamType=="user"&&B.filterType=="all")?'<li><a href="#" class="j-act-hidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide"),[]))+"</a></li>":"",(B.filterType=="antimatter")?'<li><a href="#" class="j-act-unhidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide"),[]))+"</a></li>":"",'</ul></nav><div class="j-act-avatar"><span class="jive-icon-med jive-icon-status"></span>');jive.shared.displayutil.avatar(soy.$$augmentData(B.activityContainer.originalAuthor,{size:46}),C);C.append('</div><div class="j-author-act font-color-meta">');jive.shared.displayutil.userDisplayNameLink(B.activityContainer.originalAuthor,C);C.append(" ");if(B.activityContainer.jiveObject.wallCreationSrc!=""){jive.shared.soy.i18nHelper({i18nKey:"activity.type.status.with.source",arg0:B.activityContainer.jiveObject.wallCreationSrc,noAutoEscape:true},C)}else{C.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status"),[])))}C.append('</div><div class="j-act-mb-content">');if(B.activityContainer.jiveObject.repostedEntry){C.append('<div class="j-wall-repost-content"><div class="j-wall-repost-header"><span class="font-color-meta">');var A=new soy.StringBuilder();if(!B.activityContainer.jiveObject.repostedUser.anonymous){jive.shared.displayutil.userDisplayNameLink(B.activityContainer.jiveObject.repostedUser,A)}else{jive.shared.displayutil.renderGuestDisplayName({message:B.activityContainer.jiveObject},A)}jive.shared.soy.i18nHelper({i18nKey:"we.originally_posted_by",arg0:A.toString(),noAutoEscape:true},C);C.append('</span><a class="jive-view-original-link jive-icon-link-forward" href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.repostedEntry.jiveObjectURL),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.view_original_update"),[])),'</a></div><div class="j-act-reposted-entry">',B.activityContainer.jiveObject.repostedEntry.text,"</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:B.activityContainer.jiveObject.repostedEntry,domIDPostfix:B.activityContainer.jiveObject.repostedEntry.domIDPostfix},C);C.append("</div>")}C.append('<div class="j-excerpt">',(B.activityContainer&&B.activityContainer.jiveObject&&B.activityContainer.jiveObject.text)?B.activityContainer.jiveObject.text:"");jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:B.activityContainer.jiveObject,domIDPostfix:B.activityContainer.jiveObject.domIDPostfix},C);C.append('</div><div class="jive-comment-actions"><nav id="',soy.$$escapeHtml(B.streamType),"-we-actions-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="clearfix" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'"><span class="j-act-time"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.jiveObjectURL),'" class="font-color-meta-light">',soy.$$escapeHtml(B.activityContainer.creationTime),'</a></span><ul class="font-color-meta">',(B.activityContainer.canReply)?'<li><span class="jive-icon-sml jive-glyph-comment"></span><a id="showMicroRTE_'+soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix)+'" class="j-reply-micro" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[]))+"</a></li>":"");if(B.activityContainer.likable){C.append('<li class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer({canLike:B.user&&!B.user.anonymous&&B.activityContainer.jiveObject.canRate&&!B.activityContainer.amAnAuthor,objectType:B.activityContainer.jiveObject.objectType,objectId:B.activityContainer.jiveObject.id,uniqueKey:soy.$$escapeHtml(B.activityContainer.jiveObject.objectType)+"-"+soy.$$escapeHtml(B.activityContainer.jiveObject.id)+"-"+soy.$$escapeHtml(jive.soy.func.randomString()),liked:B.activityContainer.liked,likeCount:B.activityContainer.likeCount},C);C.append("</li>")}C.append("</ul></nav></div></div></section>");if(!D){return C.toString()}};jive.eae.wallentry.collapsedActivityStreamExcerpt=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.parentActivity||A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.repostedEntry){}else{B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="',(A.activity.content.typeWallEntryComment)?"j-we-comment":"",'"><div class="j-act-avatar ',(A.activity.content.typeWallEntryComment)?"sm":"",'">');if(A.activity.content.typeWallEntryComment){jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:32}),B)}else{jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B)}B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,user:A.user,againstObject:false,hideDetailedReplyTo:A.activity.content.typeWallEntryComment==true},B);B.append("</div>");if(!A.activity.content.typeWallEntry){B.append('<div class="j-excerpt" ',(A.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,hasMoreText:A.activity.hasMoreText,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="j-act-sub-preview clearfix" ',(!A.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(A.activity.content.html){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append("</div></div></div>")}B.append('<div class="jive-comment-actions"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta"><li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section></div>")}if(!C){return B.toString()}};jive.eae.wallentry.expandedActivityStreamItemView=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');if(A.streamType=="profile"){var D=A.activityContainer.activityList;var B=D.length;for(var F=0;F<B;F++){var E=D[F];if(!E.parentActivity){jive.eae.wallentry.activityContentExcerpt({activity:E,activityContainer:A.activityContainer,isHidden:false,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:false},C)}}}C.append("</div></div>");if(!G){return C.toString()}};jive.eae.wallentry.activityContentExcerpt=function(A,D){var C=D||new soy.StringBuilder();if(A.activityContainer&&A.activityContainer.jiveObject.id==A.activity.content.id&&A.activityContainer.jiveObject.objectType==A.activity.content.objectType){}else{C.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.addedInline)?"j-js-addedInline":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current||A.forceCurrent)?"true":"",'" style="',(A.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="reply j-sub">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:"32"}),C);C.append('<div class="j-excerpt',(!A.activity.content.summaryIsExcerpt)?" j-non-excerpt":"",' clearfix" ',(A.hideStub)?'style="display:none;"':"",">");if(!A.hideStub){var B=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B);jive.eae.activitystream.activityContentCommon({contentTxt:B.toString(),hasMoreText:A.activity.hasMoreText},C)}C.append('</div><div class="j-act-sub-preview" ',(!A.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,user:A.user,againstObject:false,hideDetailedReplyTo:A.activity.content.typeWallEntryComment==true},C);C.append(" ",(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},C)}C.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activity.content,domIDPostfix:A.activity.domIDPostfix},C);C.append('<div class="jive-comment-actions"><nav class="clearfix"><ul>',(!A.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},C);C.append("</ul></nav></div></div></div></section></div>")}if(!D){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.share=="undefined"){jive.eae.share={}}jive.eae.share.groupedCommActivityTemplate=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" class="j-comm-entry j-act-exp-trigger clearfix j-act-share ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-js-act-content j-act-content"><div class="j-act-coll-view collapsed j-js-show-all clearfix">');jive.eae.share.commListItemView({activityContainer:A.activityContainer,streamType:A.streamType,user:A.user,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],hidden:false,time:A.activityContainer.parentTime},B);B.append("</div></div></article>");if(!C){return B.toString()}};jive.eae.share.commListItemView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="commList-item-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style="',(A.hidden)?"display:none":"",'"><section id="commList-item-excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta">',(A.activityContainer.jiveObject.typeShare)?'<span class="jive-icon-med jive-icon-share-label" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.label"),[]))+'"></span>':"");jive.eae.activitystream.activityAuthor({object:A.activity.content,type:"share",activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:true,user:A.user,againstObject:true},B);B.append('</div><div class="j-act-title font-color-link"><span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.sharedObject.jiveObjectCSS),'"></span>',A.activityContainer.jiveObject.subject,'</div><div class="j-act-meta font-color-meta clearfix"><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"","</span>");jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer,forceCount:true},B);B.append('</div></section></div><a href="#" class="j-link-read j-js-unread-trigger jive-icon-med jive-icon-read-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'"></a><a href="#" class="j-link-unread j-js-read-trigger jive-icon-med jive-icon-unread-marker" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'"></a>');if(!C){return B.toString()}};jive.eae.share.expandedCommItemView=function(A,G){var C=G||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix ',(A.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.filterType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),'" style="display:none;"><article class="j-act-share"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(A.streamType),"-exp-header-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-init j-act-init" data-objectID="',A.activityContainer.jiveObject.id,'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.jiveObject.user,{size:46}),C);C.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.communications.collaboratorParticipantsI18NHelper({activityContainer:A.activityContainer,user:A.user},C);C.append('</div><div class="j-excerpt">',(A.activityContainer&&A.activityContainer.jiveObject&&A.activityContainer.jiveObject.text)?A.activityContainer.jiveObject.text:"",'</div><span class="j-act-time">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'<a href="#" class="j-act-addrecipients font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients"),[])),'</a></span><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(A.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!A.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section><div class="j-act-share-byline"><h4 class="font-color-meta">');jive.shared.soy.i18nHelper({i18nKey:"eae.inbox.share.view",arg0:(A.activityContainer.jiveObject.contentTypeName).toLowerCase(),noAutoEscape:true},C);C.append(' </h4><span class="',soy.$$escapeHtml(A.activityContainer.jiveObject.sharedObject.jiveObjectCSS),' jive-icon-big"></span>',(!A.activityContainer.jiveObject.sharedObject.objectLoaded)?"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.deleted"),[]))+"</strong>":'<strong><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.sharedObject.jiveObjectURL)+'">'+A.activityContainer.jiveObject.sharedObject.plainSubject+"</a></strong>"+((A.activityContainer.jiveObject.sharedObject.isReplyable)?'<p class="j-act-meta"> <a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.sharedObject.jiveObjectURL)+'" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.jiveObject.sharedObject.replyCount)+" "+((A.activityContainer.jiveObject.sharedObject.typeThread)?(A.activityContainer.jiveObject.sharedObject.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.reply.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.replies.lc"),[])):(A.activityContainer.jiveObject.sharedObject.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.comment.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.comments.lc"),[])))+"</a></p>":""),'</div></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:false},C);C.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var D=A.activityContainer.activityList;var B=D.length;for(var F=0;F<B;F++){var E=D[F];if(!E.parentActivity&&(E.current||!A.activityContainer.numCurrent&&F==B-1)){jive.eae.activitystream.activityContentExcerpt({activity:E,activityContainer:A.activityContainer,isHidden:false,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:!A.activityContainer.numCurrent&&F==B-1},C)}}C.append('</div><div class="j-act-add-comment j-js-microrte-replyable"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a id="showMicroRTE_',soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.reply"),[])),"</a></div></div></div></article></div>");if(!G){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.recommendation=="undefined"){jive.eae.recommendation={}}jive.eae.recommendation.paginator=function(B,E){var C=E||new soy.StringBuilder();if(B.numberOfPages>1){C.append('<nav class="j-dotted-paginator j-js-paginator j-pagination-prevnext clearfix"><a class="j-previous j-pagination-prev ',(B.currentPage==1)?" j-disabled j-js-disabled":"",'" href="#" data-index="',soy.$$escapeHtml(B.currentPage-2),'" data-is-disabled="',(B.currentPage==1)?"true":"false",'"></a><ul class="j-items clearfix">');var A=B.numberOfPages+1;for(var D=1;D<A;D++){C.append('<li class="j-item j-js-item',(D==B.currentPage)?" j-current j-js-current":"",'"><a data-index="',soy.$$escapeHtml(D-1),'" data-is-disabled="',(D==B.currentPage)?"true":"false",'" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.page"),[D])),"</a></li>")}C.append('</ul><a class="j-next j-pagination-next ',(B.currentPage==B.numberOfPages)?" j-disabled j-js-disabled":"",'" href="#" data-index="',soy.$$escapeHtml(B.currentPage),'" data-is-disabled="',(B.currentPage==B.numberOfPages)?"true":"false",'"></a></nav>')}if(!E){return C.toString()}};jive.eae.recommendation.paginatorCurrentPage=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-item-highlight j-js-item-highlight"></div>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.wallentry=="undefined"){jive.eae.wallentry={}}jive.eae.wallentry.wallEntryActivity=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.type=="repost"&&A.fromTemplate=="latest_acclaim"){if(A.activity.groupedUsers){jive.eae.activitystream.groupedUsers({groupedUserList:A.activity.groupedUsers,user:A.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B)}else{if(!A.activity.activityUser.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activity.activityUser,{displayNameOverride:(A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),B)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activity.content},B)}}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.status.repost.your"),[]))," ",(A.activity.content.repostedEntry)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.repostedEntry.jiveObjectURL)+'"><span class="'+soy.$$escapeHtml(A.activity.content.repostedEntry.jiveObjectCSS)+'"></span><span class="j-item">'+A.activity.content.repostedEntry.subject+"</span></a>":"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.original_deleted"),[]))+"</strong>")}else{B.append("<section>");jive.eae.activitystream.activityContentExcerpt({activity:A.activity,activityContainer:A.activityContainer,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</section>")}if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.blogpost=="undefined"){jive.eae.blogpost={}}jive.eae.blogpost.expandedCommItemView=function(J,H){var C=H||new soy.StringBuilder();C.append('<div class="j-act-exp-view expanded clearfix ',(J.activityContainer.read)?"j-act-read":"j-act-unread",'" data-linkedID="',soy.$$escapeHtml(J.streamType),"_",soy.$$escapeHtml(J.filterType),"_",J.activityContainer.jiveObject.objectType,"_",J.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(J.activityContainer.container.type),"_",soy.$$escapeHtml(J.activityContainer.container.id),'" style="display:none;"><article class="');jive.eae.activitystream.contentTypeClassName({activityContainer:J.activityContainer},C);C.append('"><div class="j-act-ibx-exp-list"><div class="j-act-tl-content-container"><section id="',soy.$$escapeHtml(J.streamType),"-exp-header-",soy.$$escapeHtml(J.activityContainer.jiveObject.domIDPostfix),'" class="j-init ',(J.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(J.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(J.activityContainer.jiveObject.objectType),'"><div class="j-act-title"><span class="jive-icon-big  ',soy.$$escapeHtml(J.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,J.activityContainer.jiveObject.jiveObjectURL),'">',J.activityContainer.jiveObject.subject,"</a> ");if(J.activityContainer.container.type&&J.activityContainer.container.type!=-2){C.append(' <span class="j-act-container font-color-meta">');if(J.activityContainer.container.type==2020){var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(J.activityContainer.originalAuthor,D);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:D.toString(),arg1:(J.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},C)}else{var A=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:J.activityContainer.container},A);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:A.toString(),noAutoEscape:true},C)}C.append("</span>")}C.append('</div><div class="j-act-header-slug j-excerpt"><div class="j-author-act font-color-meta">');if(!J.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(J.activityContainer.originalAuthor,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:J.activityContainer.jiveObject},C)}C.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:J.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:J.streamType,hideDetailedReplyTo:true,user:J.user,againstObject:false},C);C.append(' <span class="j-act-time">',soy.$$escapeHtml(J.activityContainer.creationTime),"</span></div>",(J.activityContainer.jiveObject.text)?J.activityContainer.jiveObject.text+((J.activityContainer.jiveObject.hasMoreText)?"&hellip;":""):"",'</div><div class="j-act-exp-full-content-view j-rc5" style="display:none;"><div class="j-author-act font-color-meta">');if(!J.activityContainer.originalAuthor.anonymous){jive.shared.displayutil.userDisplayNameLink(J.activityContainer.originalAuthor,C)}else{jive.shared.displayutil.renderGuestDisplayName({message:J.activityContainer.jiveObject},C)}C.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:J.activityContainer.jiveObject,type:"created",displayAuthorLink:false,streamType:J.streamType,hideDetailedReplyTo:true,user:J.user,againstObject:false},C);C.append(' <span class="j-act-time">',soy.$$escapeHtml(J.activityContainer.creationTime),'</span></div><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:J.activityContainer.jiveObject,domIDPostfix:J.activityContainer.jiveObject.domIDPostfix},C);C.append('<div class="j-act-meta clearfix"><nav id="',soy.$$escapeHtml(J.streamType),"-exp-body-actions-",soy.$$escapeHtml(J.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(J.activityContainer.canReply)?"j-act-rte-replyable":"",' clearfix" data-objectID="',soy.$$escapeHtml(J.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(J.activityContainer.jiveObject.objectType),'"><ul>');jive.eae.activitystream.activityNavActions({object:J.activityContainer.jiveObject,activityContainer:J.activityContainer,amAnAuthor:J.activityContainer.amAnAuthor,objectType:J.activityContainer.jiveObject.objectType,objectId:J.activityContainer.jiveObject.id,liked:J.activityContainer.liked,likeCount:J.activityContainer.likeCount,likable:J.activityContainer.likable,author:J.activityContainer.originalAuthor,user:J.user,location:"parentPreview",streamType:J.streamType,filterType:J.filterType,canCreateMbImage:J.canCreateMbImage,canCreateMbVideo:J.canCreateMbVideo},C);C.append('</ul></nav></div></div><div class="j-act-preview-controls"><a href=\'#\' class="j-js-show-full-content j-act-preview show" data-objectID="',soy.$$escapeHtml(J.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(J.activityContainer.jiveObject.objectType),'"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.show.full.preview"),[])),'</a><a href=\'#\' class="j-js-hide-full-content j-act-preview hide" style="display:none;"><span class="jive-icon-med jive-icon-down"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.hide.full.preview"),[])),'</a></div><div class="j-track"><a href="#" class="j-link-read j-js-unread-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-read-marker"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.mark.unread"),[])),'</span></a><a href="#" class="j-link-unread j-js-read-trigger font-color-meta-light"><span class="jive-icon-med jive-icon-unread-marker"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.mark.read"),[])),'</strong></a><a href="#" class="j-act-untrack font-color-meta-light" ',(J.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><span class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untrack"),[])),'</span></a><a href="#" class="j-act-track-comms font-color-meta-light" ',(!J.activityContainer.untracked)?'style="display: none;"':"",'><span class="jive-icon-med jive-glyph-track"></span><strong class="j-track-lnk">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[])),'</strong></a></div></section></div><div class="j-sub-activity-header clearfix"><strong class="j-comment-counter"><span class="jive-icon-sml jive-glyph-comment"></span>');jive.eae.activitystream.replyCountText({activityContainer:J.activityContainer,showCurrentCount:false},C);C.append("</strong><h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older font-color-meta" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.earlier"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var F=J.activityContainer.activityList;var I=F.length;for(var E=0;E<I;E++){var B=F[E];if(!B.parentActivity&&(B.current||E==I-1)){jive.eae.activitystream.activityContentExcerpt({activity:B,activityContainer:J.activityContainer,isHidden:false,user:J.user,streamType:J.streamType,canCreateMbImage:J.canCreateMbImage,canCreateMbVideo:J.canCreateMbVideo,hideStub:true,addedInline:false,forceCurrent:E==I-1},C)}}C.append("</div>");if(J.activityContainer.canReply){C.append('<nav id="',soy.$$escapeHtml(J.streamType),"-parent-reply-",soy.$$escapeHtml(J.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(J.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(J.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');var G=new soy.StringBuilder();jive.eae.communications.readingPaneBottomReplyLinkKey({activityContainer:J.activityContainer},G);jive.shared.soy.i18nHelper({i18nKey:G.toString(),arg0:(J.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((J.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},C);C.append("</a></div></div></nav>")}C.append("</div></article></div>");if(!H){return C.toString()}};jive.eae.blogpost.groupedActivityStreamTemplate=function(B,E){var C=E||new soy.StringBuilder();C.append('<article id="',soy.$$escapeHtml(B.streamType),"_",B.activityContainer.jiveObject.objectType,"_",B.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(B.activityContainer.container.type),"_",soy.$$escapeHtml(B.activityContainer.container.id),"_",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable ');jive.eae.activitystream.contentTypeClassName({activityContainer:B.activityContainer},C);C.append(' clearfix" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'">',(B.filterType=="antimatter"||B.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(B.streamType),"-act-title-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title">');if(B.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:B.activityContainer.jiveObject.activityIcon},C);C.append(" ")}else{C.append('<span class="jive-icon-med  ',soy.$$escapeHtml(B.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}C.append((B.activityContainer.jiveObject.subjectIsHtml)?B.activityContainer.jiveObject.htmlSubject:'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.jiveObjectURL)+'">'+B.activityContainer.jiveObject.subject+"</a>",'<nav id="',soy.$$escapeHtml(B.streamType),"-exp-title-actions-",soy.$$escapeHtml(B.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init clearfix" data-objectID="',soy.$$escapeHtml(B.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(B.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:B.activityContainer},C);C.append("</li>");jive.eae.activitystream.activityNavActions({object:B.activityContainer.jiveObject,activityContainer:B.activityContainer,amAnAuthor:B.activityContainer.amAnAuthor,objectType:B.activityContainer.jiveObject.objectType,objectId:B.activityContainer.jiveObject.id,liked:B.activityContainer.liked,likeCount:B.activityContainer.likeCount,likable:B.activityContainer.likable,author:B.activityContainer.originalAuthor,user:B.user,location:"Title",streamType:B.streamType,filterType:B.filterType,tracked:B.activityContainer.tracked,untracked:B.activityContainer.untracked,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo},C);C.append('</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:B.activityContainer,streamType:B.streamType,filterType:B.filterType},C);C.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.activitystream.collapsedActivityStreamExcerpt({activityContainer:B.activityContainer,activity:B.activityContainer.activityList[B.activityContainer.activityList.length-1],streamType:B.streamType,user:B.user,canCreateMbImage:B.canCreateMbImage,canCreateMbVideo:B.canCreateMbVideo,hideStub:false,time:B.activityContainer.parentTime},C);C.append('</div><div class="j-act-meta font-color-meta-light"> ');if(B.activityContainer.container.type&&B.activityContainer.container.type!=-2){if(B.activityContainer.container.type==2020){var A=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(B.activityContainer.originalAuthor,A);jive.shared.soy.i18nHelper({i18nKey:"eae.container.by",arg0:A.toString(),noAutoEscape:true},C)}else{var D=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:B.activityContainer.container},D);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:D.toString(),noAutoEscape:true},C)}C.append(' <span class="j-bullet">&#8226;</span> ')}jive.eae.activitystream.replyCountText({activityContainer:B.activityContainer,showCurrentCount:(B.streamType=="user"||B.streamType=="all")&&B.filterType=="all"},C);C.append("</div></div></article>");if(!E){return C.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.external=="undefined"){jive.eae.external={}}jive.eae.external.externalActivity=function(A,C){var B=C||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.data.jiveObject.objectType),"_",soy.$$escapeHtml(A.data.jiveObject.id),"_",soy.$$escapeHtml(A.data.container.type),"_",soy.$$escapeHtml(A.data.container.id),'" class="j-act-app ',(A.data.read)?"j-act-read":"j-act-unread",' j-rc6">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.external.rendering_unsupported_presentation"),[])),"</article>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.action=="undefined"){jive.eae.action={}}jive.eae.action.share=function(K,M){var G=M||new soy.StringBuilder();G.append('<head><meta name="nav.active.link" content="jive-nav-link-inbox" /><title>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.share_message.participants"),[]))," ");jive.shared.displayutil.userDisplayName(soy.$$augmentData(K.share.user,{displayNameOverride:(K.currentUser.id==K.share.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),G);G.append(", ");var R=K.share.participants;var F=R.length;for(var E=0;E<F;E++){var I=R[E];jive.shared.displayutil.userDisplayName(soy.$$augmentData(I,{displayNameOverride:(K.currentUser.id==I.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),G);G.append((!(E==F-1))?", ":"")}G.append("</title>");jive.shared.soy.resourceInlineJs({code:"$j(function() {var templateOptions = {canComment: true, canCreateImage: true, entitlementObjectID: "+soy.$$escapeHtml(K.share.id)+", entitlementObjectType: "+soy.$$escapeHtml(K.share.objectType)+"}; jive.Wall.CommentHelper.renderCommentFormTemplate("+soy.$$escapeHtml(K.shareObjectType)+", templateOptions); $j('.j-comment-submit').live(\"click\", function () {jive.Wall.CommentHelper.submitComment(this, "+soy.$$escapeHtml(K.shareObjectType)+", '"+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"status-list-comments.jspa"))+"');}); $j('.j-comment-delete').live(\"click\", function() {jive.Wall.CommentHelper.destroyComment($j(this).attr('commentid'));});}); $j(function() {var participants = "+JSON.stringify(K.share.participants).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'; $j("#jive-link-manage-collab > a").click(function(e) {var $collabModal = $j(jive.eae.communications.collaboratorParticipantsModal()); var userCollabController = new jive.UserCollaboration.Main({participants: participants, objectuser: '+JSON.stringify(K.share.user).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", currentUser: "+JSON.stringify(K.currentUser).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", item: "+JSON.stringify(K.share).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", participantsInput: $collabModal.find('#participants'), form: $collabModal.find('form'), finishedCallback: function(users) {for(var i = 0; i < users.length; i++){users[i].id = users[i].ID; var userAlreadyAdded = $j('.j-act-participants a[data-username=\"'+users[i].username+'\"]').length; if (!userAlreadyAdded) {var userLink = jive.shared.displayutil.userDisplayNameLink(users[i]); $j('.j-act-participants').append(\", \"+userLink); document.title = document.title + \", \" + users[i].displayName; participants.push(users[i]);}}}}); $collabModal.lightbox_me({closeSelector: \".jive-modal-close-top, .close\"}); e.preventDefault();});}); $j(function() {new jive.Modalizer.Main({triggers:['#jive-link-delete a']});});"},G);G.append('</head><body class="jive-body-content jive-view-profile jive-view-profile-single-wall jive-view-profile-single-dm j-body-stream-content"><header id="jive-body-intro"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/communications")),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.up.to"),[])),'</a></header><!-- BEGIN main body --><div id="jive-body-main" class="j-layout j-layout-ls clearfix"><!-- BEGIN main body column --><div class="j-column-wrap-l"><div class="j-column j-column-l lg-margin"><div class="jive-info-box" style="display:none"><div><span class="jive-icon-med jive-icon-info"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.posted.success"),[])),'</div></div><div class="jive-error-box" style="display:none"><div><span class="jive-icon-med jive-icon-info"></span></div></div><div class="j-act jive-content j-shared-content"><div class="j-act-participants">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.share_message.participants"),[])),": ");jive.shared.displayutil.userDisplayNameLink(K.share.user,G);G.append(", ");var T=K.share.participants;var J=T.length;for(var L=0;L<J;L++){var P=T[L];jive.shared.displayutil.userDisplayNameLink(P,G);G.append((!(L==J-1))?", ":"")}G.append('</div><article class="j-act-share"><section><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(K.share.user,{size:46}),G);G.append('</div><div class="j-author-act font-color-meta">');jive.shared.displayutil.userDisplayNameLink(K.share.user,G);G.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.posted"),[]))," ",soy.$$escapeHtml(K.share.creationTime),'</div><div id="j-status-post-',soy.$$escapeHtml(K.statusPostIdPostfix),'" class="j-status-post j-act-mb-content clearfix"><div class="jive-activity-status">',K.share.renderedText,"</div>");if(K.hasMeta){G.append('<div class="jive-js-image-container-',soy.$$escapeHtml(K.statusPostIdPostfix),' j-attachment-container clearfix" style="display: none; opacity: 0;"></div>');var N=new soy.StringBuilder("(function(){var renderAttachmentsParams = {attachments:[]};");var S=K.share.meta;var A=S.length;for(var Q=0;Q<A;Q++){var O=S[Q];N.append((O.objectType!=K.wallEntryObjectType)?(O.objectType==111)?"renderAttachmentsParams.attachments.push({objectType:'"+soy.$$escapeHtml(O.objectType)+"',"+((O.id)?"id:"+soy.$$escapeHtml(O.id)+",":"")+"fullImageUrl:'"+soy.$$escapeHtml(O.fullImageUrl)+"', imageThumbnailUrl:'"+soy.$$escapeHtml(O.imageThumbnailUrl)+"', thumbnailWidth:"+soy.$$escapeHtml(O.thumbnailWidth)+", thumbnailHeight:"+soy.$$escapeHtml(O.thumbnailHeight)+"});":"renderAttachmentsParams.attachments.push({objectType:'"+soy.$$escapeHtml(O.objectType)+"', properties:{videoURL:'"+soy.$$escapeHtml(O.properties.videoURL)+"', thumbnailURL:'"+soy.$$escapeHtml(O.properties.thumbnailURL)+"', thumbnailWidth:"+soy.$$escapeHtml(O.properties.thumbnailWidth)+", thumbnailHeight:"+soy.$$escapeHtml(O.properties.thumbnailHeight)+"}});":"")}N.append("$j(document).ready(function() {if(renderAttachmentsParams.attachments.length > 0){jive.StatusInput.renderAttachmentsWrapper(renderAttachmentsParams, $j('#j-status-post-",soy.$$escapeHtml(K.statusPostIdPostfix)," .jive-js-image-container-",soy.$$escapeHtml(K.statusPostIdPostfix),"', false, jive.Wall.Main.i18n));}});})();");jive.shared.soy.resourceInlineJs({code:N.toString()},G)}G.append('<div class="j-act-share-byline">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.share.view"),[(K.share.contentTypeName).toLowerCase()])),' <span class="',soy.$$escapeHtml(K.share.sharedObject.jiveObjectCSS),'"></span>',(!K.share.sharedObject.objectLoaded)?"<strong>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.deleted"),[]))+"</strong>":'<strong><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,K.share.sharedObject.jiveObjectURL)+'">'+K.share.sharedObject.plainSubject+"</a></strong>",'</div></div></section></article><span class="j-doc-shadow j-left-doc-shadow j-ui-elem"></span><span class="j-doc-shadow j-right-doc-shadow j-ui-elem"></span></div><div class="j-inline-comment-wrapper clearfix" style="',(!K.commentsVisible)?"display: none;":"",'"><div class="jive-comment-container clearfix j-rc5 j-rc-none-top comments-',K.share.id,'" data-statusid="',K.share.id,'"><div id="jive-warn-box-',K.share.id,'" class="jive-warn-box" style="display:none"><div><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.comments.moderated"),[])),'</div></div><h6 class="font-color-meta"><span class="jive-icon-sml jive-icon-comment"></span>',soy.$$escapeHtml(K.commentCount)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.comment.plural"),[])),'</h6><ul class="jive-comment" id="wall-comments-',K.share.id,'">');var B=K.comments;var C=B.length;for(var D=0;D<C;D++){var H=B[D];G.append('<li id="comment-',H.id,'" class="clearfix">');jive.shared.displayutil.avatar(soy.$$augmentData(H.user,{size:30}),G);G.append('<div class="jive-comment-arrow"></div><div class="jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.shared.displayutil.userDisplayNameLink(H.user,G);G.append(" ",soy.$$escapeHtml(H.creationTime),"</p><div>",H.text,'</div><div id="comment-action-div-',H.id,'" class="jive-comment-actions font-color-meta-light clearfix">',(H.canEditComment)?'<a href="javascript:void(0)" class="font-color-meta j-comment-delete" commentid="'+H.id+'"><span class="jive-icon-sml jive-glyph-delete commentDelete"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.delete"),[]))+"</a>":"",(H.canReportAbuse)?(H.hasReportedAbuse)?'<a href="message-abuse!input.jspa?objectID='+H.id+"&amp;objectType="+soy.$$escapeHtml(H.objectType)+'" class="font-color-meta" commentid="'+H.id+'"><span class="jive-icon-sml jive-glyph-warn commentWarn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.abuse.link"),[]))+"</a>":'<span class="j-action-item"><span class="jive-icon-sml jive-glyph-warn commentWarn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.abuse_reported.link"),[]))+"</span>":"","</div></div></li>")}G.append('</ul></div></div></div></div><!-- END main body column --><!-- BEGIN sidebar column --><div class="j-column j-column-s j-content-extras">',(K.canAddParticipants||K.canDelete)?'<div class="j-box j-box-actions"><header><h4 id="jive-action-sidebar-tab-header_directmessage-actions-tab">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[]))+'</h4></header><div id="jive-action-sidebar" class="j-box-body"><div id="jive-action-sidebar-tab-_microblog-actions-tab" class="jive-action-sidebar-tab-first"><ul id="jive-action-sidebar-tab-list_microblog-actions-tab" class="j-icon-list">'+((K.canAddParticipants||K.canDelete)?'<li id="jive-link-manage-collab"><a href="#" rel="nofollow"><span class="jive-icon-med jive-icon-document-collaboration"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_message.add_recipients"),[]))+"</a></li>":"")+((K.canDelete)?'<li id="jive-link-delete"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/wallentry-delete!input.jspa?wallEntry="+K.share.id))+'" rel="nofollow"><span class="jive-icon-med jive-icon-delete"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.share.delete"),[]))+"</a></li>":"")+"</ul></div></div></div>":"","</div><!-- END sidebar column --></div><!-- END main body --></body>");if(!M){return G.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.like=="undefined"){jive.eae.like={}}jive.eae.like.groupedLikeActivity=function(A,G){var B=G||new soy.StringBuilder();B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.id),(A.streamType=="context")?"_"+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix):"",'" class="j-act-entry j-act-grouped j-act-like clearfix j-act-not-markable"><div class="j-js-act-content j-act-content"><div class="j-act-title"><span class="jive-icon-med jive-icon-like"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.liking.group.header"),[])),'</div><div class="',(A.activityContainer.activityList.length>5)?"j-act-coll-view":"",' collapsed clearfix"><section><ul>');var E=A.activityContainer.activityList;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(D<5){B.append("<li>");jive.eae.activitystream.activityView({activity:C,showAvatar:false,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,fromTemplate:"latest_likes"},B);B.append("</li>")}}B.append("</ul></section>",(A.activityContainer.activityList.length>5)?'<div class="j-preview-trigger j-view-more-trigger"><a href="#" class="j-show-more j-js-show-all "><span class="jive-icon-med jive-icon-arrow-down"></span><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.more"),[]))+'</strong></span></a><a href="#" class="j-collapse j-show-less j-js-show-all" style="display:none"><span class="lnk font-color-meta"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.less"),[]))+"</strong></span></a></div>":"",'</div><div class="j-act-exp-view expanded clearfix" style="display:none;"></div></div></article>');if(!G){return B.toString()}};jive.eae.like.expandedActivityStreamItemView=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"><section><ul>');var E=A.activityContainer.activityList;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(D>=5){B.append("<li>");jive.eae.activitystream.activityView({activity:C,showAvatar:false,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,fromTemplate:"latest_likes"},B);B.append("</li>")}}B.append("</ul></section></div>");if(!G){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.directMessage=="undefined"){jive.eae.directMessage={}}jive.eae.directMessage.directMessageActivity=function(A,C){var B=C||new soy.StringBuilder();B.append("<section>");jive.eae.activitystream.activityContentExcerpt({activity:A.data,activityContainer:A.activityContainer,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:true},B);B.append("</section>");if(!C){return B.toString()}}
;
$j(document).ready(function(){$j(".recommendation").click(function(){$j(this).parent().next("#scores").slideToggle("slow");return false})});
;
jive.namespace("RecommendationFeedback");jive.RecommendationFeedback.RecommendationFeedbackSource=jive.RestService.extend(function(a){a.displayGenericErrorMessages=false;a.resourceType="recommendationfeedback";a.pluralizedResourceType=a.resourceType;this.save=function(b,d){var c=this.RESOURCE_ENDPOINT+"/interested/"+b+"/"+d;return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:c})};this.expressDisinterest=function(b,c){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT+"/disinterest/"+b+"/"+c})};this.expressDislike=function(b,c){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT+"/dislike/"+b+"/"+c})}});
;
jive.namespace("RecommendationFeedback");jive.RecommendationFeedback.RecommendationFeedbackView=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(c){var b=this;this.options=c;this.recSelector=c.recSelector;$j(this.recSelector).click(function(){var d=$j(this).attr("id").split("-")[0];var f=$j(this).attr("id").split("-")[1];var e=$j(this).attr("href");b.emitP("recclicked",d,f).addCallback(function(){window.location=e});return false})}});
;
jive.namespace("RecommendationFeedback");jive.RecommendationFeedback.Main=jive.oo.Class.extend(function(a){this.init=function(c){var b=this;this.recommendationFeedbackView=new jive.RecommendationFeedback.RecommendationFeedbackView(c);this.recommendationFeedbackSource=new jive.RecommendationFeedback.RecommendationFeedbackSource(c);this.recommendationFeedbackView.addListener("recclicked",function(d,f,e){b.recommendationFeedbackSource.save(d,f).addCallback(function(){e.emitSuccess()}).addErrback(function(h,g){console.log("got a err in main.js");e.emitError(h,g)})})}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.recommender=="undefined"){jive.eae.recommender={}}jive.eae.recommender.recommender=function(A,G){var B=G||new soy.StringBuilder();B.append('<script type="text/javascript">$j(function() {var recommendationFeedback = new jive.RecommendationFeedback.Main({"recSelector":".',soy.$$escapeHtml(A.selectorID),'"});});<\/script>');if(A.recommendations.length>0){B.append('<ul class="j-icon-list">');var F=A.recommendations;var D=F.length;for(var C=0;C<D;C++){var E=F[C];B.append('<li class="clearfix"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,E.jiveObjectURL),'" class="',soy.$$escapeHtml(A.selectorID),'" id="',soy.$$escapeHtml(E.objectType),"-",soy.$$escapeHtml(E.id),'"><span class="jive-icon-med ',soy.$$escapeHtml(E.jiveObjectCSS),'"></span> ',soy.$$escapeHtml(E.subject),"  </a>",(A.devMode)?'<a href="#" class="recommendation">+</a>':"","</li>",(A.devMode)?'<div id="scores" style="display:none"><ul><li class="clearfix">Removed for now</li></ul></div>':"")}B.append("</ul>")}else{B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.no_recommendations"),[])),"</p>")}if(!G){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.statuslevel=="undefined"){jive.eae.statuslevel={}}jive.eae.statuslevel.statusLevelActivity=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.groupedUsers){jive.eae.activitystream.groupedUsers({groupedUserList:A.activity.groupedUsers,user:A.user,othersListLinkID:soy.$$escapeHtml(jive.soy.func.randomString())},B)}else{jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activity.activityUser,{displayNameOverride:(A.user.id==A.activity.activityUser.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),B)}B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.statuslevel.achieved"),[])),': <span class="j-status-levels">',soy.$$escapeHtml(A.activity.content.statusLevelName),' <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","",A.activity.content.imagePath)),'" alt="',soy.$$escapeHtml(A.activity.content.statusLevelName),'" title="',soy.$$escapeHtml(A.activity.content.statusLevelName),'"/></span>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.activitystream=="undefined"){jive.eae.activitystream={}}jive.eae.activitystream.activityStream=function(A,C){var B=C||new soy.StringBuilder();B.append((A.streamType=="profile")?'<div id="j-'+soy.$$escapeHtml(A.streamType)+'-filter-bar" class="j-act-listfilters clearfix">'+((A.canViewStatusUpdates)?'<div id="'+soy.$$escapeHtml(A.streamType)+'-filtermenu"><ul id="profile-filterlinks"><li><a data-filterName=\'all\' href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.all.content"),[]))+"</a></li>"+((A.statusUpdatesEnabled)?"<li><a data-filterName='statusupdates' href=\"#\">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.statusupdates"),[]))+"</a></li>":"")+"</ul></div>":"")+"</div>":"","<div id='j-",soy.$$escapeHtml(A.streamType),'-rebuilding\' class="j-act-rebuilding" ',(!A.rebuilding)?'style="display:none;"':"",'><span class="j-act-rebuilding-spinner"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.rebuilding"),[])),"</div><div id='j-",soy.$$escapeHtml(A.streamType),'-all-list\' class="j-act-container"><div class="j-act-pagepoll clearfix" id="j-',soy.$$escapeHtml(A.streamType),'-updates" style="display:none;">');jive.eae.activitystream.newUpdates({count:0},B);B.append("</div>");jive.eae.activitystream.activityStreamList({activityStream:A.activityStream,streamType:A.streamType,mobileUI:A.mobileUI},B);B.append("</div>");jive.shared.soy.resourceInlineJs({code:"$j(document).ready( function() {var streamI18n = {likes: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.likes"),[]))+"', comments: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.comments"),[]))+"', tracked: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.tracked"),[]))+"', untracked: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.untracked"),[]))+"', lessthanaminago: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[]))+"', expand: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.expand"),[]))+"', collapse: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.collapse"),[]))+"', repost_success: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.success"),[]))+"', empty_comment: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.cannot_be_empty.text"),[]))+"', comment_empty_name: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.name_required.text"),[]))+"', comment_empty_email: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("cmnt.email_required.text"),[]))+"', reply_empty_name: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.name_required.text"),[]))+"', reply_empty_email: '"+soy.$$escapeJs(jive.i18n.i18nText(jive.i18n.getMsg("forum.thrd.email_required.text"),[]))+"'};"+((A.streamType=="user")?"jive.ActivityStream.StreamController = new jive.ActivityStream.ActivityStreamControllerMain({contextObjectType: "+soy.$$escapeHtml(A.viewingUser.objectType)+", contextObjectID: "+soy.$$escapeHtml(A.viewingUser.id)+", streamType: '"+soy.$$escapeHtml(A.streamType)+"', streamTypeID: '"+soy.$$escapeHtml(A.streamTypeID)+"', tabViewSelector: '"+soy.$$escapeHtml(A.tabViewSelector)+"', i18n:streamI18n, rteOptions: {preferredMode:'"+soy.$$escapeHtml(A.preferredMode)+"', startMode:'"+soy.$$escapeHtml(A.startMode)+"', mobileUI:"+soy.$$escapeHtml(A.mobileUI)+", isEditing:"+soy.$$escapeHtml(A.isEditing)+", communityName:'"+soy.$$escapeHtml(A.communityName)+"', hasImagePerms:"+soy.$$escapeHtml(A.hasImagePerms)+"}, streamLoaded: "+((A.activityStream&&A.activityStream.activityContainerList)?"true":"false")+", data:"+JSON.stringify(A.activityStream4JS).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", savedRefreshTime: "+soy.$$escapeHtml(A.savedRefreshTime)+", prevRefreshTime: "+soy.$$escapeHtml(A.prevRefreshTime)+", mobileUI: "+soy.$$escapeHtml(A.mobileUI)+"});":(A.streamType=="all")?"jive.ActivityStream.AllStreamController = new jive.ActivityStream.ActivityStreamControllerMain({contextObjectType: "+soy.$$escapeHtml(A.viewingUser.objectType)+", contextObjectID: "+soy.$$escapeHtml(A.viewingUser.id)+", streamType: '"+soy.$$escapeHtml(A.streamType)+"', streamTypeID: '"+soy.$$escapeHtml(A.streamTypeID)+"', tabViewSelector: '"+soy.$$escapeHtml(A.tabViewSelector)+"', i18n:streamI18n, rteOptions: {preferredMode:'"+soy.$$escapeHtml(A.preferredMode)+"', startMode:'"+soy.$$escapeHtml(A.startMode)+"', mobileUI:"+soy.$$escapeHtml(A.mobileUI)+", isEditing:"+soy.$$escapeHtml(A.isEditing)+", communityName:'"+soy.$$escapeHtml(A.communityName)+"', hasImagePerms:"+soy.$$escapeHtml(A.hasImagePerms)+"}, streamLoaded: "+((A.activityStream&&A.activityStream.activityContainerList)?"true":"false")+", data:"+JSON.stringify(A.activityStream4JS).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", savedRefreshTime: "+soy.$$escapeHtml(A.savedRefreshTime)+", prevRefreshTime: "+soy.$$escapeHtml(A.prevRefreshTime)+", mobileUI: "+soy.$$escapeHtml(A.mobileUI)+"});":"")+"});"},B);if(!C){return B.toString()}};jive.eae.activitystream.activityStreamList=function(A,G){var B=G||new soy.StringBuilder();if(A.activityStream.activityContainerList&&A.activityStream.activityContainerList.length){B.append((A.filterType=="antimatter")?'<div class="j-act-streaminfo j-rc6"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.label.filter.hidden"),[]))+"</strong> "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.info.filter.hidden"),[]))+"</div>":"",(A.filterType=="magic")?'<div class="j-act-streaminfo j-rc6"><strong>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.label.filter.matters.most"),[]))+"</strong> "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.info.filter.matters.most"),[]))+"</div>":"");var D=A.activityStream.activityContainerList;var E=D.length;for(var C=0;C<E;C++){var F=D[C];if(F.activityList.length>0){jive.eae.activitystream.groupedActivityStreamItem({activityContainer:F,user:A.activityStream.viewingUser,streamType:A.streamType,filterType:A.filterType?A.filterType:"all",canCreateMbImage:A.activityStream.canCreateMbImage,canCreateMbVideo:A.activityStream.canCreateMbVideo,mobileUI:A.mobileUI},B)}}B.append((A.activityStream.hasMore)?"<a id='j-load-more-"+soy.$$escapeHtml(A.streamType)+"' class='j-js-load-more j-act-append j-rc6' href='#'><span class=\"j-rc6 j-more-label\">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.load_more"),[]))+"</span></a>":"")}else{B.append('<div class="j-act-empty-list font-color-meta">',(A.streamType=="user")?(A.filterType=="magic")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.magic"),[])):(A.filterType=="antimatter")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.antimatter"),[])):(A.filterType=="statusupdates")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.statusupdates.following"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.all.following"),[])):(A.streamType=="context")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.context"),[])):(A.streamType=="profile")?(A.filterType=="statusupdates")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.statusupdates.profile"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.profile"),[])):(A.filterType=="statusupdates")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.statusupdates"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.empty.list.all"),[])),"</div>")}if(!G){return B.toString()}};jive.eae.activitystream.maxPagesReached=function(A,C){var B=C||new soy.StringBuilder();B.append("<div class='j-max-pages-reached'><span class=\"j-max-pages-reached-label\">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.max.pages.reached"),[])),"</span></div>");if(!C){return B.toString()}};jive.eae.activitystream.activityStreamFilteredList=function(A,C){var B=C||new soy.StringBuilder();B.append("<div id='j-",soy.$$escapeHtml(A.streamType),"-",soy.$$escapeHtml(A.filterType),"-list' class='j-act-container'>");jive.eae.activitystream.activityStreamList({activityStream:A.activityStream,streamType:A.streamType,filterType:A.filterType,mobileUI:A.mobileUI},B);B.append("</div>");if(!C){return B.toString()}};jive.eae.activitystream.groupedActivityStreamItem=function(A,E){var B=E||new soy.StringBuilder();if(A.activityContainer.jiveObject.groupedActivityStreamTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.groupedActivityStreamTemplate,data:(function(){var H={};var G=[["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["filterType",A.filterType],["canCreateMbImage",A.canCreateMbImage],["canCreateMbVideo",A.canCreateMbVideo],["mobileUI",A.mobileUI]];for(var F=0;F<G.length;F+=1){H[G[F][0]]=G[F][1]}return H})(),failGracefully:true},B)}else{B.append('<article id="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-entry j-act-not-markable ');jive.eae.activitystream.contentTypeClassName({activityContainer:A.activityContainer},B);B.append(' clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'">',(A.filterType=="antimatter"||A.streamType=="user")?'<div class="j-act-hidden" style="display:none;"></div>':"",'<div class="j-js-act-content j-act-content"><div id="',soy.$$escapeHtml(A.streamType),"-act-title-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-title">');if(A.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:A.activityContainer.jiveObject.activityIcon},B);B.append(" ")}else{B.append('<span class="jive-icon-med  ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}B.append((A.activityContainer.jiveObject.subjectIsHtml)?A.activityContainer.jiveObject.htmlSubject:'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" title="'+A.activityContainer.jiveObject.subject+'">'+A.activityContainer.jiveObject.subject+"</a>",'<nav id="',soy.$$escapeHtml(A.streamType),"-exp-title-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init font-color-meta clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li class="j-act-preview-control">');jive.eae.activitystream.parentPreviewLinks({activityContainer:A.activityContainer},B);B.append("</li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"Title",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append('</ul></nav></div><div class="j-act-exp-full-content-view" style="display:none;"></div>');jive.eae.activitystream.activityStreamExpandContent({activityContainer:A.activityContainer,streamType:A.streamType,filterType:A.filterType},B);B.append('<div class="j-act-exp-view expanded clearfix" style="display:none;"></div><div class="j-act-coll-view collapsed clearfix">');jive.eae.activitystream.collapsedActivityStreamExcerpt({activityContainer:A.activityContainer,activity:A.activityContainer.activityList[A.activityContainer.activityList.length-1],streamType:A.streamType,user:A.user,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,hideStub:false,time:A.activityContainer.parentTime},B);B.append('</div><div class="j-act-meta font-color-meta-light"> ');if(A.activityContainer.container.type&&A.activityContainer.container.type!=-2){if(A.activityContainer.container.type==2020){var D=new soy.StringBuilder();jive.shared.displayutil.userDisplayNameLink(A.activityContainer.originalAuthor,D);jive.shared.soy.i18nHelper({i18nKey:"main.in_user_container.label",arg0:D.toString(),arg1:(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),noAutoEscape:true},B)}else{var C=new soy.StringBuilder();jive.shared.displayutil.containerDisplayNameLink({container:A.activityContainer.container},C);jive.shared.soy.i18nHelper({i18nKey:"eae.container.in",arg0:C.toString(),noAutoEscape:true},B)}B.append(' <span class="j-bullet">&#8226;</span> ')}jive.eae.activitystream.replyCountText({activityContainer:A.activityContainer,showCurrentCount:(A.streamType=="user"||A.streamType=="all")&&A.filterType=="all"},B);B.append("</div></div></article>")}if(!E){return B.toString()}};jive.eae.activitystream.activityStreamFullContentView=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject.activityStreamFullContentViewTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.activityStreamFullContentViewTemplate,data:(function(){var F={};var E=[["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["filterType",A.filterType],["canCreateMbImage",A.canCreateMbImage],["canCreateMbVideo",A.canCreateMbVideo]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{B.append('<section class="');jive.eae.activitystream.contentTypeParentPreviewStylingClassName({activityContainer:A.activityContainer},B);B.append('"><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activityContainer.originalAuthor,{size:"46"}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activityContainer.jiveObject,type:"created",activityUser:A.activityContainer.originalAuthor,displayAuthorLink:true,streamType:A.streamType,hideDetailedReplyTo:false,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(' <span class="j-act-time font-color-meta">',(A.activityContainer.jiveObject.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'">':"",soy.$$escapeHtml(A.activityContainer.creationTime),(A.activityContainer.jiveObject.jiveObjectURL)?"</a>":"",'</span></div><div class="j-act-exp-content-body-view" style=""></div>');jive.eae.activitystream.renderStreamAttachments({idPrefix:"collapsed",object:A.activityContainer.jiveObject,domIDPostfix:A.activityContainer.jiveObject.domIDPostfix},B);B.append('<div class="jive-comment-actions clearfix"><nav id="',soy.$$escapeHtml(A.streamType),"-exp-body-actions-",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init ',(A.activityContainer.canReply)?"j-act-rte-replyable":"",'  clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><ul><li><span class="j-act-preview-control"><a href="#" class="j-js-hide-full-content j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.jiveObject,activityContainer:A.activityContainer,amAnAuthor:A.activityContainer.amAnAuthor,objectType:A.activityContainer.jiveObject.objectType,objectId:A.activityContainer.jiveObject.id,liked:A.activityContainer.liked,likeCount:A.activityContainer.likeCount,likable:A.activityContainer.likable,author:A.activityContainer.originalAuthor,user:A.user,location:"parentPreview",streamType:A.streamType,filterType:A.filterType,tracked:A.activityContainer.tracked,untracked:A.activityContainer.untracked,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section>")}if(!C){return B.toString()}};jive.eae.activitystream.rtePanel=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-panel-rte-wrap clearfix"><section class="j-panel-rte j-act-reply" style=\'display:none\'><div class="j-act-reply-form">',(A.user.anonymous)?'<div class="jive-reply-post-anonymous"><div><input class="replyGuestName" name="replyGuestName"> <label for="reply-author">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.name"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.required.label"),[]))+'</span></label></div><div><input class="replyGuestEmail" name="replyGuestEmail"> <label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.rqdNotPblshd.label"),[]))+"</span></label></div>"+((!A.hideGuestURLField)?'<div><input class="replyGuestUrl" name="replyGuestUrl"> <label for="reply-url"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.wsite_address.label"),[]))+"</label></div>":"")+"</div>":"",'<p class="jive-error-text jive-comment-error" style="display:none"></p><form method="post" action="javascript:void(0);" name="jive-comment-post-form" class="j-panel-rte-view sammy-app-1288289329294-553-">');jive.eae.activitystream.rteTextArea(null,B);B.append('<div class="jive-form-buttons"><input type="submit" name="post" class="j-btn-global j-btn-callout" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.comment.singular"),[])),"\" /><a href='#' class='j-panel-hide-rte-link j-btn-global'>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</a></div></form></div></section></div>");if(!C){return B.toString()}};jive.eae.activitystream.hideUnhideMenu=function(A,C){var B=C||new soy.StringBuilder();B.append((A.filterType=="antimatter")?'<div class="j-quick-menu j-action-popover j-act-unhideoptions" style="display:none;"><div class="j-js-unhide-container" style="display: none;"><div class="j-act-unhide">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.desc"),[]))+':</div><ul class="j-act-unhiderules"></ul><a class="j-js-ok" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.ok"),[]))+'</a> <a class="j-js-cancel" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[]))+'</a></div><div class="j-js-unhidden" style="display: none;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.unhidden"),[]))+"</div></div>":(A.streamType=="user")?'<div class="j-quick-menu j-action-popover j-act-hideoptions" style="display:none;"><div class="j-act-hide-container j-js-hide-container" style="display:none;"><a class="j-act-hidelink j-rc4" href="#">'+((A.activityContainer.jiveObject.typeExternalActivity)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.post"),[" "])):(A.activityContainer.jiveObject.typeWallEntry)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.update"),[])):(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.backchannel"),[])):(A.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.content"),[(A.activityContainer.jiveObject.contentTypeName).toLowerCase()])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.content"),[" "])))+"</a>"+((!A.activityContainer.jiveObject.typeExternalActivity)?(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?'<a class="j-js-type-from-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.context.backchannel"),[A.activityContainer.container.name]))+"</a>":(A.activityContainer.jiveObject.typeWallEntry)?'<a class="j-js-type-from-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.context.user"),[A.activityContainer.originalAuthor.displayName]))+"</a>":(A.activityContainer.jiveObject.contentTypeFeatureName)?'<a class="j-js-type-from-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.context.type"),[(A.activityContainer.jiveObject.contentTypeFeatureName).toLowerCase(),A.activityContainer.container.name]))+"</a>":"":"")+((A.activityContainer.jiveObject.typeExternalActivity)?(A.activityContainer.jiveObject.verb=="uri:jiveName:app_install")?'<a class="j-js-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.all.post"),[A.activityContainer.jiveObject.subject]))+"</a>":(A.activityContainer.jiveObject.generatorName)?'<a class="j-js-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.all.post"),[A.activityContainer.jiveObject.generatorName]))+"</a>":'<a class="j-js-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.all.post"),[A.activityContainer.jiveObject.contentTypeFeatureName]))+"</a>":(!A.activityContainer.container.systemContainer&&!A.activityContainer.jiveObject.typeWallEntry)?'<a class="j-js-context j-js-hide j-rc4" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.context"),[A.activityContainer.container.name]))+"</a>":"")+'</div><div class="j-js-hidden" style="display: none;">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.hidden"),[]))+"</div></div>":"");if(!C){return B.toString()}};jive.eae.activitystream.collapsedActivityStreamExcerpt=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject.collapsedActivityStreamExcerptTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.collapsedActivityStreamExcerptTemplate,data:(function(){var F={};var E=[["activityContainer",A.activityContainer],["activity",A.activity],["streamType",A.streamType],["user",A.user],["canCreateMbImage",A.canCreateMbImage],["canCreateMbVideo",A.canCreateMbVideo],["time",A.time],["hideStub",A.hideStub]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.activityContainer.canReply)?" j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current)?soy.$$escapeHtml(A.activity.current):"",'" style=""><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class=""><div class="j-act-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:46}),B);B.append('</div><div class="j-author-act font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,streamType:A.streamType,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append('</div><div class="j-excerpt" ',(A.hideStub)?'style="display:none;"':"",">");jive.eae.activitystream.collapsedExcerptText({text:A.activity.content.text,hasMoreText:A.activity.hasMoreText,deleted:A.activity.content.deleted,moderated:A.activity.moderated},B);B.append('</div><div class="j-act-sub-preview clearfix" ',(!A.hideStub)?'style="display:none;"':"",'><div class="j-excerpt-full"><div class="j-excerpt-full-html-content">');if(A.activity.content.html){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append('</div></div></div><div class="jive-comment-actions clearfix"><nav class="clearfix"><span class="j-act-time font-color-meta-light">',(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",soy.$$escapeHtml(A.time),(A.activity.content.jiveObjectURL)?"</a>":"",'</span><ul class="font-color-meta"><li><span class="j-act-preview-control"> <a href="#" class="j-js-show-full-act j-act-preview" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a></span></li>");jive.eae.activitystream.activityNavActions({object:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser.id,objectType:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.objectType,objectId:A.activityContainer.activityList[A.activityContainer.activityList.length-1].content.id,liked:A.activityContainer.activityList[A.activityContainer.activityList.length-1].liked,likeCount:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likeCount,likable:A.activityContainer.activityList[A.activityContainer.activityList.length-1].likable,hasMoreText:A.activityContainer.activityList[A.activityContainer.activityList.length-1].hasMoreText,author:A.activityContainer.activityList[A.activityContainer.activityList.length-1].activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></section></div>")}if(!C){return B.toString()}};jive.eae.activitystream.collapsedExcerptText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.deleted)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.not_found.description"),[]))+"</em>":(A.text)?((A.moderated)?'<div class="jive-warn-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.posts.waitingMod.text"),[]))+"</div>":"")+A.text+((A.hasMoreText)?"&hellip;":""):"");if(!C){return B.toString()}};jive.eae.activitystream.replyCountText=function(A,C){var B=C||new soy.StringBuilder();B.append('<strong class="j-act-replycount font-color-meta-light">',(A.activityContainer.jiveObject.typeThread||A.activityContainer.jiveObject.typeShare||A.activityContainer.jiveObject.typeDirectMessage)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.replyCount)+" "+((A.activityContainer.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.reply.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.replies.lc"),[])))+"</a>":(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'#comments" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.replyCount)+" "+((A.activityContainer.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomment.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.authorcomments.lc"),[])))+"</a>":'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activityContainer.jiveObject.jiveObjectURL)+'#comments" class="font-color-meta-light">'+soy.$$escapeHtml(A.activityContainer.replyCount)+" "+((A.activityContainer.replyCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.comment.lc"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.comments.lc"),[])))+"</a>","</strong>");if(A.showCurrentCount){jive.eae.activitystream.currentCountText({activityContainer:A.activityContainer},B)}if(!C){return B.toString()}};jive.eae.activitystream.currentCountText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.numCurrent)?'<strong class="j-new-count font-color-new">'+((A.activityContainer.numCurrentSubActivities)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.new"),[A.activityContainer.numCurrentSubActivities])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.new"),[])))+"</strong>":(A.forceCount)?'<strong class="j-new-count font-color-new">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.new"),[1]))+"</strong>":"");if(!C){return B.toString()}};jive.eae.activitystream.expandedActivityStreamItemView=function(A,G){var C=G||new soy.StringBuilder();if(A.activityContainer.jiveObject.expandedActivityStreamViewTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.expandedActivityStreamViewTemplate,data:(function(){var J={};var I=[["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["canCreateMbImage",A.canCreateMbImage],["canCreateMbVideo",A.canCreateMbVideo]];for(var H=0;H<I.length;H+=1){J[I[H][0]]=I[H][1]}return J})(),failGracefully:true},C)}else{C.append('<div class="j-act-exp-view expanded clearfix" data-linkedID="',soy.$$escapeHtml(A.streamType),"_",A.activityContainer.jiveObject.objectType,"_",A.activityContainer.jiveObject.id,"_",soy.$$escapeHtml(A.activityContainer.container.type),"_",soy.$$escapeHtml(A.activityContainer.container.id),"_",soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" style="display:none;"><div class="j-sub-activity-header clearfix"><h4 class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.latest.activity"),[])),'</h4><a href="#" class="j-js-show-older j-act-older" style="display:none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item.show.more"),[])),'</a></div><div class="j-sub-activity-items jive-comment jive-comment-flat jive-comment-indent-0">');var D=A.activityContainer.activityList;var B=D.length;for(var F=0;F<B;F++){var E=D[F];if(!E.parentActivity&&(A.streamType=="profile"||!E.content.typeComment&&!E.content.typeMessage)){jive.eae.activitystream.activityContentExcerpt({activity:E,activityContainer:A.activityContainer,isHidden:true,user:A.user,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,addedInline:false,hideStub:true,forceCurrent:false},C)}}C.append("</div></div>")}if(!G){return C.toString()}};jive.eae.activitystream.rteTextArea=function(A,C){var B=C||new soy.StringBuilder();B.append('<textarea id="',soy.$$escapeHtml(jive.soy.func.randomString()),'" class=\'wysiwygtext\' name="body" rows="15" cols="30" ></textarea>');if(!C){return B.toString()}};jive.eae.activitystream.activityStreamExpandContent=function(A,C){var B=C||new soy.StringBuilder();if(A.streamType=="user"&&(A.activityContainer.replyCount>1||A.activityContainer.replyCount>0&&A.activityContainer.activityList.length==1)||A.activityContainer.activityList.length>1){B.append('<div class="j-preview-trigger clearfix"><a href="#" class="j-not-updated j-show-more j-js-show-all j-rc6"><span class="jive-icon-med jive-icon-arrow-down"></span>');jive.eae.activitystream.renderActivityCarousel({activityContainer:A.activityContainer,activityList:Array.apply(null,A.activityContainer.activityList).reverse(),streamType:A.streamType,maxItems:4,more:A.activityContainer.activityList.length>4},B);B.append('<span class="lnk font-color-meta j-act-expand">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.expand"),[])),"</span></a></div>")}if(!C){return B.toString()}};jive.eae.activitystream.hiddenActivityView=function(B,F){var C=F||new soy.StringBuilder();if(B.activityContainer.jiveObject){C.append("<header>");if(B.activityContainer.jiveObject.typeExternalActivity){if(B.type=="context"){if(B.hidden){var A=new soy.StringBuilder();if(B.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:B.activityContainer.jiveObject.activityIcon},A);A.append(" ")}else{A.append('<span class="jive-icon-med  ',soy.$$escapeHtml(B.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}A.append("<strong>",(B.activityContainer.jiveObject.verb=="uri:jiveName:app_install")?soy.$$escapeHtml(B.activityContainer.jiveObject.subject):(B.activityContainer.jiveObject.generatorName)?soy.$$escapeHtml(B.activityContainer.jiveObject.generatorName):soy.$$escapeHtml(B.activityContainer.jiveObject.contentTypeFeatureName),"</strong>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.post.all.unhidden"),[])),arg0:A.toString(),noAutoEscape:true},C)}else{var D=new soy.StringBuilder();if(B.activityContainer.jiveObject.activityIcon){jive.shared.displayutil.renderIconElement({icon:B.activityContainer.jiveObject.activityIcon},D);D.append(" ")}else{D.append('<span class="jive-icon-med  ',soy.$$escapeHtml(B.activityContainer.jiveObject.jiveObjectCSS),'"></span>')}D.append("<strong>",(B.activityContainer.jiveObject.verb=="uri:jiveName:app_install")?soy.$$escapeHtml(B.activityContainer.jiveObject.subject):(B.activityContainer.jiveObject.generatorName)?soy.$$escapeHtml(B.activityContainer.jiveObject.generatorName):soy.$$escapeHtml(B.activityContainer.jiveObject.contentTypeFeatureName),"</strong>");jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.post.all.hidden"),[])),arg0:D.toString(),noAutoEscape:true},C)}}else{C.append((B.hidden)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.post.unhidden"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.post.hidden"),[])))}}else{var E=new soy.StringBuilder();if(B.type=="item"){E.append('<span class="jive-icon-med ',soy.$$escapeHtml(B.activityContainer.jiveObject.jiveObjectCSS),'"></span><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.jiveObject.jiveObjectURL),'" class="title a">');jive.eae.activitystream.activityContainerJoSubject({activityContainer:B.activityContainer},E);E.append("</a>",(B.activityContainer.activityList[0]&&B.activityContainer.activityList[0].content.commentContentResource&&B.activityContainer.activityList[0].content.commentContentResource.objectType==129)?" "+soy.$$escapeHtml((jive.i18n.i18nText(jive.i18n.getMsg("doc.main.auth_discussion.link"),[])).toLowerCase()):"")}else{E.append((B.activityContainer.jiveObject.typeWallEntry)?B.activityContainer.originalAuthor.displayName+"'s "+B.activityContainer.jiveObject.contentTypeFeatureName:'<span class="jive-icon-med '+soy.$$escapeHtml(B.activityContainer.container.jiveObjectCSS)+'"></span><a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,B.activityContainer.container.jiveObjectURL)+'" class="title b">'+B.activityContainer.container.name+"</a>")}jive.shared.soy.i18nHelper({i18nKey:soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hidden.view.activity"),[])),arg0:(B.type=="type-context")?soy.$$escapeHtml(B.activityContainer.jiveObject.contentTypeName):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.all"),[])),arg1:E.toString(),arg2:(B.hidden)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hidden.view.willnotbe"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hidden.view.willbe"),[])),noAutoEscape:true},C)}C.append(' <span class="j-bullet">&#8226;</span> <a href="#" class="',(B.hidden)?"j-js-rehide":"j-js-unhide",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.undo"),[])),'</a> <span class="j-bullet">&#8226;</span> <a href="#" class="j-js-dismiss">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.dismiss"),[])),"</a></header>")}if(!F){return C.toString()}};jive.eae.activitystream.renderActivityCarousel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-act-carousel clearfix"',(A.activityList.length==1&&A.activityContainer.jiveObject.id==A.activityList[0].content.id)?'style="display:none"':"",">");jive.eae.carousel.eaeAvatarCarousel({activityList:A.activityList,streamType:A.streamType,maxItems:A.maxItems,more:A.more},B);B.append("</span>");if(!C){return B.toString()}};jive.eae.activitystream.activityView=function(A,C){var B=C||new soy.StringBuilder();if(A.activity.content.activityTemplate){if(A.user){jive.shared.soy.render({templateName:A.activity.content.activityTemplate,data:(function(){var F={};var E=[["activity",A.activity],["activityContainer",A.activityContainer],["user",A.user],["streamType",A.streamType],["fromTemplate",A.fromTemplate]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}else{jive.shared.soy.render({templateName:A.activity.content.activityTemplate,data:(function(){var F={};var E=[["activity",A.activity],["activityContainer",A.activityContainer],["streamType",A.streamType],["fromTemplate",A.fromTemplate]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:true},B)}}else{B.append("<section>");jive.eae.activitystream.activityContentExcerpt({activity:A.activity,activityContainer:A.activityContainer,user:A.user,isHidden:false,streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,addedInline:false,hideStub:false,forceCurrent:false},B);B.append("</section>")}if(!C){return B.toString()}};jive.eae.activitystream.activityContentExcerpt=function(A,D){var B=D||new soy.StringBuilder();if(A.activityContainer.jiveObject.activityContentExcerptTemplate){jive.shared.soy.render({templateName:A.activityContainer.jiveObject.activityContentExcerptTemplate,data:(function(){var G={};var F=[["activityContainer",A.activityContainer],["activity",A.activity],["streamType",A.streamType],["user",A.user],["canCreateMbImage",A.canCreateMbImage],["canCreateMbVideo",A.canCreateMbVideo],["isHidden",A.isHidden],["addedInline",A.addedInline],["hideStub",A.hideStub],["forceCurrent",A.forceCurrent]];for(var E=0;E<F.length;E+=1){G[F[E][0]]=F[E][1]}return G})(),failGracefully:true},B)}else{B.append('<div id="node-collapsed-',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="j-act-node ',(A.addedInline)?"j-js-addedInline":""," ",(A.activityContainer.canReply)?"j-act-rte-replyable":"",'" data-objectID="',soy.$$escapeHtml(A.activity.targetObjectID),'" data-objectType="',soy.$$escapeHtml(A.activity.targetObjectType),'" data-current="',(A.activity.current||A.forceCurrent)?"true":"",'" style="',(A.isHidden)?"display:none;":"",'"><section id="excerpt_',soy.$$escapeHtml(A.activity.content.domIDPostfix),'" class="reply j-sub">');jive.shared.displayutil.avatar(soy.$$augmentData(A.activity.activityUser,{size:"32"}),B);B.append('<div class="j-excerpt',(!A.activity.content.summaryIsExcerpt)?" j-non-excerpt":"",' clearfix" ',(A.hideStub)?'style="display:none;"':"",">");if(!A.hideStub){var C=new soy.StringBuilder();jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},C);jive.eae.activitystream.activityContentCommon({contentTxt:C.toString(),hasMoreText:A.activity.hasMoreText},B)}B.append('</div><div class="j-act-sub-preview" ',(!A.hideStub)?'style="display:none;"':"",'><div class="jive-comment-arrow"></div><div class="j-excerpt-full jive-comment-content clearfix"><p class="jive-comment-meta font-color-meta-light">');jive.eae.activitystream.activityAuthor({object:A.activity.content,type:A.activity.content.deleted?A.activityContainer.jiveObject.objectType:A.activity.type,activityUser:A.activity.activityUser,displayAuthorLink:true,user:A.user,againstObject:false,hideDetailedReplyTo:false},B);B.append(" ",(A.activity.content.jiveObjectURL)?'<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,A.activity.content.jiveObjectURL)+'" class="font-color-meta-light">':"",(A.activity.creationTime)?soy.$$escapeHtml(A.activity.creationTime):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.less_than_a_minute_ago"),[])),(A.activity.content.jiveObjectURL)?"</a>":"",'</p><div class="j-excerpt-full-html-content">');if(A.hideStub){jive.eae.activitystream.activityContentText({activity:A.activity,noAutoescape:true},B)}B.append("</div>");jive.eae.activitystream.renderStreamAttachments({idPrefix:"expanded",object:A.activity.content,domIDPostfix:A.activity.domIDPostfix},B);B.append('<div class="jive-comment-actions clearfix"><nav class="clearfix"><ul>',(!A.hideStub)?'<li><span class="j-act-preview-control"><a href="#" class="j-js-show-full-act j-act-preview" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[]))+'</a><a href="#" class="j-js-hide-full-act j-act-preview" style="display:none;" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+"</a></span></li>":"");jive.eae.activitystream.activityNavActions({object:A.activity.parentActivity?A.activityContainer.jiveObject:A.activity.content,activityContainer:A.activityContainer,amAnAuthor:A.user.id==A.activity.activityUser.id,objectType:A.activity.content.objectType,objectId:A.activity.content.id,liked:A.activity.liked,likeCount:A.activity.likeCount,likable:A.activity.likable,hasMoreText:A.activity.hasMoreText,author:A.activity.activityUser,user:A.user,location:"subActivity",streamType:A.streamType,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo},B);B.append("</ul></nav></div></div></div></section></div>")}if(!D){return B.toString()}};jive.eae.activitystream.activityAuthor=function(A,C){var B=C||new soy.StringBuilder();if(!A.activityUser.anonymous){if(A.displayAuthorLink){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.activityUser,{renderInvisible:A.object.typeExternalActivity}),B)}else{B.append(soy.$$escapeHtml(A.activityUser.displayName))}}else{jive.shared.displayutil.renderGuestDisplayName({message:A.activityUser},B)}if(!A.object.typeShare){B.append(" ");jive.eae.activitystream.include.activityVerbPhrase({object:A.object,type:A.type,displayAuthorLink:A.displayAuthorLink,streamType:A.streamType,hideDetailedReplyTo:A.hideDetailedReplyTo,user:A.user,againstObject:A.againstObject},B)}else{B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.type.shared"),[]))," ")}if(!C){return B.toString()}};jive.eae.activitystream.activityNavActions=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.canReply&&(!A.activityContainer.jiveObject.typeExternalActivity||A.streamType!="inbox"||A.location!="parentPreview")&&!A.activityContainer.jiveObject.typeWallEntry&&!A.activityContainer.jiveObject.typeDirectMessage&&!A.activityContainer.jiveObject.typeShare&&!A.object.bookmarkedContent&&(A.location=="subActivity"||A.location=="parentPreview"||A.object.typeExternalURL))?'<li><span class="jive-icon-sml jive-glyph-comment"></span><a class="j-reply-rte" href="javascript:void(0);">'+((A.object.typeDocument&&!(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129)||A.object.typeBlogPost||A.object.typeExternalActivity||A.object.typeExternalURL||A.object.typePoll)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[])):(A.object.typeDocument&&(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129))?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.addauthorcomment"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.reply"),[])))+"</a></li>":"",(A.activityContainer.canReply&&A.streamType!="inbox"&&A.object.typeWallEntry&&A.location=="parentPreview")?'<li><span class="jive-icon-sml jive-glyph-comment"></span><a id="showMicroRTE_'+soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix)+'" class="j-reply-micro" href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.comment"),[]))+"</a></li>":"");if(A.likable&&!A.activityContainer.jiveObject.typeDirectMessage&&!A.activityContainer.jiveObject.typeShare&&(A.location=="subActivity"||A.location=="parentPreview"||A.object.typeExternalURL)){B.append('<li class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer({canLike:A.user&&!A.user.anonymous&&(!A.object.typeWallEntry||A.object.canRate)&&!A.amAnAuthor,uniqueKey:soy.$$escapeHtml(A.objectType)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(jive.soy.func.randomString()),liked:A.liked,likeCount:A.likeCount,objectId:A.objectId,objectType:A.objectType},B);B.append("</li>")}if(A.user&&!A.user.anonymous&&A.activityContainer.sharable&&!A.object.typeExternalActivity&&(A.location=="Title"||A.location=="parentPreview"&&A.streamType=="inbox")){B.append("<li>",(A.streamType=="inbox")?'<span class="jive-icon-sml jive-icon-share"></span>':"");jive.soy.share.control({objectId:soy.$$escapeHtml(A.activityContainer.jiveObject.typeThread?A.activityContainer.jiveObject.threadID:A.objectId),objectType:soy.$$escapeHtml(A.activityContainer.jiveObject.typeThread?1:A.objectType),type:"text"},B);B.append("</li>")}B.append((A.streamType=="user"&&A.filterType=="all"&&A.location=="Title")?'<li><a href="#" class="j-act-hidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide"),[]))+"</a></li>":"",(A.filterType=="antimatter"&&A.location=="Title")?'<li><a href="#" class="j-act-unhidemenu" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.unhide"),[]))+"</a></li>":"");if(A.user&&!A.user.anonymous&&A.object.typeExternalActivity&&A.location!="Title"&&A.activityContainer.sharable){B.append('<li><span class="jive-icon-sml jive-icon-share"></span>');jive.soy.share.control({objectId:A.objectId,objectType:A.objectType,type:"text"},B);B.append("</li>")}B.append((A.object.canRepost)?'<li class="j-repost-item" id="j-repost-item-'+soy.$$escapeHtml(jive.soy.func.randomString())+"-"+soy.$$escapeHtml(A.object.id)+'"><a href="#" class="j-repost" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.repost.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.repost"),[]))+"</a></li>":"");if(!C){return B.toString()}};jive.eae.activitystream.repostModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-repost-modal" id="jive-js-repost-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.mb.repost.default.text"),[])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'<span class="j-close-icon j-ui-elem"></span></a><article class="j-act-mb"><section class="jive-modal-content clearfix">');jive.eae.activitystream.entryRepost({object:A.object,author:A.author},B);B.append("<h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.comment"),[])),"</h4>");jive.statusinput.containers.repostStatusInput({statusID:"eae-editor-repost-"+A.object.domIDPostfix,jiveObject:A.object,canCreateMbImage:A.canCreateMbImage,canCreateMbVideo:A.canCreateMbVideo,canAtMention:A.canAtMention},B);B.append("</section></article></div>");if(!C){return B.toString()}};jive.eae.activitystream.entryRepost=function(A,D){var C=D||new soy.StringBuilder();C.append('<div class="j-wall-repost-content"><div class="j-wall-repost-header">');var B=new soy.StringBuilder();if(!A.author.anonymous){jive.shared.displayutil.userDisplayNameLink(A.author,B)}else{jive.shared.displayutil.renderGuestDisplayName({message:A.object},B)}jive.shared.soy.i18nHelper({i18nKey:"eae.mb.repost.originally_posted_by",arg0:B.toString(),noAutoEscape:"true"},C);C.append("</div>",(A.object&&A.object.text)?A.object.text:"");jive.eae.activitystream.renderStreamAttachments({idPrefix:"reposted-attachments",object:A.object,domIDPostfix:A.object.domIDPostfix},C);C.append("</div>");if(!D){return C.toString()}};jive.eae.activitystream.parentPreviewLinks=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href=\'#\' class="j-js-show-full-content" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'" ',(A.activityContainer.jiveObject.typePoll)?'data-containerID="'+soy.$$escapeHtml(A.activityContainer.container.id)+'" data-containerType="'+soy.$$escapeHtml(A.activityContainer.container.type)+'" ':""," ",(A.activityContainer.jiveObject.typeTask||A.activityContainer.jiveObject.typeExternalActivity)?'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.show_details"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.show_details"),[])):'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full.link.title"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.show.full"),[])),'</a><a href=\'#\' class="j-js-hide-full-content" style="display:none;" ',(A.activityContainer.jiveObject.typeTask||A.activityContainer.jiveObject.typeExternalActivity)?'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.show_details"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.hide_details"),[])):'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.hide.full"),[])),"</a>");if(!C){return B.toString()}};jive.eae.activitystream.microRTEContainer=function(A,C){var B=C||new soy.StringBuilder();if(A.activityContainer.jiveObject&&(A.activityContainer.canReply||A.activityContainer.jiveObject.typeWallEntry&&A.activityContainer.jiveObject.canComment&&A.activityContainer.jiveObject.id==A.object.id)){B.append('<div id="microRTEContainer_',soy.$$escapeHtml(A.object.domIDPostfix),'" class="j-act-reply j-act-micro-rte" style="display:none;"><div class="r-active"><div class="j-act-replyinfo">');if(!A.activityContainer.jiveObject.typeDirectMessage&&!A.activityContainer.jiveObject.typeShare&&!A.activityContainer.jiveObject.typeWallEntry){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("activity.collapsed.commenting_on"),[])),' <span class="jive-icon-sml ',soy.$$escapeHtml(A.activityContainer.jiveObject.jiveObjectCSS),'"></span><strong>');jive.eae.activitystream.activityContainerJoSubject({activityContainer:A.activityContainer},B);B.append("</strong>")}B.append("</div>",(A.user.anonymous)?'<div class="jive-reply-post-anonymous"><div><input class="replyGuestName" name="replyGuestName"> <label for="reply-author">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.name"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.required.label"),[]))+'</span></label></div><div><input class="replyGuestEmail" name="replyGuestEmail"> <label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+'<span class="font-color-meta-light"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.rqdNotPblshd.label"),[]))+'</span></label></div><div><input class="replyGuestUrl" name="replyGuestUrl"> <label for="reply-url"> '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.wsite_address.label"),[]))+"</label></div></div>":"");if(A.activityContainer.jiveObject.typeWallEntry&&A.activityContainer.jiveObject.canComment||A.activityContainer.jiveObject.typeDirectMessage&&A.activityContainer.canReply||A.activityContainer.jiveObject.typeShare&&A.activityContainer.canReply){jive.statusinput.containers.microbloggingCommentStatusInput({isCollapsedActivity:true,user:A.user,statusID:"eae-mb-comment-editor-"+A.object.domIDPostfix,jiveObject:A.activityContainer.jiveObject,canAtMention:A.canAtMention},B)}B.append("</div></div>")}if(!C){return B.toString()}};jive.eae.activitystream.repliedToIcon=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="jive-icon-sml jive-icon-arrow-top"></span>');if(!C){return B.toString()}};jive.eae.activitystream.activityContentCommon=function(A,C){var B=C||new soy.StringBuilder();B.append((A.contentTxt!="")?"<p>"+A.contentTxt+((A.hasMoreText)?"&hellip;":"")+"</p>":"");if(!C){return B.toString()}};jive.eae.activitystream.generateUserMetaData=function(A,C){var B=C||new soy.StringBuilder();B.append("{anonymous: ",soy.$$escapeHtml(A.user.anonymous),", avatarID: ",soy.$$escapeHtml(A.user.avatarID),", displayName: '",soy.$$escapeHtml(A.user.displayName),"', email: '",soy.$$escapeHtml(A.user.email),"', enabled: ",soy.$$escapeHtml(A.user.enabled),", entitled: ",soy.$$escapeHtml(A.user.entitled),", id: ",soy.$$escapeHtml(A.user.id),", objectType: ",soy.$$escapeHtml(A.user.objectType),", username: '",soy.$$escapeHtml(A.user.username),"'}");if(!C){return B.toString()}};jive.eae.activitystream.renderStreamAttachments=function(A,C){var B=C||new soy.StringBuilder();if(A.object.meta&&A.object.meta.length>0){jive.statusinput.containers.renderAttachmentsContainer({id:(A.idPrefix)?soy.$$escapeHtml(A.idPrefix+"-attachmentContainer-"+A.domIDPostfix):soy.$$escapeHtml("attachmentContainer-"+A.domIDPostfix),entry:A.object,visible:true},B);B.append('<script type="text/javascript">$j(function() {var id = \'',(A.idPrefix)?soy.$$escapeHtml(A.idPrefix+"-attachmentContainer-"+A.domIDPostfix):soy.$$escapeHtml("attachmentContainer-"+A.domIDPostfix),"', attachmentView = new jive.MicroBlogging.AttachmentView({selector:'#' + id}); attachmentView.postRender(); jive.MicroBlogging.AttachmentView.views[id] = attachmentView;});<\/script>")}else{if(A.object.typeExternalActivity&&A.object.mediaLink){B.append('<div class="j-act-attachment"><a href="');jive.eae.activitystream.formatMediaLinkUrl(A.object,B);B.append('" target="_blank" title="',soy.$$escapeHtml(A.object.mediaLink.filename?A.object.mediaLink.filename:""),'">',(A.object.mediaLink.thumbnailUrl)?'<div class="j-media-attachment"><img src="'+soy.$$escapeHtml(A.object.mediaLink.thumbnailUrl)+'" title="'+soy.$$escapeHtml(A.object.mediaLink.title)+'" alt="" width="'+soy.$$escapeHtml(A.object.mediaLink.thumbnailWidth)+'" height="'+soy.$$escapeHtml(A.object.mediaLink.thumbnailHeight)+'"/></div>':(A.object.mediaLink.iconClass)?'<span class="jive-icon-med '+soy.$$escapeHtml(A.object.mediaLink.iconClass)+'"></span><span>'+soy.$$escapeHtml(A.object.mediaLink.title)+"</span>":"","</a></div>")}}if(!C){return B.toString()}};jive.eae.activitystream.formatMediaLinkUrl=function(A,C){var B=C||new soy.StringBuilder();B.append((A.mediaLink.contentUrl)?(((A.mediaLink.contentUrl).match(new RegExp("/^https?:\\/\\//",""))||[]))?A.mediaLink.contentUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.mediaLink.contentUrl):(((A.mediaLink.imageUrl).match(new RegExp("/^https?:\\/\\//",""))||[]))?A.mediaLink.imageUrl:jive.soy.func.normalizeUrl(window._jive_base_url,A.mediaLink.imageUrl));if(!C){return B.toString()}};jive.eae.activitystream.activityContainerJoSubject=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer&&A.activityContainer.jiveObject&&A.activityContainer.jiveObject.subject)?A.activityContainer.jiveObject.subject:"");if(!C){return B.toString()}};jive.eae.activitystream.activityContentText=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activity&&A.activity.content)?(A.activity.content.deleted)?"<em>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("error.not_found.description"),[]))+"</em>":(A.activity.content.typeExternalActivity)?(A.activity.content.summary)?(A.noAutoescape)?A.activity.content.summary:soy.$$escapeHtml(A.activity.content.summary):"":((A.activity.moderated)?'<div class="jive-warn-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.posts.waitingMod.text"),[]))+"</div>":"")+((A.activity.content.html)?(A.noAutoescape)?A.activity.content.html:soy.$$escapeHtml(A.activity.content.html):(A.activity.content.text)?(A.noAutoescape)?A.activity.content.text:soy.$$escapeHtml(A.activity.content.text):""):"");if(!C){return B.toString()}};jive.eae.activitystream.itemSuccessfullyTrackedMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.item_now_tracked"),[])),"</p>");if(!C){return B.toString()}};jive.eae.activitystream.newUpdates=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count)?'<a href="#" class="count j-act-updates j-rc5"><span>'+soy.$$escapeHtml(A.count)+" "+((A.count>1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.updates"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.update"),[])))+"</span></a>":"");if(!C){return B.toString()}};jive.eae.activitystream.groupedUsers=function(I,F){var D=F||new soy.StringBuilder();var H=I.groupedUserList;var E=H.length;for(var C=0;C<E;C++){var G=H[C];if(C<3){D.append((C==E-1&&I.groupedUserList.length>1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.and"),[]))+" ":"");if(!G.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(G,{displayNameOverride:(I.user.id==G.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),D)}else{jive.shared.displayutil.renderGuestDisplayName({message:G},D)}D.append((C!=2)?((I.groupedUserList.length>2)?",":"")+" ":"")}}if(I.groupedUserList.length>3){D.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.and"),[])),' <a href=\'#\' class="j-js-show-grouped-users" data-linkedID="grouped-user-set-',soy.$$escapeHtml(I.othersListLinkID),'">',soy.$$escapeHtml(I.groupedUserList.length-3)," ",(I.groupedUserList.length>4)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.others"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.other"),[])),'</a><div class="j-js-grouped-users j-grouped-users-popover" data-linkedID="grouped-user-set-',soy.$$escapeHtml(I.othersListLinkID),'" style="display:none">');var B=I.groupedUserList;var K=B.length;for(var J=0;J<K;J++){var A=B[J];if(J>=3){if(!A.anonymous){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A,{displayNameOverride:(I.user.id==A.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):""}),D)}else{jive.shared.displayutil.renderGuestDisplayName({message:A},D)}}}D.append("</div>")}if(!F){return D.toString()}};jive.eae.activitystream.updatedMarker=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-js-updated-marker-',soy.$$escapeHtml(A.streamType),'" class="j-updated-marker"><p class="j-rc5 font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.end.updates"),[])),"</p></div>");if(!C){return B.toString()}};jive.eae.activitystream.contentTypeClassName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeExternalActivity)?"j-act-app":(A.activityContainer.jiveObject.typeDirectMessage)?"j-act-dm":(A.activityContainer.jiveObject.typeAnnouncement)?"j-act-announcement":(A.activityContainer.jiveObject.typeMention)?"j-act-mention":(A.activityContainer.jiveObject.typeShare)?"j-act-share":(A.activityContainer.jiveObject.typeExternalURL)?"j-act-bookmark":(A.activityContainer.jiveObject.typeThread)?"j-act-discussion j-thread-post":(A.activityContainer.jiveObject.typeDocument)?"j-act-document":(A.activityContainer.jiveObject.typeBlogPost)?"j-act-blog":(A.activityContainer.jiveObject.typePoll)?"j-act-poll":(A.activityContainer.jiveObject.typeTask)?"j-act-task":"j-act-generic");if(!C){return B.toString()}};jive.eae.activitystream.contentTypeParentPreviewStylingClassName=function(A,C){var B=C||new soy.StringBuilder();B.append((A.activityContainer.jiveObject.typeThread)?"j-thread-post":(A.activityContainer.jiveObject.typeDocument)?"j-doc jive-content":(A.activityContainer.jiveObject.typeBlogPost)?"jive-content":(A.activityContainer.jiveObject.typeTask)?"j-task":(A.activityContainer.activityList[0].content.typeExternalActivity&&A.activityContainer.activityList[0].content.verb=="uri:jiveName:app_install")?"jive-content j-appinstall  j-rc5":"jive-content j-rc5");if(!C){return B.toString()}};jive.eae.activitystream.loadingSpinner=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="j-loading-spinner"></span>');if(!C){return B.toString()}};jive.eae.activitystream.expViewParentReplyLink=function(A,D){var B=D||new soy.StringBuilder();B.append('<div id="exp-parent-reply-',soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-parent-reply-view">');if(A.activityContainer.jiveObject.typeWallEntry&&A.activityContainer.jiveObject.canComment){B.append('<div class="j-act-add-comment j-js-microrte-replyable"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a id="showMicroRTE_',soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" href="javascript:void(0);">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.repost.comment"),[])),"</a></div></div>")}else{if(!A.activityContainer.jiveObject.typeWallEntry&&A.activityContainer.jiveObject.objectType!=1500&&A.activityContainer.canReply){B.append('<nav id="parent-reply-nav-',soy.$$escapeHtml(A.activityContainer.jiveObject.domIDPostfix),'" class="j-act-actions j-act-actions-init j-act-rte-replyable clearfix" data-objectID="',soy.$$escapeHtml(A.activityContainer.jiveObject.id),'" data-objectType="',soy.$$escapeHtml(A.activityContainer.jiveObject.objectType),'"><div class="j-act-add-comment"><div class="j-act-replyto"><span class="jive-icon-med jive-icon-comment"></span><a class="j-reply-rte" href="javascript:void(0);">');if(A.activityContainer.activityList[0]&&A.activityContainer.activityList[0].content.commentContentResource&&A.activityContainer.activityList[0].content.commentContentResource.objectType==129){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.addauthorcomment"),[])))}else{if(A.activityContainer.jiveObject.objectType==1501){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.inbox.add.comment.original"),[])))}else{var C=new soy.StringBuilder();jive.eae.communications.readingPaneBottomReplyLinkKey({activityContainer:A.activityContainer},C);jive.shared.soy.i18nHelper({i18nKey:C.toString(),arg0:(A.activityContainer.jiveObject.contentTypeName)?soy.$$escapeHtml((A.activityContainer.jiveObject.contentTypeName).toLowerCase()):"",noAutoEscape:true},B)}}B.append("</a></div></div></nav>")}}B.append("</div>");if(!D){return B.toString()}}
;
jive.namespace("MicroBlogging");jive.MicroBlogging.MBController=jive.MicroBlogging.CommonController.extend(function(a){this.init=function(b){this.options=b;this._super(b)};a.initMBView=function(){var b=$j("#j-js-mb-header-editor");this.microbloggingView=new jive.MicroBlogging.MicroBloggingView({selector:"#j-js-mb-header-editor",idPostfix:"mbASHeader",atMentionBtn:b.find("a.jive-js-mention-button"),imgAttachmentBtn:b.find("a.jive-js-imgattach-button"),submitBtn:b.find("a.j-status-input-submit"),cancelBtn:b.find("a.j-status-input-cancel"),maxCharCount:420})}});
;
jive.namespace("RecommendationApp").ActivityModel=jive.RestService.extend(function(a){a.displayGenericErrorMessages=false;a.resourceType="recommendation";a.pluralizedResourceType=a.resourceType;this.init=function(){this._super();this.request=function(d,c,e){var b=this.RESOURCE_ENDPOINT+"/"+d;c=c||{};e=e||new jive.conc.Promise();return a.commonAjaxRequest(e,"GET",{data:c,url:b})};this.maxRequest=function(d,c,b){return this.request(d+"?"+$j.param({recommendationMax:c,trendingMax:b}))}};this.getActivity=function(b){return this.request("allrecommendations",b)};this.getContentRecommendations=function(c,b){return this.maxRequest.call(this,"allcontentrecommendations",c,b)};this.getPeopleRecommendations=function(c,b){return this.maxRequest.call(this,"allpeoplerecommendations",c,b)};this.getPlaceRecommendations=function(c,b){return this.maxRequest.call(this,"allplacerecommendations",c,b)};this.getProfileTrendingContent=function(c,b){var d=["userstrendingcontent",c,b];return this.request(d.join("/"))};this.getTrendingContent=function(b){return this.request("trendingcontent?max="+b)}});
;
jive.namespace("RecommendationApp").RecommendationModel=function(){var a=new jive.RecommendationApp.ActivityModel(),b=new jive.RecommendationFeedback.RecommendationFeedbackSource();return{expressDisinterest:function(d,c){return b.expressDisinterest(c,d)},expressDislike:function(d,c){return b.expressDislike(c,d)},getActivity:function(c){return a.getActivity(c)},getContentRecommendations:function(d,c){return a.getContentRecommendations(d,c)},getPeopleRecommendations:function(d,c){return a.getPeopleRecommendations(d,c)},getPlaceRecommendations:function(d,c){return a.getPlaceRecommendations(d,c)},getProfileTrendingContent:function(d,c){return a.getProfileTrendingContent(d,c)},getTrendingContent:function(c){return a.getTrendingContent(c)}}};
;
jive.namespace("RecommendationApp").Paginator=function(e){var b=jive.conc.observable({});var a=$j.browser.msie&&$j.browser.version<8;if(a){$j.fx.off=true}function c(h){if(!h.isDisabled){var f=parseInt(h.index),g=e.find(".j-js-item a").length;b.update(f+1,g,true).emit("goToPage",h)}}function d(f,g){var k=e.find(".j-js-item a").eq(f-1);if(e.is(":visible")&&k.length>0){var h=e.find(".j-js-item-highlight"),j=g?200:0,i=k.position().left-3;if(!h.length){h=$j(jive.eae.recommendation.paginatorCurrentPage()).appendTo(e)}h.animate({left:i},j,function(){h.not(":visible").fadeIn(600)})}else{h=e.find(".j-js-item-highlight");if(h.length&&h.is(":visible")){h.hide()}}}b.update=function(g,j,f){var h=$j(jive.eae.recommendation.paginator({currentPage:g,numberOfPages:j})),i=e.find(".j-js-paginator");if(i.length){i.replaceWith(h)}else{e.append(h)}d(g,!!f);h.delegate("a","click",function(k){k.preventDefault();c(jive.util.extractDataAttributes(this))});return b};return b};
;
jive.namespace("RecommendationApp").Controller=function(b){var a=jive.conc.observable({});a.getBody=function(c){var d=b.find('[data-modulebody="true"]');return c?d.find(c):d};a.shouldUpdate=function(g,f,d){var c=f===null||g.length>0||f.length>0,e={};if(c&&f!==null&&g.length===f.length){g.forEach(function(j,h){e[j.id]=h});c=!f.every(function(k,j){var h=e.hasOwnProperty(k.id);if(d){h=e[k.id]===j}return h})}return c};b.delegate("[data-event]","click",function(d){d.preventDefault();var c=$j.extend({$target:$j(this)},jive.util.extractDataAttributes(this));a.emit(c.event,c)});b.delegate(".j-preview-trigger","mousedown",function(){b.find(".jive-icon-arrow-down").removeClass("jive-icon-arrow-down").addClass("jive-icon-arrow-down-focus")});b.delegate(".j-preview-trigger","mouseup",function(){b.find(".jive-icon-arrow-down-focus").removeClass("jive-icon-arrow-down-focus").addClass("jive-icon-arrow-down")});return a};
;
jive.namespace("RecommendationApp").RecommendedForYouController=function(d,n){var o={},e=new jive.RecommendationApp.Controller(n),m=new jive.RecommendationApp.Paginator(n.find("#recommended-for-you-paginator")),g=null,j=0,c,i=e.getBody;function k(q,t){q(t.id,t.objectType);g=g.filter(function(u){return u.id!=t.id});if(g.length>0){var r=j===i(".j-recommendation").length-1,s=g;if(r){g=null;b(s)}else{i("[data-recommendationid="+t.id+"]").remove();m.update(j+1,s.length)}f()}else{d.getActivity({recommendationMax:i().attr("data-max")}).addCallback(function(u){g=null;b(u.recommendations);f()})}}function b(r){if(e.shouldUpdate(r,g)){var q=g===null;g=r;j=0;e.getBody().html(jive.eae.recommendation.recommendedForYou({recommendations:r,page:1}));if(q){h(0)}m.update(1,r.length)}}function l(q){if(!q.isDisabled){c&&c.trigger("close");j=parseInt(q.index);h(j)}}function h(q){i(".j-recommendation-group").scrollTo(i(".j-recommendation").eq(q),{axis:"x",duration:200})}function f(){$j(jive.eae.recommendation.notInterestedNotification({})).message({style:"success"})}function a(q){c=q.$target.attr("data-event","closeWhy").closest(".j-js-recommendation").find(".j-insights").popover({context:q.$target,darkPopover:true,putBack:true,destroyOnClose:false,onClose:function(){c=undefined;p(q)}})}function p(q){q.$target.attr("data-event","why")}o.isPopulated=function(){return(g||[]).length>0};o.notify=function(q,r){if(q==="newRecommendations"){b(r)}else{if(q==="uiUpdate"){m.update(1,r.length,false)}}return o};e.addListener("dislike",k.partial(d.expressDislike.bind(d))).addListener("notInterested",k.partial(d.expressDisinterest.bind(d))).addListener("why",a).addListener("closeWhy",p);m.addListener("goToPage",l);return o};
;
jive.namespace("RecommendationApp").GeneralRecommendationController=function(d,k,i){var l={},e=new jive.RecommendationApp.Controller(k),f=null,g=e.getBody,b=g().data("loadmore")==="true",h=parseInt(g().data("max"));function j(){d.getTrendingContent(h*2).addCallback(function(m){b=false;g("[data-event=loadMore]").remove();e.removeListener("loadMore",j);a(m.recommendations)})}function c(m){if(b&&m.length<=h){b=false}else{if(m.length>h){m=m.slice(0,h)}}a(m)}function a(m){if(e.shouldUpdate(m,f,true)){f=m;var n={recommendations:m};b&&(n.canLoadMore=m.length===h);g().html(i(n))}}l.isPopulated=function(){return(f||[]).length>0};l.notify=function(m){if(m==="newRecommendations"){c(arguments[1])}};e.addListener("loadMore",j);return l};
;
jive.namespace("RecommendationApp").activityPageController={initialize:function(n){var d=jive.RecommendationApp,b=jive.eae.recommendation,h=new d.RecommendationModel(),g=(n||{}).pollingInterval||300000,a=$j("#j-discovery .j-recommendation-module"),j=a.is("#recommended-for-you-module"),c=[],f=["trendingContent","trendingUsers"],i={trendingMax:parseInt($j("#trendy").attr("data-max")),usersMax:parseInt($j("#trendy-users").attr("data-max"))},l;var e=$j.browser.msie&&$j.browser.version<8;if(e){$j.fx.off=true}function k(){l().addCallback(m)}function m(p){$j.each(c,function(r){this.notify("newRecommendations",p[f[r]])});var q=a.not(":visible").filter(function(r){return $j(this).is("#recommended-for-you-module")||c[r].isPopulated()}),o=$j.map(q,function(s,r){return function(){$j(s).fadeIn(500,function(){c[r].notify("uiUpdate",p[f[r]]);o.shift()()})}});o.push(function(){setTimeout(k,g)});o.shift()()}++i.trendingMax;if(j){f.unshift("recommendations");i.recommendationMax=parseInt($j("#user-reco-content").attr("data-max"));c.push(new d.RecommendedForYouController(h,a.filter("#recommended-for-you-module")))}c.push(new d.GeneralRecommendationController(h,a.filter("#trendy-content-module"),b.activityTrendyContent));c.push(new d.GeneralRecommendationController(h,a.filter("#leaderboard-module"),b.leaderboard));l=h.getActivity.bind(h,i);k()}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}if(typeof jive.people.profile=="undefined"){jive.people.profile={}}jive.people.profile.main=function(A,G){var C=G||new soy.StringBuilder();C.append('<!-- BEGIN user profile --><table class="vcard">',(A.user.displayName)?'<tr class="vcard-name"><td>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.name"),[]))+'</td><td class="fn n">'+soy.$$escapeHtml(A.user.displayName)+"</td></tr>":"",(A.user.prop.profile.title)?'<tr class="vcard-title"><td>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.title"),[]))+'</td><td class="title">'+soy.$$escapeHtml(A.user.prop.profile.title)+"</td></tr>":"",(A.user.prop.profile.department)?'<tr class="vcard-department"><td>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.department"),[]))+'</td><td class="department">'+soy.$$escapeHtml(A.user.prop.profile.department)+"</td></tr>":"");if(A.user.prop.statuslevel&&A.user.prop.statuslevel.enabled){C.append('<tr class="vcard-statuslevel"><td>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.status.level"),[])),'</td><td class="jive-status-level">');jive.people.profile.statusLevel(soy.$$augmentData(A.user.prop.statuslevel,{showPoints:true}),C);C.append("</td></tr>")}C.append((A.user.prop.profile.primaryPhoneNumber&&A.user.prop.profile.primaryPhoneNumber.phoneNumber)?'<tr class="vcard-phone"><td>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.phone.number"),[]))+'</td><td class="tel">'+soy.$$escapeHtml(A.user.prop.profile.primaryPhoneNumber.phoneNumber)+"</td></tr>":"",(A.user.prop.profile.primaryEmailAddress&&A.user.prop.profile.primaryEmailAddress.email)?'<tr class="vcard-email"><td>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.email"),[]))+'</td><td class="theEmail"><a href="mailto:'+soy.$$escapeHtml(A.user.prop.profile.primaryEmailAddress.email)+'" class="email">'+soy.$$escapeHtml(A.user.prop.profile.primaryEmailAddress.email)+"</a></td></tr>":"",(!A.hidePrimaryURL)?(A.user.prop.profile.primaryURL)?'<tr class="vcard-url"><td>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.web.site"),[]))+'</td><td><a href="'+soy.$$escapeHtml(A.user.prop.profile.primaryURL)+'" class="url"'+((A.viewingSelf)?' rel="me"':"")+">"+soy.$$escapeHtml(A.user.prop.profile.primaryURL)+"</a></td></tr>":"":"",(!A.hideAddress)?(A.user.prop.profile.address)?'<tr class="address adr vcard-address"><td class="type">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.address.main.label"),[]))+'</td><td><address><span class="street-address">'+soy.$$escapeHtml(A.user.prop.profile.address.street1)+"</span><br/>"+((A.user.prop.profile.address.street2)?'<span class="extended-address">'+soy.$$escapeHtml(A.user.prop.profile.address.street2)+"</span><br/>":"")+((A.user.prop.profile.address.city)?'<span class="locality">'+soy.$$escapeHtml(A.user.prop.profile.address.city)+((A.user.prop.profile.address.stateOrProvince)?",":"")+"</span>":"")+((A.user.prop.profile.address.stateOrProvince)?'<span class="region">'+soy.$$escapeHtml(A.user.prop.profile.address.stateOrProvince)+"</span>":"")+'<span class="postal-code">'+soy.$$escapeHtml(A.user.prop.profile.address.postalCode)+'</span><br/><span class="country-name">'+soy.$$escapeHtml(A.user.prop.profile.address.country)+"</span><br/></address></td></tr>":"":"","</table>");if(!A.hideExtras){C.append('<dl class="jive-profile-extras clearfix ',(!A.profileImageEnabled)?"jive-profile-extras-nophoto":"",'">',(A.user.prop.profile.hireOrJoinDate)?"<dt>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.member_since.label"),[]))+"</dt><dd>"+soy.$$escapeHtml((A.user.prop.profile.hireOrJoinDate?dateFormat(parseFloat(A.user.prop.profile.hireOrJoinDate),"mmmm d, yyyy h:MM TT"):""))+"</dd>":"",(A.user.prop.profile.lastLoggedInDate)?"<dt>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("settings.last_logged_in.label"),[]))+"</dt><dd>"+soy.$$escapeHtml((A.user.prop.profile.lastLoggedInDate?dateFormat(parseFloat(A.user.prop.profile.lastLoggedInDate),"mmmm d, yyyy h:MM TT"):""))+"</dd>":"");if(A.user.prop.profileCustomFields){jive.people.profile.fields({viewingSelf:A.viewingSelf,fields:A.user.prop.profileCustomFields},C)}C.append("<!-- TODO: display social groups -->");if(A.user.prop.tags&&A.user.prop.tags.length>0){C.append("<dt>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("community.tags.label"),[])),"</dt><dd>");var D=A.user.prop.tags;var F=D.length;for(var B=0;B<F;B++){var E=D[B];C.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/tags#/?tags="+E+"&taggableTypes="+A.user.type)),'">',soy.$$escapeHtml(E),"</a>",(!(B==F-1))?"&nbsp;":"")}C.append("</dd>")}C.append("</dl>")}C.append("<!-- END user profile-->");if(!G){return C.toString()}};jive.people.profile.fields=function(A,G){var C=G||new soy.StringBuilder();var D=A.fields;var E=D.length;for(var B=0;B<E;B++){var F=D[B];jive.people.profile.field(soy.$$augmentData(F,{viewingSelf:A.viewingSelf}),C)}if(!G){return C.toString()}};jive.people.profile.field=function(A,C){var B=C||new soy.StringBuilder();B.append('<dt data-field-id="',soy.$$escapeHtml(A.id),'">',soy.$$escapeHtml(A.displayName),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</dt><dd>");jive.people.profile.value(A,B);B.append("</dd>");if(!C){return B.toString()}};jive.people.profile.value=function(P,R){var L=R||new soy.StringBuilder();if(P.type=="url"){if(P.values){var M=P.values;var G=M.length;for(var Z=0;Z<G;Z++){var V=M[Z];jive.people.profile.url({url:V},L);L.append((!(Z==G-1))?",":"")}}else{if(P.value){jive.people.profile.url({url:P.value},L)}}}else{if(P.type=="phone"){if(P.values){var U=P.values;var N=U.length;for(var F=0;F<N;F++){var A=U[F];jive.people.profile.phone(A,L);L.append((!(F==N-1))?",":"")}}else{if(P.value){jive.people.profile.phone(P.value,L)}}}else{if(P.type=="email"){if(P.values){var B=P.values;var X=B.length;for(var O=0;O<X;O++){var J=B[O];jive.people.profile.email(J,L);L.append((!(O==X-1))?",":"")}}else{if(P.value){jive.people.profile.email(P.value,L)}}}else{if(P.type=="address"){if(P.values){var I=P.values;var D=I.length;for(var W=0;W<D;W++){var T=I[W];jive.people.profile.address(T,L);L.append((!(W==D-1))?",":"")}}else{if(P.value){jive.people.profile.address(P.value,L)}}}else{if(P.type=="date"){if(P.values){var Y=P.values;var Q=Y.length;for(var H=0;H<Q;H++){var E=Y[H];jive.people.profile.date({date:E},L);L.append((!(H==Q-1))?",":"")}}else{if(P.value){jive.people.profile.date({date:P.value},L)}}}else{if(P.value){L.append(soy.$$escapeHtml(P.value))}else{if(P.values){var S=P.values;var K=S.length;for(var C=0;C<K;C++){var a=S[C];L.append(soy.$$escapeHtml(a),(!(C==K-1))?",":"")}}else{L.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.na.text"),[])))}}}}}}}if(!R){return L.toString()}};jive.people.profile.url=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="',soy.$$escapeHtml(A.url),'" class="url">',soy.$$escapeHtml(A.url),"</a>");if(!C){return B.toString()}};jive.people.profile.phone=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(A.phoneNumber));if(!C){return B.toString()}};jive.people.profile.email=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="mailto:',soy.$$escapeHtml(A.email),'">',soy.$$escapeHtml(A.email),"</a>");if(!C){return B.toString()}};jive.people.profile.date=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml((A.date?dateFormat(parseFloat(A.date),"mmmm d, yyyy"):"")));if(!C){return B.toString()}};jive.people.profile.address=function(A,C){var B=C||new soy.StringBuilder();B.append("<address>",(A.street1)?soy.$$escapeHtml(A.street1)+"<br/>":"",(A.street2)?soy.$$escapeHtml(A.street2)+"<br/>":"",(A.city)?soy.$$escapeHtml(A.city)+",":"",(A.stateOrProvince)?soy.$$escapeHtml(A.stateOrProvince):"",(A.postalCode)?soy.$$escapeHtml(A.postalCode)+"<br/>":"",(A.country)?soy.$$escapeHtml(A.country)+"<br/>":"","</address>");if(!C){return B.toString()}};jive.people.profile.statusLevel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.ready)?'<span class="j-status-levels"><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.imagePath))+'" alt="'+soy.$$escapeHtml(A.name)+'" title="'+soy.$$escapeHtml(A.name)+'"/>'+((A.showPoints)?soy.$$escapeHtml(A.name)+" ("+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("stslvl.points"),[A.pointLevel]))+")":"")+"</span>":'<span style="font-size: .85em; padding-top: 4px">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("stslvl.calculating"),[]))+"</span>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.user=="undefined"){jive.browse.user={}}jive.browse.user.detailUserHeader=function(A,C){var B=C||new soy.StringBuilder();B.append('<thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.person"),[])),"</strong></th>",(A.columns&&A.columns.friends)?'<th class="center"><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.friends"),[]))+"</strong></th>":'<th class="center"><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.followers"),[]))+'</strong></th><th class="center"><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.following"),[]))+"</strong></th>",(A.columns&&A.columns.latestActivity)?'<th><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.latestactivity"),[]))+"</strong></th>":"",(A.columns&&A.columns.statuslevel)?'<th><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("search.user.sort.status"),[]))+"</strong></th>":"",(A.columns&&A.columns.dateJoined)?'<th><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("search.user.sort.date"),[]))+"</strong></th>":"","<th></th></tr></thead>");if(!C){return B.toString()}};jive.browse.user.detailUserItem=function(A,G){var C=G||new soy.StringBuilder();C.append('<tr class="js-browse-row j-people-row ',(!A.enabled)?"disabled":"",'" data-object-id="',soy.$$escapeHtml(A.id),'"  data-object-type="',soy.$$escapeHtml(A.type),'"><td class="j-td-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A,{size:"32"}),C);C.append('</td><td class="j-td-user-info"><div><strong>');jive.shared.displayutil.userDisplayNameLink(A,C);C.append("</strong> ",(!A.enabled)?' <span class="font-color-meta-light">('+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.disabled"),[]))+")</span>":"");if(A.prop.connections&&A.prop.connections.labelsShown){C.append('<ul class="j-label-dot-list">');var F=A.prop.connections.friendLists;var B=F.length;for(var D=0;D<B;D++){var E=F[D];if(E.targetUserAMember){jive.browse.user.labelDot(E,C)}}C.append("</ul>")}else{C.append("&nbsp;")}C.append("</div></td>");if(A.prop.connections){if(!A.prop.connections.bidirectional){C.append('<td class="j-td-followers center">');if(!A.prop.connections.bidirectional&&A.prop.connections.followerCount>=0&&A.enabled&&A.prop.connections.linkFollowCounts){jive.eae.acclaim.count({command:"showFollowers",count:soy.$$escapeHtml(A.prop.connections?A.prop.connections.followerCount:0),objectId:A.id,objectType:A.type,classes:"j-user-follow-info"},C)}else{C.append("&nbsp;")}C.append("</td>")}C.append('<td class="j-td-following center">');if(A.prop.connections.followingCount>=0&&A.enabled&&A.prop.connections.linkFollowCounts){jive.eae.acclaim.count({command:"showConnections",count:soy.$$escapeHtml(A.prop.connections?A.prop.connections.followingCount:0),objectId:A.id,objectType:A.type,classes:"j-user-follow-info"},C)}else{C.append("&nbsp;")}C.append("</td>")}if(A.columns.latestActivity){C.append('<td class="j-td-activity font-color-meta">');if(A.prop.latestActivity){C.append('<span class="j-activity-author">');jive.eae.activitystream.include.activityVerbPhrase({object:A.prop.latestActivity.content,type:A.prop.latestActivity.type},C);C.append('</span> <span class="j-excerpt"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.latestActivity.content.jiveObjectURL),'" class="j-act-title">',A.prop.latestActivity.content.plainSubjectSnippet,"</a>",(A.prop.latestActivity.creationTime)?' <span class="font-color-meta-light">('+soy.$$escapeHtml(A.prop.latestActivity.creationTime)+")</span> ":"","</span>")}else{C.append("&nbsp;")}C.append("</td>")}if(A.columns.statuslevel){C.append('<td class="j-td-statuslevel font-color-meta">');if(A.prop.statuslevel&&A.prop.statuslevel.enabled){jive.people.profile.statusLevel(soy.$$augmentData(A.prop.statuslevel,{showPoints:true}),C)}else{C.append("&nbsp;")}C.append("</td>")}C.append((A.columns.dateJoined)?'<td class="j-td-date font-color-meta">'+((A.prop.membership)?soy.$$escapeHtml((A.prop.membership.createDate?dateFormat(parseFloat(A.prop.membership.createDate),"mmmm d, yyyy h:MM TT"):"")):(A.creationDate)?soy.$$escapeHtml((A.creationDate?dateFormat(parseFloat(A.creationDate),"mmmm d, yyyy h:MM TT"):"")):"")+"</td>":"",'<td class="j-td-actions">');if(A.prop.connections&&A.prop.connections.followLinkShown){jive.people.profile.followLink(soy.$$augmentData(A.prop.connections,{targetUserID:A.id,targetUserDisplayName:A.subject,hideFollowingCount:true}),C)}C.append((A.prop.directMessageActionLinkShown||A.prop.discussionActionInfo&&A.prop.discussionActionInfo.linkShown)?'<a href="#" class="j-social-button j-browse-action-button j-ui-elem" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[]))+'"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-gear"></span><span class="j-browse-actions-button-text">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.btn"),[]))+"</span></span></a>":"",'<div class="j-action-popover j-js-browse-actions-container" style="display: none"><ul class="j-simple-list">',(A.prop.directMessageActionLinkShown)?'<li><a href="#" class="j-js-create-direct-message" onclick="jive.DirectMessaging.sendMessageToUserIds(['+soy.$$escapeHtml(A.id)+']);return false;"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.sendmessage"),[]))+"</span></a></li>":"",(A.prop.discussionActionInfo&&A.prop.discussionActionInfo.linkShown)?'<li><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.discussionActionInfo.link))+'" class="js-link-cur-loc-param" data-cur-loc-param-name="cancelURL"><span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.startdiscussion"),[]))+"</span></a></li>":"","</ul></div></td></tr>");if(!G){return C.toString()}};jive.browse.user.labelDot=function(A,C){var B=C||new soy.StringBuilder();B.append('<li data-list-id="',soy.$$escapeHtml(A.listID),'" class="j-label-dot j-rc7" style="background:#',soy.$$escapeHtml(A.css),';" title="',soy.$$escapeHtml(A.name),'"></li>');if(!C){return B.toString()}};jive.browse.user.thumbnailUserItem=function(B,H){var D=H||new soy.StringBuilder();D.append('<div class="card"><div class="j-thumb j-people-thumb j-rc4 face card-front js-browse-item ',(!B.enabled)?"disabled":""," ");jive.browse.user.flippable(soy.$$augmentData(B.prop,{body:"flippable"}),D);D.append('" data-object-type="',soy.$$escapeHtml(B.type),'" data-object-id="',soy.$$escapeHtml(B.id),'"><header class="js-thumb-header"><h4><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,B.link)),'">',soy.$$escapeHtml(B.subject),"</a></h4></header><section>",(B.prop.profileImage.url)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,B.link))+'" class="j-user-photo"><img src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","",B.prop.profileImage.url))+'" alt="" width="200"/></a>':"",'<div class="j-user-info clearfix">');if(B.prop.connections){if(!B.prop.connections.bidirectional&&B.prop.connections.followerCount>=0&&B.enabled){D.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followers.plural"),[])),"</span>");if(B.prop.connections.linkFollowCounts){jive.eae.acclaim.count({command:"showFollowers",count:B.prop.connections.followerCount,objectId:B.id,objectType:B.type,classes:"j-user-follow-info"},D)}D.append("</div>")}if(B.prop.connections.followingCount>=0&&B.enabled){D.append('<div><span class="font-color-meta-light">',(B.prop.connections.bidirectional)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friends"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.following"),[])),"</span>");if(B.prop.connections.linkFollowCounts){jive.eae.acclaim.count({command:"showConnections",count:B.prop.connections.followingCount,objectId:B.id,objectType:B.type,classes:"j-user-follow-info"},D)}D.append("</div>")}}D.append((!B.enabled)?'<strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.disabled"),[]))+"</strong>":"",'<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.labels.title"),[])),"</span>");if(B.prop.connections&&B.prop.connections.labelsShown){D.append('<ul class="j-label-dot-list">');var F=B.prop.connections.friendLists;var C=F.length;for(var G=0;G<C;G++){var A=F[G];if(A.targetUserAMember){jive.browse.user.labelDot(A,D)}}D.append("</ul>")}D.append("</div></div>",(B.prop.title)?' <strong class="j-user-title font-color-meta-light" title="'+soy.$$escapeHtml(B.prop.title)+'">'+soy.$$escapeHtml(B.prop.title)+"</strong>":"","</section><footer><div>");if(B.columns.dateJoined){if(B.prop.membership||B.creationDate){D.append('<span class="font-color-meta">');jive.shared.soy.i18nHelper({i18nKey:"browse.joined.date",arg0:"<strong>",arg1:(B.prop.membership)?soy.$$escapeHtml((B.prop.membership.createDate?dateFormat(parseFloat(B.prop.membership.createDate),"mmmm d, yyyy"):"")):(B.creationDate)?soy.$$escapeHtml((B.creationDate?dateFormat(parseFloat(B.creationDate),"mmmm d, yyyy"):"")):"",arg2:"</strong>",noAutoEscape:true},D);D.append("</span>")}}if(B.columns.statuslevel&&B.prop.statuslevel&&B.prop.statuslevel.enabled){D.append('<span class="font-color-meta" title=\'');jive.people.profile.statusLevel(soy.$$augmentData(B.prop.statuslevel,{showPoints:true}),D);D.append("'>");jive.people.profile.statusLevel(soy.$$augmentData(B.prop.statuslevel,{showPoints:true}),D);D.append("</span>")}D.append("</div></footer>");jive.browse.user.flipperControl(B.prop,D);D.append("</div>");var E=new soy.StringBuilder('<div class="j-thumb-back face card-back"><h4>',soy.$$escapeHtml(B.subject),'</h4><ul class="j-social-actions">');if(B.prop.connections&&B.prop.connections.followLinkShown){E.append("<li>");jive.people.profile.followLink(soy.$$augmentData(B.prop.connections,{targetUserID:B.id,targetUserDisplayName:B.subject,hideFollowingCount:true,darkButton:true}),E);E.append("</li>")}E.append((B.prop.directMessageActionLinkShown)?'<li><a href="#" class="js-create-direct-message j-social-action"><span><span class="jive-icon-med jive-icon-direct-message"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.sendmessage"),[]))+"</span></a></li>":"",(B.prop.discussionActionInfo&&B.prop.discussionActionInfo.linkShown)?'<li><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,B.prop.discussionActionInfo.link))+'" class="j-social-action js-link-cur-loc-param" data-cur-loc-param-name="cancelURL"><span><span class="jive-icon-med jive-icon-discussion"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.startdiscussion"),[]))+"</span></a></li>":"",'</ul><a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.back.button"),[])),"</span></a></div>");jive.browse.user.flippable(soy.$$augmentData(B.prop,{body:E.toString()}),D);D.append("</div>");if(!H){return D.toString()}};jive.browse.user.flippable=function(A,C){var B=C||new soy.StringBuilder();B.append((A.connections&&A.connections.followLinkShown||A.directMessageActionLinkShown||A.discussionActionInfo&&A.discussionActionInfo.linkShown)?A.body:"");if(!C){return B.toString()}};jive.browse.user.flipperControl=function(A,C){var B=C||new soy.StringBuilder();jive.browse.user.flippable(soy.$$augmentData(A,{body:'<a href="#" class="j-card-flipper j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[]))+"</a>"}),B);if(!C){return B.toString()}}
;
jive.namespace("FollowUserApp");jive.FollowUserApp.LabelsView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(c){var d=b(".js-browse-thumbnail, .js-browse-row");if(c){d=d.filter('[data-object-id="'+c+'"]')}this.content=d.find(".j-label-dot-list")};this.add=function(d){var c=b(jive.browse.user.labelDot(d));this.content.append(c)};this.remove=function(d){var c=this.get(d.id);c.remove()};this.update=function(d){var c=this.get(d.id);c.each(function(){var e=b(jive.browse.user.labelDot(d));b(this).replaceWith(e)})};a.get=function(c){return this.content.find('.j-label-dot[data-list-id="'+c+'"]')}});
;
jive=this.jive||{};jive.conc=jive.conc||{};jive.conc.synchronize=(function(){function a(c){return Object.prototype.toString.call(c)==="[object Array]"}function b(c){return c&&c.addCallback&&c.addErrback&&c.addCancelback}return function(g){var f,d,c=0,h=new jive.conc.Promise();function e(i,j){j.addCallback(function(k){f[i]=k;c-=1;if(c<1){h.emitSuccess(f)}}).addErrback(function(){h.emitError.apply(h,arguments)}).addCancelback(function(){h.cancel.apply(h,arguments)});c+=1}f=a(g)?[]:{};for(d in g){if(g.hasOwnProperty(d)){if(b(g[d])){e(d,g[d])}else{f[d]=g[d]}}}return h}})();
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}if(typeof jive.people.profile=="undefined"){jive.people.profile={}}jive.people.profile.followLink=function(A,C){var B=C||new soy.StringBuilder();if(!A.targetUserDisabled){B.append('<div class="js-follow-user-link clearfix" data-userid="',soy.$$escapeHtml(A.targetUserID),'" data-bidirectional="',soy.$$escapeHtml(A.bidirectional),'" data-follower-count="',soy.$$escapeHtml(A.followerCount),'" data-displayname="',soy.$$escapeHtml(A.targetUserDisplayName),'" data-approvals-enabled="',soy.$$escapeHtml(A.approvalsEnabled),'"><a href="#" class="js-follow ',(!A.darkButton)?"j-social-button j-ui-elem":"j-social-action",'" ',(A.targetUserACurrentFriend||A.targetUserAPendingFriend)?'style="display:none"':"","><span",(!A.darkButton)?' class="j-ui-elem"':"",'><span class="jive-icon-med jive-icon-follow"></span>',(!A.bidirectional)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.startfollowing.button"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addfriend.button"),[])),'</span></a><span class="js-pending j-disabled ',(!A.darkButton)?"j-social-button j-ui-elem":"j-social-action",'" ',(!A.targetUserAPendingFriend)?'style="display:none"':"","><span",(!A.darkButton)?' class="j-ui-elem"':"",">",(!A.bidirectional)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.follow.pendingapproval.text"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friend.pendingapproval.text"),[])),'</span></span><a href="#" class="j-connection-remove ',(!A.hideFriendListChooser&&A.friendLists&&A.friendLists.length>0)?"j-split-button notlast":""," ",(!A.bidirectional)?"js-unfollow":"js-remove-friend"," ",(!A.darkButton)?"j-social-button j-ui-elem":"j-social-action",'" ',(!A.targetUserACurrentFriend)?'style="display:none"':"","><span",(!A.darkButton)?' class="j-ui-elem"':"",'><span class="jive-icon-med jive-icon-following"></span>',(!A.bidirectional)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.following.link"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.remove.link"),[])),'</span></a><span class="js-confirm-relationship-removal j-unfriend-confirm-message" style="display:none;"><span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.remove.confirm.text"),[])),'</span> <a class="js-unfollow j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.yes"),[])),'</a><a class="js-unfollow-cancel j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),"</a></span>");if(!A.hideFriendListChooser&&A.friendLists&&A.friendLists.length>0){jive.people.profile.friendListChooser(soy.$$augmentData(A,{hidden:!A.targetUserACurrentFriend}),B)}if(!A.hideFollowingCount){jive.people.profile.followCounts(A,B)}B.append("</div>")}if(!C){return B.toString()}};jive.people.profile.followCounts=function(A,C){var B=C||new soy.StringBuilder();B.append('<ul class="font-color-meta">',(!A.bidirectional)?"<li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.following"),[]))+' <span class="js-following-count">'+soy.$$escapeHtml(A.followingCount)+"</span></li><li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.followers"),[]))+' <span class="js-follower-count">'+soy.$$escapeHtml(A.followerCount)+"</span></li>":"<li>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.friends"),[]))+' <span class="js-follower-count">'+soy.$$escapeHtml(A.followerCount)+"</span></li>","</ul>");if(!C){return B.toString()}};jive.people.profile.friendListChooser=function(A,G){var C=G||new soy.StringBuilder();C.append((!A.darkButton)?'<a href="#" class="js-connection-label-btn j-connection-label-btn " '+((A.hidden)?'style="display:none"':"")+' title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+"</a>":'<a href="#" class="js-connection-label-btn j-connection-label-btn j-social-action" '+((A.hidden)?'style="display:none"':"")+' title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+'"><span class="jive-icon-med jive-icon-friend-applylabels"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[]))+"</a>",'<div class="j-action-popover j-connection-labels-menu js-connection-labels-menu" style="display: none;" data-userid="',soy.$$escapeHtml(A.targetUserID),'"><p>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.addconnectionlabel.text"),[])),"</p><form>");var B=A.friendLists;var F=B.length;for(var D=0;D<F;D++){var E=B[D];jive.people.profile.friendListChooserLabel(soy.$$augmentData(E,{selected:E.targetUserAMember,userID:A.targetUserID}),C)}C.append("</form></div>");if(!G){return C.toString()}};jive.people.profile.friendListChooserLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="js-label-option ',(A.selected)?"selected":"",'" ',(A.selected)?'title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.removelabel.text"),[]))+'"':"",' data-list-id="',soy.$$escapeHtml(A.listID),'"><input type="checkbox" id="label_',soy.$$escapeHtml(A.listID),"_",soy.$$escapeHtml(A.userID),'" value="',soy.$$escapeHtml(A.listID),'" ',(A.selected)?'checked="checked"':"",' /><label for="label_',soy.$$escapeHtml(A.listID),"_",soy.$$escapeHtml(A.userID),'"><div class="j-label-color"alt="',soy.$$escapeHtml(A.name),'" title="',soy.$$escapeHtml(A.name),'"><div style="background:#',soy.$$escapeHtml(A.css),'" ></div></div>',soy.$$escapeHtml(A.name),"</label></a>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.activityinfo=="undefined"){jive.browse.activityinfo={}}jive.browse.activityinfo.userListHover=function(A,C){var B=C||new soy.StringBuilder();B.append("<header><h2>",(A.activityType=="reply")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.plural"),[A.totalCount])):(A.activityType=="like")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.plural"),[A.totalCount])):(A.activityType=="bookmark")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.plural"),[A.totalCount])):(A.activityType=="follow")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.plural"),[A.totalCount])):(A.activityType=="membership")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.plural"),[A.totalCount])):(A.activityType=="connections")?(A.bidirectionalGraph)?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.plural"),[A.totalCount])):(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.plural"),[A.totalCount])):"",'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content"><table><tbody>');jive.browse.activityinfo.userListHoverTableBody(A,B);B.append("</tbody></table></section>");if(!C){return B.toString()}};jive.browse.activityinfo.userListHoverTableBody=function(C,G){var E=G||new soy.StringBuilder();var B=C.items;var D=B.length;if(D>0){for(var F=0;F<D;F++){var A=B[F];jive.browse.activityinfo.userListHoverItem({currentUserID:C.currentUserID,user:A},E)}}else{E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.user.list.empty"),[])))}if(!G){return E.toString()}};jive.browse.activityinfo.userListHoverItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr><td class="j-td-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35}),B);B.append('</td><td class="j-td-name"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.user.username))),'">',(A.currentUserID==A.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):soy.$$escapeHtml(A.user.displayName),'</a></td><td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true}),B)}B.append("</td></tr>");if(!C){return B.toString()}};jive.browse.activityinfo.userListHoverBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-activity-info-hover" class="jive-modal j-people-list-modal"></div>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.acclaim=="undefined"){jive.soy.acclaim={}}jive.soy.acclaim.renderAcclaimModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-acclaim-mini-modal-',soy.$$escapeHtml(A.uniqueKey),'" class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="',soy.$$escapeHtml(A.youID),'"><header><h2 ',(A.activityType=="bookmark")?'class="j-modal-bookmark-header"':"",">",(A.activityType=="like")?'<span class="jive-icon-sml jive-icon-like"></span>':"",(A.activityType=="bookmark")?'<div class="jive-bookmark-ribbon j-ui-elem"></div>':"");jive.shared.soy.getCountTextByType({count:A.totalCount,type:A.activityType,bidirectionalGraph:A.bidirectionalGraph},B);B.append('</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section  class="jive-modal-content clearfix">',(!A.guest)?'<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">'+((A.bidirectionalGraph)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.filter.label"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.connections.filter.label"),[])))+"</label>"+((A.activityType=="bookmark")?'<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.sidebar.filter.notes"),[]))+"</label>":"")+"</nav>":"");jive.soy.acclaim.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,onlyFriends:false,id:"modal-liked-everyone",classNames:"liked-everyone-list js-everyone-list",show:true},B);jive.soy.acclaim.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,onlyFriends:true,id:"modal-liked-friends",classNames:"liked-friends-list js-friends-list",show:false},B);if(A.activityType=="bookmark"){jive.soy.acclaim.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,onlyFriends:false,onlyNotes:true,id:"modal-bookmark-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-notes-list",show:false},B);jive.soy.acclaim.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,onlyFriends:true,onlyNotes:true,id:"modal-bookmark-friends-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list",show:false},B)}B.append("</section></div>");if(!C){return B.toString()}};jive.soy.acclaim.renderUserList=function(A,G){var C=G||new soy.StringBuilder();C.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var E=A.users;var F=E.length;if(F>0){for(var B=0;B<F;B++){var D=E[B];jive.soy.acclaim.displayUserRow({activityType:A.activityType,user:D,currentUserID:A.currentUserID,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},C)}}else{C.append('<tr><td><p class="j-empty font-color-meta-light">',(A.activityType=="bookmark")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.bookmarks"),[])):(A.activityType=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.likes"),[])):(A.activityType=="follow")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.follow"),[])):(A.activityType=="connections")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.connections"),[])):(A.activityType=="membership")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.membership"),[])):"","</p></td></tr>")}C.append("</tbody></table>");if(!G){return C.toString()}};jive.soy.acclaim.renderUserNotesList=function(B,G){var D=G||new soy.StringBuilder();D.append('<table id="',soy.$$escapeHtml(B.id),'" class="',soy.$$escapeHtml(B.classNames),'"',(!B.show)?' style="display: none;"':"","><tbody>");var F=B.users;var E=F.length;if(E>0){for(var A=0;A<E;A++){var C=F[A];if(C.prop.bookmarknotes){jive.soy.acclaim.displayUserRow({activityType:B.activityType,user:C,currentUserID:B.currentUserID,onlyFriends:B.onlyFriends,onlyNotes:B.onlyNotes},D)}}}else{D.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>')}D.append("</tbody></table>");if(!G){return D.toString()}};jive.soy.acclaim.displayYou=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(encodeURIComponent(A.username))},B);B.append('" data-userid="',soy.$$escapeHtml(A.ID),'" class="jiveTT-hover-user">',soy.$$escapeHtml(A.i18n.acclaimLikedYou),"</a>");if(!C){return B.toString()}};jive.soy.acclaim.displayUserRow=function(A,C){var B=C||new soy.StringBuilder();if(!A.onlyFriends||A.onlyFriends&&A.currentUserID!=A.user.id&&A.user.prop.connections.targetUserACurrentFriend){if(A.onlyNotes&&A.user.prop.hasBookmarknotes||!A.onlyNotes){B.append('<tr data-user-id="',soy.$$escapeHtml(A.user.id),'">');if(!A.onlyNotes){B.append('<td class="j-td-avatar ',(A.user.prop.hasBookmarknotes)?"j-td-topalign":"",'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35}),B);B.append("</td>")}B.append('<td class="j-td-name">');if(A.currentUserID==A.user.id){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.user,{displayNameOverride:jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])}),B)}else{jive.shared.displayutil.userDisplayNameLink(A.user,B)}B.append((!A.onlyNotes)?"<!-- TODO: show truncated version of the notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""):"<!-- TODO: show full, non-plain text / non-escaped version of the full notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""),"</td>");if(A.activityType=="bookmark"){}else{if(!A.onlyNotes){B.append('<td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){if(A.user.id!=A.currentUserID){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true}),B)}}B.append("</td>")}}B.append("</tr>")}}if(!C){return B.toString()}};jive.soy.acclaim.privateBookmarkNotification=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.privateBookmarks"),[])),"</td></tr>");if(!C){return B.toString()}}
;
jive.namespace("Activity.Info");jive.Activity.Info.ActivityInfoView=jive.AbstractView.extend(function(a){var c=jQuery;function b(d){return d==="bookmark"}this.init=function(e){var d=this;this.$modal=null;this.pageSize=e.pageSize;this.soyParams={};this.renderModal=function(f){return $j(jive.soy.acclaim.renderAcclaimModal(f))};this.handleFollow=function(h){if(this.$modal){var g=this.$modal.find("table.js-everyone-list, table.js-friends-list"),f="tr[data-user-id="+h.id+"]";if(!g.eq(1).find(f).length){g.eq(0).find(f).clone().prependTo(g.eq(1).find("tbody"))}}};jive.switchboard.addListener("follow.user.complete",this.handleFollow.bind(this))};this.showUsers=function(d,i){var e=this,g={destroyOnClose:true,centered:true};this.soyParams=a.buildSoyParams(d,i);this.$modal&&this.$modal.remove();var f=this.renderModal(this.soyParams);if(b(d.activityType)){var h=jive.soy.acclaim.privateBookmarkNotification();f.find("table.js-everyone-list tbody").each(function(){$j(this).append(h)})}this.$modal=f.lightbox_me(g);this.$modal.find("#jive-view-picker input:checkbox").click(function(){var j=$j("#jive-view-picker input:checked");var k=0;if(j.length==1){k=j.val()}else{if(j.length==2){k=3}}e.$modal.find("table").hide();e.$modal.find("table").eq(k).show()});this.$modal.find(".jive-modal-content").endlessScroll({fireDelay:false,callback:function(j){if(e.soyParams.moreResults){e.emitP("loadUsersFromIndex",i,e.pageSize*j).addCallback(function(k){e.appendUsers(k)})}}})};this.appendUsers=function(e){var j=e&&e.items?e.items:[];if(j.length>0){this.$modal.find(".j-js-private-bookmark-notification").remove();var d=this.$modal.find(".jive-modal-content tbody:visible");var g=d.parent().attr("id");var h=this.renderModal($j.extend({},this.soyParams,{users:j}));var f=h.find("table#"+g+" tr");d.append(f.clone());if(b(this.soyParams.activityType)){var i=jive.soy.acclaim.privateBookmarkNotification();d.append(i)}}};a.buildSoyParams=function(d,e){return{activityType:e.activityType,bidirectionalGraph:d.bidirectionalGraph,currentUserID:d.currentUserID,moreResults:d.moreResults,objectID:e.objectID,objectType:e.objectType,totalCount:d.totalCount,uniqueKey:e.uniqueKey,users:d.items,youID:e.youID||d.currentUserID}}});
;
jive.namespace("DirectMessaging");jive.DirectMessaging.MicroBloggingController=jive.MicroBlogging.CommonController.extend(function(a){this.init=function(b){this._super(b)};this.getMessageObject=function(){var b={message:this.microbloggingView.getMessage()};if(this.draftWallEntry&&this.draftWallEntry.wallentry){b=$j.extend(true,this.draftWallEntry.wallentry,b)}return b};a.initMBView=function(){var b=$j("#jive-modal-direct-messaging");this.microbloggingView=new jive.DirectMessaging.MicroBloggingView({selector:"#statusInputs-direct-message-text",idPostfix:"mbASHeader",atMentionBtn:b.find("a.jive-js-mention-button"),imgAttachmentBtn:b.find("a.jive-js-imgattach-button"),submitBtn:b.find("a.js-direct-messaging-form-submitBtn")})};a.createDraft=function(d,c){var b=this;this.microbloggingService.createDraft({objectType:14,objectID:1},{wallentry:{privateDM:true}}).addCallback(function(e){b.draftWallEntry=e;d()}).addErrback(function(f,e){c.emitError(f,e)})}});
;
jive.namespace("DirectMessaging");jive.DirectMessaging.MessageSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="wall";a.pluralizedResourceType=a.resourceType;this.init=function(c,b){this.urlParams="/14/1";this.userSource=c;this._super(b)};this.getUsersByIds=function(){var b=this,e=new jive.conc.Promise(),d=Array.prototype.slice.call(arguments),f=[];function c(){if(d.length>0){b.userSource.get(d.shift()).addCallback(function(g){f.push(g);c()})}else{e.emitSuccess(f)}}c();return e};this.sendMessage=function(c){var b=new jive.conc.Promise();$j.ajax({data:JSON.stringify({wallentry:$j.extend({},c,{privateDM:true})}),type:"POST",url:this.RESOURCE_ENDPOINT+this.urlParams,dataType:"json",contentType:"application/json; charset=utf-8",success:function(d,f,e){b.emitSuccess(d)},error:function(f,h,g){try{var e=$j.parseJSON(f.responseText);if(e&&e.error&&e.error.message){b.emitError(e.error.message,e.error.code)}}catch(d){b.emitError(null,f&&f.status)}}});return b}});
;
jive.namespace("DirectMessaging");jive.DirectMessaging.CreateMessageView=function(){jive.conc.observable(this);var d={},b,a=[];function c(f){var e=f.find("input[name=share-users]").val().split(/\s*,\s*/);return $j.extend(microbloggingController.getMessageObject(),{userIDs:e})}this.notifyError=function(e){$j("<p />").html(e).message({style:"error"})};this.notifySuccess=function(){$j(jive.soy.direct_messaging.successMessage()).message({style:"success"})};this.setRecipients=function(e){a=e.concat([]);return this};this.hideModal=function(){b.trigger("close");return this};this.lockSubmit=function(){b.find("input.js-direct-messaging-form-submitBtn").attr("disabled","disabled")};this.unlockSubmit=function(){b.find("input.js-direct-messaging-form-submitBtn").removeAttr("disabled")};this.openModal=function(){var e=this;b=$j(jive.soy.direct_messaging.modal());var f=b.find("input[type=text]").eq(0);b.lightbox_me({destroyOnClose:true,onLoad:function(){f.focus()}});jive.DirectMessaging.CreateMessageView.initializeUserPicker(f).setUsers(a);a=[];microbloggingController=jive.DirectMessaging.CreateMessageView.initializeMicroBloggingController();b.find("form.j-form").submit((function(h,g){e.lockSubmit();g.emit("form-submit",c($j(this)));h.preventDefault()}).partial(undefined,this))}};jive.DirectMessaging.CreateMessageView.initializeMicroBloggingController=function(){return new jive.DirectMessaging.MicroBloggingController()};jive.DirectMessaging.CreateMessageView.initializeUserPicker=function(a){return new jive.UserPicker.Main({multiple:true,listAllowed:true,emailAllowed:true,$input:a,relatedMessage:$j(jive.soy.direct_messaging.notRelated())})};
;
jive.namespace("DirectMessaging");jive.DirectMessaging.MicroBloggingView=jive.MicroBlogging.CommonView.extend(function(a){this.init=function(b){this._super($j.extend({},b||{},{doNotAnimate:true}))};this.getMessage=function(){return this.statusInput.getSubmitVals(false)||""};this.createFormElem=function(){this.$formElem=this.getContent().closest("form:eq(0)");this.$imageFormElem=this._getMetaImageContainer().find("form");this.getContent().closest("form").keydown(function(c){var b=9;if(c.keyCode==b&&c.target==$j(".jive-chooser-browse").get(0)){$j("#message-direct-message-text").focus();if(c.preventDefault){c.preventDefault()}}})};this.createWaitingViewElem=function(){this.$waitingViewElem=this.getContent()};this._getAttachmentsViewOptions=function(){return{selector:"#jive-modal-direct-messaging .jive-js-attachment-container"}};this._getMetaImageContainer=function(){return this.getContent().closest("form").next().find("div.j-meta-image-container")};this.handleSubmitClick=function(b){};this.handleAtMentionResult=function(h,d){var f=this;if(h&&h.split("-").length==2){var c=h.split("-")[0],g=h.split("-")[1];var b=new jive.rte.EntitlementService({objectID:0,objectType:0,entitlement:"VIEW"});var e=$j("#jive-modal-direct-messaging div.j-result-list li").map(function(){return $j(this).data("user-id")+""}).get();if(b&&c){b.checkEntitlement(c,g,e).addCallback(function(i){if(!i){var j="";if(c==3){j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.no_notification"})}else{if(c==700){j=jive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.secret_group"})}else{j=ive.statusinput.mention_warnings.jsI18nHelper({key:"tinymce.jivemention.restricted_content"})}}$j("<p>"+d+" "+j+"</p>").message({style:"warn"})}})}}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.direct_messaging=="undefined"){jive.soy.direct_messaging={}}jive.soy.direct_messaging.modal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-modal-direct-messaging" class="jive-modal j-modal"><header><h2>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.sendADirectMessage"),[])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content clearfix"><div id="share-error" class="jive-error-box" style="display:none" ></div><form class="j-form"><p class="ie-zindex-fix"><label for="recipients">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.label.to"),[])),'</label><input type="text" name="share-users" id="recipients" class="j-user-autocomplete jive-chooser-input jive-form-element-text j-ui-elem" autocomplete="on" /></p><p class="j-direct-message-label-area"><label for="jive-direct-message-body">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.label.message"),[])),'</label></p><div id="statusInputs-direct-message-text" class="j-mb-entry"><div class="j-rc4 jive-statusinput-default font-color-meta  jive-statusinput jive-form-element-text jive-js-statusinput-default"></div><div id="message-direct-message-text" class="j-rc4 jive-js-statusinput jive-form-element-textarea" style="position:relative;"></div></div>');jive.statusinput.containers.renderAttachmentsContainer({removable:true},B);B.append('<div class="j-status-input-actions j-act-comment-actions clearfix"><input class="js-direct-messaging-form-submitBtn j-btn-global j-btn-callout" type="submit" name="share-content-submit" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.send.button"),[])),'"/><button type="button" class="close j-btn-global">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'</button><a href="javascript:void(0);" class="j-btn-global j-wall-meta-image jive-js-imgattach-button" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addimage"),[])),'"><span class="jive-icon-med jive-icon-photo"></span></a><a href="javascript:void(0);" class="jive-js-mention-button j-wall-meta-reference j-btn-global" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("we.form.addlink"),[])),'"><span class="jive-icon-med jive-icon-mention"></span></a></div></form>');jive.statusinput.containers.statusInputActionContainer({canCreateImage:true,canCreateVideo:false,isPrivateDM:true},B);B.append("</section></div>");if(!C){return B.toString()}};jive.soy.direct_messaging.successMessage=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.direct_messaging.sendSuccess"),[])),"</p>");if(!C){return B.toString()}};jive.soy.direct_messaging.notRelated=function(A,C){var B=C||new soy.StringBuilder();B.append('<p class="j-warn"><span class="jive-icon-sml jive-icon-redalert"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("share.notrelated"),[])),"</p>");if(!C){return B.toString()}}
;
jive.namespace("DirectMessaging");jive.DirectMessaging.Main=function(c,a){function b(e){a.unlockSubmit();a.notifyError(e)}function d(){a.hideModal();a.notifySuccess()}this.onSubmit=function(e){c.sendMessage(e).addCallback(d).addErrback(b);return this};this.addRecipientsById=function(f,e){var e=e||new jive.conc.Promise();c.getUsersByIds(f).addCallback(function(g){a.setRecipients(g);e.emitSuccess()})};this.showModal=function(){a.openModal();return this};this.hideModal=function(){a.hideModal();return this};a.addListener("form-submit",this.onSubmit.bind(this))};
;
jive.namespace("Like",(function(c,b){function a(k,j,e,h){var l=k.closest(".js-acclaim-container"),d=l.data("type"),f=l.data("likes"),m={canLike:true,liked:j,objectId:h,objectType:e};f+=j?1:-1;f=f<0?0:f;m.likeCount=f;switch(d){case"mini":k.closest(".j-js-liking-control").html(b.activityAcclaimLinkContainer(m));break;case"medium":l.data("likes",f).html(b.acclaimContainerMedium(m));break;case"small":var g=$j(b.acclaimLikingControl($j.extend({showGlyph:true,type:"small"},m))),i=l.closest(".j-js-liking-control");if(i.length>0){i.replaceWith(g)}else{l.replaceWith(g)}break}}jive.dispatcher.listen(["like","unlike"],function(g,d,f){var e=d==="like";c.setLiked(e,g.objectType,g.objectId).addCallback(function(){a($j(f),e,g.objectType,g.objectId)})});return{}})(new jive.Liking.LikeSource({}),jive.eae.acclaim));
;
jive.namespace("Activity");jive.Activity.ItemSource=jive.RestService.extend(function(a){a.resourceType="activity";a.pluralizedResourceType=a.resourceType;this.getContentActivityUsers=function(d,e,c){var b={cache:false,data:{count:c,start:e},url:[this.RESOURCE_ENDPOINT,"users",d.activityType,d.objectType,d.objectID].join("/")};return this.commonAjaxRequest(new jive.conc.Promise(),"GET",b)}});
;
jive.namespace("Activity.Info");jive.Activity.Info.Main=jive.oo.Class.extend(function(a){this.init=function(){this.pageSize=20;this.source=new jive.Activity.ItemSource();this.view=new jive.Activity.Info.ActivityInfoView({pageSize:this.pageSize});var b=this;this.view.addListener("loadUsersFromIndex",function(e,d,c){b.source.getContentActivityUsers(e,d,b.pageSize).addCallback(function(f){c.emitSuccess(f)})})};this.showUsers=function(d,c){var b=this.view;this.source.getContentActivityUsers(d,c,this.pageSize-1).addCallback(function(e){b.showUsers(e,d)})}});
;
jive.acclaim=(function(b){var a=new jive.Activity.Info.Main(),c={showBookmarks:"bookmark",showChildren:"children",showConnections:"connections",showFollowers:"follow",showLikes:"like",showMembers:"membership"};jive.dispatcher.listen(Object.keys(c),function(e,d){var f=b.extend({activityType:c[d],objectID:e.objectId},e);delete f.command;delete f.count;delete f.objectId;a.showUsers(f,0)})})(jQuery);
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.home=="undefined"){jive.home={}}jive.home.main=function(A,C){var B=C||new soy.StringBuilder();B.append("<head><title>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.activity"),[])),'</title><meta name="nav.active.link" content="jive-nav-link-activity" /><meta name="rte" value="true" /></head><body class="j-body-act"><header class="j-page-header"><h1><span class="jive-icon-whatmatters jive-icon-whatmatters-activity j-ui-elem"></span><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.whatmatters"),[])),"</span> ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.header.text.activity"),[])),'</h1></header><!-- BEGIN layout --><div class="j-layout j-layout-ls  clearfix" id="j-home-main"><!-- BEGIN large column --><div class="j-column-wrap-l"><div class="j-column j-column-l"><div id="j-stream" class="j-stream j-rc5 j-layout j-contained">');if(A.currentStream.canCreateMbEntry&&!A.currentStream.viewingUser.anonymous){B.append('<div class="j-main-mb-entry"><script type="text/javascript">$j(function() {new jive.MicroBlogging.MBController();});<\/script>');jive.statusinput.containers.microbloggingStatusInput({statusID:"mb-header-editor",user:A.currentStream.viewingUser,latestStatusUpdate:A.latestStatusUpdate,focusStatusUpdate:A.focusStatusUpdate,canCreateMbImage:A.currentStream.canCreateMbImage,canCreateMbVideo:A.currentStream.canCreateMbVideo,canAtMention:!A.mobileUI},B);B.append("</div>")}jive.home.nav({activeTab:A.activeTab,streamInfoClosed:A.streamInfoClosed,guest:A.currentStream.viewingUser.anonymous,recommenderEnabled:A.recommenderEnabled,canViewStatusUpdates:A.canViewStatusUpdates},B);jive.home.streamInfoBox({streamInfoClosed:A.streamInfoClosed},B);B.append('<div id="j-activity-streams-wrapper" class="j-stream"><div id="previewable-binary-viewer"></div><div id="j-js-user" class="j-act j-stream-list j-main-stream j-activity-stream ',(!A.mobileUI)?"j-not-mobile":"",'" style="display:',soy.$$escapeHtml(A.activeTab=="followed-activity"?"block":"none"),';">');jive.eae.activitystream.activityStream({activityStream:A.activeTab=="followed-activity"?A.currentStream:"",activityStream4JS:A.activeTab=="followed-activity"?A.currentStream4JS:"",viewingUser:A.currentStream.viewingUser,streamType:"user",streamTypeID:"0",tabViewSelector:"#followed-activity",savedRefreshTime:A.refreshTimes.user,prevRefreshTime:A.prevRefreshTimes.user,dmEnabled:A.dmEnabled,recommenderEnabled:A.recommenderEnabled,rebuilding:A.rebuilding,canViewStatusUpdates:A.canViewStatusUpdates,statusUpdatesEnabled:A.statusUpdatesEnabled,preferredMode:A.preferredMode,startMode:A.startMode,mobileUI:A.mobileUI,isEditing:A.isEditing,communityName:A.communityName,hasImagePerms:A.hasImagePerms},B);B.append('</div><div id="j-js-all" class="j-act j-stream-list j-activity-stream ',(!A.mobileUI)?"j-not-mobile":"",'" style="display:',soy.$$escapeHtml(A.activeTab=="all-activity"?"block":"none"),';">');jive.eae.activitystream.activityStream({activityStream:A.activeTab=="all-activity"?A.currentStream:"",activityStream4JS:A.activeTab=="all-activity"?A.currentStream4JS:"",viewingUser:A.currentStream.viewingUser,streamType:"all",streamTypeID:"2",tabViewSelector:"#all-activity",savedRefreshTime:A.refreshTimes.all,prevRefreshTime:A.prevRefreshTimes.all,dmEnabled:A.dmEnabled,canViewStatusUpdates:A.canViewStatusUpdates,statusUpdatesEnabled:A.statusUpdatesEnabled,preferredMode:A.preferredMode,startMode:A.startMode,mobileUI:A.mobileUI,isEditing:A.isEditing,communityName:A.communityName,hasImagePerms:A.hasImagePerms},B);B.append('</div></div></div></div></div><!-- END large column --><!-- BEGIN small column --><div class="j-column-wrap-s"><div class="j-column j-column-s"><div id="j-discovery" class="j-column-r j-recommender">',(A.recommenderEnabled)?(!A.currentStream.viewingUser.anonymous)?'<section id="recommended-for-you-module" class="j-recommendation-module j-js-recommendation-module clearfix"><div class="j-box"><header class="font-color-meta-light j-recommendation-container-title"><h4>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.heading"),[]))+'</h4></header><article id="user-reco-content" class="j-rc5" data-modulebody="true" data-max="13"></article></div><div id="recommended-for-you-paginator" class="j-dotted-paginator-container j-js-dotted-paginator-container"></div></section>':"":"",'<section id="trendy-content-module" class="j-recommendation-module j-box clearfix"><header class="font-color-meta-light j-recommendation-container-title"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trendynow"),[])),'</h4></header><article id="trendy" data-modulebody="true" data-max="10" data-loadmore="true"></article></section><section id="leaderboard-module" class="j-recommendation-module clearfix"><header class="font-color-meta-light j-recommendation-container-title"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trending.people"),[])),'</h4></header><article id="trendy-users" data-modulebody="true" data-max="10" data-loadmore="false"></article></section><script type="text/javascript">$j(function() {setTimeout(function() {jive.RecommendationApp.activityPageController.initialize({pollingInterval:',soy.$$escapeHtml(A.pollingInterval),"})}, 1000);});<\/script></div><!-- END small column --></div></div><!-- END main section --></div></body><!-- END main body -->");if(!C){return B.toString()}};jive.home.streamInfoBox=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"$j(document).ready( function() {$j('#j-stream-info-dismiss-link').click(dismissInfoBox); $j('#j-stream-info-icon').click(toggleInfoBox);}); function dismissInfoBox(e) {$j('#j-stream-info').slideUp(500,'easeOutCirc'); var userSource = new jive.Browse.User.ItemSource(); userSource.setUserProperty({ userID: 'current', propName: 'jive.streamInfo.closed', propValue: 'true' }); e.preventDefault();}function toggleInfoBox(e) {if ($j('#j-stream-info').is(':visible') ) {dismissInfoBox(e);} else {$j('#j-stream-info').slideDown(200,'easeInOutCirc'); e.preventDefault();}}"},B);B.append('<!-- BEGIN info box --><div id="j-stream-info" class="j-stream-info j-rc5" style="',(A.streamInfoClosed)?"display: none;":"display: block;",'"><h3 class="font-color-meta help-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.help.title"),[])),'</h3><section class="font-color-normal"><ul><li class="j-info-streams"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.streams.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.streams.text"),[])),'</p></li><li class="j-info-mattersmost"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.mattersmost.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.mattersmost.text"),[])),'</p></li><li class="j-info-hide"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.hide.label"),[])),"</h4><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.hide.text"),[])),"</p></li>",(A.recommenderEnabled)?'<li class="j-info-recommender"><h4>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.recommender.label"),[]))+"</h4><p>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.activity.recommender.text"),[]))+"</p></li>":"",'</ul><a href="#" class="j-button" id="j-stream-info-dismiss-link" title="Close help">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),"</a></section></div><!-- END info box -->");if(!C){return B.toString()}};jive.home.nav=function(A,C){var B=C||new soy.StringBuilder();B.append('<nav class="j-act-nav j-bigtab-nav"><ul class="j-tabbar j-rc5">');if(!A.guest){jive.home.activityTab({activeTab:A.activeTab,recommenderEnabled:A.recommenderEnabled},B)}jive.home.allTab({activeTab:A.activeTab},B);B.append('</ul></nav><div class="j-act-listfilters clearfix"><a href="#" id="j-stream-info-icon" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.help"),[])),'" class="j-act-help"><span class="jive-icon-sml jive-icon-help"></span></a><ul id="user-filterlinks" style="',(A.activeTab!="followed-activity")?"display:none":"",'"><li><a class="j-sub-selected j-rc6" data-filterName=\'all\' href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.all.followed"),[])),"</a></li>",(A.recommenderEnabled)?'<li><a data-filterName=\'magic\' href="#" id="j-magic-filter" class="j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.matters.most"),[]))+"</a></li>":"",(A.canViewStatusUpdates)?'<li><a data-filterName=\'statusupdates\' href="#" class="j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.statusupdates"),[]))+"</a></li>":"",'<li><a data-filterName=\'antimatter\' href="#" class="j-rc6">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.hidden"),[])),'</a></li></ul><ul id="all-filterlinks" style="',(A.activeTab=="followed-activity")?"display:none":"",'">',(A.canViewStatusUpdates)?'<li><a data-filterName=\'all\' href="#" class="j-sub-selected j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.all.content"),[]))+'</a></li><li><a data-filterName=\'statusupdates\' href="#" class="j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.menu.filter.statusupdates"),[]))+"</a></li>":"<li></li>","</ul></div>");if(!C){return B.toString()}};jive.home.activityTab=function(A,C){var B=C||new soy.StringBuilder();B.append('<li id="followed-activity"',(A.activeTab=="followed-activity")?' class="j-act-nav-selected active j-ui-elem"':"",' data-filter-id="0" data-ibx-update-count="0"><a href="#" style="" class="j-list-select inside',(A.activeTab=="followed-activity")?" j-ui-elem":"",'"><span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.followed_activity"),[])),"</span></a></li>");if(!C){return B.toString()}};jive.home.allTab=function(A,C){var B=C||new soy.StringBuilder();B.append('<li id="all-activity"',(A.activeTab=="all-activity")?' class="j-act-nav-selected active j-ui-elem"':"",' data-filter-id="2" data-ibx-update-count="0"><a href="#" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.all_activity"),[])),'" class="j-list-select',(A.activeTab=="all-activity")?" j-ui-elem":"",'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.stream.all_activity"),[])),"</a></li>");if(!C){return B.toString()}};jive.home.newCount=function(A,C){var B=C||new soy.StringBuilder();B.append((A.count>50)?"50+":soy.$$escapeHtml(A.count));if(!C){return B.toString()}};jive.home.updateBadge=function(A,C){var B=C||new soy.StringBuilder();B.append("<div />");if(!C){return B.toString()}};jive.home.countForTitle=function(A,C){var B=C||new soy.StringBuilder();B.append("(");jive.home.newCount({count:A.count},B);B.append(")");if(!C){return B.toString()}}
;
jive.namespace("ActivityStream");jive.ActivityStream.ActivityTabView=jive.ActivityStream.TabView.extend(function(a){this.init=function(b){this._super(b);var c=this;$j("#j-"+c.streamType+"-updates").live("click",function(d){c.emit("tabClick",c.getUpdateCount(),c.streamType,c.streamTypeID,$j(c.selector).attr("id"),function(){c.resetCounts()});d.preventDefault()});c.getContent().find("a.j-list-select").live("click",function(d){c.emit("tabClick",c.getUpdateCount(),c.streamType,c.streamTypeID,$j(c.selector).attr("id"),function(){c.resetCounts()});d.preventDefault()})};a.getSoyTemplate=function(b){if(this.streamType=="user"){return jive.home.activityTab(b)}else{return jive.home.allTab(b)}};this.postRender=function(){};this.updateCount=function(c){var b=this.getContent().find(".j-js-newCount");if(!this.getContent().hasClass("j-tab-selected")){if(c.newActivityCounts[this.streamTypeID]>0&&this.count==0){b.html(jive.home.newCount({count:c.newActivityCounts[this.streamTypeID]}));b.fadeIn("fast")}else{if(c.newActivityCounts[this.streamTypeID]==0){b.fadeOut("fast")}else{if(c.newActivityCounts[this.streamTypeID]>this.count){b.html(jive.home.newCount({count:c.newActivityCounts[this.streamTypeID]}))}}}}$j("#j-"+this.streamType+"-updates").html(jive.eae.activitystream.newUpdates({count:c.newActivityCounts[this.streamTypeID]}));if(c.newActivityCounts[this.streamTypeID]>0&&this.count==0){$j("#j-"+this.streamType+"-updates").animate({height:"toggle"},{duration:600})}this.getContent().attr("data-ibx-update-count",c.newActivityCounts[this.streamTypeID]);this.count=c.newActivityCounts[this.streamTypeID]};this.reUpCount=function(){var b=this.getContent().find(".j-js-newCount");if(this.count>0&&parseInt(b.text())==0){b.html(jive.home.newCount({count:this.count}));b.show()}else{b.html(jive.home.newCount({count:this.count}))}};this.deselect=function(){this.getContent().removeClass("j-act-nav-selected active j-ui-elem").children(".j-list-select").removeClass("j-ui-elem");this.reUpCount();$j("#"+this.streamType+"-filterlinks").hide()};this.select=function(){this.getContent().removeClass("j-act-nav-selected active j-ui-elem").children(".j-list-select").removeClass("j-ui-elem");this.getContent().addClass("j-act-nav-selected active j-ui-elem").children(".j-list-select").addClass("j-ui-elem");$j("#"+this.streamType+"-filterlinks").show()};this.resetCounts=function(){var b=this.getContent().find(".j-js-newCount");b.fadeOut("fast",function(){b.html(jive.home.newCount({count:0}))});$j("#j-"+this.streamType+"-updates").hide();$j("#j-"+this.streamType+"-updates").html(jive.eae.activitystream.newUpdates({count:0}));this.getContent().attr("data-ibx-update-count","0");this.count=0};this.getUpdateCount=function(){return parseInt(this.getContent().attr("data-ibx-update-count"))}});
;
jive.namespace("ActivityStream");jive.ActivityStream.GlobalTabCountsView=jive.AbstractView.extend(function(a){this.init=function(c){this._super(c);var b=this;b.$globalInboxNavLinkContainer=$j("#jive-nav-link-inbox");b.$globalActivityNavLinkContainer=$j("#jive-nav-link-activity");b.$globalActionsNavLinkContainer=$j("#jive-nav-link-actions");b.$globalInboxNavLinkCount=$j("#jive-nav-link-inbox span.nav-count");b.$globalActivityNavLinkCount=$j("#jive-nav-link-activity span.nav-count");b.$globalActionsNavLinkCount=$j("#jive-nav-link-actions span.nav-count");b.viewingActivityPage=$j("#followed-activity").length};a.getSoyTemplate=function(b){return jive.home.inboxTab(b)};this.updateInboxGlobalNav=function(d){var b=this;var e=d.index1.unreadCount;var c=parseInt(b.$globalInboxNavLinkCount.attr("data-count"));b.$globalInboxNavLinkCount.attr("data-count",e+"");if(e>0&&c==0){b.$globalInboxNavLinkContainer.removeClass("new").addClass("new");b.$globalInboxNavLinkCount.html(jive.home.newCount({count:e}));b.$globalInboxNavLinkCount.show()}else{if(e==0){b.$globalInboxNavLinkCount.hide();b.$globalInboxNavLinkCount.html(jive.home.newCount({count:e}));b.$globalInboxNavLinkContainer.removeClass("new")}else{b.$globalInboxNavLinkCount.html(jive.home.newCount({count:e}))}}};this.decrementGlobalNav=function(e,g){var d=this.$globalInboxNavLinkCount,c=this.$globalInboxNavLinkContainer;if(e!="inbox"){d=this.$globalActionsNavLinkCount,c=this.$globalActionsNavLinkContainer}var b=parseInt(d.attr("data-count")),f=b-g;if(b<=50||g>1000){if(f<0){f=0}d.attr("data-count",f+"");if(f>0&&b==0){d.text(jive.home.newCount({count:f}));c.removeClass("new").addClass("new");d.show();if(e=="inbox"){var h=$j(".j-comm-filter");if(h.length){h.removeClass("j-all-read");h.removeClass("j-not-all-read").addClass("j-not-all-read")}}}else{if(f==0){d.hide();d.text(jive.home.newCount({count:f}));c.removeClass("new");if(e=="inbox"){var h=$j(".j-comm-filter");if(h.length){h.removeClass("j-all-read").addClass("j-all-read");h.removeClass("j-not-all-read")}}}else{d.text(jive.home.newCount({count:f}));if(e=="inbox"&&f!=0){var h=$j(".j-comm-filter");if(h.length){h.removeClass("j-all-read");h.removeClass("j-not-all-read").addClass("j-not-all-read")}}}}if($j("#jive-inbox-count-data").length){this.updateTitleCount(f)}}};this.updateActionsGlobalNav=function(d){var b=this;var e=d.index7+d.index8+d.index9+d.index11;var c=parseInt(b.$globalActionsNavLinkCount.attr("data-count"));b.$globalActionsNavLinkCount.attr("data-count",e+"");if(e>0&&c==0){b.$globalActionsNavLinkContainer.removeClass("new").addClass("new");b.$globalActionsNavLinkCount.html(jive.home.newCount({count:e}));b.$globalActionsNavLinkCount.show()}else{if(e==0){b.$globalActionsNavLinkCount.hide();b.$globalActionsNavLinkContainer.removeClass("new");b.$globalActionsNavLinkCount.html(jive.home.newCount({count:e}))}else{b.$globalActionsNavLinkCount.html(jive.home.newCount({count:e}))}}};this.updateActivityGlobalNav=function(d){var b=this;if(!b.viewingActivityPage){var c=parseInt(b.$globalActivityNavLinkCount.attr("data-count"));b.$globalActivityNavLinkCount.attr("data-count",d+"");if(d>0&&c==0){b.$globalActivityNavLinkContainer.removeClass("new").addClass("new")}else{if(d==0&&c>0){b.$globalActivityNavLinkContainer.removeClass("new")}}}};this.updateTitleCount=(function(){var c=document.title,b=c.indexOf(")");if(b!=-1){c=c.substring(c.indexOf(")")+2)}return function(e){var d="";if(e>0){d=jive.home.countForTitle({count:e})}document.title=d+" "+c}})()});
;
jive.namespace("ActionQueue");jive.ActionQueue.ActionQueueTabView=jive.ActivityStream.TabView.extend(function(a){this.init=function(b){this._super(b)};a.getSoyTemplate=function(b){return jive.home.inboxTab(b)};this.updateCount=function(d,g,h){var f=this,c=this.getContent();if(c.length){var e=c.find(".j-js-newCount");var b=parseInt(c.attr("data-ibx-actual-count"));if(!c.hasClass("j-tab-selected")||h){e.html(jive.home.newCount({count:g[f.streamTypeID]}));if(g[f.streamTypeID]>0&&b==0){e.fadeIn("fast")}c.attr("data-ibx-actual-count",parseInt(g[f.streamTypeID]))}if(!h){$j("#j-"+this.streamType+"-updates").html(jive.eae.activitystream.newUpdates({count:d.newActivityCounts[f.streamTypeID]}));if(d.newActivityCounts[f.streamTypeID]>0&&parseInt(this.getContent().attr("data-ibx-update-count"))==0){f.emit("tabClick",d.newActivityCounts[f.streamTypeID],f.streamType,f.streamTypeID,$j(f.selector).attr("id"))}c.attr("data-ibx-update-count",d.newActivityCounts[f.streamTypeID])}}};this.decrementCount=function(g){var e=this,c=this.getContent().find(".j-js-newCount"),d=parseInt(this.getContent().attr("data-ibx-actual-count")),f=d-g;if((d>50||f>=50)&&f<d&&f>0){var b=this;this.emit("refreshCount",function(i){f=i[e.streamTypeID];b.getContent().attr("data-ibx-actual-count",parseInt(f));c.html(jive.home.newCount({count:f}))})}else{if(f<=0){f=0;c.fadeOut("fast",function(){c.html(jive.home.newCount({count:f}))});var h=$j(".j-comm-filter");if(h.length){h.removeClass("j-not-all-read");h.addClass("j-all-read")}}else{if(d==0){c.html(jive.home.newCount({count:f}));c.fadeIn("fast");var h=$j(".j-comm-filter");if(h.length){h.removeClass("j-all-read");h.addClass("j-not-all-read")}}else{var h=$j(".j-comm-filter");if(h.length){h.removeClass("j-all-read");h.addClass("j-not-all-read")}c.html(jive.home.newCount({count:f}))}}this.getContent().attr("data-ibx-actual-count",parseInt(f));this.getContent().attr("data-last-refresh-count",parseInt(this.getContent().attr("data-last-refresh-count")-g))}};this.refresh=function(){var b=this.getContent().find(".j-js-newCount");this.getContent().attr("data-last-refresh-count",parseInt(b.text()));this.clearUpdateCount()};this.getUpdateCount=function(){return parseInt(this.getContent().attr("data-ibx-update-count"))};this.clearUpdateCount=function(){this.getContent().attr("data-ibx-update-count",0);$j("#j-"+this.streamType+"-updates").html(jive.eae.activitystream.newUpdates({count:0}))}});
;
jive.namespace("ActivityStream");jive.ActivityStream.TabCountsControllerMain=jive.oo.Class.extend(function(a){jive.conc.observable(this);this.init=function(d){var b=this,e=d.pollingEnabled;b.firstPoll=true;b.listService=new jive.ActivityStream.StreamSource();b.tabViews={};b.tabViews.user=new jive.ActivityStream.ActivityTabView({selector:"#followed-activity",streamType:"user",streamTypeID:"index0"});b.tabViews.all=new jive.ActivityStream.ActivityTabView({selector:"#all-activity",streamType:"all",streamTypeID:"index2"});b.tabViews.actions=new jive.ActionQueue.ActionQueueTabView({selector:"#jive-jive-actions-tab-tab",streamType:"actions",streamTypeID:"index7"});b.tabViews.notifications=new jive.ActionQueue.ActionQueueTabView({selector:"#jive-jive-notifications-tab-tab",streamType:"notifications",streamTypeID:"index8"});b.tabViews.moderation=new jive.ActionQueue.ActionQueueTabView({selector:"#jive-jive-moderation-tab-tab",streamType:"moderation",streamTypeID:"index9"});b.tabViews.tasks=new jive.ActionQueue.ActionQueueTabView({selector:"#jive-jive-tasks-tab-tab",streamType:"tasks",streamTypeID:"index11"});b.globalTabCountsView=new jive.ActivityStream.GlobalTabCountsView();b.pollData=new jive.ActivityStream.ActivityStreamCount();for(var c in b.tabViews){b.tabViews[c].addListener("tabClick",function(f,h,g,i,j){switch(g){case"index0":if(jive.ActivityStream.StreamController){jive.ActivityStream.StreamController.tabClicked(f,b.pollData,function(){b.listService.saveActiveStreamTab(i);j()})}break;case"index1":break;case"index2":if(jive.ActivityStream.AllStreamController){jive.ActivityStream.AllStreamController.tabClicked(f,b.pollData,function(){b.listService.saveActiveStreamTab(i);j()})}break}})}if(e){jive.switchboard.addListener("activityStream.poll",$j.bind(b,b.updateCounts))}};this.updateCounts=function(d){var b=this;if(b.firstPoll){b.firstPoll=false}else{b.pollData=d;if(d.newActivityCounts.index1||d.newActivityCounts.index7||d.newActivityCounts.index8){if(d.newActivityCounts.index1){if($j("#jive-inbox-count-data").length){if(jive.ActivityStream.CommunicationStreamController){jive.ActivityStream.CommunicationStreamController.autoUpdate(d.newActivityCounts.index1,b.pollData)}}}if(d.newActivityCounts.index7){if(b.tabViews.actions.getContent().length&&b.tabViews.actions.getContent().hasClass("active")){if(jive.ActionQueue.ListController){jive.ActionQueue.ListController.autoUpdate(d.newActivityCounts.index7,b.pollData)}}}if(d.newActivityCounts.index8){if(b.tabViews.notifications.getContent().length&&b.tabViews.notifications.getContent().hasClass("active")){if(jive.ActionQueue.NotificationListController){jive.ActionQueue.NotificationListController.autoUpdate(d.newActivityCounts.index8,b.pollData)}}}}var c=b.pollData.fullCounts;b.globalTabCountsView.updateInboxGlobalNav(c);if($j("#jive-inbox-count-data").length){var e=$j(".j-comm-filter");if(c.index1.unreadCount>0){if(e.length){e.removeClass("j-all-read");e.addClass("j-not-all-read")}}b.globalTabCountsView.updateTitleCount(c.index1.unreadCount)}if(jive.ActivityStream.CommunicationStreamController){jive.ActivityStream.CommunicationStreamController.updateUnreadMarkers(c.index1.unreadItems)}if(b.tabViews.actions.getContent().length){b.tabViews.actions.updateCount(b.pollData,c,true);b.tabViews.moderation.updateCount(b.pollData,c,true);b.tabViews.tasks.updateCount(b.pollData,c,true);if(!b.tabViews.notifications.getContent().hasClass("active")){b.tabViews.notifications.updateCount(b.pollData,c,true)}else{c.index8=0}}b.globalTabCountsView.updateActionsGlobalNav(c);if(b.tabViews.user.getContent().length){if(d.newActivityCounts.index0){b.tabViews.user.updateCount(d)}}else{b.globalTabCountsView.updateActivityGlobalNav(d.newActivityCounts.index10)}if(d.newActivityCounts.index2&&b.tabViews.all.getContent().length){b.tabViews.all.updateCount(d)}}};this.decrementNewCount=function(b,c){this.globalTabCountsView.decrementGlobalNav(b,c);if(b!="inbox"){this.tabViews[b].decrementCount(c)}};this.getUpdateCount=function(b){return this.tabViews[b].getUpdateCount()};this.getPollData=function(){return this.pollData};this.refresh=function(b){this.tabViews[b].refresh()};this.deselect=function(b){this.tabViews[b].deselect()};this.select=function(b){this.tabViews[b].select()};this.resetCounts=function(b){this.tabViews[b].resetCounts()};this.getSelectedTab=function(){var b=this;for(var c in b.tabViews){if(b.tabViews[c].getContent().length&&(b.tabViews[c].getContent().hasClass("j-tab-selected")||b.tabViews[c].getContent().hasClass("j-act-nav-selected"))){return c}}};this.hasTabView=function(c){var b=this;if(c in b.tabViews){return true}return false}});
;
jive.namespace("Navbar.Search");jive.Navbar.Search.SearchBox=jive.AbstractView.extend(function(a){this.init=function(b){var d=$j(b);var c=d.parent();c.submit(function(){var e=d.val();var f=e.charAt(e.length-1)=="*";if(e&&!f){c.find("input[name=spotlight]").val("true")}});return this}});
;
jive.namespace("Navbar.Menu.Search");jive.Navbar.Menu.Search.Main=jive.oo.Class.extend(function(a){this.init=function(d,c,e,f,b){this.searchBox=new jive.Navbar.Search.SearchBox(d);this.searchObj=new JiveSpotlightSearch(d,c,e,f,b)};this.getSpotlightSearch=function(){return this.searchObj}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.ps=="undefined"){jive.ps={}}if(typeof jive.ps.nitro=="undefined"){jive.ps.nitro={}}if(typeof jive.ps.nitro.profile=="undefined"){jive.ps.nitro.profile={}}jive.ps.nitro.profile.renderCurrentPoints=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr id="n4jive_bio_points"><td>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.profile.currentPoints"),[])),':</td><td><span class="title"></span></td></tr>');if(!C){return B.toString()}};jive.ps.nitro.profile.renderCurrentPointLevel=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr id="n4jive_bio_level"><td class="n4jive_bio_label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.profile.currentLevel"),[])),':</td><td><img src="#" id="n4jive_bio_level_img"/><span class="title n4jive_bio_level_name"></span><div class="n4jive_progress" id="n4jive_bio_level_progress"><div class="n4jive_progress_inner"></div></div><label class="n4jive_progress_label" for="n4jive_bio_level_progress"></label></td></tr>');if(!C){return B.toString()}};jive.ps.nitro.profile.renderCompletedChallenges=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr class="j-profile-extended-data" id="n4jive_bio_recent_challenges"><td class="n4jive_bio_label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.profile.badges"),[])),':</td><td id="n4jive_bio_recent_challenges_images"></td></tr>');if(!C){return B.toString()}};jive.ps.nitro.profile.renderProfilePopup=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="clearfix n4jive_hover" id="n4jive_hover"><div class="n4jive_column_50" id="n4jive_hover_points"><h5>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.profile.popup.currentPoints"),[])),":</h5><p><img src='",soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/plugins/gamification/resources/images/ajaxload.gif")),'\' alt="loading..." /></p></div><div class="n4jive_column_50 current_level" id="n4jive_hover_level"><h5>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.profile.popup.currentLevel"),[])),":</h5><p><img src='",soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/plugins/gamification/resources/images/ajaxload.gif")),'\' alt="loading..." /></p></div><div class="clearfix n4jive_hover_badges" id="n4jive_hover_recent_challenges"><h5>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.profile.popup.badges"),[])),':</h5><div class="n4jive_hover_badges_wrap"><img src=\'',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/plugins/gamification/resources/images/ajaxload.gif")),'\' alt="loading..." /></div></div></div>');if(!C){return B.toString()}};jive.ps.nitro.profile.renderPointsText=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="nitro-bio-points">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.bio.lifetimePoints"),[A.lifetimePoints])),'</span>&nbsp;<span class="nitro-annual-points">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.bio.annualPoints"),[A.annualPoints])),"</span>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nitro=="undefined"){jive.nitro={}}if(typeof jive.nitro.admin=="undefined"){jive.nitro.admin={}}jive.nitro.admin.nitroAdminModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal" id="jive-nitro-admin-modal"><header><h2 class="jive-modal-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.admin.title"),[])),'</h2></header><a class="j-modal-close-top jive-close close" href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content clearfix"><iframe src="',soy.$$escapeHtml(A.baseUrl),"/?userName=",soy.$$escapeHtml(A.username),"&password=",soy.$$escapeHtml(A.password),'&autoLogin=true&mode=jive">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.admin.title"),[])),"</iframe></section></div>");if(!C){return B.toString()}}
;
jive.namespace('nitro.admin');

/**
 * @depends path=/resources/scripts/jive/json-security.js
 */

jive.nitro.admin.NitroAdminSource = jive.RestService.extend(function(protect) {
	protect.init = function(options) {
		this.options = options;
	};

	this.loadNitroAdminConfig = function() {
		var promise = new jive.conc.Promise();
		var error = this.errorFinding;
		var url = jive.rest.url("/nitro/admin/config");

		$j.ajax({
			url: url,
			type: "GET",
			contentType: "application/json; charset=utf-8",
			dataType: "json",
			success: function(data) {
				promise.emitSuccess(data);
			},
			error: this.errorCallback(promise, error)
		});

		return promise;
	};
});
;
jive.namespace('nitro.admin');

jive.nitro.admin.NitroAdminView = jive.oo.Class.extend(function(protect) {
	jive.conc.observable(this);

	this.init = function(options) {
		var view = this;
		this.options = options;

		$j(document).ready(function() {
			view.attachLinkHandler();
		});
	};

	protect.attachLinkHandler = function() {
		var view = this;

		$j('#jive-nav-link-nitro-admin').live('click' , function(e) {
			view.emitP('nitroAdminLinkClicked').addCallback(function(config) {
				$j('#j-satNav-menu').trigger('close');
				view.openModal(config);
				e.preventDefault();
			}).addErrback(function() {
				console.log('promise got an errback');
			});
		});
	};

	protect.openModal = function(config) {
		var view = this;

		if (!$j('#jive-nitro-admin-modal').is(':visible')) {
			var modal = $j(jive.nitro.admin.nitroAdminModal(config));
			$j('body').append(modal);

			view.populateModal(modal.filter(':first'), function() {
				// on close callback
			});
		}
	};

	protect.populateModal = function(modal, callback) {
		modal.lightbox_me({
			onClose: function() {
				callback();
				modal.remove();
			},
			scrollWithPage: false,
			centered: true,
			destroyOnClose: true,
			closeClick: false
		});
	};
});
;
/**
 * @depends path=/plugins/gamification/resources/script/apps/admin/models/admin_source.js plugin=gamification
 * @depends path=/plugins/gamification/resources/script/apps/admin/views/admin_view.js plugin=gamification
 */
jive.namespace('nitro.admin');

jive.nitro.admin.Main = jive.oo.Class.extend(function(protect) {

	this.init = function(options) {
		var main = this;
		this.options = options;

		this.nitroAdminSource = new jive.nitro.admin.NitroAdminSource(options);
		this.nitroAdminView = new jive.nitro.admin.NitroAdminView(options);

		this.nitroAdminView.addListener('nitroAdminLinkClicked', function(promise) {
			main.nitroAdminSource.loadNitroAdminConfig().addCallback(function (config) {
				promise.emitSuccess(config);
			}).addErrback(function (error, status) {
				console.log('got an error in main.js');
				promise.emitError(error, status);
			});
		});
	};
});
;
/**
 * @depends path=/plugins/gamification/resources/script/apps/admin/main.js plugin=gamification
 */

$j(document).ready(function() {
	new jive.nitro.admin.Main({});
});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.ps=="undefined"){jive.ps={}}if(typeof jive.ps.nitro=="undefined"){jive.ps.nitro={}}if(typeof jive.ps.nitro.people=="undefined"){jive.ps.nitro.people={}}jive.ps.nitro.people.main=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:'$j(document).ready(function() {new jive.nitro.people.Main({apiKey: "'+soy.$$escapeHtml(A.apiKey)+'", timeStamp: "'+soy.$$escapeHtml(A.signatureTimestamp)+'", signature: "'+soy.$$escapeHtml(A.signatureValue)+'", server: "'+soy.$$escapeHtml(A.baseUrl)+'", userID: "'+soy.$$escapeHtml(A.userID)+'", viewID: "'+soy.$$escapeHtml(A.data.itemsView.itemViewID)+'"});});'},B);jive.people.main(A.data,B);if(!C){return B.toString()}};jive.ps.nitro.people.initialStatusLevel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="font-color-meta">');jive.people.profile.statusLevel({ready:false,name:"",imagePath:"",pointLevel:"",showPoints:true},B);B.append("</span>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nav=="undefined"){jive.nav={}}jive.nav.browseSubNav=function(A,G){var B=G||new soy.StringBuilder();B.append('<nav class="j-bigtab-nav j-rc5 j-rc-none-bottom"><ul class="j-tabbar j-rc5"><li class="j-nav-label">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.browse"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</li>");var E=A.links;var F=E.length;for(var D=0;D<F;D++){var C=E[D];if(C.visible){jive.nav.subNavLink(soy.$$augmentData(C,{selected:(A.selectedLinkID==C.id)?"true":""}),B)}}B.append("</ul></nav>");if(!G){return B.toString()}};jive.nav.subNavLink=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.selected)?'class="active j-ui-elem"':"",'><a id="',soy.$$escapeHtml(A.id),'" href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.url),'"',(A.selected)?' class="j-ui-elem"':"",'><span class="nav-link">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[]))," </span></a></li>");if(!C){return B.toString()}}
;
jive.LocationState=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.defaults={supportPushState:true,supportFragment:true};a.init=function(c){var f=b.extend({},this.defaults,c||{}),e=location.href,g=this;this.location=e;this.supportPushState=f.supportPushState&&!!(window.history&&window.history.pushState);this.supportFragment=f.supportFragment;var d=[this.supportPushState?"popstate":null,this.supportFragment?"hashchange":null].filter(function(h){return !!h}).join(" ");b(window).bind(d,function(i){var h=location.href;if(g.afterInit||h!==e){g.location=h;g.emitChange(g.current(),h)}})};this.get=function(c){return this.current()[c]};this.getState=function(){return this.current()};this.getEphemeralState=function(){return b.deparam.fragment()};this.pushState=function(e,c){var d=b.extend(this.current(),e);Object.keys(e).forEach(function(f){if(typeof e[f]=="undefined"||(b.isArray(e[f])&&e[f].length<1)){delete d[f]}});this.setState(d,c)};this.setState=function(e,d){var c=this.lastLocation;this.location=this.supportPushState?this.newLocation(e):this.newFragment(e);this.emitChange(e,this.location);if(this.location!==c){if(this.supportPushState){history.pushState(this.current(),d||"",this.location)}else{if(this.supportFragment){this.updateLocationHash(this.location)}}}};a.current=function(){var d=this.location.match(/\?/)?b.deparam.querystring(this.location):{},c=this.location.match(/#/)?b.deparam.fragment(this.location):{};return b.extend({},d,c)};a.newLocation=function(c){var d=location.href.split(/[?#]/)[0];return b.param.querystring(d,c)};a.newFragment=function(e){var c={},d=b.deparam.querystring(),f=location.href.split("#")[0];Object.keys(e).forEach(function(g){if(d[g]!==String(e[g])){c[g]=e[g]}});return b.param.fragment(f,c)};a.emitChange=function(d,c){if(c!==this.lastLocation){this.emit("change",d);this.lastLocation=c;this.afterInit=true}};a.updateLocationHash=function(d){var c=this;function e(){c.preserveScrollPosition(d.split("#")[1],function(){location.href=d})}if(b.browser.msie&&b.browser.version<8){(this.locationHashTimeouts||[]).forEach(function(f){clearTimeout(f)});this.locationHashTimeouts=[];this.locationHashTimeouts.push(setTimeout(function(){c.locationHashTimeouts.push(setTimeout(e,100))},100))}else{e()}};a.preserveScrollPosition=function(c,e){var d;if(c){d=b(window).scrollTop();e();b(window).scrollTop(d)}else{e()}}});jive.locationState=new jive.LocationState();
;
jive.PaginationLinks=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(e){var d=this,c=".j-pagination";e=e||{};b(document).ready(function(){if(e.element){d.content=b(e.element||c)}else{d.content=b(jive.shared.soy.paginationLinks(e.params))}d.content.find("a[data-start]").click(function(g){var h=parseInt(b(this).data("start"),10),f=e.scrollTo?b(e.scrollTo):b();d.emit("start",h);if(f.length>0&&!d.inView(f)){b.scrollTo(f,200)}g.preventDefault()})})};a.inView=function(e){var g=b(window).scrollTop(),f=g+b(window).height(),c=b(e).offset().top,d=c+b(e).height();return((d>=g)&&(c<=f))}});
;
/**
 * Abstract trait to be mixed in to a class to add behavior for stateful
 * properties that are kept in sync with a location hash or with query
 * parameters.
 *
 * @class
 * @param {Object} defaultState default values for given keys
 * @param {Object} [options] configuration options
 * @config {Function} [paramFilter] function that takes parameters from
 * locationState and returns a normalized set of parameters.  Use this option
 * if you are going to have query string or hash values that are not of the
 * usual key=value format.  Defaults to undefined.
 * @config {Function} [viewClass] constructor for a class that will be used to
 * manage pagination links; defaults to jive.PaginationLinks
 * @config {jive.LocationState} [locationState] object to manage interactions
 * with the window location; defaults to jive.locationState
 *
 * @depends path=/resources/scripts/apps/shared/models/location_state.js
 * @depends path=/resources/scripts/apps/shared/views/pagination_links.js
 */
jive.Paginated = jive.oo.Class.extend(function(protect) {
    var $ = jQuery
      , undef;  // intentionally set to `undefined`

    /**
     * Abstract method, should accept a map of stateful property names and
     * values and should return a promise.  That promise should emit success
     * when a page is rendered based on the given parameters.  Fulfilling the
     * promise will cause the paginator to update its page links.
     *
     * @methodOf jive.Paginated#
     */
    protect.loadPage = jive.oo.abstract;

    protect.initPagination = function(defaultState, options) {
        var controller = this;

        options = options || {};

        this.defaultState = $.extend({
            start: 0,
            numResults: 20
        }, defaultState);

        this.promises = [];
        this.locationState = options.locationState || jive.locationState;
        this.paramFilter = options.paramFilter;
        this.linkViewClass = options.viewClass || jive.PaginationLinks;
        this.scrollTo = options.scrollTo;
        this.links = [];

        this.locationState.addListener('change', function(state) {
            if (controller.rollingBack) {
                controller.rollingBack = false;
                return;
            }

            controller.emitChange(state);
        });

        // If any value is present in the hash on page load then emit an event.
        $(document).ready(function() {
            // Make sure that this is executed asynchronously to prevent race
            // conditions in init() methods in classes that mix in this trait.
            jive.conc.nextTick(function() {
                var startingState = controller.locationState.getEphemeralState();

                if (Object.keys(startingState).length > 0) {
                    controller.emitChange(controller.locationState.getState());
                }
            });

            // Try to attach new link class instances to existing DOM elements.
            // But if pagination elements are present then give the link class
            // the opportunity to build some itself.
            if ($(options.paginationSelector || '.j-pagination').length > 0) {
                controller.links = $(options.paginationSelector || '.j-pagination').toArray().map(function(element) {
                    return controller.buildLinks({ element: element });
                });
            } else {
                controller.links = [controller.buildLinks()];
            }
        });
    };

    /**
     * Merges the given parameters with the existing location state.
     */
    protect.pushState = function(params) {
        var startState = this.locationState.getState()
          , filtered = this.paramFilter ? this.paramFilter(startState) : startState
          , promise = new jive.conc.Promise()
          , controller = this;

        // Remove parameters that match their default values.
        var state = Object.keys(params).reduce(function(state, k) {
            if (controller.defaultState.hasOwnProperty(k) &&
            controller.deepEqual(controller.defaultState[k], params[k])) {
                state[k] = undef;
            } else {
                state[k] = params[k];
            }
            return state;
        }, {});

        // Remove parameters that are unset by paramFilter.
        Object.keys(filtered).forEach(function(k) {
            if (filtered.hasOwnProperty(k) && typeof filtered[k] == 'undefined') {
                state[k] = undef;
            }
        });

        this.lastState = this.locationState.getState();
        this.locationState.pushState(state);

        this.promises.push(promise);

        return promise;
    };

    protect.getState = function() {
        return this.normalized(this.locationState.getState());
    };

    /**
     * Reverts the window location to its previous value.
     */
    protect.rollback = function() {
        if (this.lastState) {
            this.rollingBack = true;
            this.locationState.setState(this.lastState);
        }
    };

    /**
     * Fills in default values for any parameters that are not explicitly set
     * in the location state.
     */
    protect.normalized = function(state) {
        var filteredState = this.paramFilter ? this.paramFilter(state) : state
          , withDefaults = $.extend({}, this.defaultState, filteredState)
          , controller = this;

        // Make sure that parameters that are expected to be arrays are
        // consistently represented as arrays and that empty array values are
        // filled in with the default for that value.
        Object.keys(withDefaults).forEach(function(k) {
            if ($.isArray(controller.defaultState[k]) && !$.isArray(withDefaults[k])) {
                withDefaults[k] = [withDefaults[k]];
            } else if ($.isArray(controller.defaultState[k]) && withDefaults[k].length < 1) {
                withDefaults[k] = controller.defaultState[k];
            }
        });

        return withDefaults;
    };

    /**
     * Invoked when a location state change occurs.
     */
    protect.emitChange = function(state) {
        var controller = this;

        controller.loadPage(controller.normalized(state)).addCallback(function(pageNumber, totalPages) {
            controller.updatePaginationLinks(pageNumber, totalPages);

            // Fulfill any promises returned from pushState().
            controller.promises.forEach(function(promise) {
                promise.emitSuccess();
            });
            controller.promises = [];

            // Update the href attributes of any links on the page with the
            // "js-updatable-link" class.
            $('.js-updatable-link').each(function() {
                var $link = $(this)
                  , params = $link.data('urlParams');

                if (params) {
                    $link.attr('href', location.pathname +'?'+ $.param($.extend(state, params)));
                }
            });
        }).addErrback(function() {
            // Fulfill any promises returned from pushState().
            controller.promises.forEach(function(promise) {
                promise.emitError();
            });
            controller.promises = [];

            controller.rollback();
        });
    };

    protect.buildLinks = function(options) {
        options = options || {};

        var links = new this.linkViewClass($.extend({}, options, {
              params: $.extend({
                  urlParams: this.locationState.getState(),
                  urlPath: location.pathname,
                  pageSize: this.getState().numResults
              }, options.params),
              scrollTo: this.scrollTo
          }))
          , controller = this;

        if (!links._paginatedListening) {  // Avoid adding duplicate listeners.
            links.addListener('start', function(start) {
                controller.setStart(start);
            });

            links.addListener('page', function(page) {
                controller.setPage(page);
            });

            links._paginatedListening = true;
        }

        return links;
    };

    protect.updatePaginationLinks = function(pageNumber, totalPages) {
        var oldLinks = this.links
          , controller = this;

        this.links = oldLinks.map(function() {
            return controller.buildLinks({ params: { current: pageNumber, max: totalPages } });
        });

        oldLinks.forEach(function(l,i) {
            l.replaceWith(controller.links[i]);
        });
    };

    protect.setStart = function(rawStart) {
        var start = parseInt(rawStart, 10) || 0;
        this.pushState({ start: start });
    };

    protect.setPage = function(page) {
        this.setStart(this.pageToStart(page));
    };

    protect.pageToStart = function(page, numResults) {
        numResults = numResults || this.getState().numResults;
        return (page - 1) * numResults;
    };

    protect.startToPage = function(start, numResults) {
        numResults = numResults || this.getState().numResults;
        return (start / numResults) + 1;
    };

    protect.deepEqual = function(a, b) {
        if ($.isArray(a) && $.isArray(b)) {
            return a.length == b.length && a.every(function(e, i) {
                return e == b[i];
            });
        } else if ($.isArray(a) || $.isArray(b)) {
            return false;
        } else {
            return a == b;
        }
    };
});

;
(function(h){function b(t){var q=t.data("_vgchild");var p=t.width();var w=[[0,p,0]];var u=0,s,r,v;q.each(function(x){s=h(this);r=o(s);v=f(w,r[0]);w=k(w,v,r);u=Math.max(u,v[1]+r[1]);s.data("_vgleft",v[0]);s.data("_vgtop",v[1])});t.data("_vgwrapheight",u);g(t)}function f(t,s){var u=t.concat().sort(i);var p=u[u.length-1][2];for(var r=0,q=u.length;r<q;r++){if(u[r][2]>=p){break}if(u[r][1]-u[r][0]>=s){return[u[r][0],u[r][2]]}}return[0,p]}function k(t,p,s){var u=t.concat().sort(i);var v=[p[0],p[0]+s[0],p[1]+s[1]];for(var r=0,q=u.length;r<q;r++){if(v[0]<=u[r][0]&&u[r][1]<=v[1]){delete u[r]}else{u[r]=c(u[r],v)}}return e(u,v)}function i(q,p){if(!q||!p){return 0}return((q[2]==p[2]&&q[0]>p[0])||q[2]>p[2])?1:-1}function d(q,p){if(!q||!p){return 0}return(q[0]>p[0])?1:-1}function e(t,p){var u=t.concat([p]).sort(d);var q=[];for(var s=0,r=u.length;s<r;s++){if(!u[s]){continue}if(q.length>0&&q[q.length-1][1]==u[s][0]&&q[q.length-1][2]==u[s][2]){q[q.length-1][1]=u[s][1]}else{q.push(u[s])}}return q}function c(q,p){if(q[0]>=p[0]&&q[0]<p[1]||q[1]>=p[0]&&q[1]<p[1]){if(q[0]>=p[0]&&q[0]<p[1]){q[0]=p[1]}else{q[1]=p[0]}}return q}function o(r){var p=r.width();var q=r.height();p+=Number(r.css("margin-left").replace("px",""))+Number(r.css("padding-left").replace("px",""))+Number(r.get(0).style.borderLeftWidth.replace("px",""))+Number(r.css("margin-right").replace("px",""))+Number(r.css("padding-right").replace("px",""))+Number(r.get(0).style.borderRightWidth.replace("px",""));q+=Number(r.css("margin-top").replace("px",""))+Number(r.css("padding-top").replace("px",""))+Number(r.get(0).style.borderTopWidth.replace("px",""))+Number(r.css("margin-bottom").replace("px",""))+Number(r.css("padding-bottom").replace("px",""))+Number(r.get(0).style.borderBottomWidth.replace("px",""));return[p,q]}function g(q){var p=q;var r=p.data("_vgchild").length*(p.data("_vgopt").delay||0)+p.data("_vgopt").time||500;var s=p.css("overflow");p.stop();if(p.height()<p.data("_vgwrapheight")){if(h.browser.msie){p.height(p.data("_vgwrapheight"))}else{p.animate({height:p.data("_vgwrapheight")+"px"},(p.data("_vgopt").time||500),"easeOutQuart");p.css("overflow",s)}}else{clearTimeout(p.data("_vgwraptimeout"));p.data("_vgwraptimeout",setTimeout(function(){if(h.browser.msie){if(p.data("_vgwrapheight")){p.height(p.data("_vgwrapheight"))}}else{p.animate({height:p.data("_vgwrapheight")+"px"},(p.data("_vgopt").time||500),"easeOutQuart");p.css("overflow",s)}},r))}}function n(q){var p;q.each(function(r){p=h(this);p.css({position:"absolute",left:~~p.data("_vgleft")+"px",top:~~p.data("_vgtop")+"px"})})}function m(v,u,p,s){var w=h(v).parent();var x=false;var q=v.length;var r,t,y;for(r=0;r<q;r++){t=h(v[r]);y=t.position();if(y.left!=t.data("_vgleft")||y.top!=t.data("_vgtop")){x=true}}if(x){if(typeof(w.data("_vgopt").onStart)=="function"){w.data("_vgopt").onStart()}v.each(function(A){var z=h(this);var B={duration:p,easing:u};if(v.size()-1==A){B.complete=w.data("_vgopt").onFinish||null}clearTimeout(z.data("_vgtimeout"));z.data("_vgtimeout",setTimeout(function(){z.animate({left:z.data("_vgleft")+"px",top:z.data("_vgtop")+"px"},B)},A*s))})}}function a(q){var p=q;clearTimeout(p.data("_vgtimeout"));b(p);p.data("_vgtimeout",setTimeout(function(){if(p.data("_vgopt")){m(p.data("_vgchild"),p.data("_vgopt").easeing||"linear",p.data("_vgopt").time||500,p.data("_vgopt").delay||0)}},500))}function l(p,r){var q=h("<span />").text(" ").attr("id","_vgridspan").hide().appendTo("body");q.data("size",q.css("font-size"));q.data("timer",setInterval(function(){if(q.css("font-size")!=q.data("size")){q.data("size",q.css("font-size"));r(p)}},1000))}function j(p,r){p.bind("vgrid-added",function(){p.find("img").bind("load",function(){r(p)})});p.trigger("vgrid-added");var q=p.append;var s=p.prepend;p.append=function(){q.apply(p,arguments);p.trigger("vgrid-added")};p.prepend=function(){s.apply(p,arguments);p.trigger("vgrid-added")}}h.fn.extend({vgrid:function(s){var q=h(this);var r=s||{};var u=h(window);var p={width:u.width(),height:u.height()};q.data("_vgopt",r);q.data("_vgchild",q.find("> *"));q.data("_vgdefchild",q.data("_vgchild"));q.css({position:"relative",width:"auto"});b(q);n(q.data("_vgchild"));if(q.data("_vgopt").fadeIn){var t=(typeof(q.data("_vgopt").fadeIn)=="object")?q.data("_vgopt").fadeIn:{time:q.data("_vgopt").fadeIn};q.data("_vgchild").each(function(w){var v=h(this);v.css("display","none");setTimeout(function(){v.fadeIn(t.time||250)},w*(t.delay||0))})}q.data("_vgresizehandler",function(x){var y=h(window);var w=y.width();var v=y.height();if(q.data("_vgchild")&&(w!=p.width||v!=p.height)){a(q);p.width=w;p.height=v}});u.resize(q.data("_vgresizehandler"));if(r.useLoadImageEvent){j(q,a)}if(r.useFontSizeListener){l(q,a)}return q},vgrefresh:function(t,r,p,q){var s=h(this);if(s.data("_vgchild")){s.data("_vgchild",s.find("> *"));s.data("_vgchild").css("position","absolute");b(s);r=typeof(r)=="number"?r:s.data("_vgopt").time||500;p=typeof(p)=="number"?p:s.data("_vgopt").delay||0;if(r>0){m(s.data("_vgchild"),t||s.data("_vgopt").easeing||"linear",r,p)}else{n(s.data("_vgchild"))}if(typeof(q)=="function"){setTimeout(q,s.data("_vgchild").length*p+r)}}return s},vgsort:function(q,t,r,p){var s=h(this);if(s.data("_vgchild")){s.data("_vgchild",s.data("_vgchild").sort(q));s.data("_vgchild").each(function(u){h(this).appendTo(s)});b(s);m(s.data("_vgchild"),t||s.data("_vgopt").easeing||"linear",typeof(r)=="number"?r:s.data("_vgopt").time||500,typeof(p)=="number"?p:s.data("_vgopt").delay||0)}return s},vgdestroy:function(){var p=h(this);h(window).unbind("resize",p.data("_vgresizehandler"));clearTimeout("_vgwraptimeout")}})})(jQuery);
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.container=="undefined"){jive.browse.container={}}jive.browse.container.detailContainerHeader=function(A,C){var B=C||new soy.StringBuilder();B.append('<thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.place"),[])),'</strong></th><th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.followers"),[])),'</strong></th><th><strong class="font-color-meta-light">',(A.columns&&A.columns.creationDate)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.creationdate"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.latestactivity"),[])),"</strong></th><th></th></tr></thead>");if(!C){return B.toString()}};jive.browse.container.thumbnailSpaceItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="card"><div class="j-thumb j-place-thumb j-space-thumb j-rc4 js-browse-item face card-front ');jive.browse.container.flippable(soy.$$augmentData(A.prop,{body:"flippable"}),B);B.append('" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><header class="js-thumb-header"><h4><a class="j-place-name" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" title="',A.subject,'"><span class="',soy.$$escapeHtml(A.iconCss),' jive-icon-big"></span><span class="js-header-text">',soy.$$escapeHtml(A.subject),'</span></a></h4></header><section><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" class="j-place-photo j-space-photo">',(A.prop.placeImage&&A.prop.placeImage.urlMedium)?'<img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.placeImage.urlMedium))+'" alt="" width="200"/>':"",'</a><div class="j-place-info clearfix"><div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followers.plural"),[])),"</span><br/>");jive.eae.acclaim.count({command:"showFollowers",count:(A.prop.followInfo&&A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0",objectId:A.id,objectType:A.type},B);B.append("</div>",(A.prop.childInfo&&A.prop.childInfo.hasChildren)?'<div><span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspaces.plural"),[]))+'</span><br/><a href="#" class="j-sub-spaces j-view-children" data-activity-type="children" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'">'+soy.$$escapeHtml(A.prop.childInfo.numChildren)+"</a></div>":"","</div>",(A.prop.descSnippet)?'<article class="font-color-meta"><span>'+soy.$$escapeHtml(A.prop.descSnippet)+"</span></article>":"","</section>");jive.browse.container.flipperControl(A.prop,B);B.append("</div>");jive.browse.container.cardBack(A,B);B.append("</div>");if(!C){return B.toString()}};jive.browse.container.thumbnailSocialGroupItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="card"><div class="j-thumb j-place-thumb j-group-thumb j-rc4 js-browse-item face card-front ');jive.browse.container.flippable(soy.$$augmentData(A.prop,{body:"flippable"}),B);B.append('" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><header class="js-thumb-header"><h4><a class="j-place-name" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" title="',A.subject,'"><span class="',soy.$$escapeHtml(A.iconCss),' jive-icon-big"></span><span class="js-header-text">',soy.$$escapeHtml(A.subject),'</span></a></h4></header><section><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" class="j-place-photo j-group-photo">',(A.prop.placeImage&&A.prop.placeImage.urlMedium)?'<img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.placeImage.urlMedium))+'" alt="" width="200"/>':"",'</a><div class="j-place-info clearfix">');if(A.prop.followInfo||A.prop.socialGroupInfo){if(A.prop.followInfo){B.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followers.plural"),[])),"</span><br/>");jive.eae.acclaim.count({command:"showFollowers",count:(A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0",objectId:A.id,objectType:A.type},B);B.append("</div>")}if(A.prop.socialGroupInfo){B.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.members.plural"),[])),"</span><br/>");jive.eae.acclaim.count({command:"showMembers",count:(A.prop.socialGroupInfo)?soy.$$escapeHtml(A.prop.socialGroupInfo.numMembers):"0",objectId:A.id,objectType:A.type},B);B.append("</div>")}B.append((A.prop.socialGroupInfo)?'<div><span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup.form.type.label"),[]))+'</span><br/><span class=""><span class="jive-icon-sml jive-icon-group-'+soy.$$escapeHtml(A.prop.socialGroupInfo.typeName)+'-glyph" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.sgroup."+A.prop.socialGroupInfo.typeName),[]))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.sgroup."+A.prop.socialGroupInfo.typeName),[]))+"</span></span></div>":"")}B.append("</div>",(A.prop.descSnippet)?'<article class="font-color-meta"><span>'+soy.$$escapeHtml(A.prop.descSnippet)+"</span></article>":"","</section>");jive.browse.container.flipperControl(A.prop,B);B.append("</div>");jive.browse.container.cardBack(A,B);B.append("</div>");if(!C){return B.toString()}};jive.browse.container.thumbnailProjectItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="card"><div class="j-thumb j-place-thumb j-project-thumb j-rc4 js-browse-item face card-front ');jive.browse.container.flippable(soy.$$augmentData(A.prop,{body:"flippable"}),B);B.append('" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><header class="js-thumb-header"><h4><a class="j-place-name" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" title="',A.subject,'">',(A.prop.projectInfo.statusKey)?'<span class="jive-icon-project-status-'+soy.$$escapeHtml(A.prop.projectInfo.statusKey)+' jive-icon-big"></span>':"",'<span class="js-header-text">',soy.$$escapeHtml(A.subject),'</span></a></h4></header><section><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" class="j-place-photo j-project-photo">',(A.prop.placeImage&&A.prop.placeImage.urlMedium)?'<img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.placeImage.urlMedium))+'" alt="" width="200"/>':"",'<div class="j-status-bar"><span class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.status"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),' </span><span class="j-proj-status-text"><strong class="j-proj-status font-color-status-',soy.$$escapeHtml(A.prop.projectInfo.statusKey),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("project.status.type."+A.prop.projectInfo.statusKey),[])),'</strong></span></div></a><div class="j-place-info clearfix">');if(A.prop.followInfo){B.append('<div><span class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followers.plural"),[])),"</span><br/>");jive.eae.acclaim.count({command:"showFollowers",count:(A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0",objectId:A.id,objectType:A.type},B);B.append("</div>")}B.append('<div><span class="font-color-meta-light">',(A.prop.projectInfo.overdue)?'<span class="font-color-normal">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.overdue"),[]))+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.timeleft"),[])),"</span><br/>");if(A.prop.projectInfo){B.append("<span><strong>");jive.browse.container.projectStatusMessage(A,B);B.append("</strong></span>")}B.append("</div></div>",(A.prop.descSnippet)?'<article class="font-color-meta"><span>'+soy.$$escapeHtml(A.prop.descSnippet)+"</span></article>":"","</section>");jive.browse.container.flipperControl(A.prop,B);B.append("</div>");jive.browse.container.cardBack(A,B);B.append("</div>");if(!C){return B.toString()}};jive.browse.container.thumbnailBlogItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="card">Currently Blog containers do not have a visual representation and are not rendered in browse UI.</div>');if(!C){return B.toString()}};jive.browse.container.detailContainerItem=function(A,D){var B=D||new soy.StringBuilder();B.append('<tr class="j-place-row js-browse-item" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><td class="j-td-icon"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(A.iconCss),' jive-icon-med" /></td><td class="j-td-title"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" class="jivecontainerTT-hover-container" data-objectId="',soy.$$escapeHtml(A.id),'" data-objectType="',soy.$$escapeHtml(A.type),'"><strong>',soy.$$escapeHtml(A.subject),"</strong></a>",(A.prop.projectInfo&&!A.prop.projectInfo.archived)?'<span class="font-color-meta-light j-browse-proj-status"> - <strong class="j-proj-status font-color-status-'+soy.$$escapeHtml(A.prop.projectInfo.statusKey)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("project.status.type."+A.prop.projectInfo.statusKey),[]))+"</strong></span>":"");if(A.prop.projectInfo&&A.prop.projectInfo.archived){B.append("<span> - <strong>");jive.browse.container.projectStatusMessage(A,B);B.append("</strong></span>")}B.append((A.prop.socialGroupInfo&&A.prop.socialGroupInfo.typeName)?'<span class="font-color-meta-light j-browse-group-type"> - '+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("sgroup."+A.prop.socialGroupInfo.typeName),[]))+"</span>":"",(A.prop.childInfo&&A.prop.childInfo.hasChildren)?'<span class="font-color-meta-light j-browse-subspaces"> - <a href="#" class="j-sub-spaces j-view-children font-color-meta-light" data-activity-type="children" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'">'+((A.prop.childInfo.numChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.singular"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.subspacecount.plural"),[A.prop.childInfo.numChildren])))+"</a></span>":"");if(A.prop.socialGroupInfo&&A.prop.socialGroupInfo.numMembers){B.append('<p class="j-browse-content-location font-color-meta-light">');jive.eae.acclaim.count({command:"showMembers",count:(A.prop.socialGroupInfo)?soy.$$escapeHtml(A.prop.socialGroupInfo.numMembers):"0",objectId:A.id,objectType:A.type,text:A.prop.socialGroupInfo.numMembers==1?jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.singular"),["<strong>1</strong>"]):jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.plural"),["<strong>"+A.prop.socialGroupInfo.numMembers+"</strong>"])},B);B.append("</p>")}else{B.append((A.prop.parentInfo)?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(A.prop.parentInfo.id)+'" data-objectType="'+soy.$$escapeHtml(A.prop.parentInfo.type)+'">'+soy.$$escapeHtml(A.prop.parentInfo.subject)+"</a></p>":"")}B.append('</td><td class="j-td-followers">');if(A.prop.followInfo){jive.eae.acclaim.count({command:"showFollowers",count:(A.prop.followInfo.numFollowers)?soy.$$escapeHtml(A.prop.followInfo.numFollowers):"0",objectId:A.id,objectType:A.type},B)}B.append("</td>");if(A.columns&&A.columns.creationDate){B.append('<td class="j-td-date font-color-meta">',soy.$$escapeHtml((A.creationDate?dateFormat(parseFloat(A.creationDate),"mmmm d, yyyy h:MM TT"):"")),"</td>")}else{B.append('<td class="j-td-activity font-color-meta">');if(A.prop.latestActivity){B.append('<span class="j-activity-author">',soy.$$escapeHtml(A.prop.latestActivity.activityUser.displayName)," ");jive.eae.activitystream.include.activityVerbPhrase({object:A.prop.latestActivity.content,type:A.prop.latestActivity.type},B);B.append('</span> <span class="j-excerpt"><a href="',jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.latestActivity.content.jiveObjectURL),'" class="j-act-title">',A.prop.latestActivity.content.plainSubjectSnippet,"</a>",(A.prop.latestActivity.creationTime)?' <span class="font-color-meta-light">('+soy.$$escapeHtml(A.prop.latestActivity.creationTime)+")</span> ":"","</span>")}else{B.append("&nbsp")}B.append("</td>")}B.append('<td class="j-td-actions">');var C=new soy.StringBuilder('<a href="#" class="j-social-button j-browse-action-button j-ui-elem" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[])),'"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-gear"></span><span class="j-browse-actions-button-text">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.btn"),[])),'</span></span></a><div class="j-action-popover j-js-browse-actions-container" style="display: none"><ul class="j-simple-list">',(A.prop.followInfo)?'<li><span class="start-follow"><a href="#" class="j-follow-button" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'"'+((A.prop.followInfo.followed)?' style="display:none" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.follow"),[]))+'</a></span><span class="stop-follow"><a href="#" class="j-follow-button" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'"'+((!A.prop.followInfo.followed)?' style="display:none" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.following"),[]))+"</a></span></li>":"");if(A.prop.shareInfo&&A.prop.shareInfo.shareable){C.append("<li>");jive.soy.share.control({objectId:A.id,objectType:A.type,type:"text"},C);C.append("</li>")}C.append((A.prop.socialGroupInfo&&!A.prop.socialGroupInfo.owner)?'<li><span><a href="#" class="sgroup-join j-follow-button" data-objectid="'+soy.$$escapeHtml(A.id)+'"'+((A.prop.socialGroupInfo.member)?' style="display:none" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.joingroup"),[]))+'</a></span><span><a href="#" class="sgroup-leave j-follow-button" data-objectid="'+soy.$$escapeHtml(A.id)+'"'+((!A.prop.socialGroupInfo.member)?' style="display:none" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.leavegroup"),[]))+"</a></span></li>":"","</ul></div>");jive.browse.container.flippable(soy.$$augmentData(A.prop,{body:C.toString()}),B);B.append("</td>");if(!D){return B.toString()}};jive.browse.container.hierarchyContainerItem=function(A,G){var C=G||new soy.StringBuilder();C.append((A.prop.beforeInfo)?'<li class="j-hierarchy-more" data-index-end="'+soy.$$escapeHtml(A.prop.beforeInfo)+'" data-parent-objectid="'+soy.$$escapeHtml(A.prop.parentInfo.id)+'" data-direction="0"><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.loadmore.previous10"),[]))+'" ><span class="j-more-label j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.loadmore"),[]))+"</span></a></li>":"",'<li class="j-hierarchy-item" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'">',(A.prop.perms.allowedToView)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link))+'" class="j-anchor-icon">':"",'<span class="',soy.$$escapeHtml(A.iconCss),' jive-icon-med"></span><strong>',soy.$$escapeHtml(A.subject),"</strong>",(A.prop.perms.allowedToView)?"</a>":"",'<div class="j-td-spaceactions">',(A.prop.childInfo&&A.prop.childInfo.hasVisibleChildren)?'<a href="#" class="j-sub-spaces j-view-children" data-activity-type="children" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" ><span class="j-show-children-msg"'+((A.prop.childInfo.children)?'style="display:none"':"")+">"+((A.prop.childInfo.numVisibleChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.viewsubspaces.singular"),[A.prop.childInfo.numVisibleChildren])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.viewsubspaces.plural"),[A.prop.childInfo.numVisibleChildren])))+'</span><span class="j-hide-children-msg"'+((!A.prop.childInfo.children)?'style="display:none"':"")+">"+((A.prop.childInfo.numVisibleChildren==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.hidesubspaces.singular"),[A.prop.childInfo.numVisibleChildren])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.hidesubspaces.plural"),[A.prop.childInfo.numVisibleChildren])))+"</span></a>":"",'</div><ul class="j-hierarchy-child-holder"',(A.prop.childInfo.children)?'data-children-loaded="true" ':' style="display:none"','><div class="j-hierarchy-child-expanded j-ui-elem"> </div>');if(A.prop.childInfo&&A.prop.childInfo.children){var F=A.prop.childInfo.children;var E=F.length;for(var D=0;D<E;D++){var B=F[D];jive.browse.container.hierarchyContainerItem(B,C)}}C.append("</ul></li>",(A.prop.afterInfo)?'<li class="j-hierarchy-more" data-index-start="'+soy.$$escapeHtml(A.prop.afterInfo)+'" data-parent-objectid="'+soy.$$escapeHtml(A.prop.parentInfo.id)+'" data-direction="1"><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.loadmore.next10"),[]))+'" ><span class="j-more-label j-rc6">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.hierarchy.loadmore"),[]))+"</span></a></li>":"");if(!G){return C.toString()}};jive.browse.container.flippable=function(A,C){var B=C||new soy.StringBuilder();B.append((A.followInfo&&A.followInfo.showFollowControls||A.shareInfo&&A.shareInfo.shareable||A.socialGroupInfo)?A.body:"");if(!C){return B.toString()}};jive.browse.container.flipperControl=function(A,C){var B=C||new soy.StringBuilder();jive.browse.container.flippable(soy.$$augmentData(A,{body:'<a href="#" class="j-card-flipper j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[]))+"</a>"}),B);if(!C){return B.toString()}};jive.browse.container.cardBack=function(A,D){var B=D||new soy.StringBuilder();var C=new soy.StringBuilder('<div class="j-thumb-back face card-back"><header><h6><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(A.iconCss),' jive-icon-med" /> ',soy.$$escapeHtml(A.subject),"</h6>",(A.prop.parentInfo)?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.parentInfo.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(A.prop.parentInfo.id)+'" data-objectType="'+soy.$$escapeHtml(A.prop.parentInfo.type)+'">'+soy.$$escapeHtml(A.prop.parentInfo.subject)+"</a></p>":"",'</header><ul class="j-social-actions">',(A.prop.socialGroupInfo&&A.prop.socialGroupInfo.showFollowLink||!A.prop.socialGroupInfo&&A.prop.followInfo&&A.prop.followInfo.showFollowControls)?'<li><span class="start-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((A.prop.followInfo.followed)?'style="display: none;"':"")+'><span><span class="jive-icon-med jive-icon-follow"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.follow"),[]))+'</span></a></span><span class="stop-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((!A.prop.followInfo.followed)?' style="display: none;" ':"")+'><span><span class="jive-icon-med jive-icon-following"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.following"),[]))+"</span></a></span></li>":"");if(A.prop.shareInfo&&A.prop.shareInfo.shareable){C.append("<li>");jive.soy.share.control({objectId:A.id,objectType:A.type,type:"largeButton",icon:true,classes:"button j-social-action"},C);C.append("<li>")}C.append((A.prop.socialGroupInfo&&!A.prop.socialGroupInfo.owner)?'<li><a class="button j-social-action sgroup-join" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((A.prop.socialGroupInfo.member)?' style="display: none;" ':"")+"><span>"+((A.prop.socialGroupInfo.requestToJoin)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.reqjoingroup"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.joingroup"),[])))+'</span></a><a class="button j-social-action sgroup-leave" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((!A.prop.socialGroupInfo.member)?' style="display: none;" ':"")+"><span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.leavegroup"),[]))+"</span></a></li>":"",'</ul><a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.back.button"),[])),"</span></a></div>");jive.browse.container.flippable(soy.$$augmentData(A.prop,{body:C.toString()}),B);if(!D){return B.toString()}};jive.browse.container.projectStatusMessage=function(A,C){var B=C||new soy.StringBuilder();B.append((A.prop.projectInfo)?'<span class="font-color-meta j-proj-status-text-details">'+((A.prop.projectInfo.archived)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.project.archived"),[])):(A.prop.projectInfo.complete)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.project.complete"),[])):(A.prop.projectInfo.overdue)?(A.prop.projectInfo.years>0)?(A.prop.projectInfo.years==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysoverdue.singular"),[A.prop.projectInfo.years])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysoverdue.plural"),[A.prop.projectInfo.years])):(A.prop.projectInfo.months>0)?(A.prop.projectInfo.months==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.monthsoverdue.singular"),[A.prop.projectInfo.months])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.monthsoverdue.plural"),[A.prop.projectInfo.months])):(A.prop.projectInfo.days==1||A.prop.projectInfo.days==0)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysoverdue.singular"),[1])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysoverdue.plural"),[A.prop.projectInfo.days])):(A.prop.projectInfo.years)?(A.prop.projectInfo.years==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysremaining.singular"),[A.prop.projectInfo.years])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysremaining.plural"),[A.prop.projectInfo.years])):(A.prop.projectInfo.months)?(A.prop.projectInfo.months==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.monthsremaining.singular"),[A.prop.projectInfo.months])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.monthsremaining.plural"),[A.prop.projectInfo.months])):(A.prop.projectInfo.days==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysremaining.singular"),[A.prop.projectInfo.days])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.daysremaining.plural"),[A.prop.projectInfo.days])))+"</span>":"");if(!C){return B.toString()}}
;
$j(function(){$j("#j-browse-item-grid").delegate(".j-discussion-thumb","click",function(){$li=$j(this).parent("li");$li.addClass("animate");$li.addClass("flipped");$li.click(function(){$j(this).removeClass("flipped");setTimeout("1000",function(){$j(this).removeClass("animate")})})})});
;
$j(function(){$j("#j-browse-item-grid").delegate("a img.binary-preview","click",function(b){var a=$j(this).parent("a").data("preview-url");showPreviewableBinary(a,"");return false})});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.content=="undefined"){jive.browse.content={}}jive.browse.content.detailContentHeader=function(A,C){var B=C||new soy.StringBuilder();B.append('<thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.content"),[])),'</strong></th><th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.author"),[])),'</strong></th><th class="center"><!-- <strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'</strong> --> <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'" class="jive-icon-sml jive-icon-meta-like"/></th><th class="center"><!-- <strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'</strong> --> <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'" class="jive-icon-sml jive-icon-meta-bookmark"/></th><th class="center"><!-- <strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'</strong> --> <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'" class="jive-icon-sml jive-icon-meta-comment"/></th><th class="center"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.viewcount"),[])),"</strong></th>",(A.columns&&A.columns.creationDate)?'<th><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.creationdate"),[]))+"</strong></th>":'<th><strong class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.latestactivity"),[]))+"</strong></th>","<th></th></tr></thead>");if(!C){return B.toString()}};jive.browse.content.detailBookmarksHeader=function(A,C){var B=C||new soy.StringBuilder();B.append('<thead class="j-rc4"><tr><th colspan="2"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.content"),[])),'</strong></th><th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.author"),[])),"</strong></th>",(A.yourBookmarks)?"":"",'<th class="center"><!-- <strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'</strong> --> <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'" class="jive-icon-sml jive-icon-meta-like"/></th><th class="center"><!-- <strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'</strong> --> <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'" class="jive-icon-sml jive-icon-meta-bookmark"/></th><th class="center"><!-- <strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'</strong> --> <img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'" class="jive-icon-sml jive-icon-meta-comment"/></th><th class="center"><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.viewcount"),[])),'</strong></th><th><strong class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkedon"),[])),"</strong></th><th></th></tr></thead>");if(!C){return B.toString()}};jive.browse.content.defaultDetailContentItem=function(A,C){var B=C||new soy.StringBuilder();B.append("\t<!-- Cannot find template for object type:",soy.$$escapeHtml(A.type),", id:",soy.$$escapeHtml(A.id)," -->");if(!C){return B.toString()}};jive.browse.content.detailContentItem=function(A,D){var B=D||new soy.StringBuilder();B.append('<tr class="js-browse-item" data-object-id=',soy.$$escapeHtml(A.id),' data-object-type="',soy.$$escapeHtml(A.type),'"><td class="j-td-icon"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(A.iconCss),' jive-icon-med" /></td><td class="j-td-title"><div><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'">',(A.prop.hasUnreadReplies)?"<strong>":"",A.subject,(A.prop.hasUnreadReplies)?"</strong>":"",(A.prop.privacyInfo&&A.prop.privacyInfo["private"])?'<span src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/transparent.png"))+'" class="jive-icon-sml jive-icon-content-private'+((A.prop.privacyInfo.shared)?"-shared":"")+'" title="'+((A.prop.privacyInfo.shared)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.restricted.tooltip"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.private.tooltip"),[])))+'" ></span>':"","</a>");if(A.columns&&A.columns.parentInfo&&A.prop.place){B.append('<p class="j-browse-content-location font-color-meta-light">');if(A.prop.place.type==2020||A.prop.place.type==37&&A.prop.author){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.by"),[]))," ");jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.prop.author,{extraCss:"font-color-meta-light"}),B)}else{B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[])),' <a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.place.link)),'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="',soy.$$escapeHtml(A.prop.place.id),'" data-objectType="',soy.$$escapeHtml(A.prop.place.type),'">',soy.$$escapeHtml(A.prop.place.subject),"</a>")}B.append("</p>")}B.append('</div></td><td class="j-td-author">');if(A.prop.author){B.append((!A.prop.isOriginalAuthor)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.lastmodifiedby"),[]))+" ":"");jive.shared.displayutil.userDisplayNameLink(A.prop.author,B)}B.append('</td><td class="j-td-likes center"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'"><span class="jive-icon-sml jive-icon-meta-like"></span>');jive.eae.acclaim.count({command:"showLikes",count:soy.$$escapeHtml(A.prop.activityInfo?A.prop.activityInfo.likeCount:0),objectId:A.id,objectType:A.type,classes:"j-meta-number"},B);B.append('</span></td><td class="j-td-bookmarks center"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'"><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');jive.eae.acclaim.count({command:"showBookmarks",count:soy.$$escapeHtml(A.prop.activityInfo?A.prop.activityInfo.bookmarkCount:0),objectId:A.id,objectType:A.type,classes:"j-meta-number"},B);B.append('</span></td><td class="j-td-replies center font-color-meta"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="jive-icon-sml jive-icon-meta-comment"/>',(A.prop.activityInfo)?soy.$$escapeHtml(A.prop.activityInfo.replyCount):"0",'</span></td><td class="j-td-views font-color-meta"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.viewcount"),[])),'">',(A.prop.viewCount&&A.prop.viewCount>-1)?soy.$$escapeHtml(A.prop.viewCount):"&nbsp;","</span></td>");if(A.columns&&A.columns.creationDate){B.append('<td class="j-td-date font-color-meta">',soy.$$escapeHtml((A.creationDate?dateFormat(parseFloat(A.creationDate),"mmmm d, yyyy h:MM TT"):"")),"</td>")}else{if(A.prop.lastActivityDate){B.append('<td class="j-td-date font-color-meta">',soy.$$escapeHtml((A.prop.lastActivityDate?dateFormat(parseFloat(A.prop.lastActivityDate),"mmmm d, yyyy h:MM TT"):"")),' <span class="font-color-meta-light" style="display: none">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.by"),[]))," ");jive.shared.displayutil.userDisplayNameLink(A.prop.author,B);B.append("</span></td>")}else{B.append("<td></td>")}}B.append('<td class="j-td-actions">');var C=new soy.StringBuilder();jive.browse.content.detailActionPanel(A,C);jive.browse.content.flippable(soy.$$augmentData(A.prop,{body:C.toString()}),B);B.append("</td></tr>");if(!D){return B.toString()}};jive.browse.content.detailBookmarkedItem=function(A,C){var B=C||new soy.StringBuilder();B.append("<tr data-object-id=",soy.$$escapeHtml(A.markedObjectId),' data-object-type="',soy.$$escapeHtml(A.markedObjectType),'"><td class="j-td-icon"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="',soy.$$escapeHtml(A.iconCss),' jive-icon-med" /></td><td class="j-td-title"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'">',A.subject,(A.prop.privacyInfo&&A.prop.privacyInfo["private"])?'<span src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/transparent.png"))+'" class="jive-icon-sml jive-icon-content-private'+((A.prop.privacyInfo.shared)?"-shared":"")+'" title="'+((A.prop.privacyInfo.shared)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.restricted.tooltip"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.private.tooltip"),[])))+'" ></span>':"","</a><div>",(A.prop.place)?'<p class="j-browse-content-location font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[]))+' <a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.place.link))+'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="'+soy.$$escapeHtml(A.prop.place.id)+'" data-objectType="'+soy.$$escapeHtml(A.prop.place.type)+'">'+soy.$$escapeHtml(A.prop.place.subject)+"</a></p>":"",(A.externalURL)?'<p class="j-browse-content-location font-color-meta-light"><a href="'+soy.$$escapeHtml(A.externalURL)+'" class="font-color-meta-light" title="'+soy.$$escapeHtml(A.externalURL)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.visit.site.label"),[]))+"</a></p>":"",'</div></td><td class="j-td-author">');jive.shared.displayutil.userDisplayNameLink(A.prop.author,B);B.append('</td><td class="j-td-likes center"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.likecount"),[])),'"><span class="jive-icon-sml jive-icon-meta-like"></span>');jive.eae.acclaim.count({command:"showLikes",count:soy.$$escapeHtml(A.prop.activityInfo?A.prop.activityInfo.likeCount:0),objectId:A.markedObjectId,objectType:A.markedObjectType,classes:"j-meta-number"},B);B.append('</span></td><td class="j-td-bookmarks center"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.bookmarkcount"),[])),'"><span class="jive-icon-sml jive-icon-meta-bookmark"></span>');jive.eae.acclaim.count({command:"showBookmarks",count:soy.$$escapeHtml(A.prop.activityInfo?A.prop.activityInfo.bookmarkCount:0),objectId:A.markedObjectId,objectType:A.markedObjectType,classes:"j-meta-number"},B);B.append('</span></td><td class="j-td-replies center font-color-meta"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.replycount"),[])),'"><img src="',soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/images/transparent.png")),'" alt="" class="jive-icon-sml jive-glyph-comment"/>',(A.prop.activityInfo)?soy.$$escapeHtml(A.prop.activityInfo.replyCount):"0",'</span></td><td class="j-td-views center font-color-meta"><span title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.viewcount"),[])),'">',(A.prop.viewCount>-1)?soy.$$escapeHtml(A.prop.viewCount):"&nbsp;","</span></td>",(A.prop.lastActivityDate)?'<td class="j-td-date font-color-meta">'+soy.$$escapeHtml((A.prop.lastActivityDate?dateFormat(parseFloat(A.prop.lastActivityDate),"mmmm d, yyyy h:MM TT"):""))+"</td>":'<td class="j-td-date font-color-meta">&nbsp;</td>','<td class="j-td-actions">');jive.browse.content.detailActionPanel({id:A.markedObjectId,type:A.markedObjectType,prop:A.prop},B);B.append("</td></tr>");if(!C){return B.toString()}};jive.browse.content.defaultThumbnailContentItem=function(A,C){var B=C||new soy.StringBuilder();B.append("\t<!-- Cannot find template for object type:",soy.$$escapeHtml(A.type),", id:",soy.$$escapeHtml(A.id)," -->");if(!C){return B.toString()}};jive.browse.content.thumbnailContentItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="card"><div class="j-content-thumb j-doc-thumb j-thumb js-browse-item face card-front ');jive.browse.content.flippable(soy.$$augmentData(A.prop,{body:"flippable"}),B);B.append('" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><header class="js-thumb-header"><h4><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" title="',A.subject,'"><span class="jive-icon-big ',soy.$$escapeHtml(A.iconCss),'"></span><span class="js-header-text j-header-text">',A.subject,"</span></a></h4></header><section><article>",(A.prop.binaryPreview)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link))+'" data-preview-url="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.binaryPreview.previewUrl))+'"><img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.binaryPreview.thumbnailUrl))+'" class="binary-preview" alt="'+A.prop.bodysnippet+'" title="'+A.prop.bodysnippet+'"/></a>':(A.prop.bodysnippet)?A.prop.bodysnippet:"","</article>");if(A.prop.author){B.append('<div class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(A.prop.author,{size:24}),B);B.append('</span><div class="j-author-info font-color-meta">');jive.browse.content.thumbnailDateBlock(A,B);B.append("</div></div>")}B.append('</section><footer><div class="j-thumb-footer">');jive.browse.content.activityInfoBlock(soy.$$augmentData(A.prop,{objectId:A.id,objectType:A.type}),B);B.append('<span class="j-thumb-title-meta">',(A.prop.privacyInfo&&A.prop.privacyInfo["private"])?'<span src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/transparent.png"))+'" class="jive-icon-sml jive-icon-content-private'+((A.prop.privacyInfo.shared)?"-shared":"")+'" title="'+((A.prop.privacyInfo.shared)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.restricted.tooltip"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.private.tooltip"),[])))+'" ></span>':"",(A.prop.attachmentInfo&&A.prop.attachmentInfo.hasAttachments)?'<span class="jive-icon-sml jive-icon-content-attachment"></span>':"","</span></div></footer>");jive.browse.content.flipperControl(A.prop,B);B.append('</div><div class="j-thumb-back face card-back j-thumb-back-small"><header><h6><span class="jive-icon-med ',soy.$$escapeHtml(A.iconCss),'"></span>',A.subject,"</h6>");if(A.prop.place){B.append('<p class="j-browse-content-location font-color-meta-light">');if(A.prop.place.type==2020||A.prop.place.type==37){B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.by"),[]))," ");jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.prop.author,{extraCss:"font-color-meta-light"}),B)}else{B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[])),' <a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.prop.place.link)),'" class="font-color-meta-light jivecontainerTT-hover-container" data-objectId="',soy.$$escapeHtml(A.prop.place.id),'" data-objectType="',soy.$$escapeHtml(A.prop.place.type),'">',soy.$$escapeHtml(A.prop.place.subject),"</a>")}B.append("</p>")}B.append("</header>");jive.browse.content.thumbnailActionPanel(A,B);B.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.back.button"),[])),"</span></a></div></div>");if(!C){return B.toString()}};jive.browse.content.thumbnailBookmarkItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="card"><div class="j-content-thumb j-bookmark-thumb j-thumb js-browse-item face card-front ');jive.browse.content.flippable(soy.$$augmentData(A.prop,{body:"flippable"}),B);B.append('" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><header class="js-thumb-header"><h4><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" title="',A.subject,'"><span class="jive-icon-big jive-icon-external-site"></span><span class="js-header-text j-header-text">',A.subject,'</span></a><span class="j-thumb-title-meta">',(A.prop.privacyInfo&&A.prop.privacyInfo["private"])?'<span src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/transparent.png"))+'" class="jive-icon-sml jive-icon-content-private'+((A.prop.privacyInfo.shared)?"-shared":"")+'" title="'+((A.prop.privacyInfo.shared)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.restricted.tooltip"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.private.tooltip"),[])))+'" ></span>':"","</span></h4></header><section><article>",(A.prop.bodysnippet)?A.prop.bodysnippet+'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link))+'" class="j-more">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.viewmore"),[]))+"</a>":"","</article>");jive.browse.content.activityInfoBlock(soy.$$augmentData(A.prop,{link:A.link,objectId:A.id,objectType:A.type}),B);B.append('<div class="j-author-block"><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(A.prop.author,{size:24}),B);B.append('</span><div class="j-author-info font-color-meta">');jive.browse.content.thumbnailDateBlock(A,B);B.append("</div></div></section>");jive.browse.content.flipperControl(A.prop,B);B.append('</div><div class="j-thumb-back face card-back"><header><h6>',A.subject,"</h6></header>");jive.browse.content.thumbnailActionPanel(A,B);B.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.back.button"),[])),"</span></a></div></div>");if(!C){return B.toString()}};jive.browse.content.thumbnailDocumentItem=function(A,C){var B=C||new soy.StringBuilder();jive.browse.content.thumbnailContentItem(A,B);if(!C){return B.toString()}};jive.browse.content.thumbnailDiscussionItem=function(A,C){var B=C||new soy.StringBuilder();jive.browse.content.thumbnailContentItem(A,B);if(!C){return B.toString()}};jive.browse.content.thumbnailBlogPostItem=function(A,C){var B=C||new soy.StringBuilder();jive.browse.content.thumbnailContentItem(A,B);if(!C){return B.toString()}};jive.browse.content.thumbnailStatusItem=function(A,C){var B=C||new soy.StringBuilder();jive.browse.content.thumbnailContentItem(A,B);if(!C){return B.toString()}};jive.browse.content.thumbnailPollItem=function(A,C){var B=C||new soy.StringBuilder();jive.browse.content.thumbnailContentItem(A,B);if(!C){return B.toString()}};jive.browse.content.thumbnailBookmarkedItem=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="card j-small-card"><div class="j-content-thumb j-bookmarked-thumb ',(A.yourBookmarks)?"j-your-bookmark-thumb":""," j-thumb js-browse-item face card-front ");jive.browse.content.flippable(soy.$$augmentData(A.prop,{body:"flippable"}),D);D.append('" data-object-type="',soy.$$escapeHtml(A.type),'" data-object-id="',soy.$$escapeHtml(A.id),'"><header class="js-thumb-header"><h4><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.link)),'" title="',A.subject,'"><span class="jive-icon-big ',soy.$$escapeHtml(A.iconCss),'"></span><span class="js-header-text j-header-text">',A.subject,"</span></a></h4></header><section>",(A.externalURL)?'<p class="j-bookmarked-link"><span class="jive-icon-sml jive-icon-link2"></span><a href="'+soy.$$escapeHtml(A.externalURL)+'" title="'+soy.$$escapeHtml(A.externalURL)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmark.view.visit.site.label"),[]))+"</a></p>":"",(A.yourBookmarks)?'<p><span class="jive-icon-sml jive-glyph-notes"></span>'+((A.prop.bodysnippet)?A.prop.bodysnippet:'<em class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.bookmarks.nonotes"),[]))+"</em>")+"</p>":"<article>"+((A.prop.bodysnippet)?A.prop.bodysnippet:"")+"</article>");if(A.prop.bookmarkTags&&A.prop.bookmarkTags.tags&&A.prop.bookmarkTags.tags.length>0){D.append('<p><span class="jive-icon-sml jive-icon-tag"></span>');var F=A.prop.bookmarkTags.tags;var E=F.length;for(var C=0;C<E;C++){var B=F[C];D.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/tags#/?tags="+B.tag)),'">',(B.abbreviatedTag)?soy.$$escapeHtml(B.abbreviatedTag):soy.$$escapeHtml(B.tag),"</a>",(!(C==E-1))?", ":"")}D.append((A.prop.bookmarkTags.tagsRemaining>0)?(A.yourBookmarks&&A.canEdit)?' (<a href="#" class="edit-bookmark" data-objecttype="'+soy.$$escapeHtml(A.markedObjectType)+'" data-objectid="'+soy.$$escapeHtml(A.markedObjectId)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.bookmarks.more.tags"),[A.prop.bookmarkTags.tagsRemaining]))+"</a>)":"":"","</p>")}D.append((A.yourBookmarks&&A.canEdit)?'<p><span class="jive-icon-sml jive-glyph-edit"></span><a href="#" class="edit-bookmark" data-objecttype="'+soy.$$escapeHtml(A.markedObjectType)+'" data-objectid="'+soy.$$escapeHtml(A.markedObjectId)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.bookmarks.edit"),[]))+"</a></p>":"","</section><footer>");if(!A.popularBookmarks&&!A.yourBookmarks){D.append('<div class="j-sort-meta font-color-meta j-author-block" ><span class="j-avatar-container">');jive.shared.displayutil.avatar(soy.$$augmentData(A.prop.author,{size:24}),D);D.append('</span><div class="j-author-info font-color-meta">',jive.i18n.i18nText(jive.i18n.getMsg("browse.bookmarks.time"),["<strong>"+A.creationTime+"</strong>"])," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.by"),[])),' <span class="j-line2">');jive.shared.displayutil.userDisplayNameLink(A.prop.author,D);D.append("</span></div></div>")}if(A.popularBookmarks){jive.browse.content.popularBookmarkText({popularRangeKey:A.popularRangeKey,popularCount:A.popularCount},D)}D.append((A.yourBookmarks)?"":"",'<div class="j-thumb-footer" data-object-id="',soy.$$escapeHtml(A.markedObjectId),'" data-object-type="',soy.$$escapeHtml(A.markedObjectType),'">');jive.browse.content.activityInfoBlock(soy.$$augmentData(A.prop,{objectId:A.markedObjectId,objectType:A.markedObjectType}),D);D.append('<span class="j-thumb-title-meta">',(A.prop.privacyInfo&&A.prop.privacyInfo["private"])?'<span src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/transparent.png"))+'" class="jive-icon-sml jive-icon-content-private'+((A.prop.privacyInfo.shared)?"-shared":"")+'" title="'+((A.prop.privacyInfo.shared)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.restricted.tooltip"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("doc.visibility.private.tooltip"),[])))+'" ></span>':"",(A.prop.attachmentInfo&&A.prop.attachmentInfo.hasAttachments)?'<span class="jive-icon-sml jive-icon-content-attachment"></span>':"","</span></div></footer>");jive.browse.content.flipperControl(A.prop,D);D.append('</div><div class="j-thumb-back face card-back j-thumb-back-small"><header><h6><span class="jive-icon-med ',soy.$$escapeHtml(A.iconCss),'"></span>',A.subject,"</h6></header>");jive.browse.content.thumbnailActionPanel({id:A.markedObjectId,type:A.markedObjectType,prop:A.prop},D);D.append('<a href="#" class="j-back-btn j-ui-elem"><span class="j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.back.button"),[])),"</span></a></div></div>");if(!G){return D.toString()}};jive.browse.content.thumbnailDateBlock=function(A,C){var B=C||new soy.StringBuilder();if(A.unmodified||A.columns&&A.columns.showCreator){jive.shared.soy.i18nHelper({i18nKey:"browse.created_by",arg0:"<span>",arg1:"</span>",arg2:'<span class="j-line2"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.prop.author.username)))+'">'+soy.$$escapeHtml(A.prop.author.displayName)+"</a></span>",noAutoEscape:true},B)}else{jive.shared.soy.i18nHelper({i18nKey:"browse.updated_by",arg0:"<span>",arg1:"</span>",arg2:'<span class="j-line2"><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.prop.author.username)))+'">'+soy.$$escapeHtml(A.prop.author.displayName)+"</a></span>",noAutoEscape:true},B)}if(!C){return B.toString()}};jive.browse.content.activityInfoBlock=function(A,C){var B=C||new soy.StringBuilder();B.append('<ul class="j-stats"><li><span class="jive-icon-med jive-icon-meta-like"></span><a href="#" class="j-meta-number" data-command="showLikes" data-object-id="',soy.$$escapeHtml(A.objectId),'" data-object-type="',soy.$$escapeHtml(A.objectType),'">',(A.activityInfo)?soy.$$escapeHtml(A.activityInfo.likeCount):"0",'</a></li><li><span class="jive-icon-med jive-icon-meta-bookmark"></span><a href="#" class="j-meta-number" data-command="showBookmarks" data-object-id="',soy.$$escapeHtml(A.objectId),'" data-object-type="',soy.$$escapeHtml(A.objectType),'">',(A.activityInfo)?soy.$$escapeHtml(A.activityInfo.bookmarkCount):"0",'</a></li><li><span class="jive-icon-med jive-icon-meta-comment"></span>',(A.activityInfo)?soy.$$escapeHtml(A.activityInfo.replyCount):"0","</li></ul>");if(!C){return B.toString()}};jive.browse.content.flippable=function(A,C){var B=C||new soy.StringBuilder();B.append((A.followInfo&&A.followInfo.showFollowControls||A.shareInfo&&A.shareInfo.shareable||A.bookmarkInfo&&A.bookmarkInfo.showBookmarkControls)?A.body:"");if(!C){return B.toString()}};jive.browse.content.flipperControl=function(A,C){var B=C||new soy.StringBuilder();jive.browse.content.flippable(soy.$$augmentData(A,{body:'<a href="#" class="j-card-flipper j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[]))+"</a>"}),B);if(!C){return B.toString()}};jive.browse.content.thumbnailActionPanel=function(A,C){var B=C||new soy.StringBuilder();B.append('<ul class="j-social-actions">',(A.prop.followInfo&&A.prop.followInfo.showFollowControls)?'<li><span class="start-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((A.prop.followInfo.followed)?'style="display: none;"':"")+'><span><span class="jive-icon-med jive-icon-follow"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.follow"),[]))+'</span></a></span><span class="stop-follow"><a class="button j-follow-button j-social-action" href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((!A.prop.followInfo.followed)?' style="display: none;" ':"")+'><span><span class="jive-icon-med jive-icon-following"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.following"),[]))+"</span></a></span></li>":"");if(A.prop.shareInfo&&A.prop.shareInfo.shareable){B.append("<li>");jive.soy.share.control({objectId:A.id,objectType:A.type,type:"text",icon:true,classes:"j-social-action"},B);B.append("</li>")}B.append((A.prop.bookmarkInfo&&A.prop.bookmarkInfo.showBookmarkControls)?'<li class="js-bookmark"><a class="bookmark-content j-social-action" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" href="#" '+((A.prop.bookmarkInfo.bookmarked)?'style="display: none;"':"")+'><span><span class="jive-icon-med jive-icon-bookmark-ribbonaction-grey"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.bookmark"),[]))+'</span></a><a class="bookmarked-content j-social-action" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" href="#" '+((!A.prop.bookmarkInfo.bookmarked)?'style="display: none;"':"")+'><span><span class="jive-icon-med jive-icon-bookmark-ribbonaction"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.unbookmark"),[]))+'</span></a><div class="js-bookmark-actions j-action-popover" style="display: none;"><a href="#" class="edit-bookmark" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.edit"),[]))+'</a><a href="#" class="unbookmark-content" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" data-bookmarkid="'+soy.$$escapeHtml(A.prop.bookmarkInfo.bookmarkID)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[]))+"</a></div></li>":"","</ul>");if(!C){return B.toString()}};jive.browse.content.detailActionPanel=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="j-social-button j-browse-action-button j-ui-elem" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[])),'"><span class="j-ui-elem"><span class="jive-icon-med jive-icon-gear"></span><span class="j-browse-actions-button-text">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.btn"),[])),'</span></span></a><div class="j-action-popover j-js-browse-actions-container" style="display: none"><ul class="j-simple-list">',(A.prop.followInfo&&A.prop.followInfo.showFollowControls)?'<li><span class="start-follow"><a class="button j-follow-button" href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((A.prop.followInfo.followed)?'style="display: none;"':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.follow"),[]))+'</a></span><span class="stop-follow"><a class="button j-follow-button" href="#" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((!A.prop.followInfo.followed)?' style="display: none;" ':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.following"),[]))+"</a></span></li>":"");if(A.prop.shareInfo&&A.prop.shareInfo.shareable){B.append("<li>");jive.soy.share.control({objectId:A.id,objectType:A.type,type:"text"},B);B.append("</li>")}B.append((A.prop.bookmarkInfo&&A.prop.bookmarkInfo.showBookmarkControls)?'<li class="js-bookmark"><a class="bookmark-content" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" href="#" '+((A.prop.bookmarkInfo.bookmarked)?'style="display: none;"':"")+"><span>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.bookmark"),[]))+'</span></a><a href="#" class="edit-bookmark bookmarked-content" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" '+((!A.prop.bookmarkInfo.bookmarked)?'style="display: none;"':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.editbookmark"),[]))+'</a><a href="#" class="unbookmark-content bookmarked-content" data-objecttype="'+soy.$$escapeHtml(A.type)+'" data-objectid="'+soy.$$escapeHtml(A.id)+'" data-bookmarkid="'+soy.$$escapeHtml(A.prop.bookmarkInfo.bookmarkID)+'" '+((!A.prop.bookmarkInfo.bookmarked)?'style="display: none;"':"")+">"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.action.removebookmark"),[]))+"</a></li>":"","</ul></div>");if(!C){return B.toString()}};jive.browse.content.popularBookmarkText=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-sort-meta font-color-meta js-bookmark-popular-text">',jive.i18n.i18nText(jive.i18n.getMsg(A.popularRangeKey),[A.popularCount]),"</div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.actionlink=="undefined"){jive.browse.actionlink={}}jive.browse.actionlink.actionLinkGroup=function(A,G){var B=G||new soy.StringBuilder();if(A.actionLinks){B.append('<div class="j-box j-box-actions j-rc5"><header><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.actions"),[])),'</h4></header><div class="j-box-body j-rc4"><ul class="j-icon-list j-actions-list">');var D=A.actionLinks;var F=D.length;for(var E=0;E<F;E++){var C=D[E];if(C.visible){B.append("<li>");jive.shared.soy.actionLink(C,B);B.append("</li>")}}B.append("</ul></div></div>")}if(!G){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.filter=="undefined"){jive.browse.filter={}}jive.browse.filter.filterGroup=function(A,G){var B=G||new soy.StringBuilder();if(A.filters){B.append('<nav class="j-second-nav"><ul>');var F=A.filters;var C=F.length;for(var E=0;E<C;E++){var D=F[E];jive.browse.filter.filterGroupItem(soy.$$augmentData(D,{descriptionIsKey:true,appliedFilterIDs:A.appliedFilterIDs,selected:A.appliedFilterIDs.indexOf(D.id)>-1,urlPath:A.urlPath}),B)}B.append("</ul></nav>")}if(!G){return B.toString()}};jive.browse.filter.filterGroupItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-browse-filter-group-item js-browse-filter-group-item',(A.selected&&!A.nested)?" active_item":(A.selected&&A.nested)?" active_nested_item j-rc3":"",'" data-filter-id="',soy.$$escapeHtml(A.id),'"><a class="js-select-link" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.urlPath)+"?"+jive.soy.func.buildParameterString((function(){var F={};var E=[["filterID",A.id]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())),'">',(A.selected&&!A.nested)?"<strong>":"",(A.iconClass)?'<span class="'+soy.$$escapeHtml(A.iconClass)+'"></span>':"",(A.descriptionIsKey)?'<span class="nav-label">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[A.descriptionArgs]))+"</span>":'<span class="nav-label">'+soy.$$escapeHtml(A.description)+"</span>",(A.selected&&!A.nested)?"</strong>":"","</a>");if(A.parentOfNested){jive.shared.soy.render({templateName:A.template,data:(function(){var F={};var E=[["childIDPattern",A.childIDPattern],["filters",A.children],["appliedFilterIDs",A.appliedFilterIDs],["hidden",!A.selected]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})(),failGracefully:false},B)}B.append("</li>");if(!C){return B.toString()}};jive.browse.filter.activeFilterGroupItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="active j-ui-elem"><a class="js-pin-link j-browse-filter-pin" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.pinlabel"),[])),'" style="display:none"><span class="jive-icon-sml jive-glyph-pin"></span> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.pinlabel"),[])),'</a><span class="active-bg j-ui-elem"></span></li>');if(!C){return B.toString()}};jive.browse.filter.pinConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.setdefault"),[A.filterName])));if(!C){return B.toString()}};jive.browse.filter.sortOption=function(A,C){var B=C||new soy.StringBuilder();B.append('<option value="',soy.$$escapeHtml(A.key),'" data-sort-order="',soy.$$escapeHtml(A.order),'"',(A.selected)?' selected="selected"':"",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.label),[])),"</option>");if(!C){return B.toString()}};jive.browse.filter.filters=function(B,G){var E=G||new soy.StringBuilder();if(B.childFilters){if(B.childFilters.length>B.childIndex){if(B.childFilters[B.childIndex].nested||((B.childFilters[B.childIndex].id).match(new RegExp("~choose|~showall",""))||[]).length>0){jive.browse.filter.filters(soy.$$augmentData(B,{childIndex:B.childIndex+1,appliedIndex:B.childFilters.length>B.childIndex+1?B.appliedFilterIDs.indexOf(B.childFilters[B.childIndex+1].id):-1}),E)}else{if(((B.childFilters[B.childIndex].id).match(new RegExp("~objecttype",""))||[]).length>0){jive.browse.filter.filters(soy.$$augmentData(B,{objectTypeFilters:B.childFilters[B.childIndex].children,childIndex:B.childIndex+1,appliedIndex:B.childFilters.length>B.childIndex+1?B.appliedFilterIDs.indexOf(B.childFilters[B.childIndex+1].id):-1}),E)}else{if(B.appliedIndex>-1){jive.browse.filter.filters(soy.$$augmentData(B,{appliedFilters:(B.appliedFilters).slice(0,B.appliedIndex).concat(B.childFilters[B.childIndex]).concat((B.appliedFilters).slice(B.appliedIndex+1)),childIndex:B.childIndex+1,appliedIndex:B.childFilters.length>B.childIndex+1?B.appliedFilterIDs.indexOf(B.childFilters[B.childIndex+1].id):-1}),E)}else{jive.browse.filter.filters(soy.$$augmentData(B,{unappliedFilters:B.unappliedFilters.concat(B.childFilters[B.childIndex]),childIndex:B.childIndex+1,appliedIndex:B.childFilters.length>B.childIndex+1?B.appliedFilterIDs.indexOf(B.childFilters[B.childIndex+1].id):-1}),E)}}}}else{jive.browse.filter.compactAppliedFilters(soy.$$augmentData(B,{appliedIndex:0}),E)}}else{if(B.filters&&B.filters.length>0){var D=B.filters;var A=D.length;for(var C=0;C<A;C++){var F=D[C];if(B.appliedFilterIDs.indexOf(F.id)>-1&&!F.nested){if(F.children&&F.children.length>0){jive.browse.filter.filters(soy.$$augmentData(B,{appliedFilters:B.appliedFilterIDs,unappliedFilters:[],parentFilter:F,childFilters:F.children,childIndex:0,appliedIndex:B.appliedFilterIDs.indexOf(F.children[0].id)}),E)}else{jive.browse.filter.filtersDispatch(soy.$$augmentData(B,{filters:[],appliedFilters:[],unappliedFilters:[]}),E)}}}}else{jive.browse.filter.filtersDispatch(soy.$$augmentData(B,{filters:[],appliedFilters:[],unappliedFilters:[]}),E)}}if(!G){return E.toString()}};jive.browse.filter.compactAppliedFilters=function(A,C){var B=C||new soy.StringBuilder();if(A.appliedFilters.length>A.appliedIndex){if(typeof (A.appliedFilters[A.appliedIndex])!="object"){jive.browse.filter.compactAppliedFilters(soy.$$augmentData(A,{appliedFilters:(A.appliedFilters).slice(0,A.appliedIndex).concat((A.appliedFilters).slice(A.appliedIndex+1))}),B)}else{jive.browse.filter.compactAppliedFilters(soy.$$augmentData(A,{appliedIndex:A.appliedIndex+1}),B)}}else{jive.browse.filter.compactUnappliedFilters(soy.$$augmentData(A,{unappliedIndex:0,unappliedFilterIDs:[]}),B)}if(!C){return B.toString()}};jive.browse.filter.compactUnappliedFilters=function(A,C){var B=C||new soy.StringBuilder();if(A.unappliedFilters.length>A.unappliedIndex){if(A.appliedFilters.length>0&&A.unappliedFilters[A.unappliedIndex].exclusive){jive.browse.filter.compactUnappliedFilters(soy.$$augmentData(A,{unappliedFilters:(A.unappliedFilters).slice(0,A.unappliedIndex).concat((A.unappliedFilters).slice(A.unappliedIndex+1))}),B)}else{jive.browse.filter.compactUnappliedFilters(soy.$$augmentData(A,{unappliedFilterIDs:A.unappliedFilterIDs.concat(A.unappliedFilters[A.unappliedIndex].id),unappliedIndex:A.unappliedIndex+1}),B)}}else{jive.browse.filter.buildAppliedObjectTypeFilters(soy.$$augmentData(A,{objectTypeIndex:0,appliedObjectTypeFilters:[]}),B)}if(!C){return B.toString()}};jive.browse.filter.buildAppliedObjectTypeFilters=function(A,C){var B=C||new soy.StringBuilder();if(A.objectTypeFilters&&A.objectTypeFilters.length>A.objectTypeIndex){if(A.appliedFilterIDs.indexOf(A.objectTypeFilters[A.objectTypeIndex].id)>-1){jive.browse.filter.buildAppliedObjectTypeFilters(soy.$$augmentData(A,{appliedObjectTypeFilters:A.appliedObjectTypeFilters.concat(A.objectTypeFilters[A.objectTypeIndex]),objectTypeIndex:A.objectTypeIndex+1}),B)}else{jive.browse.filter.buildAppliedObjectTypeFilters(soy.$$augmentData(A,{objectTypeIndex:A.objectTypeIndex+1}),B)}}else{jive.browse.filter.filtersDispatch(A,B)}if(!C){return B.toString()}};jive.browse.filter.filtersDispatch=function(A,C){var B=C||new soy.StringBuilder();if(A.objectTypeFilters&&A.objectTypeFilters.length>0){jive.browse.filter.filtersWithContentTypes(A,B)}else{jive.browse.filter.genericFilters(A,B)}if(!C){return B.toString()}};jive.browse.filter.genericFilters=function(A,C){var B=C||new soy.StringBuilder();B.append('<form id="js-browse-controls" ',(A.hideFilterGroup)?'style="display:none"':"",' class="j-form j-browse-controls j-generic-controls"><div id="j-browse-filters" class="j-browse-filters j-rc5"><div class="j-browse-sorts j-browse-filter-row j-rc5 j-rc-none-bottom">');jive.browse.filter.sortControls({sorts:A.sorts,showSorts:A.showSorts,appliedSortKey:A.appliedSortKey},B);jive.browse.filter.searchBox({query:A.query,showSearchBox:A.showSearchBox,placeholder:!A.itemsView},B);jive.browse.filter.itemViewToggle(soy.$$augmentData(A.itemsView,{urlParams:A.urlParams,urlPath:A.urlPath}),B);B.append("</div>");jive.browse.filter.filterStack(soy.$$augmentData(A,{showAddRow:true}),B);B.append("</div>",(A.appliedFilters.length>0&&A.unappliedFilters.length>0)?'<a href="#" class="j-add-filter-link js-browse-filter j-filter-btn j-ui-elem" data-filter-id="'+soy.$$escapeHtml(A.unappliedFilters[0].id)+'"><span class="j-filter-btn-inner j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.maxsymbol"),[]))+" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.add_filter"),[]))+"</span></a>":"","</form>");if(!C){return B.toString()}};jive.browse.filter.filtersWithContentTypes=function(G,F){var C=F||new soy.StringBuilder();C.append('<form id="js-browse-controls" ',(G.hideFilterGroup)?'style="display:none"':"",'><div id="j-browse-filters" class="j-browse-filters  j-rc5"><div class="j-browse-filter-row j-rc5 j-rc-none-bottom j-type-row"><ul class="j-content-types js-browse-filter-toggle-set">');var H=G.objectTypeFilters;var I=H.length;for(var K=0;K<I;K++){var J=H[K];jive.browse.filter.objectTypeFilter(soy.$$augmentData(J,{active:G.appliedFilterIDs.indexOf(J.id)>-1||K==0&&G.appliedObjectTypeFilters.length<1,urlParams:G.urlParams,urlPath:G.urlPath}),C)}C.append("</ul>");jive.browse.filter.itemViewToggle(soy.$$augmentData(G.itemsView,{urlParams:G.urlParams,urlPath:G.urlPath}),C);C.append("</div>");var A=G.objectTypeFilters;var B=A.length;for(var E=0;E<B;E++){var D=A[E];if(G.appliedFilterIDs.indexOf(D.id)>-1&&D.type=="composite"&&D.children&&D.children.length){C.append('<div class="j-browse-filter-row j-content-filter">');jive.browse.filter.filter(soy.$$augmentData(D,{appliedFilterIDs:G.appliedFilterIDs}),C);C.append("</div>")}}C.append('<div class="j-browse-sorts j-browse-filter-row last-child">');jive.browse.filter.searchBox({query:G.query,showSearchBox:G.showSearchBox,placeholder:!G.itemsView},C);C.append((G.unappliedFilters.length>0)?'<a href="#" class="j-add-filter-link js-browse-filter j-filter-btn j-ui-elem" data-filter-id="'+soy.$$escapeHtml(G.unappliedFilters[0].id)+'"><span class="j-filter-btn-inner j-ui-elem">'+((G.unappliedFilters.length==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(G.unappliedFilters[0].description),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.maxsymbol"),[]))+" "+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.add_filter"),[])))+"</span></a>":"");jive.browse.filter.sortControls({sorts:G.sorts,showSorts:G.showSorts,appliedSortKey:G.appliedSortKey},C);if(G.appliedFilters.length<1){jive.browse.filter.paginationLinks(soy.$$augmentData(G.itemsView,{urlParams:G.urlParams,urlPath:G.urlPath}),C)}C.append("</div>");if(G.appliedFilters.length>0){jive.browse.filter.filterStack(soy.$$augmentData(G,{showAddRow:false}),C)}C.append("</div></form>");if(!F){return C.toString()}};jive.browse.filter.sortControls=function(A,G){var C=G||new soy.StringBuilder();C.append("<span>");if(A.sorts&&A.sorts.length>0&&(A.showSorts||typeof (A.showSorts)=="undefined")){C.append('<select id="j-sort">');var F=A.sorts;var D=F.length;for(var E=0;E<D;E++){var B=F[E];jive.browse.filter.sortOption(soy.$$augmentData(B,{selected:A.appliedSortKey==B.key}),C)}C.append("</select>")}C.append("</span>");if(!G){return C.toString()}};jive.browse.filter.searchBox=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.placeholder)?'<span class="j-browse-search" '+((!A.showSearchBox)?'style="display:none"':"")+'><input type="search" name="query" '+((A.query)?'value="'+soy.$$escapeHtml(A.query)+'"':"")+' placeholder="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.typeahead_placeholder"),[]))+'" /></span>':'<span class="js-placeholder" data-selector=".j-browse-search"></span>');if(!C){return B.toString()}};jive.browse.filter.itemViewToggle=function(A,C){var B=C||new soy.StringBuilder();B.append((A.itemViewID)?'<ul id="j-item-view-toggle"><li><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.urlPath)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["itemView","thumb"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())))+'" data-urlParams=\'{ "itemView": "thumb" }\' data-itemViewID="thumb" class="j-link-thumbnails js-link-thumbnails js-updatable-link '+((A.itemViewID=="thumb")?"j-active":"")+'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.thumbnails"),[]))+'"><span class="j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.thumbnails"),[]))+'</span></a></li><li><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.urlPath)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["itemView","detail"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())))+'" data-urlParams=\'{ "itemView": "detail" }\' data-itemViewID="detail" class="j-link-details '+((A.hierarchyViewSupported)?"j-link-details-middle":"")+" js-link-details js-updatable-link "+((A.itemViewID=="detail")?"j-active":"")+'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.details"),[]))+'"><span class="j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.details"),[]))+"</span></a></li><li "+((!A.hierarchyViewSupported)?'style="display:none"':"")+'><a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.urlPath)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["itemView","hierarchy"]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())))+'" data-urlParams=\'{ "itemView": "hierarchy" }\' data-itemViewID="hierarchy" class="j-link-hierarchy js-link-hierarchy js-updatable-link '+((A.itemViewID=="hierarchy")?"j-active":"")+'" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.hierarchy"),[]))+'"><span class="j-ui-elem">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.hierarchy"),[]))+"</span></a></li></ul>":'<div class="js-placeholder" data-selector="#j-item-view-toggle"></div>');if(!C){return B.toString()}};jive.browse.filter.paginationLinks=function(A,C){var B=C||new soy.StringBuilder();if(A.pageNumber&&A.pageSize){jive.shared.soy.paginationLinks(soy.$$augmentData(A,{current:A.pageNumber,max:A.pageNumber+(A.hasNext?1:0),pageSize:A.pageSize,urlParams:A.urlParams,urlPath:A.urlPath}),B)}else{B.append('<div class="js-placeholder" data-selector=".j-pagination"></div>')}if(!C){return B.toString()}};jive.browse.filter.filterStack=function(A,G){var B=G||new soy.StringBuilder();var C=A.appliedFilters;var F=C.length;if(F>0){for(var E=0;E<F;E++){var D=C[E];B.append('<div class="j-browse-filter-row j-rc4',(E==F-1)?" last-child":"",'">');jive.browse.filter.compositeFilter(soy.$$augmentData(A.parentFilter,{appliedFilter:D,appliedFilterIDs:A.appliedFilterIDs,unappliedFilterIDs:A.unappliedFilterIDs}),B);B.append(' <a href="#" class="js-remove-filter j-filter-btn j-ui-elem" data-filter-id="',soy.$$escapeHtml(D.id),'"><span class="j-filter-btn-inner j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.clear"),[])),"</span></a>");if(E==F-1){jive.browse.filter.paginationLinks(soy.$$augmentData(A.itemsView,{urlParams:A.urlParams,urlPath:A.urlPath}),B)}B.append("</div>")}}else{B.append('<div class="j-browse-filter-row j-rc4 last-child">');if(A.unappliedFilters.length==1){jive.browse.filter.compositeFilter(soy.$$augmentData(A.parentFilter,{appliedFilter:A.unappliedFilters[0],appliedFilterIDs:A.appliedFilterIDs,unappliedFilterIDs:A.unappliedFilterIDs}),B)}else{if(A.unappliedFilters.length>1){B.append('<a href="#" class="j-add-filter-link js-browse-filter j-filter-btn j-ui-elem" data-filter-id="',soy.$$escapeHtml(A.unappliedFilters[0].id),'"><span class="j-filter-btn-inner j-ui-elem">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.maxsymbol"),[]))," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.add_filter"),[])),"</span></a>")}}jive.browse.filter.paginationLinks(soy.$$augmentData(A.itemsView,{urlParams:A.urlParams,urlPath:A.urlPath}),B);B.append("</div>")}if(!G){return B.toString()}};jive.browse.filter.objectTypeFilter=function(A,C){var B=C||new soy.StringBuilder();B.append('<li><a data-filter-id="',soy.$$escapeHtml(A.id),'" class="js-browse-filter',(A.active)?" j-active":"",'" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[])),'" href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.urlPath)+"?"+jive.soy.func.buildParameterString(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["filterID",A.id]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()))),'">',(A.iconCss)?'<span class="'+soy.$$escapeHtml(A.iconCss)+' jive-icon-med"></span><span class="js-shrinkable">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[]))+((A.resultCountRequired)?" ("+soy.$$escapeHtml(A.resultCount)+")":"")+"</span>":soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[]))+((A.resultCountRequired)?" ("+soy.$$escapeHtml(A.resultCount)+")":""),"</a></li> ");if(!C){return B.toString()}};jive.browse.filter.filter=function(A,C){var B=C||new soy.StringBuilder();if(A.type=="composite"&&A.children&&A.children.length>0){if(A.children.length==1&&A.children[0].type!="simple"){jive.browse.filter.filter(soy.$$augmentData(A.children[0],{appliedFilterIDs:A.appliedFilterIDs}),B)}else{if(typeof (A.childIndex)!="number"){jive.browse.filter.filter(soy.$$augmentData(A,{childIndex:0}),B)}else{if(A.appliedFilterIDs.indexOf(A.children[A.childIndex].id)>-1){jive.browse.filter.compositeFilter(soy.$$augmentData(A,{appliedFilter:A.children[A.childIndex]}),B)}else{if(A.childIndex<A.children.length-1){jive.browse.filter.filter(soy.$$augmentData(A,{childIndex:A.childIndex+1}),B)}else{jive.browse.filter.compositeFilter(soy.$$augmentData(A,{appliedFilter:A.children[0]}),B)}}}}}else{if(A.type!="simple"&&A.type!="composite"){jive.browse.filter.dynamicFilter(A,B)}}if(!C){return B.toString()}};jive.browse.filter.dynamicFilter=function(A,C){var B=C||new soy.StringBuilder();if(typeof (A.index)!="number"){jive.browse.filter.dynamicFilter(soy.$$augmentData(A,{index:0}),B)}else{if(A.index<A.appliedFilterIDs.length){if(((A.appliedFilterIDs[A.index]).match(new RegExp(A.valueExpression,""))||[]).length>0){jive.browse.filter.dynamicFilterDispatch(soy.$$augmentData(A,{matches:((A.appliedFilterIDs[A.index]).match(new RegExp(A.valueExpression,""))||[])}),B)}else{jive.browse.filter.dynamicFilter(soy.$$augmentData(A,{index:A.index+1}),B)}}else{jive.browse.filter.dynamicFilterDispatch(A,B)}}if(!C){return B.toString()}};jive.browse.filter.dynamicFilterDispatch=function(A,C){var B=C||new soy.StringBuilder();if(A.type=="toggle"){jive.browse.filter.toggleFilter(soy.$$augmentData(A,{token:jive.soy.func.randomString()}),B)}else{if(A.type=="boolean"){jive.browse.filter.booleanFilter(soy.$$augmentData(A,{token:jive.soy.func.randomString()}),B)}else{if(A.type=="daterange"){jive.browse.filter.dateRangeFilter(A,B)}else{if(A.type=="tag"){jive.browse.filter.tagFilter(A,B)}else{if(A.type=="custom"&&A.instance){jive.shared.soy.render({templateName:A.template,data:A.instance,failGracefully:false},B)}else{B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.no_template"),[A.type,A.id])),"</p>")}}}}}if(!C){return B.toString()}};jive.browse.filter.compositeFilter=function(B,G){var C=G||new soy.StringBuilder();C.append('<select class="j-browse-filter js-browse-filter" data-filter-id="',soy.$$escapeHtml(B.id),'">');var A=B.children;var F=A.length;for(var E=0;E<F;E++){var D=A[E];if(!D.nested){jive.browse.filter.compositeFilterOption(soy.$$augmentData(D,{applied:D.id==B.appliedFilter.id,unappliedFilterIDs:B.unappliedFilterIDs}),C)}}C.append("</select>");jive.browse.filter.filter(soy.$$augmentData(B.appliedFilter,{appliedFilterIDs:B.appliedFilterIDs}),C);if(!G){return C.toString()}};jive.browse.filter.compositeFilterOption=function(A,C){var B=C||new soy.StringBuilder();B.append((A.applied)?'<option value="'+soy.$$escapeHtml(A.id)+'" selected>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[A.descriptionArgs]))+((A.resultCountRequired)?" ("+soy.$$escapeHtml(A.resultCount)+")":"")+"</option>":(!A.unappliedFilterIDs||A.unappliedFilterIDs.indexOf(A.id)>-1)?'<option value="'+soy.$$escapeHtml(A.id)+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[A.descriptionArgs]))+((A.resultCountRequired)?" ("+soy.$$escapeHtml(A.resultCount)+")":"")+"</option>":"");if(!C){return B.toString()}};jive.browse.filter.tagFilter=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="js-browse-filter-tags" data-filter-id="',A.id,'"><input name="tags" type="text" ',(A.matches)?'value="'+soy.$$escapeHtml(((A.matches[1]).split(new RegExp("\\|",""))).join(" "))+' "':"",' autocomplete="off" /> <a href="#" class="js-open-tag-cloud">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.more_tags"),[])),"</a></span>");if(!C){return B.toString()}};jive.browse.filter.dateRangeFilter=function(A,E){var C=E||new soy.StringBuilder();C.append('<span class="js-browse-filter-datepicker" data-filter-id="',A.id,'"><label for="min" class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.daterange.start"),[])),"</label>");var D=new soy.StringBuilder();jive.browse.filter.filterMinVal({matches:A.matches},D);jive.shared.form.datepicker({name:"min",value:D.toString(),initialize:false},C);C.append(' <label for="max" class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.daterange.end"),[])),"</label>");var B=new soy.StringBuilder();jive.browse.filter.filterMaxVal({matches:A.matches},B);jive.shared.form.datepicker({name:"max",value:B.toString(),initialize:false},C);C.append("</span>");if(!E){return C.toString()}};jive.browse.filter.filterMinVal=function(A,C){var B=C||new soy.StringBuilder();if(A.matches&&A.matches.length>=2){jive.browse.filter.atIndex({list:(A.matches[1]).split(new RegExp("\\|","")),index:0},B)}if(!C){return B.toString()}};jive.browse.filter.filterMaxVal=function(A,C){var B=C||new soy.StringBuilder();if(A.matches&&A.matches.length>=2){jive.browse.filter.atIndex({list:(A.matches[1]).split(new RegExp("\\|","")),index:1},B)}if(!C){return B.toString()}};jive.browse.filter.atIndex=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(A.list[A.index]?A.list[A.index]:""));if(!C){return B.toString()}};jive.browse.filter.toggleFilter=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="js-browse-filter-toggle" data-filter-id="',A.id,'"><input type="checkbox" name="toggle-',soy.$$escapeHtml(A.token),'" id="toggle-',soy.$$escapeHtml(A.token),'" value="true"',(A.matches&&A.matches[1]=="true")?"checked":"",' /><label for="toggle-',soy.$$escapeHtml(A.token),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.description),[])),"</label></span>");if(!C){return B.toString()}};jive.browse.filter.booleanFilter=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="js-browse-filter-boolean" data-filter-id="',A.id,'"><input type="radio" name="boolean-',soy.$$escapeHtml(A.token),'" value="true" id="js-boolean-true-',soy.$$escapeHtml(A.token),'"',(A.matches&&A.matches[1]=="true")?"checked":"",' /><label for="js-boolean-true-',soy.$$escapeHtml(A.token),'" class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.booleanoption.true"),[])),'</label><input type="radio" name="boolean-',soy.$$escapeHtml(A.token),'" value="false" id="js-boolean-false-',soy.$$escapeHtml(A.token),'"',(A.matches&&A.matches[1]=="false")?"checked":"",' /><label for="js-boolean-false-',soy.$$escapeHtml(A.token),'" class="font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.booleanoption.false"),[])),"</label></span>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.tagautocomplete=="undefined"){jive.browse.tagautocomplete={}}jive.browse.tagautocomplete.popoverContent=function(A,C){var B=C||new soy.StringBuilder();B.append("<div><p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.loading"),[])),"</p></div>");if(!C){return B.toString()}};jive.browse.tagautocomplete.popularTags=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-tags-suggestions"><p class="font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.typeahead"),[])),'</p><nav><ul class="j-autocomplete-nav clearfix"><li id="popular-tags-tab" class="',(!A.relatedTags&&!A.active||A.active=="popular-tags")?"j-active":"",' js-tab"><a href="#">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.popular_tags"),[])),"</a></li>",(A.yourTags&&A.yourTags.length>0)?'<li id="your-tags-tab" class="'+((A.active=="your-tags")?"j-active":"")+' js-tab"><a href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.your_tags"),[]))+"</a></li>":"",(A.relatedTags)?'<li id="related-tags-tab" class="'+((!A.active||A.active=="related-tags")?"j-active":"")+' js-tab"><a href="#">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.related_tags"),[]))+"</a></li>":"","</ul></nav>");jive.browse.tagautocomplete.tagList({tags:A.popularTags,id:"popular-tags",hidden:(A.relatedTags||A.active)&&A.active!="popular-tags",emptyMessage:jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_popular_tags"),[])},B);if(A.yourTags&&A.yourTags.length>0){jive.browse.tagautocomplete.tagList({tags:A.yourTags,id:"your-tags",hidden:A.active!="your-tags",emptyMessage:jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_your_tags"),[])},B)}if(A.relatedTags){jive.browse.tagautocomplete.tagList({tags:A.relatedTags,id:"related-tags",hidden:A.active&&A.active!="related-tags",emptyMessage:jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_related_tags"),[])},B)}B.append("</div>");if(!C){return B.toString()}};jive.browse.tagautocomplete.completions=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="js-tags-completions">');jive.browse.tagautocomplete.tagList(soy.$$augmentData(A,{id:"tag-completions"}),B);B.append("</div>");if(!C){return B.toString()}};jive.browse.tagautocomplete.tagList=function(A,G){var D=G||new soy.StringBuilder();D.append('<ul class="js-suggestions j-autocomplete-results" ',(A.id)?'id="'+A.id+'"':""," ",(A.hidden)?'style="display:none"':"",">");var C=A.tags;var E=C.length;if(E>0){for(var F=0;F<E;F++){var B=C[F];D.append('<li class="js-suggestion"><a href="#" data-value="',soy.$$escapeHtml(B),'" class="quick"><span class="jive-icon-tag jive-icon-med"></span>',soy.$$escapeHtml(B),"</a></li>")}}else{D.append((A.emptyMessage)?"<li>"+soy.$$escapeHtml(A.emptyMessage)+"</li>":"")}D.append("</ul>");if(!G){return D.toString()}};jive.browse.tagautocomplete.tagCloud=function(A,G){var B=G||new soy.StringBuilder();B.append('<div class="jive-modal j-modal jive-modal-medium"><header><h2>',(A.placeName)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tags.top_tags_in"),[A.maxCount,A.placeName])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.top_tags_in_this_place"),[A.maxCount])),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem"></span></a><section class="jive-modal-content j-modal-content-text clearfix">');if(A.availableTags.length>0){B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.cloud_tip"),[])),'</p><ul class="jive-tagcloud-list">');var D=A.availableTags;var F=D.length;for(var C=0;C<F;C++){var E=D[C];B.append('<li class="js-tag jive-tagset-popularity',soy.$$escapeHtml(E.bucket),(A.selectedTags.indexOf(E.renderedTag)>-1)?" js-selected":"",'" data-value="',soy.$$escapeHtml(E.renderedTag),'"><a href="#" title="',(E.count!=1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tag.cloud.used_n_times.tooltip"),[E.count])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("tag.cloud.used_1_time.tooltip"),[])),'">',soy.$$escapeHtml(E.renderedTag),"</a></li> ")}B.append('</ul><button class="close j-btn-callout">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.done"),[])),"</button>")}else{B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.filter.tag.no_popular_tags"),[])),"</p>")}B.append("</section></div>");if(!G){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.layout=="undefined"){jive.browse.layout={}}jive.browse.layout.layout=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"$j(document).ready( function() {var contentSource = new "+soy.$$escapeHtml(A.contentSource)+"(); var filterApp = new "+soy.$$escapeHtml(A.mainClass?A.mainClass:"jive.Filters.Main")+"({itemSource: contentSource, guest: "+soy.$$escapeHtml(A.guest)+", targetUserID: '"+soy.$$escapeHtml(A.targetUserID)+"', userPrefSource: new jive.Browse.User.ItemSource(), browseViewID: '"+soy.$$escapeJs(A.browseViewID)+"', archetypeID: '"+soy.$$escapeJs(A.archetypeID)+"', filterGroup: "+JSON.stringify(A.filterGroup).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", itemViewID: '"+soy.$$escapeJs(A.itemsView.itemViewID)+"', pageSize: "+soy.$$escapeJs(A.itemsView.pageSize)+"});});"},B);B.append("<head><title>",soy.$$escapeHtml(A.title),"</title>",(A.activeLink)?'<meta name="nav.active.link" content="'+soy.$$escapeHtml(A.activeLink)+'" />':"",(A.cssFile)?'<link rel="stylesheet" href="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","",A.cssFile))+'" type="text/css" media="all" />':"",'</head><body class="',(A.bodyClass)?soy.$$escapeHtml(A.bodyClass):"j-body-yourwork",'">');jive.nav.browseSubNav({links:A.subNavLinks,selectedLinkID:A.selectedSubNavLink},B);B.append((A.heading)?"<h2>"+soy.$$escapeHtml(A.heading)+"</h2>":"");jive.browse.layout.layoutBody(A,B);B.append("</body>");if(!C){return B.toString()}};jive.browse.layout.layoutBody=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-layout ',(A.hideFilterGroup)?"j-layout-l":"j-layout-sl"," clearfix j-contained j-contained-tabs ",(A.layoutClass)?soy.$$escapeHtml(A.layoutClass):"",' j-rc5 j-rc-none-top">');if(!A.hideSidebar){B.append('<div class="j-column-wrap-s j-sidebar-left"><div class="j-colum-wrap-s"><div class="j-column j-column-s">');if(!A.hideFilterGroup){jive.browse.filter.filterGroup(soy.$$augmentData(A.filterGroup,{urlPath:A.urlPath}),B)}B.append("<!-- BEGIN optional first column content -->",(A.firstColumnContent)?A.firstColumnContent:"","<!-- END optional first column content --></div></div></div>")}B.append('<div class="j-column-wrap-l"><div class="j-column j-column-l j-column-l-nav">');jive.browse.filter.filters(soy.$$augmentData(A.filterGroup,{itemsView:A.itemsView,urlParams:A.urlParams,urlPath:A.urlPath}),B);B.append('<div id="j-browse-item-grid" class="j-box-body">');jive.browse.grid.itemGrid(soy.$$augmentData(A.itemsView,{browseViewID:A.browseViewID,archetypeID:A.archetypeID}),B);B.append("</div>");jive.browse.grid.moreSearchResultsAvailableHolder(A.itemsView,B);B.append('<div class="j-browse-filter-row j-bottom-row j-rc4">');jive.shared.soy.paginationLinks({current:A.itemsView.pageNumber,max:A.itemsView.pageNumber+(A.itemsView.hasNext?1:0),pageSize:A.itemsView.pageSize,urlParams:A.urlParams,urlPath:A.urlPath},B);B.append("</div><!-- BEGIN recommender -->",(A.lowerContent)?A.lowerContent:"","<!-- END recommender --></div></div></div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.grid=="undefined"){jive.browse.grid={}}jive.browse.grid.itemGrid=function(A,C){var B=C||new soy.StringBuilder();if(A.maxPageReached){jive.browse.grid.maxPageReached(A,B)}else{if(A.items.length<1&&A.noResults){B.append(A.noResults)}else{if(A.itemViewID==null||A.itemViewID=="thumb"){jive.browse.grid.thumbGrid(A,B)}else{if(A.itemViewID=="hierarchy"&&A.hierarchyViewSupported){jive.browse.grid.hierarchyView(A,B)}else{jive.browse.grid.listGrid(A,B)}}}}if(!C){return B.toString()}};jive.browse.grid.thumbGrid=function(A,G){var B=G||new soy.StringBuilder();B.append('<ul class="temp j-browse-thumbnails j-thumb-view">');var E=A.items;var F=E.length;if(F>0){for(var C=0;C<F;C++){var D=E[C];B.append('<li class="js-browse-thumbnail" data-object-type="',soy.$$escapeHtml(D.type),'" data-object-id="',soy.$$escapeHtml(D.id),'">');if(A.browseViewID){jive.shared.soy.render({templateName:D.thumbnailTemplate,data:jQuery.extend({},D,(function(){var J={};var I=[["browseViewID",A.browseViewID],["columns",A.itemGridDetailsColumns]];for(var H=0;H<I.length;H+=1){J[I[H][0]]=I[H][1]}return J})()),failGracefully:false},B)}else{jive.shared.soy.render({templateName:D.thumbnailTemplate,data:D,failGracefully:false},B)}B.append("</li>")}}else{B.append('<div class="j-browse-thumbnail-item j-rc5">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.noresults"),[])),"</div>")}B.append("</ul>");if(!G){return B.toString()}};jive.browse.grid.listGrid=function(A,G){var D=G||new soy.StringBuilder();D.append('<div class="j-browse-details"><table class="j-browse-list" cellspacing="0" cellpadding="0">');if(A.itemGridDetailsHeaderTemplate){jive.shared.soy.render({templateName:A.itemGridDetailsHeaderTemplate,data:(function(){var J={};var I=[["columns",A.itemGridDetailsColumns]];for(var H=0;H<I.length;H+=1){J[I[H][0]]=I[H][1]}return J})(),failGracefully:false},D)}D.append('<tbody class="j-browse-details-tbody">');var C=A.items;var E=C.length;if(E>0){for(var F=0;F<E;F++){var B=C[F];if(A.browseViewID){jive.shared.soy.render({templateName:B.detailTemplate,data:jQuery.extend({},B,(function(){var J={};var I=[["browseViewID",A.browseViewID],["columns",A.itemGridDetailsColumns]];for(var H=0;H<I.length;H+=1){J[I[H][0]]=I[H][1]}return J})()),failGracefully:false},D)}else{jive.shared.soy.render({templateName:B.detailTemplate,data:B,failGracefully:false},D)}}}else{D.append('<tr><td colspan="10">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.noresults"),[])),"</td></tr>")}D.append("</tbody></table></div>");if(!G){return D.toString()}};jive.browse.grid.hierarchyView=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-browse-details"><ul class="j-browse-hierarchy">');jive.browse.grid.hierarchyItems(A,B);B.append("</ul></div>");if(!C){return B.toString()}};jive.browse.grid.hierarchyItems=function(A,G){var B=G||new soy.StringBuilder();var D=A.items;var E=D.length;if(E>0){for(var F=0;F<E;F++){var C=D[F];jive.browse.container.hierarchyContainerItem(C,B)}}else{B.append("<li>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.noresults"),[])),"</li>")}if(!G){return B.toString()}};jive.browse.grid.jiveGenius=function(A,C){var B=C||new soy.StringBuilder();B.append('<section class="j-browse-recommendations"><header class="font-color-meta-light j-recommendation-container-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.trending.trendingAndPopularNow"),[])),"</header>");jive.browse.grid.listGrid({itemGridDetailsHeaderTemplate:A.header,items:A.items.trendingContent,itemGridDetailsColumns:A.columnDetails},B);B.append("</section>");if(A.items.recommendations){B.append('<section class="j-browse-recommendations"><header class="font-color-meta-light j-recommendation-container-title">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("eae.home.recommendations.heading"),[])),"</header>");jive.browse.grid.listGrid({itemGridDetailsHeaderTemplate:A.header,items:A.items.recommendations,itemGridDetailsColumns:A.columnDetails},B);B.append("</section>")}if(!C){return B.toString()}};jive.browse.grid.maxPageReached=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-browse-info j-empty font-color-meta">',(A.archetypeID)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse."+A.archetypeID+".max.pages.message"),[])):"No archetype specified.","</div>");if(!C){return B.toString()}};jive.browse.grid.moreSearchResultsAvailableHolder=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-more-search-results-available">');jive.browse.grid.moreSearchResultsAvailable(A,B);B.append("</div>");if(!C){return B.toString()}};jive.browse.grid.moreSearchResultsAvailable=function(A,C){var B=C||new soy.StringBuilder();if(A.searchResultsInfo){jive.browse.grid.moreSearchResultsAvailableBody({searchQuery:A.searchResultsInfo.searchQuery,containerName:A.containerName},B)}if(!C){return B.toString()}};jive.browse.grid.moreSearchResultsAvailableBody=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-info-box"><div><span class="jive-icon-med jive-icon-info"></span>Showing only recent content. Expand your search: <br />',(A.containerName)?'<input type="button" value="Search all space content" class="s-box-button" onClick="window.open(\'http://search.sap.com/scn?query='+soy.$$escapeUri(A.searchQuery)+"&filter=scm_a_site%28scm_v_Site11%29&filter=scm_a_community%28"+soy.$$escapeUri(A.containerName)+"%29');\">&nbsp;&nbsp;":"",'<input type="button" value="Search all of SCN" class="s-box-button" onClick="window.open(\'http://search.sap.com/scn?query=',soy.$$escapeUri(A.searchQuery),"&filter=scm_a_site%28scm_v_Site11%29');\"></div></div>");if(!C){return B.toString()}}
;
jive.namespace("Filters");jive.Filters.ItemGridView=jive.AbstractView.extend(function(b){var d=jQuery;b.fadeInOnMergeDuration=200;b.sortDuration=400;b.sortEasing="easeInOutQuint";b.fadeOutOnMergeDuration=200;d("body").addClass(jQuery.browser.webkit?"webkit":"other");var c=window.styleMedia&&window.styleMedia.matchMedium("(-webkit-transform-3d)");this.init=function(g){var f=d(this.primary).closest("form"),e=this;this.noResults=g.noResults;this.$itemGrid=d("#j-browse-item-grid");this.$itemToggle=d("#j-item-view-toggle");this.$navLinks=d("li.j-browse-filter-group-item");this.$containerNav=d("#jive-body > nav.j-bigtab-nav");this.$moreResultsAvailable=d("#j-more-search-results-available");this.archetypeID=g.archetypeID;this.content=this.$itemGrid;this.$navLinks.find("a").click(function(h){e.$itemToggle.show()});d("#j-item-view-toggle a.js-updatable-link").click(function(h){var i=$j(this).data("itemViewID");e.setItemViewID(i);e.emit("toggleItemView",e.itemViewID);h.preventDefault()});this.prepareThumbs();this.prepareDetails();this.initVGrid()};this.setItemViewID=function(e){var f;if(this.itemViewID!=e){this.itemViewID=e;f=d("#j-item-view-toggle a.js-updatable-link");f.removeClass("j-active");f.filter(".js-link-thumbnails").toggleClass("j-active",e=="thumb");f.filter(".js-link-details").toggleClass("j-active",e=="detail");f.filter(".js-link-hierarchy").toggleClass("j-active",e=="hierarchy")}};b.toggleHierarchyView=function(e){var f=d(".j-link-hierarchy").parent();if(e){f.show()}else{f.hide()}};this.update=function(g,f){var e=this;this.showSpinner({size:"small",context:d("#j-browse-filters")});g.addCallback(function(h){e.itemsView=h;e.setItemViewID(h.itemViewID);e.toggleHierarchyView(e.itemsView.hierarchyViewSupported);if(h.items.length<1&&e.noResults){e.renderNoResults()}else{if(e.itemViewID=="thumb"){e.renderThumbs(f)}else{if(e.itemViewID=="detail"){e.renderDetails()}else{if(e.itemViewID=="hierarchy"){e.renderHierarchy()}}}}e.displayMoreSearchResultsMessage(h)}).always(function(){e.hideSpinner()})};this.updateWithMerge=function(e){return this.update(e,true)};this.removeItem=function(k){var e=this;if(e.itemsView&&e.itemsView.items){var j=e.itemsView;var h=false;for(var f=0;f<j.items.length;f++){var g=j.items[f];if(g.id==k.id&&g.type==k.type){j.items.splice(f,1);h=true;break}}if(h){e.itemsView.items=j.items;var l=new jive.conc.Promise();e.updateWithMerge(l);l.emitSuccess(j);$j(".j-popover").hide()}return h}return false};b.addArchetype=function(e){if(this.archetypeID&&!e.archetypeID){return d.extend(e,{archetypeID:this.archetypeID})}else{return e}};b.renderThumbs=function(h){var g=d(jive.browse.grid.itemGrid(d.extend(this.addArchetype(this.itemsView),{itemViewID:"thumb"}))),e=this.$itemGrid.find(".js-browse-thumbnail"),f=g.find(".js-browse-thumbnail");if(jive.Filters.isLegacyBrowser()){h=false}if(h&&e.length>0&&f.length>0){this.mergeThumbs(f,e,this.prepareThumbs.bind(this))}else{this.replaceThumbs(g,this.prepareThumbs.bind(this))}};b.prepareThumbs=function(){var e=this;jive.conc.nextTick(this.resizeHeaders.bind(this));jive.conc.nextTick(this.resizePreviews.bind(this));this.$itemGrid.delegate(".j-card-flipper, .j-back-btn","click",function(h){var i=d(this).closest(".card"),g=d(this).hasClass("j-card-flipper");if(d.browser.webkit&&!c){var f=150;setTimeout(function(){i.find(".card-back").toggle(g);i.find(".card-front").toggle(!g)},f)}i.toggleClass("flipped",g);h.preventDefault()})};b.prepareDetails=function(){var f=this;function e(i){var h=d(this);jive.conc.nextTick(function(){h.trigger("close")})}function g(i){i.preventDefault();var h=$j(this),j={};j[h.data("cur-loc-param-name")]=window.location.href;window.location.href=$j.param.querystring(h.attr("href"),j)}this.$itemGrid.delegate(".j-browse-action-button","click",function(j){var i=$j(this),h=i.closest(".j-td-actions").find(".j-js-browse-actions-container");h.popover({context:$j(this),darkPopover:true,destroyOnClose:false,putBack:true});if(!h.data("haveClickEventsBeenAttached")){h.data("haveClickEventsBeenAttached",true);h.find("a.share-link, a.j-js-create-direct-message").click(e);h.find("a.js-link-cur-loc-param").click(g)}j.preventDefault()})};b.resizeHeaders=function(){var e=this.truncateText;this.$itemGrid.find("header.js-thumb-header").each(function(){if(d(this).find(".js-header-text").length<1){return true}var f=d(this);var g=d(this).find("a");var h=d(this).find(".js-header-text");f.find("h4").css("padding-right",Math.max(10,f.find(".j-thumb-title-meta").outerWidth()+6)+"px");if(g.outerHeight()>f.outerHeight()||h.outerWidth()>g.outerWidth()){g.closest("h4").addClass("shrunk")}var i=h.text();e(h,g,i);if(h.outerHeight()<20){g.addClass("j-single-line")}})};b.resizePreviews=function(){var e=this.truncateText;this.$itemGrid.find("article").each(function(){var g=d(this);var f=g.find("span");var h=d(this).text();e(f,g,h)})};b.truncateText=function(e,f,g){return jive.util.fitTextWithinNode(g,e,f)};b.renderDetails=function(){var f=this.itemsView.items.length<1&&this.noResults?d.extend({},this.itemsView,{noResults:this.noResults()}):this.itemsView;var e=d(jive.browse.grid.itemGrid(this.addArchetype(f)));this.updateItemGrid(e)};b.renderNoResults=b.renderDetails;b.renderHierarchy=function(){var e=this;var j=false;if(this.itemsView.containerID){d(".j-loading-container").remove();var f=$j('.j-hierarchy-item[data-object-id="'+this.itemsView.containerID+'"]');if(f.length>0){var k=f.find(".j-hierarchy-child-holder");if(!k.data("children-loaded")){var i=this.itemsView.parentIDChain;var g=e.getNestedItems(this.itemsView.items,i);k.append(jive.browse.grid.hierarchyItems({items:g}));k.attr("data-children-loaded",true)}j=true}}if(!j){var h=d(jive.browse.grid.itemGrid(this.addArchetype(this.itemsView)));this.updateItemGrid(h)}};b.getNestedItems=function(f,g){var e=this;$j(f).each(function(h,i){return $j(g).each(function(j,k){if(i.id==k){f=e.getNestedItems(i.prop.childInfo.children,g);return false}return true})});return f};b.replaceThumbs=function(e,f){this.updateItemGrid(e);f()};b.mergeThumbs=function(t,y,l){var x=this.getThumbGrid(),h=t.toArray(),z=y.toArray(),s=[],q=h.length,k=z.length,v={},p={},f=false,o,g,r,w,u=0,n=this;for(w=0;w<q;w+=1){o=h[w];r=o.getAttribute("data-object-type")+";"+o.getAttribute("data-object-id");v[r]=w+1}for(u=0;u<k;u+=1){g=z[u];r=g.getAttribute("data-object-type")+";"+g.getAttribute("data-object-id");if(v[r]){p[r]=true}else{s.push(g);if(!f){n.fadeOut(d(g),n.fadeOutOnMergeDuration,m);f=true}else{n.fadeOut(d(g),n.fadeOutOnMergeDuration)}}}if(!f){m()}function m(){var C,j,A,E,B=s.length==k,D=q+k+600;for(C=0;C<q;C+=1){j=h[C];E=j.getAttribute("data-object-type")+";"+j.getAttribute("data-object-id");if(!p[E]){A=s.shift();if(A){d(A).replaceWith(j)}else{x.append(j)}n.transparentize(d(j))}}n.refreshVGrid();if(!B){x.vgsort(function(G,F){var i=G.getAttribute("data-object-type")+";"+G.getAttribute("data-object-id"),J=F.getAttribute("data-object-type")+";"+F.getAttribute("data-object-id"),I=v[i]||D,H=v[J]||D;return I-H},n.sortEasing,n.sortDuration)}setTimeout(e,B?0:n.sortDuration)}function e(){var j;for(j=0;j<s.length;j+=1){d(s[j]).detach()}l();n.fadeIn(x.find(".js-browse-thumbnail"),n.fadeInOnMergeDuration);setTimeout(function(){for(j=0;j<s.length;j+=1){d(s[j]).remove()}},2000)}};b.updateItemGrid=function(e){this.destroyVGrid();this.$itemGrid.html(e);this.initVGrid()};b.getThumbGrid=function(){return this.$itemGrid.find(".j-browse-thumbnails")};b.initVGrid=function(){if(!jive.Filters.isLegacyBrowser()){var e=this.getThumbGrid();if(e.length>0){e.vgrid({easeing:this.sortEasing,duration:this.sortDuration,delay:0})}}};b.refreshVGrid=function(){var e=this.getThumbGrid();if(e.length>0){e.vgrefresh(null,0)}};b.destroyVGrid=function(){var e=this.getThumbGrid();if(e.length>0){e.vgdestroy()}};var a=d.browser.msie&&parseFloat(d.browser.version)<9;b.transparentize=function(f,e){e=typeof e=="undefined"?1:e;if(!a){f.css("opacity",1-e)}else{f.css("visibility",e==1?"hidden":"visible")}};b.opacify=function(e){if(!a){e.css("opacity",1)}else{e.css("visibility","visible")}};b.fadeOut=function(e,f,g){if(!a){e.animate({opacity:0},f,g)}else{this.transparentize(e);if(g){jive.conc.nextTick(g)}}};b.fadeIn=function(e,f,g){if(!a){e.animate({opacity:1},f,g)}else{this.opacify(e);if(g){jive.conc.nextTick(g)}}};b.displayMoreSearchResultsMessage=function(e){this.$moreResultsAvailable.html(jive.browse.grid.moreSearchResultsAvailable(e))}});
;
jive.Collapsable=jive.oo.Class.extend(function(a){var b=jQuery;this.collapsable=function(d){var c=this;this.availableWidth=d.availableWidth;this.resizableElement=d.element;this.shrinkable=d.shrinkable;this.shrunken=false;b(function(){c.recollapse();var e;b(window).bind("resize",function(){clearTimeout(e);e=setTimeout(c.collapseIfNecessary.bind(c),100)});c.collapseIfNecessary()})};this.recollapse=function(){var c=b(this.resizableElement);this.largeWidth=c.toArray().reduce(function(d,f){return d+b(f).width()},0);if(this.shrunken){this.shrinkStuff(0,c)}this.collapseIfNecessary()};a.collapseIfNecessary=function(){var c=this.availableWidth();if(!this.shrunken&&c<this.largeWidth){this.shrinkStuff();this.shrunken=true}else{if(this.shrunken&&c>=this.largeWidth){this.expandStuff();this.shrunken=false}}};a.shrinkStuff=function(e,c){var d=b(c||this.resizableElement);d.find(this.shrinkable).each(function(){b(this).width(b(this).width())}).wrap('<span class="js-shrunk" style="overflow-x:hidden; white-space:nowrap;" />').parent().animate({width:"1px"},e,function(){b(this).hide()})};a.expandStuff=function(){var d=b(this.resizableElement),c=this;d.find(".js-shrunk").each(function(){var f=b(this),e=f.children(),g=e.width();f.show().animate({width:g},function(){e.filter(":first").unwrap()})})}});
;
jive.namespace("Filters");jive.Filters.TagSuggestions=jive.RestService.extend(function(a){a.resourceType="tag";a.init=function(b){this._super(b);this.RESOURCE_ENDPOINT=jive.rest.url("/tags/search")};this.get=function(c,b){return this.commonAjaxRequest(new jive.conc.Promise(),"get",{data:$j.extend({query:encodeURIComponent(c)+"*"},b||{}),url:this.RESOURCE_ENDPOINT})}});
;
jive.namespace("Filters");jive.Filters.TagService=jive.RestService.extend(function(a){a.resourceType="tag";var b={};a.init=function(c){this._super(c);this.RESOURCE_ENDPOINT=jive.rest.url("/tags/cloud");this.defaultParams=c};this.findAll=function(i){i=jQuery.extend({},this.defaultParams,i||{});var d=i.max,c={},e=this.cacheKey(i),g=b[e],h=new jive.conc.Promise(),f=this;if(g){h.emitSuccess(g)}else{Object.keys(i).forEach(function(j){if(j!="max"){c[j]=i[j]}});this.get(d,c).addCallback(function(k){var j=k.contentTagCloudBean;b[e]=j;h.emitSuccess(j)}).addErrback(function(){h.emitError.apply(h,arguments)})}return h};a.cacheKey=function(c){return Object.keys(c).sort().map(function(d){return d+"="+JSON.stringify(c[d])}).join("&")}});
;
jive.namespace("Filters");jive.Filters.Suggestions=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.Filters;a.init=function(d){this.context=d;this.hidden=true};this.render=function(e){var d=this;if(this.hidden&&this.context.is(":visible")){this.content=c(e);this.keyTargets=c(this.context).add(this.content);this.keyHandler=this.handleKeypress.bind(this);this.defaultPreventer=this.preventDefaultActions.bind(this);this.selectedIndex=0;this.content.delegate(".js-suggestion a","click",function(g){var f=c(this).data("value");d.emitSelection(f);g.preventDefault()});this.content.bind("focus click",function(){d.emit("focus")});this.content.popover({context:this.context,duration:200,fade:false,addClass:"j-autocomplete"});this.content.one("close",function(){d.hide()});this.keyTargets.keydown(this.defaultPreventer).keyup(this.keyHandler);this.hidden=false}};this.hide=function(){if(!this.hidden){this.content.trigger("close");this.keyTargets.unbind("keyup",this.keyHandler);this.keyTargets.unbind("keydown",this.defaultPreventer);this.emit("blur");this.emit("close");this.hidden=true}};this.isVisible=function(){return !this.hidden};this.html=function(e){if(e){this.content.trigger("popover.html",[e]);var d=this.selectedIndex,f=c(".js-suggestion:visible:nth-child("+d+")",e);if(d>0){f.addClass("j-selected")}}else{return this.content.children()}};a.preventDefaultActions=function(d){switch(d.keyCode){case c.ui.keyCode.UP:case c.ui.keyCode.DOWN:case c.ui.keyCode.TAB:case c.ui.keyCode.ENTER:case c.ui.keyCode.ESCAPE:d.preventDefault()}};a.handleKeypress=function(d){switch(d.keyCode){case c.ui.keyCode.UP:this.selectPrevious();d.preventDefault();break;case c.ui.keyCode.DOWN:this.selectNext();d.preventDefault();break;case c.ui.keyCode.TAB:if(d.shiftKey){this.selectPrevious()}else{this.selectNext()}d.preventDefault();break;case c.ui.keyCode.ENTER:this.selectCurrent();d.preventDefault();break;case c.ui.keyCode.ESCAPE:this.hide();d.preventDefault()}};a.incrementSelection=function(f){var d=this.selectedIndex+f,e=this.content.find(".js-suggestion:visible:nth-child("+(d)+")");if(e.length>0&&d>0){this.content.find(".js-suggestion").removeClass("j-selected");e.addClass("j-selected");this.selectedIndex=d}};a.resetSelection=function(){this.selectedIndex=0;this.content.find(".js-suggestion").removeClass("j-selected")};a.selectNext=function(){this.incrementSelection(1)};a.selectPrevious=function(){this.incrementSelection(-1)};a.selectCurrent=function(){var e=this.content.find(".js-suggestion.j-selected:visible a"),d=this;if(e.length>0){this.emitSelection(e.data("value"))}};a.emitSelection=function(e){var d=this;this.emitP("selection",e).addCallback(function(){d.resetSelection()})}});
;
jive.TabView=function(e,m){jive.conc.observable(this);m=m||{};var j=m.activeClass||"jive-body-tabcurrent",a=m.tabSelector||".jive-body-tab",d=m.nameFromTab||function(n){return n.attr("id").replace(/-tab$/,"")},h=this;function l(){return $j(e).find(a)}function c(){return l().filter(function(){return $j(this).hasClass(j)})}function g(){return d(l().filter(function(){return $j(this).hasClass(j)}))}function f(n){l().each(function(){var p=$j(this),o=d(p);p.toggleClass(j,o==n)});l().each(function(){var q=$j(this),p=d(q),o=$j('[id="'+p+'"]');if(p==n){o.show()}else{o.hide()}})}function k(n){h.emit("tabSwitch",n,c())}function i(n){f(n);k(n)}function b(o,p){var n=l().filter(function(){return d($j(this))==o});n.toggle(!!p)}this.switchTo=i;this.setVisibility=b;this.activeTabName=g;this.activeTab=c;$j(document).ready(function(){$j(e).delegate(a,"click",function(p){var o=$j(this),n=d(o);i(n);p.preventDefault()});if(!l().hasClass(j)){l().first().trigger("click")}})};
;
jive.namespace("Filters");jive.Filters.TagSuggestionsView=jive.Filters.Suggestions.extend(function(a){var b=jQuery;this.render=function(d){var c=this;this._super(d);this.activeTab=null;this.tabView=new jive.TabView(this.content,{activeClass:"j-active",tabSelector:".js-tab"}).addListener("tabSwitch",function(e){c.html(c.html());c.resetSelection();c.activeTab=e})};this.html=function(d){var c;if(d&&!this.isVisible()){c=b(jive.browse.tagautocomplete.popoverContent());c.html(d);this.render(c)}else{return this._super(d)}};this.showRelatedTags=function(f,d,e){var c=this;jive.conc.synchronize({popularTags:f,yourTags:d,relatedTags:e}).addCallback(function(g){c.html(b(jive.browse.tagautocomplete.popularTags(b.extend({active:c.activeTab||null},g))))})};this.showCompletions=function(d){var c=this;this.activeTab=null;d.addCallback(function(e){c.html(b(jive.browse.tagautocomplete.completions(e)))})};a.emitSelection=function(){this.activeTab=null;return this._super.apply(this,arguments)}});
;
jive.namespace("Filters");jive.Filters.TagCloud=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(d){var c=this;b(d).parent().find(".js-open-tag-cloud").click(function(e){c.emit("cloud");e.preventDefault()})};this.show=function(f,d,e){var g=new jive.conc.Promise(),c=this;this.showSpinner();f.addCallback(function(h){c.hideSpinner();c.render({availableTags:h,selectedTags:d,maxCount:e});c.content.lightbox_me({destroyOnClose:true,onClose:function(){g.emitSuccess(c.getTags())}})});return g};this.render=function(c){this.content=b(jive.browse.tagautocomplete.tagCloud(c));this.content.find(".js-tag a").click(function(d){b(this).closest(".js-tag").toggleClass("js-selected");d.preventDefault()})};a.getTags=function(){return this.content.find(".js-selected").toArray().map(function(c){return b(c).data("value")})}});
;
jive.namespace("Filters");jive.Filters.TagAutocomplete=jive.oo.Class.extend(function(a){var d=jQuery,c=jive.Filters,e=/[\s,]+/,b=/[^\s,]+$/;jive.conc.observable(this);a.init=function(h,g){var f=this;var i={max:10,containerType:typeof(containerType)!="undefined"?containerType:"-1",containerID:typeof(containerID)!="undefined"?containerID:"-1"};if(g.objectTypes&&g.objectTypes.length>0){i.taggableTypes=g.objectTypes}this.suggestions=new c.TagSuggestions();this.tagService=new c.TagService(i);this.tagService.suppressGenericErrorMessages();this.element=h;this.typeahead=new jive.TypeaheadInput(h,{minLength:2});this.cachedCompletions=[];this.focused=false;this.userID=_jive_current_user?_jive_current_user.ID:"-1";this.typeahead.addListener("change",this.handleChange.bind(this)).addListener("clear",function(){f.handleChange("")});this.suggestionsView=new c.TagSuggestionsView(h).addListener("selection",function(j,l){var k=f.typeahead.val();f.element.blur();if(k.match(b)){f.typeahead.val(k.replace(b,j)+" ")}else{f.typeahead.val(k+j+" ")}f.element.focus();f.handleChange(f.typeahead.val());l.emitSuccess()}).addListener("close",function(){f.hideCompletions()});this.tagCloud=new c.TagCloud(h).addListener("cloud",function(){var j=f.getSelectedTags(),l={max:200},k;k=f.tagService.findAll(l);f.tagCloud.show(k,j,200).addCallback(function(m){if(j.join(" ")!=m.join(" ")){f.setSelectedTags(m)}})});this.element.focus(function(){f.focused=true;f.emit("focus");f.handleChange(d(this).val())}).blur(function(){f.focused=false;if(!f.suggestionsOpen()){f.emit("blur")}}).click(function(j){j.stopPropagation()});this.suggestionsView.addListener("focus",function(){f.focused=true;f.emit("focus")}).addListener("blur",function(){f.focused=false;f.emit("blur")});this.tagService.findAll();this.tagService.findAll({filterUserID:this.userID})};a.handleChange=function(h){var g=d.trim(h).split(e).filter(function(i){return !!i}),f=(h.match(b)||[])[0];if(f&&f!=this.lastPartialTag){this.showCompletions(f)}else{if(!f){this.hideCompletions()}}this.lastPartialTag=f;this.emit("change",g)};a.showPopularTags=function(){var j=new jive.conc.Promise(),g=new jive.conc.Promise(),i=new jive.conc.Promise(),h=this.getSelectedTags(),f=this;this.tagService.findAll().addCallback(this.tagPreparer(j));if(this.userID&&this.userID>0){this.tagService.findAll({filterUserID:this.userID}).addCallback(this.tagPreparer(g))}else{g.emitSuccess([])}if(h.length>0){this.tagService.findAll({tags:h}).addCallback(this.tagPreparer(i)).addErrback(function(){i.emitSuccess([])});f.suggestionsView.showRelatedTags(j,g,i)}else{f.suggestionsView.showRelatedTags(j,g)}};a.tagPreparer=function(f){return function(g){var h=g.map(function(i){return i.renderedTag});f.emitSuccess(h)}};a.showCompletions=function(f){var h=new jive.conc.Promise(),i=new jive.conc.Promise(),g=this;this.suggestionsView.showCompletions(h);h.emitSuccess({tags:[f].concat(g.cachedCompletions).unique()});this.suggestions.get(f).addCallback(function(j){g.cachedCompletions=j.tagSearchResult.map(function(k){return k.name});i.emitSuccess({tags:[f].concat(g.cachedCompletions).unique()})});this.suggestionsView.showCompletions(i)};a.hideCompletions=function(){var f=this;if(this.focused){jive.conc.nextTick(function(){f.showPopularTags()})}else{this.suggestionsView.hide();this.emit("blur")}this.cachedCompletions=[]};a.suggestionsOpen=function(){return this.suggestionsView.isVisible()};a.getSelectedTags=function(){var f=this.typeahead.val();return d.trim(f.replace(b,"")).split(e).filter(function(g){return !!g})};a.setSelectedTags=function(f){if(this.focused){this.element.blur()}this.typeahead.val(f.join(" ")+" ");if(this.focused){this.element.focus()}this.handleChange(this.typeahead.val())}});
;
jive.namespace("Filters");jive.Filters.FilterView=jive.oo.compose(jive.AbstractView,jive.Collapsable).extend(function(a){var c=jQuery,b=jive.Filters;a.primary="#j-browse-filters";a.secondary="#j-browse-child-filter-list";a.init=function(d){this.setObjectTypes(d.objectTypes);this.bindFilterHandlers();this.bindSortHandlers();this.initSearchBox();this.preventEnterSubmit();this.collapsable({availableWidth:function(){var e=c(this.primary+" .js-browse-filter-toggle-set").parent(),f=c("#j-item-view-toggle");return e.width()-f.width()},element:this.primary+" .js-browse-filter-toggle-set li",shrinkable:".js-shrinkable"})};this.setObjectTypes=function(d){this.objectTypes=d};a.bindFilterHandlers=function(){var h=c("#j-browse-filters"),i=h.find("select.js-browse-filter"),f=$j("#js-browse-controls").find("a.js-browse-filter"),k=h.find("span.js-browse-filter-toggle"),g=h.find("span.js-browse-filter-boolean"),l=h.find("span.js-browse-filter-tags"),d=h.find("span.js-browse-filter-datepicker"),e=h.find("a.js-remove-filter"),j=this;i.each(function(){c(this).data("lastValue",c(this).val())});i.change(function(){var m=c(this).val(),n=c(this).data("lastValue");j.emit("applyFilters",{add:[m],remove:n?[n]:[]});c(this).data("lastValue",m)});f.click(function(p){var m=c(this).data("filter-id"),o=c(this).closest(".js-browse-filter-toggle-set").find("a.js-browse-filter"),n=o.toArray().map(function(q){return c(q).data("filter-id")}).filter(function(q){return q!=m});j.emit("applyFilters",{add:[m],remove:n});p.preventDefault()});k.each(function(){j.initToggleFilter(this)});g.each(function(){j.initBooleanFilter(this)});l.each(function(){j.initTagFilter(this)});d.each(function(){j.initDateRange(this)});e.click(function(n){var m=c(this).parent().find(".j-browse-filter").val();j.emit("applyFilters",{add:[],remove:[m]});n.preventDefault()})};this.bindSortHandlers=function(){var d=this;c("#j-sort").change(function(){var e=c(this).val();var f=c(this).find(":selected").data("sort-order");d.emit("applySort",e,f)})};this.render=function(h,f,d,e,g){c(this.primary).parent().show();this.updateControls(h,f,e,d,g);this.updateSearchBox(h)};a.updateControls=function(f,d,h,g,i){var e,l,j=arguments,k=this;if(!this.skipUpdates){clearTimeout(this.pendingControlsUpdateTimeout);delete this.pendingControlsUpdate;this.tearDownFilters();e=c("#js-browse-controls");l=c(jive.browse.filter.filters({filters:[f],appliedFilterIDs:d,sorts:h,appliedSortKey:g,urlParams:c.deparam.querystring(),urlPath:window.location.pathname,itemViewID:i}));l.find(".js-placeholder").each(function(){c(this).replaceWith(e.find(c(this).data("selector")))});e.replaceWith(l);this.recollapse();this.bindFilterHandlers();this.bindSortHandlers()}else{this.pendingControlsUpdate=function(){k.updateControls.apply(k,j)}}};a.pauseUpdates=function(e){var d=this.pendingControlsUpdate;this.skipUpdates=e;if(!e&&d){clearTimeout(this.pendingControlsUpdateTimeout);this.pendingControlsUpdateTimeout=setTimeout(d,333)}};a.updateSearchBox=function(d){var e=c(".j-browse-search");if(d&&d.searchable){e.show()}else{e.hide()}};a.initSearchBox=function(){var e=c("#js-browse-controls input[name=query]"),d=this;e.focus(function(){d.pauseUpdates(true)}).blur(function(){d.pauseUpdates(false)})};a.preventEnterSubmit=function(){c("#js-browse-controls").live("submit",function(d){d.preventDefault()})};a.initToggleFilter=function(f){var e=c(f).data("filter-id"),d=this;c(f).find("input").change(function(){var g=c(this).is(":checked")?c(this).val():[];d.emit("value",e,g)})};a.initBooleanFilter=function(f){var e=c(f).data("filter-id"),d=this;c(f).find("input").change(function(){d.emit("value",e,c(this).val())})};a.initTagFilter=function(f){var e=c(f).data("filter-id"),h=c(f).find("input"),d=this;var g=new b.TagAutocomplete(h,{objectTypes:this.objectTypes}).addListener("change",function(i){d.emit("value",e,i)}).addListener("focus",function(){d.pauseUpdates(true)}).addListener("blur",function(){d.pauseUpdates(false)});this.registerTeardown(function(){g.removeListener("change")})};a.initDateRange=function(i){var g=c(i).data("filter-id"),h=c(i).find("[name=min]"),e=c(i).find("[name=max]"),d=h.data("date")||"",j=e.data("date")||"",f=this;this.initDatePicker(h,function(k){d=k.date.getTime();f.emit("value",g,[d,j])});this.initDatePicker(e,function(k){j=k.date.getTime();f.emit("value",g,[d,j])})};a.initDatePicker=function(h,f){var e=c(h),i=e.attr("id"),g=e.data("date")?new Date(e.data("date")):null,d=this;Zapatec.Calendar.bootstrap({inputField:i,button:i+"_button",date:g,showsTime:false,step:1,onUpdate:f});kjs.require("Zapatec.Calendar",function(){if(g){c("#"+i).val(g.print(Zapatec.Calendar._TT.DEF_DATE_FORMAT))}})};a.registerTeardown=function(d){this.teardowns=this.teardowns||[];this.teardowns.push(d)};a.tearDownFilters=function(){(this.teardowns||[]).forEach(function(d){d()});this.teardowns=[]}});
;
jive.namespace("Filters");jive.Filters.SecondaryNavView=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(e,d,f){var c=this;this.$nav=b(e||"nav.j-second-nav");this.pinnedFilter=d;this.guest=f;this.$nav.delegate("a.js-select-link","click",function(j){var i=b(this),h=i.closest("li"),g=h.attr("data-filter-id");if(g){c.emitP("navSelect",[g]).addErrback(c.lastStateSwitcher())}j.preventDefault()});this.$nav.delegate(".js-clear-nav a","click",function(i){var j=c.$nav.find(".active_item"),g=j.attr("data-filter-id"),h=c.$nav.find(".active_nested_item").attr("data-filter-id");c.emitP("navSelect",[]).addErrback(c.lastStateSwitcher());i.preventDefault()});this.$nav.delegate("a.js-pin-link","click",function(k){if(!this.guest){var j=b(this);var h=c.$nav.find(".active_item");var g=h.data("filter-id");var i=h.find(".nav-label").text();c.emitP("setDefaultFilter",g).addCallback(function(){c.pinnedFilter=g;j.hide();b("<p/>",{text:jive.browse.filter.pinConfirmation({filterName:i})}).message({style:"success"})})}k.preventDefault()});b(function(){var h=c.$nav.find(".active_item");var g=b(jive.browse.filter.activeFilterGroupItem());if(g&&h.length>0){c.$nav.find("ul:first").append(g);g.css({top:h.position().top-1+"px"})}})};this.activate=function(c,d){if(this.active!=c){this.activateFilter(c);this.active=c}if(this.activeNestedFilter!=d){this.activateNestedFilter(d);this.activeNestedFilter=d}};a.activateFilter=function(f){var c=this.$nav.find('li.js-browse-filter-group-item[data-filter-id="'+f+'"]'),d=this.$nav.find(".active_item"),e=this.$nav.find(".js-pin-link");if(c.length>0){d.find("strong span").unwrap();c.find("span.nav-label").wrap("<strong/>");e.hide();d.removeClass("active_item");c.addClass("active_item");if(!this.guest&&(String(f)!=this.pinnedFilter)){e.show()}else{e.hide()}if(!jive.Filters.isLegacyBrowser()){this.getRibbon().animate({top:c.position().top+"px"},150)}else{this.getRibbon().css("top",c.position().top)}}};a.activateNestedFilter=function(d){var c=this.$nav.find('li.js-browse-filter-group-item[data-filter-id="'+d+'"]');this.$nav.find(".active_nested_item").removeClass("active_nested_item");if(d){c.addClass("active_nested_item")}this.$nav.find(".js-clear-nav").toggle(c.length>0)};a.getRibbon=function(){var c=this.$nav.find(".active");return c};a.lastStateSwitcher=function(){var f=this.$nav.find(".active_item"),d=f.attr("data-filter-id"),e=this.$nav.find(".active_nested_item").attr("data-filter-id"),c=this;return function(){c.activate(d,e)}}});
;
jive.namespace("Filters");jive.Filters.FilterGroup=jive.oo.Class.extend(function(a){var b=jive.Filters;function d(){return true}a.init=function(g,f){var e=this;this.filters=(jQuery.isArray(g)?g:[g]).filter(function(h){return !!h});this.predicate=f||d;if(this.filters.length>0){this.linkParents(this.filters)}};this.isEmpty=function(){return this.filters.length<1||this.getFilters().length<1};this.get=function(e){var f=typeof e=="string"?this.find(function(g){return g.id==e}):e;if(f){return f}else{throw"Could not find a browse filter with id, "+e}};a.getFilters=function(){return this.filters.filter(this.predicate)};this.getSorts=function(){var e=[];this.forEach(function(f){if(f.sorts&&f.sorts.length>0){e=f.sorts}});return e};this.getRoot=function(){var e=this.getFilters();if(e.length==1){return e[0]}else{if(e.length>1){throw"Cannot get the root of a filter group that has more than one root."}else{throw"Cannot get the root of an empty filter group."}}};this.getIDs=function(){var e=this;return this.map(function(f){return f.id})};this.getLeafIDs=function(){var e=this.predicate;return this.map(function(g){return g}).filter(function(f){return !f.children||f.children.every(function(g){return !e(g)})}).map(function(f){return f.id})};this.applied=function(g){var e=this,h=this.predicate,f;this.forEach(function(i){var j=e.valueExpression(i);if(j){g.forEach(function(l){var k=l.match(j);if(k){e.set(i,k[1].split("|"))}})}});f=this.find(function(i){return g.every(function(j){return e.parentOf(i,j)})});return new b.FilterGroup(f,function(i){return h(i)&&g.some(function(j){return e.parentOf(i,j)})})};this.forEach=function(g,f){var e=this;(f||e.filters).forEach(function(h){if(e.predicate(h)){g(h)}});(f||e.filters).forEach(function(h){if(h.children&&e.predicate(h)){e.forEach(g,h.children)}})};this.find=function(e){var f;this.forEach(function(g){if(!f&&e(g)){f=g}});return f};this.map=function(f){var e=[];this.forEach(function(g){e.push(f(g))});return e};this.filter=function(e){var f=this.predicate;return new b.FilterGroup(this.filters,function(g){return e(g)&&f(g)})};this.some=function(e){var f=false;this.forEach(function(g){if(e(g)){f=true}});return f};this.every=function(e){return !this.some(function(f){return !e(f)})};this.parentOf=function(g,f){var e=this;if(g.id==f){return true}else{if(g.children){return g.children.some(function(h){return e.parentOf(h,f)})}else{return false}}};this.childOf=function(f,g){var e=this.get(g);return this.parentOf(e,f.id)};this.set=function(f,h){var j=this.predicate,e=new b.FilterGroup(this.filters,function(k){return j(k)||e.parentOf(k,f)}),g=e.get(f),i={type:"simple",id:this.idWithValue(g,h),exclusive:true};if(h&&h.length>0){i.parent=g;if(!g.children){g.children=[]}if(!g.children.some(function(k){return k.id==i.id})){g.children.push(i)}return new b.FilterGroup(this.filters,function(k){return(j(k)||e.parentOf(k,i.id))&&(!k.parent||k.parent.id!=g.id||k.id==i.id)})}else{return this.unset(f)}};this.unset=function(e){var f=this.predicate;return new b.FilterGroup(this.filters,function(g){return f(g)&&(!g.parent||g.parent.id!=e)})};this.objectTypes=function(){var e=this.map(function(g){return g.objectTypes}).filter(function(g){return g&&g.length>0});var f=e.reduce(function(g,h){return g.concat(h)},[]).unique();return f.filter(function(g){return e.every(function(h){return h.indexOf(g)>=0})})};var c=/\[([^\[]*)\]$/;a.idWithValue=function(f,h){var e,g,i=this.valueExpression(f);h=jQuery.isArray(h)?h.join("|"):h;if(f.id.match(c)){e=f.id.match(c)[1];g=f.id+"~"+e+"["+h+"]"}else{g=f.id+"["+h+"]"}if(g&&g.match(i)){return g}else{throw"An error occurred applying a dynamic value: "+f.id+", "+h}};a.linkParents=function(f){var e=this;f.forEach(function(g){(g.children||[]).forEach(function(h){h.parent=g;e.linkParents([h])})})};a.valueExpression=function(e){this.expressions=this.expressions||{};var f=this.expressions[e.id];if(!f&&e.valueExpression){f=new RegExp(e.valueExpression);this.expressions[e.id]=f}return f}});
;
jive.namespace("Filters");jive.Filters.Main=jive.Paginated.extend(function(b){var c=jive.Filters,e;jive.conc.observable(this);b.init=function(g){var f=this;this.extraParams=g.extraParams;this.guest=g.guest;this.targetUserID=g.targetUserID;this.browseViewID=g.browseViewID;this.archetypeID=g.archetypeID||this.browseViewID;this.token=g.token||"";this.initPagination(jQuery.extend({},g.extraParams,{filterID:g.filterGroup.defaultFilterID,itemView:g.itemViewID,userID:g.targetUserID,numResults:g.pageSize}),{locationState:g.locationState,viewClass:g.viewClass,scrollTo:".j-bigtab-nav"});this.itemSource=g.itemSource;this.userPrefSource=g.userPrefSource;this.filterGroup=new c.FilterGroup(g.filterGroup.filters);this.filterView=new c.FilterView({objectTypes:this.filterGroup.applied(this.getState().filterID).objectTypes()});this.listView=new (g.itemGridClass||c.ItemGridView)({itemViewID:g.itemViewID,noResults:g.noResults,archetypeID:g.archetypeID});this.navView=new c.SecondaryNavView(null,g.filterGroup.defaultFilterID,g.guest);this.searchView=new jive.TypeaheadInput("#js-browse-controls input[name=query]",{delay:700,minLength:2});this.navView.addListener("navSelect",function(h,k){var i=f.filterGroup.applied(f.getState().filterID),j=h.filter(function(m){var l=i.find(function(n){return n.id==m});return !(l&&l.nested)});f.pushState({filterID:j,start:e,sortKey:e,sortOrder:e,containerType:e,containerID:e,query:e}).addErrback(function(){k.emitError()})});this.filterView.addListener("applyFilters",function(h){f.applyFilters(h)});this.navView.addListener("setDefaultFilter",function(h,i){f.saveDefaultFilterSetting(h);i.emitSuccess()});this.filterView.addListener("value",function(h,m){var j=f.getState().filterID,k=f.filterGroup.applied(j),l=k.unset(h),i=f.sortFilters(l.getLeafIDs()),n=k.set(h,m);f.pushState({filterID:f.sortFilters(n.getLeafIDs(),i),start:e})});this.filterView.addListener("applySort",function(h,i){f.pushState({sortKey:h,sortOrder:i,start:e})});this.listView.addListener("toggleItemView",function(h){f.saveItemViewSetting(h)});this.searchView.addListener("change",function(h){f.pushState({query:h,start:e})});this.searchView.addListener("clear",function(){f.pushState({query:e,start:e})})};b.applyFilters=function(g){var f=this;f.pushState({filterID:f.mergeFilters(g),start:e})};b.loadPage=function(j,l){var h=this.getContent(j),g=this.filterGroup.applied(j.filterID),k=g.getRoot(),i=new jive.conc.Promise(),f=this;if(this.lastLoadPagePromise){this.lastLoadPagePromise.cancel()}if(this.lastDataReadyPromise){this.lastDataReadyPromise.cancel()}this.lastLoadPagePromise=i;this.lastDataReadyPromise=h;if(j.itemView){f.listView.setItemViewID(j.itemView)}f.navView.activate(k.id,g.map(function(m){return m}).filter(function(m){return m.nested}).map(function(m){return m.id})[0]);h.addCallback(function(m){f.dataReadyCallback(j,i,m)}).addErrback(function(){i.emitError()});if(l||this.navChanged(k,j)){this.listView.update(h)}else{this.listView.updateWithMerge(h)}return i};b.dataReadyCallback=function(l,k,i){var g=this;delete g.lastLoadPagePromise;delete g.lastDataReadyPromise;if(i.filters){g.filterGroup=new c.FilterGroup(i.filters)}i.browseViewID=g.browseViewID;var f=g.filterGroup.applied(l.filterID),m=f.getRoot(),j=g.sortFilters(f.getIDs()),h=f.getSorts();k.emitSuccess(i.pageNumber,i.pageNumber+(i.hasNext?1:0));g.searchView.val(l.query||"");g.filterView.setObjectTypes(f.objectTypes());g.filterView.render(m,j,i.sortKey||l.sortKey,h,i.itemViewID);g.emit("navSelect",m.id);g.toggleRSSLink(true);g.bindRSSLink(l)};b.getContent=function(i){var f=this;var g=this.getState().itemView;var h=new jive.conc.Promise();this.itemSource.findAll(jQuery.extend({filterGroupID:this.browseViewID,token:f.token,itemViewID:g},i)).addCallback(function(k){f.token=k.token;var j=f.filterGroup.applied(f.getState().filterID),l=j.getRoot();if(k.prop&&k.prop.resultCounts){a(k.prop.resultCounts,l)}if(!k.itemViewModified||!k.itemViewID){h.emitSuccess($j.extend(k,{itemViewID:g}))}else{h.emitSuccess(k)}}).addErrback(function(){h.emitError.apply(h,arguments)});return h};function a(g,f){if(g.hasOwnProperty(f.id)){f.resultCount=g[f.id]}if(f.children){$j.each(f.children,function(h,j){a(g,j)})}}b.removeGridItem=function(g){var f=this;if(!f.listView.removeItem(g)){f.loadPage(f.getState(),false).addCallback(function(h){f.listView.removeItem(g)})}};b.saveItemViewSetting=function(g){if(this.browseViewID){var f="browse."+this.archetypeID+".itemviewtoggle";if(!this.guest){this.userPrefSource.setUserProperty({userID:"current",propName:f,propValue:g})}this.pushState({itemView:g})}else{throw"No browseViewID option has been specified for this view."}};b.saveDefaultFilterSetting=function(g){if(this.browseViewID){if(!this.guest){var f="browse."+this.browseViewID+".defaultfilter";this.userPrefSource.setUserProperty({userID:"current",propName:f,propValue:g})}}else{throw"No browseViewID option has been specified for this view."}};b.navChanged=function(g,k){var h=this.navTab,j=this.lastPage,i=this.lastItemView,f;if(!h||typeof j=="undefined"||!i){f=this.normalized(this.lastState);h=this.filterGroup.applied(f.filterID).getRoot().id;j=f.start;i=f.itemView}this.navTab=g.id;this.lastPage=k.start;this.lastItemView=k.itemView;return h!=g.id||j!=k.start||i!=k.itemView};b.mergeFilters=function(j){var f=this.getState().filterID,i=this.filterGroup.applied(f),m=i.getRoot().children.filter(function(o){return !o.nested&&o.exclusive}).map(function(o){return o.id})[0],k=(j.add||[]).filter(function(o){return o!=m}),h=(j.remove&&j.remove.length>0)?i.filter(function(o){return j.remove.every(function(p){return o.id!=p})}):i,n=this.sortFilters(h.getLeafIDs()),l=this.filterGroup.applied(f.concat(k)),g=(j.remove&&j.remove.length>0)?l.filter(function(o){return j.remove.every(function(p){return o.id!=p})}):l;return this.sortFilters(g.getLeafIDs(),n)};function d(j,h,f){var g=h.indexOf(j),i;if(g>-1){return g}else{i=(h.map(function(l,k){return[f.get(l),k]}).filter(function(l){var k=l[0];return f.parentOf(k,j)||f.childOf(k,j)})[0]||[])[1];return typeof i!="undefined"?i:999}}b.sortFilters=function(g,h){h=h||this.getState().filterID;var f=this.filterGroup;return g.sort(function(j,i){var l=d(j,h,f),k=d(i,h,f);return l-k})};b.toggleRSSLink=function(f){if(f){jQuery(".js-rss-link").show()}else{jQuery(".js-rss-link").hide()}};b.bindRSSLink=function(i){var g={userID:i.userID,containerType:i.containerType,containerID:i.containerID,query:i.query,filterID:i.filterID};var h=$j(".js-content-feed-link[data-base-url]");var f;if(h.length>0){f=$j.param.querystring(h.data("base-url"),g);$j(".js-content-feed-link").attr("href",f)}}});jive.Filters.isLegacyBrowser=function(){var a=$j.browser.msie,b=parseInt($j.browser.version)<8;return !!(a&&b)};
;
jive.namespace("Filters");jive.Filters.RecommendedView=jive.AbstractView.extend(function(a){this.update=function(c,d){var b=$j("#j-browse-item-grid").html("");$j("#js-browse-controls").hide();d.addCallback(function(f){var h={items:f};if(c!="people"){h.header=c==="content"?"jive.browse.content.detailContentHeader":"jive.browse.container.detailContainerHeader"}else{var e={latestActivity:true};function g(j){this[j].columns=e}$j.each(f.trendingContent,g.bind(f.trendingContent));$j.each(f.recommendations||[],g.bind(f.recommendations||[]));h.columnDetails=e;h.header="jive.browse.user.detailUserHeader"}b.html(jive.browse.grid.jiveGenius(h))})}});
;
jive.namespace("Filters");jive.Filters.RecommendedContent=jive.Filters.Main.extend(function(a){var b=jive.Filters;a.init=function(c){this._super.apply(this,arguments);this.recommendedView=new b.RecommendedView();var d=this.getState();if(Object.keys(jive.locationState.getEphemeralState()).length===0&&this.recommendedFilterApplied(d)){this.loadRecommendedPage(d)}};a.loadPage=function(c,d){if(this.recommendedFilterApplied(c)){return this.loadRecommendedPage(c)}else{return this._super(c,d)}};a.loadRecommendedPage=function(h){var c=this.filterGroup.applied(h.filterID);var e=new jive.RecommendationApp.RecommendationModel(),f={content:e.getContentRecommendations,places:e.getPlaceRecommendations,people:e.getPeopleRecommendations},i=this.navView.activate.bind(this.navView,c.getRoot().id),d=h.numResults,g=f[this.browseViewID].call(e,d,d).addCallback(i);this.recommendedView.update(this.browseViewID,g);this.toggleRSSLink(false);return g};a.recommendedFilterApplied=function(d){var c=this.filterGroup.applied(d.filterID);return c.some(function(e){return e.simpleName=="RecommendedFilter"})}});
;
jive.namespace("OrgChart");jive.OrgChart.OrgChartView=jive.AbstractView.extend(function(a){var b=jQuery;this.init=function(){var c=this;this.linkDirectReportCounts();c.addModal=new jive.Modalizer.Main({liveTriggers:["a.js-add-org-relationship"],onClose:function(){c.emit("create")}});b("#j-browse-item-grid").delegate(".js-del-org-relationship","click",function(f){var d=$j(this).data("relationship-id");c.emit("retire",d);f.preventDefault()})};this.linkDirectReportCounts=function(){var c=this,d=b("#jive-orgchart-directreport-hover");b("span.jive-orgchart-drpt-count").find("a").hover(function(){var f=b(this);var e=f.parent().parent().find("a[data-userid]").attr("data-userid");if(e){c.emitP("showDirectReports",e).addCallback(function(g){if(g){d.html(jive.people.directReportHover(g));d.popover({context:f})}})}},function(){d.hide()})};this.update=function(e){var c=this,d=b("#j-browse-item-grid");b("#j-browse-filters").parent().hide();b(".j-loading-bg").fadeIn(200);e.addCallback(function(g){if(g){var f=jive.people.orgChartBody(b.extend({},g,{itemViewID:c.itemViewID}));d.html(f);c.linkDirectReportCounts()}}).always(function(){b(".j-loading-bg").fadeOut(200)})}});
;
jive.namespace("OrgChart");jive.OrgChart.Main=jive.Filters.Main.extend(function(a){var b=jive.OrgChart;this.init=function(d){this._super(d);var c=this;this.orgChartView=new b.OrgChartView();c.relSource=new jive.UserRelationshipSource();c.orgChartView.addListener("create",function(){c.loadPage(c.getState(),true)});c.orgChartView.addListener("retire",function(e){c.relSource.orgRetire(e).addCallback(function(){c.loadPage(c.getState(),true)})});this.orgChartView.addListener("showDirectReports",function(e,f){this.itemSource.getDirectReports({userID:e}).addCallback(function(g){f.emitSuccess(g)})})};a.loadPage=function(e){var d=this.filterGroup.applied(e.filterID),g=d.getRoot(),f,c=this;if(d.some(function(h){return h.simpleName=="OrgChartFilter"})){f=this.itemSource.findAllOrgChart({userID:c.targetUserID});f.addCallback(function(h){c.navView.activate(g.id)});this.orgChartView.update(f);return f}else{return this._super.apply(this,arguments)}}});
;
jive.namespace("Filters");jive.Filters.ActivityTimePagination=jive.Filters.Main.extend(function(a){var b=jQuery,c;a.init=function(e){this.pageReferences={};this.emptyPageReference={activityTime:c};this._super.apply(this,arguments);this.setPageReferences({items:{length:e.numResults},pageNumber:e.pageNumber,paginationStrategy:e.paginationStrategy,activityTime:e.activityTime})};a.setPageReferences=function(f){var e=f.items.length,g=f.pageNumber,h=this.pageToStart(g,e);if(f.paginationStrategy=="time"&&f.activityTime){this.pageReferences[h+e]={activityTime:f.activityTime}}};a.getPageReference=function(e){return this.pageReferences[e]||this.emptyPageReference};a.getContent=function(h){var f,g,e=this;if(this.historyView(h.filterID)){f=b.extend({},h,this.getPageReference(h.start));g=this._super(f)}else{g=this._super(h)}g.addCallback(function(i){e.setPageReferences(i)});return g};var d=/historyarchetype\[.+\]/;a.historyView=function(e){if(typeof e=="string"){return Boolean(e.match(d))}else{return e.some(function(f){return f.match(d)})}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}jive.people.orgChartBody=function(I,K){var F=K||new soy.StringBuilder();F.append('<!-- BEGIN orgChart block --><div id="jive-org-relationship">');var L=I.escalationChain;var A=L.length;for(var E=0;E<A;E++){var J=L[E];F.append('<ul><li><span class="jive-org-manager">');jive.people.orgChartNode({user:J,showOrgChartLink:true,directReportsPopover:false},F);F.append("</span>")}F.append((I.peers&&I.peers.length>0)?'<ul class="jive-org-expanded jive-org-view-peers">':'<ul class="jive-org-expanded jive-org-view-nopeers">',(I.escalationChain&&I.escalationChain.length>0)?'<li class="jive-org-active-user">':'<li class="jive-org-active-user-toplevel">','<div class="j-orgchart-active"><table cellpadding="0" cellspacing="0"><tr valign="top"><td class="jive-org-profile-image"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(I.targetUser.username)+"/profile")),'">',(I.targetUser.prop.profileImage&&!I.targetUser.prop.profileImage["default"]&&I.targetUser.prop.profileImage.url)?'<img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,I.targetUser.prop.profileImage.url))+'" alt="" width="320" border="0" class="jive-avatar-large"/>':'<img src="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/images/jive-profile-default-portrait.png"))+'" alt="" width="320" border="0"/>','</a></td><td class="jive-org-profile-description">');jive.people.profile.main({user:I.targetUser,showOrgChartLink:true,hidePrimaryURL:true,hideAddress:true,hideExtras:true},F);F.append('<a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(I.targetUser.username)+"/profile")),'" ',(I.viewingSelf)?" rel='me'":"  rel='co-worker'",">",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.view_profile.link"),[])),"</a>");if(I.targetUser.prop.orgchartModLink&&I.targetUser.prop.orgchartModLink.enabled){jive.people.manualModLinks(soy.$$augmentData(I.targetUser.prop.orgchartModLink,{targetUserID:I.targetUser.id}),F)}F.append("</td></tr></table></div>");if(I.directReports&&I.directReports.length>0){F.append("<h4>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.org.ReportsTo.gtitle"),[I.targetUser.displayName])),'</h4><ul class="jive-org-direct-reports">');var D=I.directReports;var B=D.length;for(var R=0;R<B;R++){var S=D[R];F.append("<li>");jive.people.orgChartNode({user:S,showOrgChartLink:true,directReportsPopover:false},F);F.append("</li>")}F.append("</ul>")}F.append("</li>");if(I.peers&&I.peers.length>0){F.append('<li class="jive-org-same-lvl"><h4>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.org.AlsoReportsTo.gtitle"),[I.manager.displayName])),"</h4><div><ul>");var N=I.peers;var G=N.length;for(var M=0;M<G;M++){var H=N[M];F.append("<li>");jive.people.orgChartNode({user:H,showOrgChartLink:true,directReportsPopover:false},F);F.append("</li>")}F.append("</ul></div></li>")}F.append("</ul>");var C=I.escalationChain;var O=C.length;for(var P=0;P<O;P++){var Q=C[P];F.append("</li></ul>")}F.append('</div><div id="jive-orgchart-directreport-hover" style="display:none"></div>');if(!K){return F.toString()}};jive.people.orgChartNode=function(A,C){var B=C||new soy.StringBuilder();jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:"24"}),B);jive.shared.displayutil.userDisplayNameLink(A.user,B);B.append((A.user.prop.title)?'<span class="font-color-meta"> '+soy.$$escapeHtml(A.user.prop.title)+"</span> ":"",(A.user.prop.directReportCount>0)?'<span class="jive-orgchart-drpt-count font-color-meta">('+((A.directReportsPopover)?'<a href="#">':"")+soy.$$escapeHtml(A.user.prop.directReportCount)+" "+((A.user.prop.directReportCount>1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.org.drpt.pl"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.org.drpt"),[])))+((A.directReportsPopover)?"</a>":"")+")</span>":"",(A.showOrgChartLink)?' <span class="jive-orgchart-recenter font-color-meta">(<a href="'+jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.user.username)+"/orgchart")+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.org.view-orgchart.link"),[]))+"</a>)</span>":"");if(!C){return B.toString()}};jive.people.directReportHover=function(C,G){var D=G||new soy.StringBuilder();D.append("<ul>");var F=C.items;var B=F.length;for(var A=0;A<B;A++){var E=F[A];D.append("<li>");jive.people.orgChartNode({user:E,showOrgChartLink:false},D);D.append("</li>")}D.append("</ul>");if(!G){return D.toString()}};jive.people.manualModLinks=function(A,C){var B=C||new soy.StringBuilder();B.append("<div>",(A.addLinkShown)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/add-relationship!input.jspa")+"?"+encodeURIComponent("graph")+"="+encodeURIComponent(A.graphID)+"&"+encodeURIComponent("viewType")+"="+encodeURIComponent(A.addLinkViewType)+"&"+encodeURIComponent("targetUser")+"="+encodeURIComponent(A.targetUserID))+'" class="js-add-org-relationship">'+((A.managerRelationshipType)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.rel.add.mgr"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.rel.add.drpt"),[])))+"</a>":(A.pending)?(A.managerRelationshipType)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.rel.pnd.mgr"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.rel.pnd.drpt"),[])):(A.removeLinkShown)?'<a href="#" class="js-del-org-relationship" data-relationship-id="'+soy.$$escapeHtml(A.relationshipID)+'">'+((A.managerRelationshipType)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.rel.del.mgr"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.gr.rel.del.drpt"),[])))+"</a>":"","</div>");if(!C){return B.toString()}}
;
jive.namespace("UserRelationshipList");jive.UserRelationshipList.PeopleConnectionsLabelView=jive.AbstractView.extend(function(a){var b=jQuery;this.init=function(c,e,g){var d=this;this.active=true;d.bidirectionalConnections=e;var f=$j("#j-relationship-label-list li.js-label-create-item");f.find("a").click(function(h){var i=$j("#j-relationship-label-list li.js-label-input-item");if(i.length==0){f.before(jive.people.relationshipLabelInput({}));d.attachColorPicker()}f.prev().find("input:text").select();f.hide();h.preventDefault()});b("#j-relationship-label-list").delegate("li.j-label-item","mouseover mouseout",function(h){if(h.type=="mouseover"){$j(this).find(".j-label-actions").show()}else{$j(this).find(".j-label-actions").hide()}h.preventDefault()});b("#j-relationship-label-list").delegate("a.js-edit-link","click",function(j){d.cancelEdit($j("#j-relationship-label-list li.js-label-input-item"));var i=$j(this).parents("li:first");var h={listID:i.attr("data-list-id"),filterID:i.attr("data-filter-id"),memberCount:i.data("member-count"),css:d.colorToHexString(i.find(".j-label-css").css("background-color")),name:i.find(".j-label-name").text()};i.replaceWith(jive.people.relationshipLabelInput(h));d.attachColorPicker();b("#j-relationship-label-list li.js-label-input-item").find(".js-color-sample").css("background-color","#"+h.css);b("#js-create-label-input").focus();j.preventDefault()});b("#j-relationship-label-list").delegate("li.js-label-input-item form","submit",function(h){var n=b(this).closest("li");var r=n.attr("data-list-id");var o=n.attr("data-filter-id");var l=n.data("member-count");var i=n.find("input[name='labelName']").val();var k=d.colorToHexString(n.find("input[name='css']").val());if(!i||!k){$j("<p/>").html(g.errMsg).message({style:"error"})}else{var p={name:i,css:k};if(!o){var j=$j("#j-relationship-label-list");var q=j.closest("li").attr("data-filter-id");var m=j.attr("data-child-id-pattern");d.emitP("labelCreated",p,q,m).addCallback(function(s){p=s;n.replaceWith(jive.people.relationshipLabel(p))})}else{p=$j.extend({},p,{id:r,listID:r});d.emitP("labelUpdated",p).addCallback(function(){p=$j.extend({},p,{filterID:o,memberCount:l});n.replaceWith(jive.people.relationshipLabel(p))})}f.show()}h.preventDefault()});b("#j-relationship-label-list").delegate("li.js-label-input-item input.js-cancel-link","click",function(){d.cancelEdit($j(this).parents("li:first"));f.show()});b("#j-relationship-label-list").delegate("a.js-del-link","click",function(l){if(confirm(g.delMsg)){var h=$j(this).parents("li:first");var k=$j(h);var j=k.attr("data-list-id");var i=k.attr("data-filter-id");var m=k.closest("li.j-browse-filter-group-item").attr("data-filter-id");if(j!=null){d.emitP("labelRemoved",j,i,m).addCallback(function(){h.remove()})}}l.preventDefault()});b("#j-relationship-label-list").delegate("li.j-label-item a.js-select-link","click",function(){var i=$j(this).closest("li");var h=i.attr("data-list-id");d.refreshFeedLink({listID:h,bidirectionalConnections:this.bidirectionalConnections})});$j("li.j-browse-filter-group-item").click(function(){d.refreshFeedLink({bidirectionalConnections:this.bidirectionalConnections})})};this.cancelEdit=function(f){var e=f.attr("data-list-id");var c=f.data("member-count");if(e){var d={listID:e,filterID:f.attr("data-filter-id"),name:f.attr("data-name"),css:f.attr("data-css"),memberCount:c};f.replaceWith(jive.people.relationshipLabel(d))}else{f.remove()}};this.attachColorPicker=function(){var d=$j("#j-relationship-label-list li.js-label-input-item");var c=d.find("input[name='css']");this.createColorInput(c)};this.activate=function(){$j("#j-relationship-label-list").show();$j("#j-friend-feed-link").show();this.active=true};this.passivate=function(){$j("#j-relationship-label-list").hide();$j("#j-friend-feed-link").hide();this.active=false};this.isActive=function(){return this.active};this.incrementLabelCount=function(e){var c=$j("#j-relationship-label-list li.j-label-item[data-list-id='"+e+"']");c.removeClass("empty");var d=c.data("member-count")+1;c.data("member-count",d);c.find(".js-member-count").text(d)};this.decrementLabelCount=function(e){var c=$j("#j-relationship-label-list li.j-label-item[data-list-id='"+e+"']");var d=c.data("member-count")-1;d=d>=0?d:0;c.data("member-count",d);c.find(".js-member-count").text(d);if(!d){c.addClass("empty")}};this.refreshFeedLink=function(c){$j("#j-friend-feed-link").replaceWith(jive.people.friendFeedLink(c))};a.rgb=/rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/;a.hash=/^#/;a.colorToHexString=function(c){var d=c.match(this.rgb);if(d){return d.slice(1).map(function(f){var e=parseInt(f,10).toString(16);return e.length>1?e:"0"+e}).join("")}else{return c.replace(this.hash,"")}};this.createColorInput=function(f){var c="ba0101,f2839d,fa8101,fef002,1ebb00,005ebb,9e13aa,9b9b9b,000000",h=$j("<div class='j-color-sample js-color-sample'><a href='#' class='j-ui-elem'></a></div>"),e=$j("<div id='js-color-picker' class='j-color-picker'></div>");b.each(c.split(","),function(i,j){e.append(b("<a href='javascript:;' class='j-rc3'></a>").css({backgroundColor:"#"+j}).click(function(k){f.val("#"+j);g();e.trigger("close");$j("#js-create-label-input").select();k.preventDefault()}))});if(!f.val()){f.val("#"+c.split(",")[Math.floor(Math.random()*c.split(",").length)])}g();f.click(function(i){d($j(this));i.preventDefault()}).change(g).keyup(g);h.click(function(i){d($j(this));i.preventDefault()});f.after(e.hide()).after(h);f.parents(".properties").click(function(i){e.trigger("close");i.preventDefault()});function g(){h.css("background-color",f.val())}function d(i){if(!e.is(":visible")){e.find("a").show();e.popover({context:i,darkPopover:true,destroyOnClose:false,putBack:true,beforeClose:function(){e.find("a").css("left","8px");e.width(e.find("a:first").outerWidth()+"px")},onLoad:function(){var n=e.find("a:first"),j=n.outerWidth(),l=parseInt(n.css("margin-right"),10),k=e.find("a").length,m=parseInt(n.css("left"),10);e.find("a").each(function(){$j(this).animate({left:m+($j(this).index()*(j+l))},200)});e.animate({width:k*(j+l)},200)}}).closest(".j-popover").addClass("j-popme-small")}}}});
;
jive.namespace("UserRelationshipList");jive.UserRelationshipList.Main=jive.Filters.Main.extend(function(a){this.init=function(c){this._super(c);var b=this;b.labelSource=new jive.UserRelationshipListSource();b.peopleLabelView=new jive.UserRelationshipList.PeopleConnectionsLabelView(c.labelLists,c.bidirectionalConnections,c.i18n);this.manageLabelView(this.filterGroup.applied(this.getState().filterID).getIDs());this.peopleLabelView.addListener("labelCreated",function(d,g,e,f){b.labelSource.save(d).addCallback(function(h){h.filterID=e.replace(/\\/g,"").replace(/\(\.\*\)/g,h.listID);var i=b.filterGroup.get(g);i.children.push({id:h.filterID,parentID:g,description:d.name,css:d.css,type:"simple",nested:true,listID:h.listID,memberCount:0,searchable:true,objectTypes:[],sorts:[],descriptionArgs:null,exclusive:true});jive.switchboard.emit("userlabel.created",jQuery.extend({},d,{listID:h.listID}));f.emitSuccess(h)})});this.peopleLabelView.addListener("labelUpdated",function(d,e){b.labelSource.save(jQuery.extend(d,{id:d.listID})).addCallback(function(f){jive.switchboard.emit("userlabel.updated",jQuery.extend({},d,f));e.emitSuccess(f);b.loadPage(b.getState(),true)})});this.peopleLabelView.addListener("labelRemoved",function(e,d,g,f){b.labelSource.destroy(e).addCallback(function(h){jive.switchboard.emit("userlabel.removed",{id:e});f.emitSuccess(h);b.loadPage(b.getState(),true)});if(d==b.getState().filterID){b.pushState({filterID:b.mergeFilters({remove:d})})}});jive.switchboard.addListener("userlabel.applied",function(e,d){b.peopleLabelView.incrementLabelCount(e.id)});jive.switchboard.addListener("userlabel.unapplied",function(f,e){b.peopleLabelView.decrementLabelCount(f.id);var d=b.getState().filterID;if(d.length>0&&d[0].indexOf("following~label["+f.id+"]")==0){b.removeGridItem({id:e,type:3})}});jive.switchboard.addListener("unfollow.user",function(d){if(b.peopleLabelView.isActive()){if(d.labelIDs){d.labelIDs.forEach(function(e){b.peopleLabelView.decrementLabelCount(e)})}}b.loadPage(b.getState(),false)})};a.loadPage=function(b,c){this.manageLabelView(b.filterID);return this._super.apply(this,arguments)};a.manageLabelView=function(b){if(b.some(function(c){return c.indexOf("following")>=0})){this.peopleLabelView.activate()}else{this.peopleLabelView.passivate()}}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}jive.people.relationshipLabels=function(A,G){var C=G||new soy.StringBuilder();C.append('<ul id="j-relationship-label-list" class="j-labels js-relationship-label-list"',(A.childIDPattern)?'data-child-id-pattern="'+soy.$$escapeHtml(A.childIDPattern)+'"':"",(A.hidden)?'style="display:none"':"",">");if(A.filters){var F=A.filters;var E=F.length;for(var B=0;B<E;B++){var D=F[B];if(D.nested){jive.people.relationshipLabel({listID:D.listID,filterID:D.id,name:D.description,css:D.css,memberCount:D.memberCount,appliedFilterIDs:A.appliedFilterIDs},C)}}}C.append('<li class="js-label-create-item j-label-create-item clearfix"><a class="j-social-button j-ui-elem" href="#"><span class="j-ui-elem"><span class="jive-icon-sml jive-glyph-plus"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.people.conx.label.create"),[])),"</span></a></li></ul>");if(!G){return C.toString()}};jive.people.relationshipLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="j-label-item js-browse-filter-group-item',(!A.memberCount)?" empty":"",(A.appliedFilterIDs&&A.appliedFilterIDs.indexOf(A.filterID)>-1)?" active_nested_item":"",' j-rc3" data-list-id="',soy.$$escapeHtml(A.listID),'" data-filter-id="',soy.$$escapeHtml(A.filterID),'" data-member-count="',(!A.memberCount)?"0":soy.$$escapeHtml(A.memberCount),'"><span class="j-label-css j-label-dot j-rc7" style="background-color:#',soy.$$escapeHtml(A.css),'"></span><a class="js-select-link" href="#"><span class="j-label-name">',soy.$$escapeHtml(A.name),'</span></a> <span class="j-member-count"><strong class="font-color-meta">(<span class="js-member-count">',(!A.memberCount)?"0":soy.$$escapeHtml(A.memberCount),'</span>)</strong></span><span class="j-label-actions j-rc3"><a class="js-edit-link j-label-item-edit" href="#"><span class="jive-icon-sml jive-glyph-edit" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.editlabel.text"),[])),'"></span> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.editlabel.text"),[])),'</a><a class="js-del-link j-label-item-delete" href="#"><span class="jive-icon-sml jive-glyph-delete" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.deletelabel.text"),[])),'"></span> ',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.deletelabel.text"),[])),"</a></span></li>");if(!C){return B.toString()}};jive.people.relationshipLabelInput=function(A,C){var B=C||new soy.StringBuilder();B.append("<li ",(A.listID)?'data-list-id="'+soy.$$escapeHtml(A.listID)+'"':"",(A.filterID)?'data-filter-id="'+soy.$$escapeHtml(A.filterID)+'"':"",'data-member-count="',(!A.memberCount)?"0":soy.$$escapeHtml(A.memberCount),'"',(A.css)?'data-css="'+soy.$$escapeHtml(A.css)+'"':"",(A.name)?'data-name="'+soy.$$escapeHtml(A.name)+'"':"",'class="j-form j-label-create-item js-label-input-item"><form><div class="j-label-row clearfix"><input type="hidden" name="css" ',(A.css)?'value="#'+soy.$$escapeHtml(A.css)+'"':"",'/><input type="text" name="labelName" size="8" ',(A.name)?'value="'+soy.$$escapeHtml(A.name)+'"':"",'value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.newlabel"),[])),'" id="js-create-label-input" /></div><div class="j-label-buttons clearfix"><input class="js-save-link j-btn-callout" type="submit" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.save"),[])),'"/><input class="js-cancel-link" type="button" value="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.cancel"),[])),'"/></div></form></li>');if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.guest=="undefined"){jive.guest={}}if(typeof jive.guest.page=="undefined"){jive.guest.page={}}jive.guest.page.loginTip=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="j-guest-tip j-guest-tip-browse-ui jive-info-box j-rc5">');if(A.accountCreationEnabled){jive.shared.soy.i18nHelper({i18nKey:A.i18nKey,arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"login.jspa"))+'" rel="IDS_login">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.guesttip.login"),[]))+"</a>",noAutoEscape:"true"},B);B.append("&nbsp;");if(A.validationEnabled){jive.shared.soy.i18nHelper({i18nKey:"browse.guesttip.joinnow",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"login.jspa?registerOnly=true"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.guesttip.join"),[]))+"</a>",noAutoEscape:"true"},B)}else{jive.shared.soy.i18nHelper({i18nKey:"browse.guesttip.joinnow",arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"create-account.jspa"))+'">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.guesttip.join"),[]))+"</a>",noAutoEscape:"true"},B)}}else{jive.shared.soy.i18nHelper({i18nKey:A.i18nKey,arg0:'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"login.jspa"))+'" rel="IDS_login">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.guesttip.login"),[]))+"</a>",noAutoEscape:"true"},B)}B.append("</div>");if(!C){return B.toString()}}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.people=="undefined"){jive.people={}}jive.people.main=function(A,C){var B=C||new soy.StringBuilder();B.append("<head><title>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.browse"),[]))," - ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.people.all.title"),[])),'</title><meta name="nav.active.link" content="jive-nav-link-browse" /></head><body class="j-body-yourconnections">');jive.nav.browseSubNav({links:A.subNavLinks,selectedLinkID:"jive-nav-link-conx"},B);B.append('<!-- BEGIN main body --><header class="j-page-header"></header>');jive.people.body(A,B);B.append("<!-- END main body --></body>");if(!C){return B.toString()}};jive.people.body=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"$j(document).ready( function() {var userSource = new jive.Browse.User.ItemSource(); var options = {itemSource: userSource, userPrefSource: new jive.Browse.User.ItemSource(), browseViewID: '"+soy.$$escapeJs(A.browseViewID)+"', archetypeID: '"+soy.$$escapeJs(A.archetypeID)+"', guest: "+soy.$$escapeHtml(A.guest)+", targetUserID: '"+soy.$$escapeHtml(A.targetUserID)+"', filterGroup: "+JSON.stringify(A.filterGroup).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", itemViewID: '"+soy.$$escapeJs(A.itemsView.itemViewID)+"', numResults: "+soy.$$escapeJs(A.itemsView.items.length)+", pageSize: "+soy.$$escapeJs(A.itemsView.pageSize)+", pageNumber: "+soy.$$escapeJs(A.itemsView.pageNumber)+", paginationStrategy: '"+soy.$$escapeJs(A.itemsView.paginationStrategy)+"', activityTime: "+((A.itemsView.activityTime)?soy.$$escapeJs(A.itemsView.activityTime):"0")+", token: '"+soy.$$escapeHtml(A.itemsView.token)+"', labelLists: "+JSON.stringify(A.labelLists).replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+", bidirectionalConnections: "+soy.$$escapeHtml(A.bidirectionalConnections)+", recommenderType: 'people', i18n: {errMsg: '"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.people.conx.label.err.noname"),[]))+"', delMsg: '"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.people.conx.label.delete"),[]))+"'}}; var filterApp = new (jive.oo.compose( jive.Filters.Main, jive.Filters.RecommendedContent, jive.Filters.ActivityTimePagination, jive.UserRelationshipList.Main"+((A.orgchartEnabled)?", jive.OrgChart.Main":"")+"))(options); $j('#j-browse-item-grid').delegate('a.js-create-direct-message', 'click', function(e) {e.preventDefault(); var userID = $j(this).closest('[data-object-id]').attr('data-object-id'); jive.DirectMessaging.sendMessageToUserIds([userID]);});});"},B);B.append('<!-- BEGIN main body --><div class="j-layout j-layout-sl clearfix j-contained j-contained-tabs ',(A.layoutClass)?soy.$$escapeHtml(A.layoutClass):"",' j-rc5 j-rc-none-top"><div class="j-colum-wrap-s"><div class="j-column j-column-s">');jive.browse.filter.filterGroup(soy.$$augmentData(A.filterGroup,{urlPath:A.urlPath}),B);B.append('</div></div><div class="j-column-wrap-l"><div class="j-column j-column-l"><!-- Display guest tip if unauthenticated -->');if(A.guest){jive.guest.page.loginTip({i18nKey:"browse.guesttip.people",accountCreationEnabled:A.accountCreationEnabled,validationEnabled:A.validationEnabled},B)}B.append("<!-- BEGIN browse & filter block -->");jive.browse.filter.filters(soy.$$augmentData(A.filterGroup,{itemsView:A.itemsView,urlParams:A.urlParams,urlPath:A.urlPath,hideFilterGroup:A.itemsView.template||A.filterGroup.defaultRecommended}),B);B.append('<div id="j-browse-item-grid" class="j-box-body">');if(A.itemsView.template){jive.shared.soy.render({templateName:A.itemsView.template,data:A.itemsView,failGracefully:false},B)}else{jive.browse.grid.itemGrid(soy.$$augmentData(A.itemsView,{browseViewID:A.browseViewID,archetypeID:A.archetypeID,headerTemplate:"jive.browse.user.detailUserHeader",viewingSelf:A.viewingSelf,noResults:'<div class="j-browse-info j-empty font-color-meta">'+((A.viewingSelf)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.people.empty.message"),[])):(A.targetUserName)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.nofollow.label"),[A.targetUserName])):"")+"</div>"}),B)}B.append("</div>");jive.browse.grid.moreSearchResultsAvailableHolder(A.itemsView,B);B.append('<div class="j-browse-filter-row j-bottom-row j-rc4">');jive.shared.soy.paginationLinks({current:A.itemsView.pageNumber,max:A.itemsView.pageNumber+(A.itemsView.hasNext?1:0),pageSize:A.itemsView.pageSize,urlParams:A.urlParams,urlPath:A.urlPath},B);B.append("</div><!-- END browse & filter block -->");if(A.feedsEnabled){jive.people.friendFeedLink(A,B)}B.append("</div></div></div><!-- END main body -->");if(!C){return B.toString()}};jive.people.friendFeedLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-friend-feed-link" class="j-friend-feed-link"><span class="jive-icon-med jive-icon-rss"></span>',(A.listID)?'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/feeds/yourstuff/friends")+"?"+encodeURIComponent("currentRelationshipList")+"="+encodeURIComponent(A.listID))+'">':'<a href="'+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/feeds/yourstuff/friends"))+'">',(A.bidirectionalConnections)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.activityfeed.friends.link"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.activityfeed.connections.link"),[])),"</a></div>");if(!C){return B.toString()}}
;
jive.namespace('nitro.people.filters');
jive.namespace('nitro.people.original.filters');

jive.nitro.people.original.filters.Main = jive.Filters.Main;

jive.nitro.people.filters.Main = jive.nitro.people.original.filters.Main.extend(function(protect) {
    
    this.init = function(options) {
        this._super(options);
        
        var main = this;
        
        this.addListener('navSelect', function() {
            jive.switchboard.emit("nitro.browse.navSelect", main);
        });
    };
});

jive.Filters.Main = jive.nitro.people.filters.Main;
;
jive.namespace('nitro.people');

jive.nitro.people.PeopleView = jive.AbstractView.extend(function(protect) {
    
    jive.conc.observable(this);
    
    this.init = function(options) {
        this.options = options;
        var view = this;
        
        $j(function () {
            view.emit('viewReady');
        });
        
    };
    
    this.getUserIDs = function() {
        var userIDs = [];
        var view = this;
        
        $j(view.options.peopleSelector).each(function(i, obj) {
            var userID = $j(obj).data('object-id');
            var hasStatus = $j(obj).data('gamification-status');
            
            if (!hasStatus && $j.inArray(userID, userIDs) === -1) {
                userIDs.push(userID);
                $j(view.options.initialStatusSelector, $j(obj)).append(jive.ps.nitro.people.initialStatusLevel());
            }
        });
        
        return userIDs;
    };
    
    this.showStatus = function(users) {
        var view = this;
        
        $j(view.options.peopleSelector).each(function(i, obj) {
            var jiveUserID = $j(obj).data('object-id');
            
            $j.each(users, function(userID, user) {
                if (user.jiveUserID == jiveUserID) {
                    $j(view.options.appendStatusSelector, $j(obj)).empty().append(jive.people.profile.statusLevel({
                        imagePath: user.iconUrl,
                        name: user.name,
                        description: user.description,
                        pointLevel: user.points,
                        ready: true,
                        showPoints: true
                    }));
                    
                    $j(obj).data('gamification-status', true);
                }
            });
        });
    };
    
});
;
/**
 * @depends path=/plugins/gamification/resources/script/apps/people/views/people_view.js
 */
jive.namespace('nitro.people');

jive.nitro.people.PeopleCardView = jive.nitro.people.PeopleView.extend(function(protect) {
    
    this.init = function(options) {
        this._super($j.extend(options, {
            peopleSelector: "li.js-browse-thumbnail",
            initialStatusSelector: "footer div",
            appendStatusSelector: "footer div span"
        }));
    };
    
});
;
/**
 * @depends path=/plugins/gamification/resources/script/apps/people/views/people_view.js
 */
jive.namespace('nitro.people');

jive.nitro.people.PeopleListView = jive.nitro.people.PeopleView.extend(function(protect) {
    
    this.init = function(options) {
        this._super($j.extend(options, {
            peopleSelector: "tr.j-people-row",
            initialStatusSelector: "td.j-td-statuslevel",
            appendStatusSelector: "td.j-td-statuslevel"
        }));
    };
    
});
;
jive.namespace('nitro');

jive.nitro.Nitro = jive.oo.Class.extend(function(protect, _super) {

    this.init = function(options) {
        this.options = options || {};
        this.methods = [];
        this.dfd = new $j.Deferred();
        
        this.dfd.done(this.setSession);
        
        if (this.options.hasOwnProperty('server')) {
            this.dfd.resolveWith(this, [this.options]);
        } else {
            this.loadSession();
        }
    };
    
    this.execute = function(callback) {
        var promise = new jive.conc.Promise();
        var self = this;
        
        this.dfd.done(function() {
            var methodString = this.generateAllMethodsString();
            
            $j.getJSON(self.serverUrl + escape(methodString), function(res) {
                $j.extend(res, {
                    eachMethod: function(methodName, callback) {
                        self.eachMethod(res, methodName, callback);
                    }
                });
                self.handleNitroResponse(res, promise, callback);
            });
        });
        
        return promise;
    };
    
    this.addMethod = function(name, params) {
        this.methods.push(this.createMethodString(name, params));
        
        return this;
    };
    
    protect.eachMethod = function(res, methodName, callback) {
        $j.each(res.Nitro.Nitro, function(i, method) {
            if (method.method === methodName) {
                callback.call(this, method);
            }
        });
    };
    
    protect.generateAllMethodsString = function() {
        this.methods.unshift(this.createMethodString('user.login', this.loginParameters));
        
        var methodString = '[' + this.methods.join(',') + ']';
        
        this.methods = [];
        
        return methodString;
    };
    
    protect.setSession = function(data) {
        this.serverUrl = (data.server || data.baseUrl) + '?jsCallback=?&method=batch.run&methodFeed=';
        
        this.loginParameters = {
            userId: data.userID,
            apiKey:  data.apiKey,
            ts: data.timeStamp,
            sig: data.signature
        };
    };
    
    protect.loadSession = function() {
        var self = this;
        
        $j.ajax({
            url: jive.rest.url("/nitro/admin/session"),
            success: function(response) {
                self.dfd.resolveWith(self, [response]);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log('Error getting session: '+textStatus+'/'+errorThrown);
                self.dfd.rejectWith(self, [textStatus, errorThrown]);
            }
        });
    };
    
    protect.handleNitroResponse = function(res, promise, callback) {
        var nitro = res.Nitro;
        if (typeof nitro.Error != "undefined") {
            promise.emitError(nitro.Error.Code, nitro.Error.Message);
        } else {
            var noErrors = true;
            $j.each(nitro.Nitro, function(i, method) {
                if (typeof method.Error != "undefined") {
                    promise.emitError(method.Error.Code, method.Error.Message);
                    noErrors = false;
                }
            });
            
            if (noErrors) {
                callback.call(this, res, promise);
            }
        }
    };
    
    protect.createMethodString = function(name, params) {
        var result = '"method='+name;
        
        $j.each(params, function(key, value) {
            result += '&'+key+'='+value;
        });
        
        result += '"';
        
        return result;
    };

});

;
jive.namespace('nitro.shared');

jive.nitro.shared.UserService = jive.RestService.extend(function(protect) {
    
    this.init = function(options) {
        this._super(options);
        this.options = options;
    };
    
    this.getProfileInfo = function(options) {
        var success = options.success;
        var error = options.error;
        
        delete options.success;
        delete options.error;
        
        $j.ajax({
            url: jive.rest.url("/nitro/users/data"),
            data: options,
            success: success,
            error: error
        });
    };

    this.getUserIDs = function(jiveUserIDs) {
        var dfd = new $j.Deferred();
        var self = this;
        
        $j.ajax({
            url: jive.rest.url("/nitro/users/ids"),
            data: {
                userId: jiveUserIDs
            },
            success: function(response) {
                dfd.resolveWith(self, [response]);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log('Error getting userIds: '+textStatus+'/'+errorThrown);
                dfd.rejectWith(self, [textStatus, errorThrown]);
            }
        });
        
        return dfd;
    };
    
});

;
/**
 * @depends path=/plugins/gamification/resources/script/jive-nitro.js
 * @depends path=/plugins/gamification/resources/script/apps/shared/models/userService.js
 */
jive.namespace('nitro.people');

jive.nitro.people.PeopleSource = jive.RestService.extend(function(protect) {
    
    this.init = function(options) {
        this._super(options);
        this.options = options;
    };
    
    this.loadStatus = function(jiveUserIDs) {
        var promise = new jive.conc.Promise();
        var userService = new jive.nitro.shared.UserService({});
        var self = this;
        
        userService.getUserIDs(jiveUserIDs).done(function(userIDs) {
            self.loadStatusFromNitro(userIDs, promise);
        });
        
        return promise;
    };
    
    protect.loadStatusFromNitro = function(userIDs, promise) {
        var self = this;
        var nitro = new jive.nitro.Nitro(this.options);
        var users = {};
        
        nitro.addMethod('user.getLevel', {
            userIds: Object.values(userIDs).join(',')
        });
        
        $j.each(userIDs, function(jiveUserID, userID) {
            nitro.addMethod('user.getPointsBalance', {
                userId: userID,
                pointCategory: 'Points'
            });
            
            users[userID] = {
                jiveUserID: jiveUserID
            };
        });
        
        nitro.execute(function(res) {
            self.handleNitroResponse(res, promise, users);
        });
    };
    
    this.handleNitroResponse = function(res, promise, users) {
        var nitro = res.Nitro;
        
        $j.each(nitro.Nitro, function(i, method) {
            if (method.method === "user.getLevel") {
                $j.each($j.makeArray(method.users.User), function(j, user) {
                    users[user.userId] = $j.extend(users[user.userId], {
                        iconUrl: user.SiteLevel.iconUrl,
                        name: user.SiteLevel.name,
                        description: user.SiteLevel.description
                    });
                });
            }
            if (method.method === "user.getPointsBalance") {
                users[method.Balance.userId].points = method.Balance.points;
            }
        });
        
        promise.emitSuccess(users);
    };
    
});
;
/**
 * @depends path=/plugins/gamification/resources/script/apps/people/views/people_card_view.js
 * @depends path=/plugins/gamification/resources/script/apps/people/views/people_list_view.js
 * @depends path=/plugins/gamification/resources/script/apps/people/models/people_source.js
 */
jive.namespace('nitro.people');

jive.nitro.people.Main = jive.oo.Class.extend(function(protect) {

    this.init = function(options) {
        this.options = options;
        this.source = new jive.nitro.people.PeopleSource(options);
        var main = this;
        
        main.checkCurrentView(options.viewID);
        
        jive.switchboard.addListener('nitro.browse.navSelect', function(filter) {
            main.checkCurrentView(filter.lastItemView);
            main.loadStatus();
        });
        
        this.view.addListener('viewReady', $j.proxy(protect.loadStatus, this));
    };
    
    protect.loadStatus = function() {
        var main = this;
        var userIDs = main.view.getUserIDs();
        
        if (userIDs.length > 0) {
            main.source.loadStatus(userIDs).addCallback(function(users) {
                main.view.showStatus(users);
            });
        }
    };
    
    protect.checkCurrentView = function(viewID) {
        if (viewID !== this.currentViewID) {
            if (viewID === "thumb") {
                this.view = new jive.nitro.people.PeopleCardView(this.options);
            } else {
                this.view = new jive.nitro.people.PeopleListView(this.options);
            }
            this.currentViewID = viewID;
        }
    };
    
});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nitro=="undefined"){jive.nitro={}}if(typeof jive.nitro.reputationCenter=="undefined"){jive.nitro.reputationCenter={}}jive.nitro.reputationCenter.menuLink=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="reputation-spacer" style="display: none;"></div><div id="reputation-menu-link" style="display: none;"><a href="#" class="reputation-points-loading" id="navReputationCenter" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputation.menu.loading"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputation.menu.loading"),[])),'</a></div><div id="menuReputationCenter" class="j-quick-menu" style="display: none"></div>');jive.shared.soy.resourceInlineJs({code:"$j(function(){var nitro4x = {hb: Handlebars}; new jive.nitro.reputationCenter.MenuMain({buttonSelector: '#navReputationCenter', menuSelector: '#menuReputationCenter', reputationCenterUrl: '"+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/reputation-center"))+"', i18n: {pointsText: '"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.points"),[]))+"', yourStatusText: '"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputation.menu.yourStatusText"),[]))+"'}});});"},B);if(!C){return B.toString()}};jive.nitro.reputationCenter.menuContent=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="nitro4x_user_widget clearfix"></div>');if(!C){return B.toString()}};jive.nitro.reputationCenter.places=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="reputation_container"></div>');if(!C){return B.toString()}};jive.nitro.reputationCenter.missions=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="missions_container clearfix"></div>');if(!C){return B.toString()}};jive.nitro.reputationCenter.history=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="nitro_points_history clearfix"></div>');if(!C){return B.toString()}};jive.nitro.reputationCenter.historyComplete=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="nitro-history-complete font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputation.history.complete"),[])),"<span>");if(!C){return B.toString()}};jive.nitro.reputationCenter.noHistory=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="nitro-history-none font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputation.history.none"),[])),"<span>");if(!C){return B.toString()}};jive.nitro.reputationCenter.historyData=function(A,G){var B=G||new soy.StringBuilder();B.append('<div id="j-js-nitro-history" class="j-act j-activity-stream j-not-mobile j-stream-list">');var E=A.records;var C=E.length;for(var F=0;F<C;F++){var D=E[F];B.append('<article class="j-act-entry j-act-not-markable clearfix"><div class="j-js-act-content j-act-content">',(D.object)?'<div class="j-act-title"><span class="jive-icon-med '+soy.$$escapeHtml(D.object.iconCss)+'"></span><a title="'+D.object.subject+'" href="'+soy.$$escapeHtml(D.object.link)+'">'+D.object.subject+"</a></div>":"",'<div class="j-act-coll-view collapsed clearfix"><div class="j-act-node"><section><div class="j-latest-collapsed"><div class="j-act-avatar">');if(D.fullUrl){jive.nitro.challenges.challengeIcon({name:D.challenge,fullUrl:D.fullUrl},B)}else{jive.nitro.challenges.challengeIcon({name:D.challenge,fullUrl:jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/plugins/gamification/resources/images/missing_trophy.png")},B)}B.append('</div><div class="j-author-act font-color-meta-light">');jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.user,{hideTooltip:true}),B);B.append(" ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.global.completed"),[]))," ",soy.$$escapeHtml(D.challenge),'</div><div class="j-excerpt">',soy.$$escapeHtml(D.points)," ",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.points"),[])),(D.description)?" - "+D.description:"",'</div><div class="jive-comment-actions"><nav class="clearfix" title="',soy.$$escapeHtml((D.rawTimestamp?dateFormat(parseFloat(D.rawTimestamp),"mmmm d, yyyy h:MM TT"):"")),'">',soy.$$escapeHtml(D.timestamp),"</nav></div></div></section></div></div>");if(D.container){B.append('<div class="j-act-meta font-color-meta-light">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.in"),[]))," ");jive.shared.displayutil.containerDisplayNameLink({container:D.container},B);B.append("</div>")}B.append("</div></article>")}B.append("</div>");if(!G){return B.toString()}};jive.nitro.reputationCenter.leaders=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="nitro4x_leader_board_container"></div>');if(!C){return B.toString()}};jive.nitro.reputationCenter.leadersFilter=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="j-browse-filters" class="j-browse-filters j-rc5"><div class="j-browse-filter-row j-rc5 j-rc-none-bottom j-type-row last-child"><ul class="j-content-types js-browse-filter-toggle-set"><li><a href="#" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputatation.rank.everyone"),[])),'" class="js-browse-filter j-active" data-view="all">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputatation.rank.everyone"),[])),"</a></li>",(A.showFollowers)?'<li><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.following"),[]))+'" class="js-browse-filter" data-view="following"><span class="jive-icon-following jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.following"),[]))+'</a></li><li><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.followers"),[]))+'" class="js-browse-filter" data-view="followers"><span class="jive-icon-people jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.followers"),[]))+"</a></li>":'<li><a href="#" title="'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.friends"),[]))+'" class="js-browse-filter" data-view="following"><span class="jive-icon-people jive-icon-med"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.heading.friends"),[]))+"</a></li>","</ul></div></div>");if(!C){return B.toString()}};jive.nitro.reputationCenter.emptyLeaders=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="nitro4x_reputation"><div class="j-browse-thumbnail-item" style="position: absolute; left: 0px; top: 0px;">',(A.view=="all")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputatation.rank.everyone.empty"),[])):(A.view=="following")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputatation.rank.following.empty"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.reputatation.rank.followers.empty"),[])),"</div></div>");if(!C){return B.toString()}}
;
jive.namespace('nitro.reputationCenter');

/**
 * @extends jive.AbstractView
 * @depends path=/resources/scripts/apps/navbar/menu/view/abstract_list.js
 */
jive.nitro.reputationCenter.MenuListView = jive.Navbar.Menu.AbstractListView.extend(function(protect) {
    
    this.init = function(options) {
        this.options = options;
        
        this._super(options.buttonSelector, options.menuSelector);
        
        $j("#reputation-spacer").show().animate({
            width: '80'
        },{
            duration: 1000,
            complete: function() {
                $j("#reputation-spacer").remove();
                $j("#reputation-menu-link").show();
            }
        });
    };
    
    this.showReputationPoints = function(data) {
        var text = this.addCommas(data.unit.units) + ' '+this.options.i18n.pointsText.toLowerCase();
        var title = text.replace("points", "lifetime points");
        this.$button.attr('title', title);
        this.$button.removeClass('reputation-points-loading').addClass('reputation-points-ready').html(text);
    };
    
    this.render = function(data) {
        var el = $j(jive.nitro.reputationCenter.menuContent().toString());
        
        el.html(data);
        
        this.setContent(el);
    };
    
    protect.addCommas = function(value) {
        return value.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g, ",");
    };

});
;
jive.namespace('nitro.reputationCenter');

/**
 * @depends path=/resources/scripts/apps/shared/models/rest_service.js
 * @depends path=/plugins/gamification/resources/script/apps/shared/models/userService.js plugin=gamification
 */
jive.nitro.reputationCenter.MenuSource = jive.RestService.extend(function(protect) {
    
    jive.conc.observable(this);
    
    this.init = function(options) {
        this._super(options);
        this.options = options;
        
        this.renderPromise = new jive.conc.Promise();
        this.findPromise = new jive.conc.Promise();
        this.resultPromise = new jive.conc.Promise();
        
        var self = this;
        
        this.synchronizer = jive.conc.synchronize({
            render: this.renderPromise,
            find: this.findPromise
        }).addCallback(function(promises) {
            self.resultPromise.emitSuccess(promises.render);
        });
    };
    
    this.findAll = function() {
        this.findPromise.emitSuccess();
        
        return this.resultPromise;
    };
    
    this.loadData = function() {
        var self = this;
        
        $j.ajax({
            url: jive.rest.url("/nitro/admin/session"),
            success: function(response) {
                self.loadReputationBar(response);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                console.log('Error getting session: '+textStatus+'/'+errorThrown);
                self.resultPromise.emitError(textStatus, errorThrown);
            }
        });
    };
    
    this.loadReputationBar = function(response) {
        var self = this;
        var nitro = new Nitro({
            apiKey: response.apiKey,
            timeStamp: response.timeStamp,
            signature: response.signature,
            server: response.baseUrl,
            userId: response.userID
        });
        
        var profile = new n4jive.profile(nitro, {
            toGoText: 'to go', 
            levelText: 'Level', 
            nextLevelText: 'Next Level', 
            nextMissionText: 'Next Mission',
            i18n: this.options.i18n,
            moreText: 'More',
            moreLinkUrl: this.options.reputationCenterUrl,
            profileService: new jive.nitro.shared.UserService({}),
            renderCallback: function(renderedMenu, data) {
                self.renderPromise.emitSuccess(renderedMenu);
                self.emit('reputationLoaded', data);
            }
        });
    };
    
});
;
jive.namespace('nitro.reputationCenter');

/**
 * @param {jQuery|DOMElement|String}buttonSelector reference or selector to the menu button
 * @param {jQuery|DOMElement|String} menuSelector reference or selector to the menu container
 *
 * @depends path=/plugins/scn-gamification/resources/scripts/menu_view.js plugin=scn-gamification
 * @depends path=/plugins/gamification/resources/script/apps/reputation-center/models/menu_source.js plugin=gamification
 * @depends path=/resources/scripts/apps/navbar/menu/main.js
 */
jive.nitro.reputationCenter.MenuMain = jive.Navbar.Menu.Main.extend(function(protect) {

    this.init = function(options) {
        this.options = options;
        this.customListView = new jive.nitro.reputationCenter.MenuListView(options);
        this.customItemSource = new jive.nitro.reputationCenter.MenuSource(options);
        
        this.customItemSource.addListener('reputationLoaded', this.customListView.showReputationPoints);
        this.customItemSource.loadData();
        
        this._super(options.buttonSelector, options.menuSelector);
    };

    this.buildListView = function (buttonSelector, menuSelector) {
        return this.customListView;
    };  

    this.buildItemSource = function() {
        return this.customItemSource;
    };  

});
;
/*jshint multistr:true */
(function($){
    // ReputationHTMLBuilder: in charge of building the HTML segments for the reputation tab
    nitro4x.UserWidgetHTMLBuilder = function(){
        
        var self = this; // maintaining reference to the original this

        this.template_user_widget = "\
            <p class='j-pop-desc'><strong>{{yourStatusText}}</strong></p>\
            <div class = 'nitro4x_user_widget_extra'>\
                <ul class = 'nitro4x_user_widget_list'>\
                    <li class = 'clearfix'>\
                        <div class='left_side'>\
                            Lifetime Points\
                        </div>\
                        <div class='right_side'>\
                            <span class = 'text nitro4x_add_comma'>{{unit.units}}</span>\
                        </div>\
                    </li>\
                    <li class = 'clearfix'>\
                        <div class='left_side'>\
                            Current Level\
                        </div>\
                        <div class='right_side'>\
                            <span class = 'text'>{{level.level}}</span>\
                        </div>\
                    </li>\
                    <li class = 'clearfix'>\
                        {{#if next_level.level}}\
                            <div class='left_side'>\
                                {{next_level.name}}\
                            </div>\
                            <div class='right_side'>\
                                <span class = 'text'>{{next_level.level}}</span>\
                                <span class = 'status'><span class = 'nitro4x_add_comma'>{{next_level.units_next}}</span> {{i18n.pointsText}}</span>\
                            </div>\
                            <div class='nitro4x_user_widget_progress'>\
                                <div class='percent_bar' style = 'width: {{next_level.percentage}}%;'></div>\
                                <div class='content_bar'>\
                                    <span class = 'text'><span class = 'nitro4x_add_comma'>{{unit.remaining}}</span> {{i18n.pointsText}} {{unit.text}}</span>\
                                </div>\
                            </div>\
                        {{else}}\
                            <div class='empty_text'><span>{{next_level.emptyText}}</span></div>\
                        {{/if}}\
                    </li>\
                    <li class = 'clearfix'>\
                        {{#if mission.mission}}\
                            <div class='left_side'>\
                                {{mission.name}}\
                            </div>\
                            <div class='right_side'>\
                                <span class = 'text'>{{mission.mission}}</span>\
                                <span class = 'badge'><img src = '{{mission.img}}' /></span>\
                                <span class = 'status'><span class = 'medium_green'>{{mission.reward}}</span>&nbsp;{{i18n.pointsText}}</span>\
                            </div>\
                        {{else}}\
                            <div class='empty_text'><span>{{mission.emptyText}}</span></div>\
                        {{/if}}\
                    </li>\
                </ul>\
                <div class = 'nitro4x_more_button'>\
                    <a href = '{{button_url}}'>{{button_text}}</a>\
                </div>\
            </div>\
            ";


        // defaults for the template
        this.defaults = {
            pointCategory: "Points"
        };

        // object constructor
        this.init = function() {
            // compile the template only once when constructing the object
            self.template_user_widget = nitro4x.hb.compile(self.template_user_widget);
        };

        this.add_comma = function(el){
            $(".nitro4x_add_comma", el).each(function(i,e){
                $(e).html($(e).text().toString().replace(/\B(?=(?:\d{3})+(?!\d))/g, ","));
            });
        };

        this.draw_user_widget = function(jsonData) {
            jsonData.unit.remaining = jsonData.next_level.units_next_to_go;
            jsonData.next_level.percentage = 100 - (jsonData.next_level.units_next_to_go / (jsonData.next_level.units_next - jsonData.level.units)).toFixed(2) * 100;

            var templateInputs = $.extend({}, self.defaults, jsonData);
            var result = $(self.template_user_widget(jsonData));

            self.add_comma(result);

            return result;
        };

        self.init(); // call object constructor
    };
})(jQuery);
/* this anonymous function (see http://en.wikipedia.org/wiki/Anonymous_function#JavaScript) allows
   us to use $ without namespace conflict, since the argument to the anonymous function ($)
   overrides any globally defined $ variables. */


;
(function($){
    n4jive.profile = function(nitro, options) {
        
        var self = this;
        
        this.options = {},
        this.parent = n4jive,
        this.sessionKey = '',
        this.serverUrl = '',
        this.profileService = function(){ },
        this.loadingCallback = null, // Callback to remove the loading icons
        
        this.defaults = {
            target: '',
            toGoText: 'to go',
            levelText: 'Level',
            nextLevelText: 'Next Level',
            nextMissionText: 'Next Mission',
            moreLinkText: 'More'
        },
        
        this.userId = '',
        this.balance = 0,
        this.pointCategory = '',
        this.level = '',
        this.curLevelPoints = 0,
        this.nextLevel = '',
        this.nextLevelPoints = 0,
        this.nextChallenge = null,
        this.nitroLoaded = false,
        
        /**
         * Initializes the widget
         * @param {Object} nitro - a nitro javascript object
         * @param {Object} options - a dictionary of different options for this widget
         */
        this.init = function(nitro, options) {
            var self = this;
            self.options = $.extend({}, self.defaults, options);
            self.sessionKey = nitro.connectionParams.sessionKey;
            self.serverUrl = nitro.connectionParams.server + '?sessionKey=' + nitro.connectionParams.sessionKey + '&jsCallback=?';
            self.userId = nitro.connectionParams.userId;
            self.profileService = n4jive.getOption('profileService', self);
            //self.loadingCallback = n4jive.workingFactory($(self.options.target));
            
            self.loadData();
        },
        
        this.loadData = function() {
            var self = this;
            
            try {
                var methodString = '[';
                methodString += '"method=user.getPointsBalance&criteria=CREDITS&sessionKey=' + self.sessionKey + '",';
                methodString += '"method=user.getLevel&sessionKey=' + self.sessionKey + '",';
                methodString += '"method=user.getNextLevel&sessionKey=' + self.sessionKey + '",';
                methodString += '"method=user.getNextChallenge&sessionKey=' + self.sessionKey + '"]';
                
                $.getJSON(self.serverUrl + '&method=batch.run&methodFeed=' + escape(methodString), function(data) {
                    for (var i = 0; i < data.Nitro.Nitro.length; i++) {
                        var apiResponse = data.Nitro.Nitro[i];

                        switch (apiResponse.method) {
                            case 'user.getPointsBalance':
                                self.balance = parseInt(apiResponse.Balance.lifetimeBalance, 10);
                                var pointCategories = self.parseResponseArray(apiResponse.Balance.pointCategories.PointCategory);
                                for (var j = 0; j < pointCategories.length; j++) {
                                    if (pointCategories[j].isDefault) self.pointCategory = pointCategories[j].name;
                                }
                                break;
                            case 'user.getLevel':
                                self.level = apiResponse.users.User.SiteLevel.name;
                                self.curLevelPoints = parseInt(apiResponse.users.User.SiteLevel.points, 10);
                                break;
                            case 'user.getNextLevel':
                                self.nextLevel = apiResponse.users.User.SiteLevel;
                                break;
                            case 'user.getNextChallenge':
                                self.nextChallenge = apiResponse.challenges.Challenge;
                                break;
                        }
                    }
                    
                    // Now that we have all the data set up...
                    self.nitroLoaded = true;
                    self.populateHTML();
                });
            }
            catch (err) {
                console.error('Error loading data from Nitro: ' + err);
            }
            
        },
        
        this.parseResponseArray = function(obj) {
            if (typeof obj == 'undefined') obj = [];
            if (typeof obj.length == 'undefined') obj = [obj];
            return obj;
        },
        
        this.populateHTML = function() {
            if (!this.nitroLoaded) return;
            
            var profileData = {};
            profileData.yourStatusText = this.options.i18n.yourStatusText;
            profileData.button_text = this.options.moreLinkText;
            profileData.button_url = this.options.moreLinkUrl;
            profileData.unit = {units: this.balance, name: this.pointCategory, text: this.options.toGoText};
            profileData.level = {level: this.level, name: this.options.levelText, units: this.curLevelPoints};
            profileData.i18n = this.options.i18n;
            
            profileData.next_level = {name: this.options.nextLevelText, emptyText: 'You have achieved the highest level'};
            if (this.nextLevel) {
                var nextLevelPoints = parseInt(this.nextLevel.points, 10);
                $j.extend(profileData.next_level, {unit: this.pointCategory, units_next: nextLevelPoints, units_next_to_go: nextLevelPoints - this.balance, level: this.nextLevel.name});
            }
            
            profileData.mission = {name: this.options.nextMissionText, emptyText: 'You have completed all of the missions'};
            if (this.nextChallenge) {
                var reward = (this.nextChallenge.pointAward < 0) ? this.nextChallenge.pointAward : '+' + this.nextChallenge.pointAward;
                $j.extend(profileData.mission, {unit: this.pointCategory, reward: reward, mission: this.nextChallenge.name, img: this.nextChallenge.thumbUrl});
            }
            
            var htmlBuilder = new nitro4x.UserWidgetHTMLBuilder();
            self.options.renderCallback(htmlBuilder.draw_user_widget(profileData), profileData);
        };
        
        
        
        /*******************************************************************
         WAIT FOR NITRO TO COME BACK WITH A SESSION KEY BEFORE INITIALIZING
        *******************************************************************/
        //if we havent gotten a session key, keep waiting for awhile to make sure the user.login call has come back ok
        if(typeof(nitro) == "undefined" || nitro.connectionParams.sessionKey === null){
            var initialize = setInterval(function(){
                if(typeof(nitro) != "undefined" && nitro.connectionParams.sessionKey !== null){
                    clearInterval(initialize);
                    self.init(nitro, options);
                }
            },500);
        }else{
            //initialize
            self.init(nitro, options);
        }
        
    };
})(jQuery);

;
jive.namespace('nitro.challenges');

/**
 * @depends path=/resources/scripts/apps/shared/models/rest_service.js
 * @depends path=/plugins/gamification/resources/script/jive-nitro.js
 * @depends path=/plugins/gamification/resources/script/apps/shared/models/userService.js
 */
jive.nitro.challenges.ChallengesSource = jive.RestService.extend(function(protect) {
    
    jive.conc.observable(this);
    
    this.init = function(options) {
        this._super(options);
        this.options = options;
    };
    
    this.loadChallenge = function(challengeName) {
        var self = this;
        var nitro = new jive.nitro.Nitro(this.options);
        
        nitro.addMethod('user.getChallengeProgress', {
            userId: this.options.userID,
            challengeName: challengeName
        });
        
        nitro.addMethod('site.getRecentChallenges', {
            userId: this.options.userID,
            challengeName: challengeName,
            trophiesOnly: true,
            returnCount: 6
        });
        
        return nitro.execute(function(res, promise) {
            self.handleResponse(res, promise);
        });
    };
    
    protect.handleResponse = function(res, promise) {
        var challenge = null;
        var userIDs = [];
        var userService = new jive.nitro.shared.UserService({});
        
        res.eachMethod('user.getChallengeProgress', function(method) {
            if (method.challenges !== true) {
                challenge = method.challenges.Challenge;
            }
        });
        
        res.eachMethod('site.getRecentChallenges', function(method) {
            if (method.challenges !== true) {
                $j.each($j.makeArray(method.challenges.Challenge), function(_, data) {
                    if ($j.inArray(data.userId, userIDs) === -1) {
                        userIDs.push(data.userId);
                    }
                });
            }
        });
        
        if (userIDs.length > 0) {
            userService.getProfileInfo({
                userId: userIDs,
                success: function(data) {
                    promise.emitSuccess({
                        recentCompleters: data.Users,
                        challenge: challenge
                    });
                },
                error: function(error, message) {
                    promise.emitError(error, message);
                }
            });
        } else {
            promise.emitSuccess({
                recentCompleters: [],
                challenge: challenge
            });
        }
        
    };
    
});
;
jive.namespace('nitro.challenges');

/**
 * @depends template=jive.nitro.challenges.challengeModal
 * @depends template=jive.nitro.challenges.emptyRecentCompleters
 */
jive.nitro.challenges.ChallengesView = jive.AbstractView.extend(function(protect) {
    
    jive.conc.observable(this);
    
    this.init = function(options) {
        this.options = options;
        
        var self = this;
        
        $j("a.nitro-challenge-link").live('click', function(e) {
            e.preventDefault();
            
            var challengeName = $j(this).data('challenge-name');
            self.showChallenge(challengeName);
        });
    };
    
    protect.showChallenge = function(challengeName) {
        var self = this;
        
        this.emitP('showChallenge', challengeName).addCallback(function(data) {
            $j.each(data.recentCompleters, function(_, user) {
                $j.extend(user, {
                    id: user.jiveUserID,
                    prop: {
                        connections: {}
                    },
                    hideTooltip: true
                });
            });
            
            data.recentCompleters = $j.grep(data.recentCompleters, function(user) {
                return user.enabled;
            });
            
            data.currentUserID = self.options.currentJiveUserID;
            
            var content = $j(jive.nitro.challenges.challengeModal(data));
            
            var empty = content.find("#modal-challenges-everyone p.j-empty");
            if (empty.length > 0) {
                empty.append(jive.nitro.challenges.emptyRecentCompleters());
                
                content.find(".g-recently-completed").remove();
            }
            
            content.lightbox_me({
                destroyOnClose: true,
                centered: true
            });
        });
    };
    
});
;
jive.namespace('nitro.challenges');

/**
 * @depends path=/plugins/gamification/resources/script/apps/challenges/models/challenges_source.js
 * @depends path=/plugins/gamification/resources/script/apps/challenges/views/challenges_view.js
 */
jive.nitro.challenges.Main = jive.oo.Class.extend(function(protect) {

    this.init = function(options) {
        this.options = options;
        
        this.view = new jive.nitro.challenges.ChallengesView(options);
        this.source = new jive.nitro.challenges.ChallengesSource(options);
        
        var main = this;
        
        this.view.addListener('showChallenge', function(challengeName, promise) {
            main.source.loadChallenge(challengeName).addCallback(function(data) {
                promise.emitSuccess(data);
            }).addErrback(function(error, status) {
                promise.emitError(error, status);
            });
        });
    };
    
});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.nitro=="undefined"){jive.nitro={}}if(typeof jive.nitro.challenges=="undefined"){jive.nitro.challenges={}}jive.nitro.challenges.head=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:'$j(function(){new jive.nitro.challenges.Main({currentJiveUserID: "'+soy.$$escapeHtml(A.currentJiveUserID)+'"});});'},B);if(!C){return B.toString()}};jive.nitro.challenges.emptyRecentCompleters=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.challenge.recentlyCompletedBy.empty"),[])));if(!C){return B.toString()}};jive.nitro.challenges.challengeIcon=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="#" class="nitro-challenge-link" data-challenge-name="',soy.$$escapeUri(A.name),'"><img src="',soy.$$escapeHtml(A.fullUrl),'" alt="',soy.$$escapeHtml(A.name),'" title="',soy.$$escapeHtml(A.name),'" /></a>');if(!C){return B.toString()}};jive.nitro.challenges.challengeModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="g-challenge-mini-modal" class="jive-modal j-modal j-people-list-modal"><header><h2>',soy.$$escapeHtml(A.challenge.name),'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem"></span></a><section  class="jive-modal-content clearfix"><div class="g-challenge-wrapper">',(A.challenge.fullUrl)?'<img class="g-challenge-image" src="'+soy.$$escapeHtml(A.challenge.fullUrl)+'"/>':'<img class="g-challenge-image" src="'+soy.$$escapeHtml(jive.soy.func.resourceUrl(window._jive_base_url,"/98/","","/plugins/gamification/resources/images/missing_trophy.png"))+'"/>',(A.challenge.description)?'<span class="g-challenge-description font-color-meta-light">'+A.challenge.description+"</span>":"",'</div><div class="g-recently-completed">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("nitro.challenge.recentlyCompletedBy"),[])),soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.colon"),[])),"</div>");jive.soy.acclaim.renderUserList({activityType:"challenges",users:A.recentCompleters,currentUserID:A.currentUserID,onlyFriends:false,id:"modal-challenges-everyone",classNames:"challenges-everyone-list js-everyone-list",show:true},B);B.append("</section></div>");if(!C){return B.toString()}}
;
